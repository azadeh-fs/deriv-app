(window.webpackJsonp=window.webpackJsonp||[]).push([["account-info"],{642:function(e,t,a){"use strict";var n=a(5),c=a.n(n),o=a(0),i=a.n(o);t.a=function(e){var t=e.className,a=e.is_invisible,n=e.theme,o=e.id;return i.a.createElement("div",{id:o,className:c()("barspinner","barspinner--".concat(n||"dark"),{invisible:a},t)},Array.from(new Array(5)).map((function(e,t){return i.a.createElement("div",{key:t,className:"barspinner__rect barspinner__rect--".concat(t+1," rect").concat(t+1)})})))}},706:function(e,t,a){"use strict";a.r(t);var n=a(5),c=a.n(n),o=a(3),i=a.n(o),r=a(0),s=a.n(r),l=a(65),u=a(2),_=a(29),p=a(175),d=a.n(p),m=(a(252),a(72)),g=a.n(m),f=(a(109),a(38)),h=a.n(f),b=(a(74),a(16)),y=a.n(b),v=a(62),w=a(28),E=a.n(w),k=(a(67),function(e){var t=e.children,a=e.onClick,n=e.icon;return s.a.createElement("div",{className:"acc-switcher__new-account"},s.a.createElement(E.a,{id:"upgrade-account",onClick:a,className:"acc-switcher__new-account-link",tertiary:!0,icon:n},t))});k.propTypes={icon:i.a.node,onClick:i.a.func,text:i.a.string};var N=k,O=a(8),j=a(7),C=a(18),x=a(87),D=a(642);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function T(e,t,a,n,c,o,i){try{var r=e[o](i),s=r.value}catch(e){return void a(e)}r.done?t(s):Promise.resolve(s).then(n,c)}function S(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){var t=e.children,a=e.header,n=e.is_visible,o=e.toggleVisibility;return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:c()("acc-switcher",{"acc-info--show":!n}),onClick:o},s.a.createElement("span",{className:"acc-switcher__list-title"},a),s.a.createElement(O.a,{icon:"IconArrow",className:"acc-info__select-arrow"})),n&&s.a.createElement(s.a.Fragment,null,t))},I=function(e){var t=e.account_type,a=e.balance,n=e.currency,o=e.currency_icon,i=e.display_type,r=e.has_balance,l=e.has_demo_text,_=e.is_disabled,p=e.is_virtual,m=e.loginid,f=e.onClickAccount,h=e.selected_loginid;return s.a.createElement(g.a,{alignment:"left",message:m},s.a.createElement("div",{id:"dt_".concat(m),className:c()("acc-switcher__account",{"acc-switcher__account--selected":m===h,"acc-switcher__account--disabled":_,"acc-switcher__account--demo-text":l}),onClick:_?void 0:f},s.a.createElement("span",{className:"acc-switcher__id"},s.a.createElement(O.a,{icon:"IconAccountsCurrency",className:"acc-switcher__id-icon acc-switcher__id-icon--".concat(o),type:o}),s.a.createElement("span",null,"currency"===i?s.a.createElement(V,{is_virtual:p,currency:o}):s.a.createElement(F,{is_virtual:l,account_type:t})),r&&s.a.createElement("span",{className:c()("acc-switcher__balance",{"acc-switcher__balance--virtual":p||l})},n&&s.a.createElement(d.a,{currency:n,amount:y.a.formatMoney(n,a,!0),should_format:!1}),!n&&s.a.createElement("span",{className:"no-currency"},s.a.createElement(u.Localize,{i18n_default_text:"No currency assigned"}))))))},V=function(e){var t=e.currency;return e.is_virtual?s.a.createElement(u.Localize,{i18n_default_text:"Demo"}):"REAL"===t.toUpperCase()?s.a.createElement(u.Localize,{i18n_default_text:"Real"}):t.toUpperCase()},F=function(e){var t=e.account_type,a=e.is_virtual;return s.a.createElement(s.a.Fragment,null,a&&s.a.createElement("div",{className:"acc-switcher__demo-text"},s.a.createElement(u.Localize,{i18n_default_text:"Demo"})),s.a.createElement("div",null,Object(x.b)(t)))},H=function(e){var t=e.onClick,a=e.text;return s.a.createElement(N,{onClick:t,icon:s.a.createElement(O.a,{icon:"IconAdd"})},a)},U=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=M(this,(e=P(t)).call.apply(e,[this].concat(c)))).state={is_deriv_visible:!0,is_dmt5_visible:!0},a.toggleVisibility=function(e){var t,n,c;a.setState((t={},n="is_".concat(e,"_visible"),c=!a.state["is_".concat(e,"_visible")],n in t?Object.defineProperty(t,n,{value:c,enumerable:!0,configurable:!0,writable:!0}):t[n]=c,t))},a.setWrapperRef=function(e){a.wrapper_ref=e},a.handleClickOutside=function(e){var t=!e.target.classList.contains("acc-info");a.wrapper_ref&&!a.wrapper_ref.contains(e.target)&&a.props.is_visible&&t&&a.props.toggle()},a.handleLogout=function(){a.props.toggle(),a.props.is_positions_drawer_on&&a.props.togglePositionsDrawer(),a.props.logoutClient()},a.redirectToMt5=function(e){a.props.toggleAccountsDialog(),a.props.history.push("".concat(C.a.mt5,"#").concat(e))},a.redirectToMt5Real=function(){a.redirectToMt5("real")},a.redirectToMt5Demo=function(){a.redirectToMt5("demo")},a.onClickUpgrade=function(){"svg"===a.props.can_upgrade_to?a.props.openRealAccountSignup():window.open(Object(v.urlFor)("new_account/maltainvestws",void 0,void 0,!0))},a}var a,n,c,o,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(t,e),a=t,(n=[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside),this.props.updateMt5LoginList()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside),this.props.hideDialog()}},{key:"doSwitch",value:(o=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.toggle(),this.props.account_loginid!==t){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.props.switchAccount(t);case 5:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(a,n){var c=o.apply(e,t);function i(e){T(c,a,n,i,r,"next",e)}function r(e){T(c,a,n,i,r,"throw",e)}i(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this;return!!this.props.is_logged_in&&s.a.createElement("div",{className:"acc-switcher__list",ref:this.setWrapperRef,style:{display:this.props.display}},s.a.createElement(h.a,{autoHeight:!0,autoHide:!0,autoHeightMax:462,renderTrackHorizontal:function(e){return s.a.createElement("div",A({},e,{className:"track-horizontal",style:{display:"none"}}))},renderThumbHorizontal:function(e){return s.a.createElement("div",A({},e,{className:"thumb-horizontal",style:{display:"none"}}))}},s.a.createElement("div",{className:"acc-switcher__list-wrapper"},s.a.createElement("div",null,s.a.createElement(R,{header:s.a.createElement(u.Localize,{i18n_default_text:"Deriv Accounts"}),is_visible:this.state.is_deriv_visible,toggleVisibility:function(){e.toggleVisibility("deriv")}},s.a.createElement("div",{className:"acc-switcher__accounts"},this.sorted_account_list.map((function(t){return s.a.createElement(I,{key:t.loginid,balance:e.props.accounts[t.loginid].balance,currency:e.props.accounts[t.loginid].currency,currency_icon:t.icon,display_type:"currency",has_balance:"balance"in e.props.accounts[t.loginid],is_disabled:t.is_disabled,is_virtual:t.is_virtual,loginid:t.loginid,onClickAccount:t.is_disabled?void 0:e.doSwitch.bind(e,t.loginid),selected_loginid:e.props.account_loginid})}))),this.has_add_button&&s.a.createElement(H,{onClick:this.can_upgrade?this.onClickUpgrade:this.props.openRealAccountSignup,text:s.a.createElement(u.Localize,{i18n_default_text:"Add Deriv account"})}))),this.props.is_mt5_allowed&&s.a.createElement("div",null,s.a.createElement(R,{header:s.a.createElement(u.Localize,{i18n_default_text:"DMT5 Accounts"}),is_visible:this.state.is_dmt5_visible,toggleVisibility:function(){e.toggleVisibility("dmt5")}},this.props.is_loading_mt5?s.a.createElement(D.a,{className:"acc-switcher__loader"}):s.a.createElement(s.a.Fragment,null,this.props.has_mt5_login?s.a.createElement("div",{className:"acc-switcher__accounts"},this.sorted_mt5_list.map((function(t){return s.a.createElement(I,{key:t.login,account_type:t.group,balance:t.balance,currency:t.currency,currency_icon:Object(x.c)(t.group).replace(/^demo/,"real"),has_balance:"balance"in t,has_demo_text:/^demo/.test(t.group),loginid:t.login,onClickAccount:/^demo/.test(t.group)?e.redirectToMt5Demo:e.redirectToMt5Real})}))):s.a.createElement(H,{onClick:this.redirectToMt5Real,text:s.a.createElement(u.Localize,{i18n_default_text:"Add DMT5 account"})})))))),s.a.createElement("div",{className:"acc-switcher__separator"}),s.a.createElement("div",{className:"acc-switcher__total"},s.a.createElement("span",null,s.a.createElement(u.Localize,{i18n_default_text:"Total assets"})),s.a.createElement(g.a,{alignment:"bottom",message:this.props.has_mt5_login?Object(u.localize)("Total assets in your Deriv and DMT5 accounts (excluding demo accounts)."):Object(u.localize)("Total assets in your Deriv accounts (excluding demo accounts).")},s.a.createElement(O.a,{icon:"IconInfoOutline",className:"acc-switcher__total-icon"})),s.a.createElement("span",{className:"acc-switcher__balance"},s.a.createElement(d.a,{currency:this.props.obj_total_balance.currency,amount:y.a.formatMoney(this.props.obj_total_balance.currency,this.total_assets,!0),should_format:!1}))),s.a.createElement("div",{className:"acc-switcher__separator"}),s.a.createElement("div",{id:"dt_logout_button",className:"acc-switcher__logout"},s.a.createElement("span",{className:"acc-switcher__logout-text",onClick:this.handleLogout},Object(u.localize)("Log out")),s.a.createElement(O.a,{icon:"IconLogout",className:"acc-switcher__logout-icon drawer__icon",onClick:this.handleLogout})))}},{key:"can_manage_currency",get:function(){return this.props.can_change_currency||!this.props.is_virtual&&!this.props.has_fiat&&this.props.can_upgrade_to}},{key:"sorted_account_list",get:function(){var e=this;return this.props.account_list.slice().sort((function(t,a){var n=e.props.accounts[t.loginid].currency,c=e.props.accounts[a.loginid].currency,o=y.a.isCryptocurrency(n),i=y.a.isCryptocurrency(c),r=!o,s=!i;return t.is_virtual||a.is_virtual?t.is_virtual?1:-1:o&&i||r&&s?n<c?-1:1:r&&i?-1:1}))}},{key:"sorted_mt5_list",get:function(){return this.props.mt5_login_list.slice().sort((function(e,t){return/demo/.test(e.group)&&!/demo/.test(t.group)?1:/demo/.test(t.group)&&!/demo/.test(e.group)?-1:/vanuatu/.test(e.group)?-1:/svg/.test(e.group)?1:-1}))}},{key:"can_upgrade",get:function(){return!!(this.props.is_upgrade_enabled&&this.props.is_virtual&&this.props.can_upgrade_to)}},{key:"has_add_button",get:function(){return this.can_upgrade||this.can_manage_currency}},{key:"total_assets",get:function(){return this.props.obj_total_balance.amount_real+this.props.obj_total_balance.amount_mt5}}])&&S(a.prototype,n),c&&S(a,c),t}(s.a.Component);U.propTypes={account_list:i.a.array,account_loginid:i.a.string,accounts:i.a.object,display:i.a.string,has_fiat:i.a.bool,has_mt5_login:i.a.bool,hideDialog:i.a.func,is_loading_mt5:i.a.bool,is_logged_in:i.a.bool,is_mt5_allowed:i.a.bool,is_positions_drawer_on:i.a.bool,is_upgrade_enabled:i.a.bool,is_virtual:i.a.bool,is_visible:i.a.bool,mt5_login_list:i.a.array,obj_total_balance:i.a.object,toggle:i.a.func,toggleAccountsDialog:i.a.func,togglePositionsDrawer:i.a.func,updateMt5LoginList:i.a.func};var W=Object(_.withRouter)(Object(j.b)((function(e){var t=e.client,a=e.ui;return{account_loginid:t.loginid,accounts:t.accounts,has_fiat:t.has_fiat,can_change_currency:t.can_change_currency,account_list:t.account_list,can_upgrade:t.can_upgrade,can_upgrade_to:t.can_upgrade_to,has_mt5_login:t.has_mt5_login,is_loading_mt5:t.is_populating_mt5_account_list,is_logged_in:t.is_logged_in,is_mt5_allowed:t.is_mt5_allowed,is_virtual:t.is_virtual,mt5_login_list:t.mt5_login_list,obj_total_balance:t.obj_total_balance,switchAccount:t.switchAccount,logoutClient:t.logout,updateMt5LoginList:t.updateMt5LoginList,is_positions_drawer_on:a.is_positions_drawer_on,openRealAccountSignup:a.openRealAccountSignup,toggleAccountsDialog:a.toggleAccountsDialog,togglePositionsDrawer:a.togglePositionsDrawer}}))(U));function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function q(e,t){return!t||"object"!==J(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Q=function(e){function t(){var e,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=q(this,(e=G(t)).call.apply(e,[this].concat(c)))).state={display:"none"},a.showDialog=function(){a.setState({display:"block"})},a.hideDialog=function(){a.setState({display:"none"})},a}var a,n,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,e),a=t,(n=[{key:"render",value:function(){var e,t,a,n=this.props,o=n.balance,i=n.currency,r=n.is_dialog_on,_=n.is_upgrade_enabled,p=n.is_virtual,d=n.toggleDialog;return s.a.createElement("div",{className:"acc-info__wrapper"},s.a.createElement("div",{className:"acc-info__separator"}),s.a.createElement("div",{className:c()("acc-info",{"acc-info--show":r,"acc-info--is-virtual":p}),onClick:d},s.a.createElement("span",{className:"acc-info__id"},s.a.createElement(O.a,{icon:"IconAccountsCurrency",className:"acc-info__id-icon acc-info__id-icon--".concat(p?"virtual":i),type:p?"virtual":(i||"real").toLowerCase()})),void 0!==o&&s.a.createElement("p",{className:"acc-info__balance"},s.a.createElement("span",{className:c()("symbols",(e={},t="symbols--".concat((i||"").toLowerCase()),a=i,t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e))}),!i&&s.a.createElement(u.Localize,{i18n_default_text:"No currency assigned"}),i&&o),s.a.createElement(O.a,{icon:"IconArrowBold",className:"acc-info__select-arrow"})),s.a.createElement(l.CSSTransition,{in:r,timeout:200,classNames:{enter:"acc-switcher__wrapper--enter",enterDone:"acc-switcher__wrapper--enter-done",exit:"acc-switcher__wrapper--exit"},onEntered:this.showDialog,unmountOnExit:!0},s.a.createElement("div",{className:"acc-switcher__wrapper"},s.a.createElement(W,{is_visible:r,hideDialog:this.hideDialog,display:this.state.display,toggle:d,is_upgrade_enabled:_}))))}}])&&B(a.prototype,n),o&&B(a,o),t}(s.a.Component);Q.propTypes={account_type:i.a.string,balance:i.a.string,currency:i.a.string,is_dialog_on:i.a.bool,is_upgrade_enabled:i.a.bool,is_virtual:i.a.bool,loginid:i.a.string,toggleDialog:i.a.func};t.default=Q}}]);
//# sourceMappingURL=core.account-info.85fc8e5f9a1947e731ed.js.map