(window.webpackJsonp=window.webpackJsonp||[]).push([["bot"],{699:function(t,e,n){var r;window,t.exports=(r=n(700),function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e){t.exports=r},,,function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r);i.a.createFromInputFallback=function(t){t._d=new Date(NaN)};var o=function(t){return i.a.unix(t).utc()},a=function(t){if(!t)return i()().utc();if(t instanceof i.a&&t.isValid()&&t.isUTC())return t;if("number"==typeof t)return o(t);if(/invalid/i.test(i()(t))){var e=i()();return t>e.utc().daysInMonth()?i.a.utc(e.add(t,"d"),"DD MMM YYYY"):i.a.utc(t,"DD MMM YYYY")}return i.a.utc(t)},s=function(t,e){var n=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e?e.split(":"):[0,0,0],3),r=n[0],i=n[1],o=n[2];return t.hour(r).minute(i||0).second(o||0),t},c=function(t){return/^([0-9]|[0-1][0-9]|2[0-3]):([0-9]|[0-5][0-9])(:([0-9]|[0-5][0-9]))?$/.test(t)};e.default={epochToMoment:o,toMoment:a,setTime:s,convertToUnix:function(t,e){return s(a(t),e).unix()},toGMTFormat:function(t){return i()(t||void 0).utc().format("YYYY-MM-DD HH:mm:ss [GMT]")},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return a(t).format(e)},daysFromTodayTo:function(t){var e=a(t).startOf("day").diff(a().startOf("day"),"days");return!t||e<0?"":e},diffInMonths:function(t,e){return e.diff(t,"month")},getDiffDuration:function(t,e){return i.a.duration(i.a.unix(e).diff(i.a.unix(t)))},formatDuration:function(t){var e=Math.floor(t.asDays()),n=t.hours(),r=t.minutes(),o=t.seconds(),a=i()(0).hour(n).minute(r).seconds(o).format("HH:mm:ss");return e>0&&(a="".concat(e," ").concat(e>1?"days":"day"," ").concat(a)),a},isTimeValid:c,isHourValid:function(t){return c(t)&&/^([01][0-9]|2[0-3])$/.test(t.split(":")[0])},isMinuteValid:function(t){return c(t)&&/^[0-5][0-9]$/.test(t.split(":")[1])},isDateValid:function(t){return i()(t,"DD MMM YYYY").isValid()},addDays:function(t,e){return a(t).clone().add(e,"day")},addMonths:function(t,e){return a(t).clone().add(e,"month")},addYears:function(t,e){return a(t).clone().add(e,"year")},subDays:function(t,e){return a(t).clone().subtract(e,"day")},subMonths:function(t,e){return a(t).clone().subtract(e,"month")},subYears:function(t,e){return a(t).clone().subtract(e,"year")},minDate:function(t,e){return i.a.min(a(t),a(e))},getStartOfMonth:function(t){return a(t).clone().startOf("month").format("YYYY-MM-DD")},formatMiliseconds:function(t,e){return i.a.utc(t).format(e)}}}]).default)},701:function(module,exports,__webpack_require__){var t;window,t=function(__WEBPACK_EXTERNAL_MODULE__0__,__WEBPACK_EXTERNAL_MODULE__1__,__WEBPACK_EXTERNAL_MODULE__2__){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=50)}({0:function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__0__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwgXCJyZWFjdFwiPzU4OGUiXSwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX187Il0sIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///0\n")},1:function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__1__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwgXCJwcm9wLXR5cGVzXCI/MzgzMiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXzsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///1\n")},2:function(module,exports){eval("module.exports = __WEBPACK_EXTERNAL_MODULE__2__;//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL2Rlcml2LWNvbXBvbmVudC5bbmFtZV0vZXh0ZXJuYWwgXCJjbGFzc25hbWVzXCI/YWFhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXzsiXSwibWFwcGluZ3MiOiJBQUFBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n")},28:function(module,exports,__webpack_require__){eval("// extracted by mini-css-extract-plugin\n    if(false) { var cssReload; }\n  //# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMjguanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvZHJhd2VyL2RyYXdlci5zY3NzP2FiYTIiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG4gICAgaWYobW9kdWxlLmhvdCkge1xuICAgICAgLy8gMTU3NTYwNjg0NzYxMVxuICAgICAgdmFyIGNzc1JlbG9hZCA9IHJlcXVpcmUoXCIhLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1ob3QtbG9hZGVyL2hvdE1vZHVsZVJlcGxhY2VtZW50LmpzXCIpKG1vZHVsZS5pZCwge1wiZmlsZU1hcFwiOlwie2ZpbGVOYW1lfVwifSk7XG4gICAgICBtb2R1bGUuaG90LmRpc3Bvc2UoY3NzUmVsb2FkKTtcbiAgICAgIG1vZHVsZS5ob3QuYWNjZXB0KHVuZGVmaW5lZCwgY3NzUmVsb2FkKTs7XG4gICAgfVxuICAiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0EsZ0NBS0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///28\n")},50:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: external "classnames"\nvar external_classnames_ = __webpack_require__(2);\nvar external_classnames_default = /*#__PURE__*/__webpack_require__.n(external_classnames_);\n\n// EXTERNAL MODULE: external "prop-types"\nvar external_prop_types_ = __webpack_require__(1);\nvar external_prop_types_default = /*#__PURE__*/__webpack_require__.n(external_prop_types_);\n\n// EXTERNAL MODULE: external "react"\nvar external_react_ = __webpack_require__(0);\nvar external_react_default = /*#__PURE__*/__webpack_require__.n(external_react_);\n\n// CONCATENATED MODULE: ./src/components/drawer/drawer.jsx\nfunction _typeof(obj) { if (typeof Symbol === "function" && typeof Symbol.iterator === "symbol") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === "object" || typeof call === "function")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError("this hasn\'t been initialised - super() hasn\'t been called"); } return self; }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n\n\n\n\nvar drawer_Drawer =\n/*#__PURE__*/\nfunction (_React$PureComponent) {\n  _inherits(Drawer, _React$PureComponent);\n\n  function Drawer(props) {\n    var _this;\n\n    _classCallCheck(this, Drawer);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Drawer).call(this, props));\n\n    _this.toggleDrawer = function () {\n      _this.setState(function (prev_state) {\n        return {\n          is_open: !prev_state.is_open\n        };\n      }, function () {\n        if (_this.props.toggleDrawer) {\n          _this.props.toggleDrawer(_this.state.is_open);\n        }\n      });\n    };\n\n    _this.state = {\n      is_open: props.is_open\n    };\n    return _this;\n  }\n\n  _createClass(Drawer, [{\n    key: "componentWillReceiveProps",\n    value: function componentWillReceiveProps(nextProps) {\n      this.setState({\n        is_open: nextProps.is_open\n      });\n    }\n  }, {\n    key: "render",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          className = _this$props.className,\n          footer = _this$props.footer,\n          header = _this$props.header;\n      return external_react_default.a.createElement("div", {\n        className: external_classnames_default()(\'dc-drawer\', className, {\n          \'dc-drawer--open\': this.state.is_open\n        })\n      }, external_react_default.a.createElement("div", {\n        className: "dc-drawer__container"\n      }, header && external_react_default.a.createElement("div", {\n        className: "dc-drawer__header"\n      }, header), external_react_default.a.createElement("div", {\n        className: "dc-drawer__content"\n      }, children), footer && external_react_default.a.createElement("div", {\n        className: "dc-drawer__footer"\n      }, footer)), external_react_default.a.createElement("div", {\n        className: external_classnames_default()(\'dc-drawer__toggle\', {\n          \'dc-drawer__toggle--open\': this.state.is_open\n        }),\n        onClick: this.toggleDrawer\n      }, external_react_default.a.createElement("div", {\n        className: "dc-drawer__toggle-icon-wraper"\n      }, external_react_default.a.createElement("div", {\n        className: "dc-drawer__toggle-icon"\n      }))));\n    }\n  }]);\n\n  return Drawer;\n}(external_react_default.a.PureComponent);\n\ndrawer_Drawer.propTypes = {\n  children: external_prop_types_default.a.oneOfType([external_prop_types_default.a.array, external_prop_types_default.a.object]),\n  footer: external_prop_types_default.a.oneOfType([external_prop_types_default.a.node, external_prop_types_default.a.string]),\n  header: external_prop_types_default.a.oneOfType([external_prop_types_default.a.node, external_prop_types_default.a.string]),\n  is_open: external_prop_types_default.a.bool\n};\n/* harmony default export */ var drawer = (drawer_Drawer);\n// EXTERNAL MODULE: ./src/components/drawer/drawer.scss\nvar drawer_drawer = __webpack_require__(28);\n\n// CONCATENATED MODULE: ./src/components/drawer/index.js\n\n\n/* harmony default export */ var components_drawer = __webpack_exports__["default"] = (drawer);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTAuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvZHJhd2VyL2RyYXdlci5qc3g/YTg5YSIsIndlYnBhY2s6Ly9kZXJpdi1jb21wb25lbnQuW25hbWVdLy4vc3JjL2NvbXBvbmVudHMvZHJhd2VyL2luZGV4LmpzPzI4Y2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUHJvcFR5cGVzICBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCAgICAgIGZyb20gJ3JlYWN0JztcblxuY2xhc3MgRHJhd2VyIGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudCB7XG5cbiAgICBjb25zdHJ1Y3Rvcihwcm9wcykge1xuICAgICAgICBzdXBlcihwcm9wcyk7XG4gICAgICAgIHRoaXMuc3RhdGUgPSB7IGlzX29wZW46IHByb3BzLmlzX29wZW4gfTtcbiAgICB9XG5cbiAgICBjb21wb25lbnRXaWxsUmVjZWl2ZVByb3BzKG5leHRQcm9wcykge1xuICAgICAgICB0aGlzLnNldFN0YXRlKHtcbiAgICAgICAgICAgIGlzX29wZW46IG5leHRQcm9wcy5pc19vcGVuLFxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0b2dnbGVEcmF3ZXIgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RhdGUoKHByZXZfc3RhdGUpID0+ICh7XG4gICAgICAgICAgICBpc19vcGVuOiAhcHJldl9zdGF0ZS5pc19vcGVuLFxuICAgICAgICB9KSwgKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcHMudG9nZ2xlRHJhd2VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy50b2dnbGVEcmF3ZXIodGhpcy5zdGF0ZS5pc19vcGVuKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICApO1xuICAgIH07XG5cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGNvbnN0IHtcbiAgICAgICAgICAgIGNoaWxkcmVuLFxuICAgICAgICAgICAgY2xhc3NOYW1lLFxuICAgICAgICAgICAgZm9vdGVyLFxuICAgICAgICAgICAgaGVhZGVyLFxuICAgICAgICB9ID0gdGhpcy5wcm9wcztcblxuICAgICAgICByZXR1cm4gKFxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9e2NsYXNzTmFtZXMoXG4gICAgICAgICAgICAgICAgJ2RjLWRyYXdlcicsIGNsYXNzTmFtZSwge1xuICAgICAgICAgICAgICAgICAgICAnZGMtZHJhd2VyLS1vcGVuJzogdGhpcy5zdGF0ZS5pc19vcGVuLFxuICAgICAgICAgICAgICAgIH0pfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYy1kcmF3ZXJfX2NvbnRhaW5lcic+XG4gICAgICAgICAgICAgICAgICAgIHtoZWFkZXIgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYy1kcmF3ZXJfX2hlYWRlcic+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge2hlYWRlcn1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYy1kcmF3ZXJfX2NvbnRlbnQnPlxuICAgICAgICAgICAgICAgICAgICAgICAge2NoaWxkcmVufVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAge2Zvb3RlciAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RjLWRyYXdlcl9fZm9vdGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Zm9vdGVyfVxuICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17Y2xhc3NOYW1lcygnZGMtZHJhd2VyX190b2dnbGUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgeyAnZGMtZHJhd2VyX190b2dnbGUtLW9wZW4nOiB0aGlzLnN0YXRlLmlzX29wZW4gfSl9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e3RoaXMudG9nZ2xlRHJhd2VyfVxuICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2RjLWRyYXdlcl9fdG9nZ2xlLWljb24td3JhcGVyJz5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdkYy1kcmF3ZXJfX3RvZ2dsZS1pY29uJyAvPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICApO1xuICAgIH1cbn1cblxuRHJhd2VyLnByb3BUeXBlcyA9IHtcbiAgICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbXG4gICAgICAgIFByb3BUeXBlcy5hcnJheSxcbiAgICAgICAgUHJvcFR5cGVzLm9iamVjdCxcbiAgICBdKSxcbiAgICBmb290ZXI6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICBQcm9wVHlwZXMubm9kZSxcbiAgICAgICAgUHJvcFR5cGVzLnN0cmluZyxcbiAgICBdKSxcbiAgICBoZWFkZXI6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1xuICAgICAgICBQcm9wVHlwZXMubm9kZSxcbiAgICAgICAgUHJvcFR5cGVzLnN0cmluZyxcbiAgICBdKSxcbiAgICBpc19vcGVuOiBQcm9wVHlwZXMuYm9vbCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IERyYXdlcjtcbiIsImltcG9ydCBEcmF3ZXIgZnJvbSAnLi9kcmF3ZXIuanN4JztcbmltcG9ydCAgICAgICAgICAgICAnLi9kcmF3ZXIuc2Nzcyc7XG5cbmV4cG9ydCBkZWZhdWx0IERyYXdlcjtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUFFQTtBQUFBO0FBQ0E7QUFEQTtBQUNBO0FBQUE7QUFDQTtBQUZBO0FBWUE7QUFBQTtBQUNBO0FBREE7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBRUE7QUFDQTtBQW5CQTtBQUFBO0FBQUE7QUFGQTtBQUdBO0FBQ0E7OztBQUNBO0FBQ0E7QUFDQTtBQURBO0FBR0E7OztBQWFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQVFBO0FBQ0E7QUFFQTtBQURBO0FBREE7QUFLQTtBQUFBO0FBRUE7QUFBQTtBQUlBO0FBQUE7QUFJQTtBQUFBO0FBTUE7QUFDQTtBQUFBO0FBQ0E7QUFIQTtBQUtBO0FBQUE7QUFDQTtBQUFBO0FBS0E7Ozs7QUFoRUE7QUFDQTtBQWtFQTtBQUNBO0FBSUE7QUFJQTtBQUlBO0FBYkE7QUFnQkE7Ozs7O0FDdkZBO0FBQ0E7QUFFQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///50\n')}}).default},module.exports=t(__webpack_require__(0),__webpack_require__(6),__webpack_require__(38))},702:function(t,e,n){},711:function(t,e,n){var r,i,o,a,s,c,u,l,h,p,f,d,y,m,g,v,b,_,E,T,S,k,w,A,O,C,I,N,R,B,D;window,t.exports=(r=n(2),i=n(0),o=n(684),a=n(73),s=n(31),c=n(705),u=n(19),l=n(649),h=n(112),p=n(34),f=n(68),d=n(128),y=n(111),m=n(669),g=n(40),v=n(671),b=n(652),_=n(180),E=n(650),T=n(699),S=n(178),k=n(670),w=n(75),A=n(672),O=n(184),C=n(667),I=n(701),N=n(257),R=n(668),B=n(702),D=n(653),function(t){function e(e){for(var n,i,o=e[0],a=e[1],s=0,u=[];s<o.length;s++)i=o[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&u.push(r[i][0]),r[i]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);for(c&&c(e);u.length;)u.shift()()}var n={},r={39:0};function i(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var o=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=o);var a,s=document.createElement("script");s.charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.src=function(t){return i.p+"bot."+({0:"after_purchase",1:"balance",2:"before_purchase",3:"check_direction",4:"contract_check_result",5:"controls_flow_statements",6:"controls_for",7:"controls_forEach",8:"controls_if",9:"controls_whileUntil",10:"during_purchase",11:"epoch",12:"get_ohlc",13:"is_candle_black",14:"last_digit",15:"logic_operation",16:"math_arithmetic",17:"math_constrain",18:"math_single",19:"notify_telegram",20:"ohlc",21:"ohlc_values",22:"ohlc_values_in_list",23:"procedures_ifreturn",24:"read_details",25:"read_ohlc",26:"read_ohlc_obj",27:"sell_at_market",28:"sell_price",29:"sma_statement",30:"text_print",31:"text_prompt_ext",32:"tick_analysis",33:"todatetime",34:"totimestamp",35:"trade_again",36:"trade_definition",37:"trade_definition_tradeoptions",38:"variables_set"}[t]||t)+"."+{0:"e088d0e17bf0d03a94c8",1:"16b4b41550ef847dce6a",2:"06675cc462eb8ab4882e",3:"219fe68b4d3c3b090d22",4:"86baea99ca0b52b40203",5:"7bc989539ef053d9a2e7",6:"a19e263e37d6908d7c4a",7:"4804331f9d5a19e9911b",8:"c95b35427071cb953aba",9:"39b3988644ae7f9dad09",10:"2cbcf64fd27f42379db2",11:"7b420a8e98ad2db9a2f6",12:"cf0feb5090f0bc0c54e3",13:"f5756edfde90c7e7de24",14:"ceabfcdae562a7ec3e1f",15:"fdfd20d18e7c00b377ae",16:"b4ce8bfbf08be43798a6",17:"12fea9d9c24d6aa67476",18:"39883224d7eff30a57d1",19:"8cc1f776f8ce4e9ad50a",20:"37e197fd0a2f4ef0a7cd",21:"5f04d2382777da04c306",22:"2a85d94b20ea0535bf3e",23:"1b6582ff272460315d1e",24:"f2ac194c4168470360e8",25:"4c41d9f52f10111fe44c",26:"6f131a1fcfc576ed27b9",27:"d6a068e7057698a07f5c",28:"9d4a5cb4785037196f8e",29:"ab7c24df674a7d95fad7",30:"27e306f405293ef94a7a",31:"a48b571b1fcaeb74f755",32:"4c2950dd55a7d573369e",33:"fb4aed1101e5abd3853a",34:"83bc56c746018fbf8b57",35:"0539794c133420bd41ca",36:"b81b60337e6e5d82b95f",37:"8b367082f44b3f4d62a4",38:"48eb62664e43ccb5f44c"}[t]+".js"}(t);var c=new Error;a=function(e){s.onerror=s.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[t]=void 0}};var u=setTimeout((function(){a({type:"timeout",target:s})}),12e4);s.onerror=s.onload=a,document.head.appendChild(s)}return Promise.all(e)},i.m=t,i.c=n,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i.oe=function(t){throw console.error(t),t};var o=window.webpackJsonpderiv_bot=window.webpackJsonpderiv_bot||[],a=o.push.bind(o);o.push=e,o=o.slice();for(var s=0;s<o.length;s++)e(o[s]);var c=a;return i(i.s=251)}([function(t,e){t.exports=r},function(t,e){t.exports=i},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",(function(){return O})),n.d(e,"b",(function(){return Ft})),n.d(e,"c",(function(){return _t})),n.d(e,"d",(function(){return Jt})),n.d(e,"e",(function(){return rt})),n.d(e,"f",(function(){return re})),n.d(e,"g",(function(){return N})),n.d(e,"h",(function(){return Ve})),n.d(e,"i",(function(){return Ae})),n.d(e,"j",(function(){return Ne})),n.d(e,"k",(function(){return Ue})),n.d(e,"l",(function(){return X})),n.d(e,"m",(function(){return te})),n.d(e,"n",(function(){return Qt})),n.d(e,"o",(function(){return qt})),n.d(e,"p",(function(){return lt}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function o(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var a=function(){return(a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function u(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t}var l="An invariant failed, however the error is obfuscated because this is an production build.",h=[];Object.freeze(h);var p={};function f(){return++Rt.mobxGuid}function d(t){throw y(!1,t),"X"}function y(t,e){if(!t)throw new Error("[mobx] "+(e||l))}function m(t){var e=!1;return function(){if(!e)return e=!0,t.apply(this,arguments)}}Object.freeze(p);var g=function(){};function v(t){return null!==t&&"object"==typeof t}function b(t){if(null===t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}function _(t,e,n){Object.defineProperty(t,e,{enumerable:!1,writable:!0,configurable:!0,value:n})}function E(t,e){var n="isMobX"+t;return e.prototype[n]=!0,function(t){return v(t)&&!0===t[n]}}function T(t){return t instanceof Map}function S(t){return t instanceof Set}function k(t){var e=new Set;for(var n in t)e.add(n);return Object.getOwnPropertySymbols(t).forEach((function(n){Object.getOwnPropertyDescriptor(t,n).enumerable&&e.add(n)})),Array.from(e)}function w(t){return t&&t.toString?t.toString():new String(t).toString()}function A(t){return null===t?null:"object"==typeof t?""+t:t}var O=Symbol("mobx administration"),C=function(){function t(t){void 0===t&&(t="Atom@"+f()),this.name=t,this.isPendingUnobservation=!1,this.isBeingObserved=!1,this.observers=new Set,this.diffValue=0,this.lastAccessedBy=0,this.lowestObserverState=$.NOT_TRACKING}return t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.reportObserved=function(){return Lt(this)},t.prototype.reportChanged=function(){xt(),function(t){t.lowestObserverState!==$.STALE&&(t.lowestObserverState=$.STALE,t.observers.forEach((function(e){e.dependenciesState===$.UP_TO_DATE&&(e.isTracing!==tt.NONE&&jt(e,t),e.onBecomeStale()),e.dependenciesState=$.STALE})))}(this),Mt()},t.prototype.toString=function(){return this.name},t}(),I=E("Atom",C);function N(t,e,n){void 0===e&&(e=g),void 0===n&&(n=g);var r=new C(t);return e!==g&&ne("onBecomeObserved",r,e,void 0),n!==g&&ee(r,n),r}var R={identity:function(t,e){return t===e},structural:function(t,e){return Ge(t,e)},default:function(t,e){return Object.is(t,e)},shallow:function(t,e){return Ge(t,e,1)}},B=Symbol("mobx did run lazy initializers"),D=Symbol("mobx pending decorators"),P={},x={};function M(t,e){var n=e?P:x;return n[t]||(n[t]={configurable:!0,enumerable:e,get:function(){return L(this),this[t]},set:function(e){L(this),this[t]=e}})}function L(t){var e,n;if(!0!==t[B]){var r=t[D];if(r){_(t,B,!0);var i=u(Object.getOwnPropertySymbols(r),Object.keys(r));try{for(var o=s(i),a=o.next();!a.done;a=o.next()){var c=r[a.value];c.propertyCreator(t,c.prop,c.descriptor,c.decoratorTarget,c.decoratorArguments)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(e)throw e.error}}}}}function j(t,e){return function(){var n,r=function(r,i,o,s){if(!0===s)return e(r,i,o,r,n),null;if(!Object.prototype.hasOwnProperty.call(r,D)){var c=r[D];_(r,D,a({},c))}return r[D][i]={prop:i,propertyCreator:e,descriptor:o,decoratorTarget:r,decoratorArguments:n},M(i,t)};return F(arguments)?(n=h,r.apply(null,arguments)):(n=Array.prototype.slice.call(arguments),r)}}function F(t){return(2===t.length||3===t.length)&&("string"==typeof t[1]||"symbol"==typeof t[1])||4===t.length&&!0===t[3]}function U(t,e,n){return ce(t)?t:Array.isArray(t)?X.array(t,{name:n}):b(t)?X.object(t,void 0,{name:n}):T(t)?X.map(t,{name:n}):S(t)?X.set(t,{name:n}):t}function z(t){return t}function V(e){y(e);var n=j(!0,(function(t,n,r,i,o){var a=r?r.initializer?r.initializer.call(t):r.value:void 0;xe(t).addObservableProp(n,a,e)})),r=(void 0!==t&&t.env,n);return r.enhancer=e,r}var H={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function G(t){return null==t?H:"string"==typeof t?{name:t,deep:!0,proxy:!0}:t}Object.freeze(H);var q=V(U),W=V((function(t,e,n){return null==t?t:Ue(t)||Ae(t)||Ne(t)||De(t)?t:Array.isArray(t)?X.array(t,{name:n,deep:!1}):b(t)?X.object(t,void 0,{name:n,deep:!1}):T(t)?X.map(t,{name:n,deep:!1}):S(t)?X.set(t,{name:n,deep:!1}):d(!1)})),K=V(z),Y=V((function(t,e,n){return Ge(t,e)?e:t}));function J(t){return t.defaultDecorator?t.defaultDecorator.enhancer:!1===t.deep?z:U}var Q={box:function(t,e){arguments.length>2&&Z("box");var n=G(e);return new St(t,J(n),n.name,!0,n.equals)},array:function(t,e){arguments.length>2&&Z("array");var n=G(e);return Ee(t,J(n),n.name)},map:function(t,e){arguments.length>2&&Z("map");var n=G(e);return new Ie(t,J(n),n.name)},set:function(t,e){arguments.length>2&&Z("set");var n=G(e);return new Be(t,J(n),n.name)},object:function(t,e,n){"string"==typeof arguments[1]&&Z("object");var r=G(n);if(!1===r.proxy)return ie({},t,e,r);var i=oe(r),o=ie({},void 0,void 0,r),a=fe(o);return ae(a,t,e,i),a},ref:K,shallow:W,deep:q,struct:Y},X=function(t,e,n){if("string"==typeof arguments[1]||"symbol"==typeof arguments[1])return q.apply(null,arguments);if(ce(t))return t;var r=b(t)?X.object(t,e,n):Array.isArray(t)?X.array(t,e):T(t)?X.map(t,e):S(t)?X.set(t,e):t;if(r!==t)return r;d(!1)};function Z(t){d("Expected one or two arguments to observable."+t+". Did you accidentally try to use observable."+t+" as decorator?")}Object.keys(Q).forEach((function(t){return X[t]=Q[t]}));var $,tt,et=j(!1,(function(t,e,n,r,i){var o=n.get,s=n.set,c=i[0]||{};xe(t).addComputedProp(t,e,a({get:o,set:s,context:t},c))})),nt=et({equals:R.structural}),rt=function(t,e,n){if("string"==typeof e)return et.apply(null,arguments);if(null!==t&&"object"==typeof t&&1===arguments.length)return et.apply(null,arguments);var r="object"==typeof e?e:{};return r.get=t,r.set="function"==typeof e?e:r.set,r.name=r.name||t.name||"",new kt(r)};rt.struct=nt,function(t){t[t.NOT_TRACKING=-1]="NOT_TRACKING",t[t.UP_TO_DATE=0]="UP_TO_DATE",t[t.POSSIBLY_STALE=1]="POSSIBLY_STALE",t[t.STALE=2]="STALE"}($||($={})),function(t){t[t.NONE=0]="NONE",t[t.LOG=1]="LOG",t[t.BREAK=2]="BREAK"}(tt||(tt={}));var it=function(t){this.cause=t};function ot(t){return t instanceof it}function at(t){switch(t.dependenciesState){case $.UP_TO_DATE:return!1;case $.NOT_TRACKING:case $.STALE:return!0;case $.POSSIBLY_STALE:for(var e=ht(),n=t.observing,r=n.length,i=0;i<r;i++){var o=n[i];if(wt(o)){if(Rt.disableErrorBoundaries)o.get();else try{o.get()}catch(t){return pt(e),!0}if(t.dependenciesState===$.STALE)return pt(e),!0}}return yt(t),pt(e),!1}}function st(t){var e=t.observers.size>0;Rt.computationDepth>0&&e&&d(!1),Rt.allowStateChanges||!e&&"strict"!==Rt.enforceActions||d(!1)}function ct(t,e,n){var r=ft(!0);yt(t),t.newObserving=new Array(t.observing.length+100),t.unboundDepsCount=0,t.runId=++Rt.runId;var i,o=Rt.trackingDerivation;if(Rt.trackingDerivation=t,!0===Rt.disableErrorBoundaries)i=e.call(n);else try{i=e.call(n)}catch(t){i=new it(t)}return Rt.trackingDerivation=o,function(t){for(var e=t.observing,n=t.observing=t.newObserving,r=$.UP_TO_DATE,i=0,o=t.unboundDepsCount,a=0;a<o;a++)0===(s=n[a]).diffValue&&(s.diffValue=1,i!==a&&(n[i]=s),i++),s.dependenciesState>r&&(r=s.dependenciesState);for(n.length=i,t.newObserving=null,o=e.length;o--;)0===(s=e[o]).diffValue&&Dt(s,t),s.diffValue=0;for(;i--;){var s;1===(s=n[i]).diffValue&&(s.diffValue=0,Bt(s,t))}r!==$.UP_TO_DATE&&(t.dependenciesState=r,t.onBecomeStale())}(t),dt(r),i}function ut(t){var e=t.observing;t.observing=[];for(var n=e.length;n--;)Dt(e[n],t);t.dependenciesState=$.NOT_TRACKING}function lt(t){var e=ht();try{return t()}finally{pt(e)}}function ht(){var t=Rt.trackingDerivation;return Rt.trackingDerivation=null,t}function pt(t){Rt.trackingDerivation=t}function ft(t){var e=Rt.allowStateReads;return Rt.allowStateReads=t,e}function dt(t){Rt.allowStateReads=t}function yt(t){if(t.dependenciesState!==$.UP_TO_DATE){t.dependenciesState=$.UP_TO_DATE;for(var e=t.observing,n=e.length;n--;)e[n].lowestObserverState=$.UP_TO_DATE}}var mt=0,gt=1;function vt(t,e,n){var r=function(){return bt(t,e,n||this,arguments)};return r.isMobxAction=!0,r}function bt(t,e,n,r){var i=function(t,e,n){var r=ht();xt();var i={prevDerivation:r,prevAllowStateChanges:Et(!0),prevAllowStateReads:ft(!0),notifySpy:!1,startTime:0,actionId:gt++,parentActionId:mt};return mt=i.actionId,i}();try{return e.apply(n,r)}catch(t){throw i.error=t,t}finally{!function(t){mt!==t.actionId&&d("invalid action stack. did you forget to finish an action?"),mt=t.parentActionId,void 0!==t.error&&(Rt.suppressReactionErrors=!0),Tt(t.prevAllowStateChanges),dt(t.prevAllowStateReads),Mt(),pt(t.prevDerivation),t.notifySpy,Rt.suppressReactionErrors=!1}(i)}}function _t(t,e){var n,r=Et(t);try{n=e()}finally{Tt(r)}return n}function Et(t){var e=Rt.allowStateChanges;return Rt.allowStateChanges=t,e}function Tt(t){Rt.allowStateChanges=t}var St=function(t){function e(e,n,r,i,o){void 0===r&&(r="ObservableValue@"+f()),void 0===i&&(i=!0),void 0===o&&(o=R.default);var a=t.call(this,r)||this;return a.enhancer=n,a.name=r,a.equals=o,a.hasUnreportedChange=!1,a.value=n(e,void 0,r),a}return o(e,t),e.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},e.prototype.set=function(t){this.value,(t=this.prepareNewValue(t))!==Rt.UNCHANGED&&this.setNewValue(t)},e.prototype.prepareNewValue=function(t){if(st(this),de(this)){var e=me(this,{object:this,type:"update",newValue:t});if(!e)return Rt.UNCHANGED;t=e.newValue}return t=this.enhancer(t,this.value,this.name),this.equals(this.value,t)?Rt.UNCHANGED:t},e.prototype.setNewValue=function(t){var e=this.value;this.value=t,this.reportChanged(),ge(this)&&be(this,{type:"update",object:this,newValue:t,oldValue:e})},e.prototype.get=function(){return this.reportObserved(),this.dehanceValue(this.value)},e.prototype.intercept=function(t){return ye(this,t)},e.prototype.observe=function(t,e){return e&&t({object:this,type:"update",newValue:this.value,oldValue:void 0}),ve(this,t)},e.prototype.toJSON=function(){return this.get()},e.prototype.toString=function(){return this.name+"["+this.value+"]"},e.prototype.valueOf=function(){return A(this.get())},e.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},e}(C),kt=(E("ObservableValue",St),function(){function t(t){this.dependenciesState=$.NOT_TRACKING,this.observing=[],this.newObserving=null,this.isBeingObserved=!1,this.isPendingUnobservation=!1,this.observers=new Set,this.diffValue=0,this.runId=0,this.lastAccessedBy=0,this.lowestObserverState=$.UP_TO_DATE,this.unboundDepsCount=0,this.__mapid="#"+f(),this.value=new it(null),this.isComputing=!1,this.isRunningSetter=!1,this.isTracing=tt.NONE,this.derivation=t.get,this.name=t.name||"ComputedValue@"+f(),t.set&&(this.setter=vt(this.name+"-setter",t.set)),this.equals=t.equals||(t.compareStructural||t.struct?R.structural:R.default),this.scope=t.context,this.requiresReaction=!!t.requiresReaction,this.keepAlive=!!t.keepAlive}return t.prototype.onBecomeStale=function(){!function(t){t.lowestObserverState===$.UP_TO_DATE&&(t.lowestObserverState=$.POSSIBLY_STALE,t.observers.forEach((function(e){e.dependenciesState===$.UP_TO_DATE&&(e.dependenciesState=$.POSSIBLY_STALE,e.isTracing!==tt.NONE&&jt(e,t),e.onBecomeStale())})))}(this)},t.prototype.onBecomeObserved=function(){this.onBecomeObservedListeners&&this.onBecomeObservedListeners.forEach((function(t){return t()}))},t.prototype.onBecomeUnobserved=function(){this.onBecomeUnobservedListeners&&this.onBecomeUnobservedListeners.forEach((function(t){return t()}))},t.prototype.get=function(){this.isComputing&&d("Cycle detected in computation "+this.name+": "+this.derivation),0!==Rt.inBatch||0!==this.observers.size||this.keepAlive?(Lt(this),at(this)&&this.trackAndCompute()&&function(t){t.lowestObserverState!==$.STALE&&(t.lowestObserverState=$.STALE,t.observers.forEach((function(e){e.dependenciesState===$.POSSIBLY_STALE?e.dependenciesState=$.STALE:e.dependenciesState===$.UP_TO_DATE&&(t.lowestObserverState=$.UP_TO_DATE)})))}(this)):at(this)&&(this.warnAboutUntrackedRead(),xt(),this.value=this.computeValue(!1),Mt());var t=this.value;if(ot(t))throw t.cause;return t},t.prototype.peek=function(){var t=this.computeValue(!1);if(ot(t))throw t.cause;return t},t.prototype.set=function(t){if(this.setter){y(!this.isRunningSetter,"The setter of computed value '"+this.name+"' is trying to update itself. Did you intend to update an _observable_ value, instead of the computed property?"),this.isRunningSetter=!0;try{this.setter.call(this.scope,t)}finally{this.isRunningSetter=!1}}else y(!1,!1)},t.prototype.trackAndCompute=function(){var t=this.value,e=this.dependenciesState===$.NOT_TRACKING,n=this.computeValue(!0),r=e||ot(t)||ot(n)||!this.equals(t,n);return r&&(this.value=n),r},t.prototype.computeValue=function(t){var e;if(this.isComputing=!0,Rt.computationDepth++,t)e=ct(this,this.derivation,this.scope);else if(!0===Rt.disableErrorBoundaries)e=this.derivation.call(this.scope);else try{e=this.derivation.call(this.scope)}catch(t){e=new it(t)}return Rt.computationDepth--,this.isComputing=!1,e},t.prototype.suspend=function(){this.keepAlive||(ut(this),this.value=void 0)},t.prototype.observe=function(t,e){var n=this,r=!0,i=void 0;return function(t,e){void 0===e&&(e=p);var n,r=e&&e.name||t.name||"Autorun@"+f();if(e.scheduler||e.delay){var i=$t(e),o=!1;n=new Ft(r,(function(){o||(o=!0,i((function(){o=!1,n.isDisposed||n.track(a)})))}),e.onError,e.requiresObservable)}else n=new Ft(r,(function(){this.track(a)}),e.onError,e.requiresObservable);function a(){t(n)}return n.schedule(),n.getDisposer()}((function(){var o=n.get();if(!r||e){var a=ht();t({type:"update",object:n,newValue:o,oldValue:i}),pt(a)}r=!1,i=o}))},t.prototype.warnAboutUntrackedRead=function(){},t.prototype.toJSON=function(){return this.get()},t.prototype.toString=function(){return this.name+"["+this.derivation.toString()+"]"},t.prototype.valueOf=function(){return A(this.get())},t.prototype[Symbol.toPrimitive]=function(){return this.valueOf()},t}()),wt=E("ComputedValue",kt),At=function(){this.version=5,this.UNCHANGED={},this.trackingDerivation=null,this.computationDepth=0,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!0,this.allowStateReads=!0,this.enforceActions=!1,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.computedConfigurable=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1},Ot={};function Ct(){return"undefined"!=typeof window?window:void 0!==r?r:"undefined"!=typeof self?self:Ot}var It=!0,Nt=!1,Rt=function(){var t=Ct();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(It=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new At).version&&(It=!1),It?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new At):(setTimeout((function(){Nt||d("There are multiple, different versions of MobX active. Make sure MobX is loaded only once or use `configure({ isolateGlobalState: true })`")}),1),new At)}();function Bt(t,e){t.observers.add(e),t.lowestObserverState>e.dependenciesState&&(t.lowestObserverState=e.dependenciesState)}function Dt(t,e){t.observers.delete(e),0===t.observers.size&&Pt(t)}function Pt(t){!1===t.isPendingUnobservation&&(t.isPendingUnobservation=!0,Rt.pendingUnobservations.push(t))}function xt(){Rt.inBatch++}function Mt(){if(0==--Rt.inBatch){Vt();for(var t=Rt.pendingUnobservations,e=0;e<t.length;e++){var n=t[e];n.isPendingUnobservation=!1,0===n.observers.size&&(n.isBeingObserved&&(n.isBeingObserved=!1,n.onBecomeUnobserved()),n instanceof kt&&n.suspend())}Rt.pendingUnobservations=[]}}function Lt(t){var e=Rt.trackingDerivation;return null!==e?(e.runId!==t.lastAccessedBy&&(t.lastAccessedBy=e.runId,e.newObserving[e.unboundDepsCount++]=t,t.isBeingObserved||(t.isBeingObserved=!0,t.onBecomeObserved())),!0):(0===t.observers.size&&Rt.inBatch>0&&Pt(t),!1)}function jt(t,e){if(console.log("[mobx.trace] '"+t.name+"' is invalidated due to a change in: '"+e.name+"'"),t.isTracing===tt.BREAK){var n=[];!function t(e,n,r){n.length>=1e3?n.push("(and many more)"):(n.push(""+new Array(r).join("\t")+e.name),e.dependencies&&e.dependencies.forEach((function(e){return t(e,n,r+1)})))}((r=t,se(ze(r,void 0))),n,1),new Function("debugger;\n/*\nTracing '"+t.name+"'\n\nYou are entering this break point because derivation '"+t.name+"' is being traced and '"+e.name+"' is now forcing it to update.\nJust follow the stacktrace you should now see in the devtools to see precisely what piece of your code is causing this update\nThe stackframe you are looking for is at least ~6-8 stack-frames up.\n\n"+(t instanceof kt?t.derivation.toString().replace(/[*]\//g,"/"):"")+"\n\nThe dependencies for this derivation are:\n\n"+n.join("\n")+"\n*/\n    ")()}var r}var Ft=function(){function t(t,e,n,r){void 0===t&&(t="Reaction@"+f()),void 0===r&&(r=!1),this.name=t,this.onInvalidate=e,this.errorHandler=n,this.requiresObservable=r,this.observing=[],this.newObserving=[],this.dependenciesState=$.NOT_TRACKING,this.diffValue=0,this.runId=0,this.unboundDepsCount=0,this.__mapid="#"+f(),this.isDisposed=!1,this._isScheduled=!1,this._isTrackPending=!1,this._isRunning=!1,this.isTracing=tt.NONE}return t.prototype.onBecomeStale=function(){this.schedule()},t.prototype.schedule=function(){this._isScheduled||(this._isScheduled=!0,Rt.pendingReactions.push(this),Vt())},t.prototype.isScheduled=function(){return this._isScheduled},t.prototype.runReaction=function(){if(!this.isDisposed){if(xt(),this._isScheduled=!1,at(this)){this._isTrackPending=!0;try{this.onInvalidate(),this._isTrackPending}catch(t){this.reportExceptionInDerivation(t)}}Mt()}},t.prototype.track=function(t){if(!this.isDisposed){xt(),this._isRunning=!0;var e=ct(this,t,void 0);this._isRunning=!1,this._isTrackPending=!1,this.isDisposed&&ut(this),ot(e)&&this.reportExceptionInDerivation(e.cause),Mt()}},t.prototype.reportExceptionInDerivation=function(t){var e=this;if(this.errorHandler)this.errorHandler(t,this);else{if(Rt.disableErrorBoundaries)throw t;var n="[mobx] Encountered an uncaught exception that was thrown by a reaction or observer component, in: '"+this+"'";Rt.suppressReactionErrors?console.warn("[mobx] (error in reaction '"+this.name+"' suppressed, fix error of causing action below)"):console.error(n,t),Rt.globalReactionErrorHandlers.forEach((function(n){return n(t,e)}))}},t.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._isRunning||(xt(),ut(this),Mt()))},t.prototype.getDisposer=function(){var t=this.dispose.bind(this);return t[O]=this,t},t.prototype.toString=function(){return"Reaction["+this.name+"]"},t.prototype.trace=function(t){void 0===t&&(t=!1),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=!1;"boolean"==typeof t[t.length-1]&&(n=t.pop());var r=function(t){switch(t.length){case 0:return Rt.trackingDerivation;case 1:return ze(t[0]);case 2:return ze(t[0],t[1])}}(t);if(!r)return d(!1);r.isTracing===tt.NONE&&console.log("[mobx.trace] '"+r.name+"' tracing enabled"),r.isTracing=n?tt.BREAK:tt.LOG}(this,t)},t}(),Ut=100,zt=function(t){return t()};function Vt(){Rt.inBatch>0||Rt.isRunningReactions||zt(Ht)}function Ht(){Rt.isRunningReactions=!0;for(var t=Rt.pendingReactions,e=0;t.length>0;){++e===Ut&&(console.error("Reaction doesn't converge to a stable state after "+Ut+" iterations. Probably there is a cycle in the reactive function: "+t[0]),t.splice(0));for(var n=t.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction()}Rt.isRunningReactions=!1}var Gt=E("Reaction",Ft);function qt(t){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}function Wt(){d(!1)}function Kt(t){return function(e,n,r){if(r){if(r.value)return{value:vt(t,r.value),enumerable:!1,configurable:!0,writable:!0};var i=r.initializer;return{enumerable:!1,configurable:!0,writable:!0,initializer:function(){return vt(t,i.call(this))}}}return Yt(t).apply(this,arguments)}}function Yt(t){return function(e,n,r){Object.defineProperty(e,n,{configurable:!0,enumerable:!1,get:function(){},set:function(e){_(this,n,Jt(t,e))}})}}var Jt=function(t,e,n,r){return 1===arguments.length&&"function"==typeof t?vt(t.name||"<unnamed action>",t):2===arguments.length&&"function"==typeof e?vt(t,e):1===arguments.length&&"string"==typeof t?Kt(t):!0!==r?Kt(e).apply(null,arguments):void _(t,e,vt(t.name||e,n.value,this))};function Qt(t,e){return"string"==typeof t||t.name,bt(0,"function"==typeof t?t:e,this,void 0)}function Xt(t,e,n){_(t,e,vt(e,n.bind(t)))}Jt.bound=function(t,e,n,r){return!0===r?(Xt(t,e,n.value),null):n?{configurable:!0,enumerable:!1,get:function(){return Xt(this,e,n.value||n.initializer.call(this)),this[e]},set:Wt}:{enumerable:!1,configurable:!0,set:function(t){Xt(this,e,t)},get:function(){}}};var Zt=function(t){return t()};function $t(t){return t.scheduler?t.scheduler:t.delay?function(e){return setTimeout(e,t.delay)}:Zt}function te(t,e,n){void 0===n&&(n=p);var r,i,o,a=n.name||"Reaction@"+f(),s=Jt(a,n.onError?(r=n.onError,i=e,function(){try{return i.apply(this,arguments)}catch(t){r.call(this,t)}}):e),c=!n.scheduler&&!n.delay,u=$t(n),l=!0,h=!1,d=n.compareStructural?R.structural:n.equals||R.default,y=new Ft(a,(function(){l||c?m():h||(h=!0,u(m))}),n.onError,n.requiresObservable);function m(){if(h=!1,!y.isDisposed){var e=!1;y.track((function(){var n=t(y);e=l||!d(o,n),o=n})),l&&n.fireImmediately&&s(o,y),l||!0!==e||s(o,y),l&&(l=!1)}}return y.schedule(),y.getDisposer()}function ee(t,e,n){return ne("onBecomeUnobserved",t,e,n)}function ne(t,e,n,r){var i="function"==typeof r?ze(e,n):ze(e),o="function"==typeof r?r:n,a=t+"Listeners";return i[a]?i[a].add(o):i[a]=new Set([o]),"function"!=typeof i[t]?d(!1):function(){var t=i[a];t&&(t.delete(o),0===t.size&&delete i[a])}}function re(t){var e=t.enforceActions,n=t.computedRequiresReaction,r=t.computedConfigurable,i=t.disableErrorBoundaries,o=t.reactionScheduler,a=t.reactionRequiresObservable,s=t.observableRequiresReaction;if(!0===t.isolateGlobalState&&((Rt.pendingReactions.length||Rt.inBatch||Rt.isRunningReactions)&&d("isolateGlobalState should be called before MobX is running any reactions"),Nt=!0,It&&(0==--Ct().__mobxInstanceCount&&(Ct().__mobxGlobals=void 0),Rt=new At)),void 0!==e){var c=void 0;switch(e){case!0:case"observed":c=!0;break;case!1:case"never":c=!1;break;case"strict":case"always":c="strict";break;default:d("Invalid value for 'enforceActions': '"+e+"', expected 'never', 'always' or 'observed'")}Rt.enforceActions=c,Rt.allowStateChanges=!0!==c&&"strict"!==c}void 0!==n&&(Rt.computedRequiresReaction=!!n),void 0!==a&&(Rt.reactionRequiresObservable=!!a),void 0!==s&&(Rt.observableRequiresReaction=!!s,Rt.allowStateReads=!Rt.observableRequiresReaction),void 0!==r&&(Rt.computedConfigurable=!!r),void 0!==i&&(!0===i&&console.warn("WARNING: Debug feature only. MobX will NOT recover from errors when `disableErrorBoundaries` is enabled."),Rt.disableErrorBoundaries=!!i),o&&function(t){var e=zt;zt=function(n){return t((function(){return e(n)}))}}(o)}function ie(t,e,n,r){var i=oe(r=G(r));return L(t),xe(t,r.name,i.enhancer),e&&ae(t,e,n,i),t}function oe(t){return t.defaultDecorator||(!1===t.deep?K:q)}function ae(t,e,n,r){var i,o;xt();try{var a=k(e);try{for(var c=s(a),u=c.next();!u.done;u=c.next()){var l=u.value,h=Object.getOwnPropertyDescriptor(e,l),p=(n&&l in n?n[l]:h.get?et:r)(t,l,h,!0);p&&Object.defineProperty(t,l,p)}}catch(t){i={error:t}}finally{try{u&&!u.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}}finally{Mt()}}function se(t){var e,n,r={name:t.name};return t.observing&&t.observing.length>0&&(r.dependencies=(e=t.observing,n=[],e.forEach((function(t){-1===n.indexOf(t)&&n.push(t)})),n).map(se)),r}function ce(t){return 1!==arguments.length&&d(!1),function(t,e){return null!=t&&(void 0!==e?!!Ue(t)&&t[O].values.has(e):Ue(t)||!!t[O]||I(t)||Gt(t)||wt(t))}(t)}function ue(t,e){void 0===e&&(e=void 0),xt();try{return t.apply(e)}finally{Mt()}}function le(t){return t[O]}function he(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t}!function(t){o((function(){return t.call(this,"FLOW_CANCELLED")||this}),t)}(Error);var pe={has:function(t,e){if(e===O||"constructor"===e||e===B)return!0;var n=le(t);return he(e)?n.has(e):e in t},get:function(t,e){if(e===O||"constructor"===e||e===B)return t[e];var n=le(t),r=n.values.get(e);if(r instanceof C){var i=r.get();return void 0===i&&n.has(e),i}return he(e)&&n.has(e),t[e]},set:function(t,e,n){return!!he(e)&&(function t(e,n,r){if(2!==arguments.length||De(e))if(Ue(e)){var i=e[O];i.values.get(n)?i.write(n,r):i.addObservableProp(n,r,i.defaultEnhancer)}else if(Ne(e))e.set(n,r);else if(De(e))e.add(n);else{if(!Ae(e))return d(!1);"number"!=typeof n&&(n=parseInt(n,10)),y(n>=0,"Not a valid index: '"+n+"'"),xt(),n>=e.length&&(e.length=n+1),e[n]=r,Mt()}else{xt();var o=n;try{for(var a in o)t(e,a,o[a])}finally{Mt()}}}(t,e,n),!0)},deleteProperty:function(t,e){return!!he(e)&&(le(t).remove(e),!0)},ownKeys:function(t){return le(t).keysAtom.reportObserved(),Reflect.ownKeys(t)},preventExtensions:function(t){return d("Dynamic observable objects cannot be frozen"),!1}};function fe(t){var e=new Proxy(t,pe);return t[O].proxy=e,e}function de(t){return void 0!==t.interceptors&&t.interceptors.length>0}function ye(t,e){var n=t.interceptors||(t.interceptors=[]);return n.push(e),m((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function me(t,e){var n=ht();try{for(var r=u(t.interceptors||[]),i=0,o=r.length;i<o&&(y(!(e=r[i](e))||e.type,"Intercept handlers should return nothing or a change object"),e);i++);return e}finally{pt(n)}}function ge(t){return void 0!==t.changeListeners&&t.changeListeners.length>0}function ve(t,e){var n=t.changeListeners||(t.changeListeners=[]);return n.push(e),m((function(){var t=n.indexOf(e);-1!==t&&n.splice(t,1)}))}function be(t,e){var n=ht(),r=t.changeListeners;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](e);pt(n)}}var _e={get:function(t,e){return e===O?t[O]:"length"===e?t[O].getArrayLength():"number"==typeof e?Se.get.call(t,e):"string"!=typeof e||isNaN(e)?Se.hasOwnProperty(e)?Se[e]:t[e]:Se.get.call(t,parseInt(e))},set:function(t,e,n){return"length"===e&&t[O].setArrayLength(n),"number"==typeof e&&Se.set.call(t,e,n),"symbol"==typeof e||isNaN(e)?t[e]=n:Se.set.call(t,parseInt(e),n),!0},preventExtensions:function(t){return d("Observable arrays cannot be frozen"),!1}};function Ee(t,e,n,r){void 0===n&&(n="ObservableArray@"+f()),void 0===r&&(r=!1);var i,o,a,s=new Te(n,e,r);i=s.values,o=O,a=s,Object.defineProperty(i,o,{enumerable:!1,writable:!1,configurable:!0,value:a});var c=new Proxy(s.values,_e);if(s.proxy=c,t&&t.length){var u=Et(!0);s.spliceWithArray(0,0,t),Tt(u)}return c}var Te=function(){function t(t,e,n){this.owned=n,this.values=[],this.proxy=void 0,this.lastKnownLength=0,this.atom=new C(t||"ObservableArray@"+f()),this.enhancer=function(n,r){return e(n,r,t+"[..]")}}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.dehanceValues=function(t){return void 0!==this.dehancer&&t.length>0?t.map(this.dehancer):t},t.prototype.intercept=function(t){return ye(this,t)},t.prototype.observe=function(t,e){return void 0===e&&(e=!1),e&&t({object:this.proxy,type:"splice",index:0,added:this.values.slice(),addedCount:this.values.length,removed:[],removedCount:0}),ve(this,t)},t.prototype.getArrayLength=function(){return this.atom.reportObserved(),this.values.length},t.prototype.setArrayLength=function(t){if("number"!=typeof t||t<0)throw new Error("[mobx.array] Out of range: "+t);var e=this.values.length;if(t!==e)if(t>e){for(var n=new Array(t-e),r=0;r<t-e;r++)n[r]=void 0;this.spliceWithArray(e,0,n)}else this.spliceWithArray(t,e-t)},t.prototype.updateArrayLength=function(t,e){if(t!==this.lastKnownLength)throw new Error("[mobx] Modification exception: the internal structure of an observable array was changed.");this.lastKnownLength+=e},t.prototype.spliceWithArray=function(t,e,n){var r=this;st(this.atom);var i=this.values.length;if(void 0===t?t=0:t>i?t=i:t<0&&(t=Math.max(0,i+t)),e=1===arguments.length?i-t:null==e?0:Math.max(0,Math.min(e,i-t)),void 0===n&&(n=h),de(this)){var o=me(this,{object:this.proxy,type:"splice",index:t,removedCount:e,added:n});if(!o)return h;e=o.removedCount,n=o.added}n=0===n.length?n:n.map((function(t){return r.enhancer(t,void 0)}));var a=this.spliceItemsIntoValues(t,e,n);return 0===e&&0===n.length||this.notifyArraySplice(t,n,a),this.dehanceValues(a)},t.prototype.spliceItemsIntoValues=function(t,e,n){var r;if(n.length<1e4)return(r=this.values).splice.apply(r,u([t,e],n));var i=this.values.slice(t,t+e);return this.values=this.values.slice(0,t).concat(n,this.values.slice(t+e)),i},t.prototype.notifyArrayChildUpdate=function(t,e,n){var r=!this.owned&&!1,i=ge(this),o=i||r?{object:this.proxy,type:"update",index:t,newValue:e,oldValue:n}:null;this.atom.reportChanged(),i&&be(this,o)},t.prototype.notifyArraySplice=function(t,e,n){var r=!this.owned&&!1,i=ge(this),o=i||r?{object:this.proxy,type:"splice",index:t,removed:n,added:e,removedCount:n.length,addedCount:e.length}:null;this.atom.reportChanged(),i&&be(this,o)},t}(),Se={intercept:function(t){return this[O].intercept(t)},observe:function(t,e){return void 0===e&&(e=!1),this[O].observe(t,e)},clear:function(){return this.splice(0)},replace:function(t){var e=this[O];return e.spliceWithArray(0,e.values.length,t)},toJS:function(){return this.slice()},toJSON:function(){return this.toJS()},splice:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=this[O];switch(arguments.length){case 0:return[];case 1:return i.spliceWithArray(t);case 2:return i.spliceWithArray(t,e)}return i.spliceWithArray(t,e,n)},spliceWithArray:function(t,e,n){return this[O].spliceWithArray(t,e,n)},push:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[O];return n.spliceWithArray(n.values.length,0,t),n.values.length},pop:function(){return this.splice(Math.max(this[O].values.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this[O];return n.spliceWithArray(0,0,t),n.values.length},reverse:function(){var t=this.slice();return t.reverse.apply(t,arguments)},sort:function(t){var e=this.slice();return e.sort.apply(e,arguments)},remove:function(t){var e=this[O],n=e.dehanceValues(e.values).indexOf(t);return n>-1&&(this.splice(n,1),!0)},get:function(t){var e=this[O];if(e){if(t<e.values.length)return e.atom.reportObserved(),e.dehanceValue(e.values[t]);console.warn("[mobx.array] Attempt to read an array index ("+t+") that is out of bounds ("+e.values.length+"). Please check length first. Out of bound indices will not be tracked by MobX")}},set:function(t,e){var n=this[O],r=n.values;if(t<r.length){st(n.atom);var i=r[t];if(de(n)){var o=me(n,{type:"update",object:n.proxy,index:t,newValue:e});if(!o)return;e=o.newValue}(e=n.enhancer(e,i))!==i&&(r[t]=e,n.notifyArrayChildUpdate(t,e,i))}else{if(t!==r.length)throw new Error("[mobx.array] Index out of bounds, "+t+" is larger than "+r.length);n.spliceWithArray(t,0,[e])}}};["concat","every","filter","forEach","indexOf","join","lastIndexOf","map","reduce","reduceRight","slice","some","toString","toLocaleString"].forEach((function(t){Se[t]=function(){var e=this[O];e.atom.reportObserved();var n=e.dehanceValues(e.values);return n[t].apply(n,arguments)}}));var ke,we=E("ObservableArrayAdministration",Te);function Ae(t){return v(t)&&we(t[O])}var Oe,Ce={},Ie=function(){function t(t,e,n){if(void 0===e&&(e=U),void 0===n&&(n="ObservableMap@"+f()),this.enhancer=e,this.name=n,this[ke]=Ce,this._keysAtom=N(this.name+".keys()"),this[Symbol.toStringTag]="Map","function"!=typeof Map)throw new Error("mobx.map requires Map polyfill for the current browser. Check babel-polyfill or core-js/es6/map.js");this._data=new Map,this._hasMap=new Map,this.merge(t)}return t.prototype._has=function(t){return this._data.has(t)},t.prototype.has=function(t){var e=this;if(!Rt.trackingDerivation)return this._has(t);var n=this._hasMap.get(t);if(!n){var r=n=new St(this._has(t),z,this.name+"."+w(t)+"?",!1);this._hasMap.set(t,r),ee(r,(function(){return e._hasMap.delete(t)}))}return n.get()},t.prototype.set=function(t,e){var n=this._has(t);if(de(this)){var r=me(this,{type:n?"update":"add",object:this,newValue:e,name:t});if(!r)return this;e=r.newValue}return n?this._updateValue(t,e):this._addValue(t,e),this},t.prototype.delete=function(t){var e=this;if(de(this)&&!(r=me(this,{type:"delete",object:this,name:t})))return!1;if(this._has(t)){var n=ge(this),r=n?{type:"delete",object:this,oldValue:this._data.get(t).value,name:t}:null;return ue((function(){e._keysAtom.reportChanged(),e._updateHasMapEntry(t,!1),e._data.get(t).setNewValue(void 0),e._data.delete(t)})),n&&be(this,r),!0}return!1},t.prototype._updateHasMapEntry=function(t,e){var n=this._hasMap.get(t);n&&n.setNewValue(e)},t.prototype._updateValue=function(t,e){var n=this._data.get(t);if((e=n.prepareNewValue(e))!==Rt.UNCHANGED){var r=ge(this),i=r?{type:"update",object:this,oldValue:n.value,name:t,newValue:e}:null;n.setNewValue(e),r&&be(this,i)}},t.prototype._addValue=function(t,e){var n=this;st(this._keysAtom),ue((function(){var r=new St(e,n.enhancer,n.name+"."+w(t),!1);n._data.set(t,r),e=r.value,n._updateHasMapEntry(t,!0),n._keysAtom.reportChanged()}));var r=ge(this);r&&be(this,r?{type:"add",object:this,name:t,newValue:e}:null)},t.prototype.get=function(t){return this.has(t)?this.dehanceValue(this._data.get(t).get()):this.dehanceValue(void 0)},t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.keys=function(){return this._keysAtom.reportObserved(),this._data.keys()},t.prototype.values=function(){var t=this,e=0,n=Array.from(this.keys());return Ke({next:function(){return e<n.length?{value:t.get(n[e++]),done:!1}:{done:!0}}})},t.prototype.entries=function(){var t=this,e=0,n=Array.from(this.keys());return Ke({next:function(){if(e<n.length){var r=n[e++];return{value:[r,t.get(r)],done:!1}}return{done:!0}}})},t.prototype[(ke=O,Symbol.iterator)]=function(){return this.entries()},t.prototype.forEach=function(t,e){var n,r;try{for(var i=s(this),o=i.next();!o.done;o=i.next()){var a=c(o.value,2),u=a[0],l=a[1];t.call(e,l,u,this)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},t.prototype.merge=function(t){var e=this;return Ne(t)&&(t=t.toJS()),ue((function(){b(t)?k(t).forEach((function(n){return e.set(n,t[n])})):Array.isArray(t)?t.forEach((function(t){var n=c(t,2),r=n[0],i=n[1];return e.set(r,i)})):T(t)?(t.constructor!==Map&&d("Cannot initialize from classes that inherit from Map: "+t.constructor.name),t.forEach((function(t,n){return e.set(n,t)}))):null!=t&&d("Cannot initialize map from "+t)})),this},t.prototype.clear=function(){var t=this;ue((function(){lt((function(){var e,n;try{for(var r=s(t.keys()),i=r.next();!i.done;i=r.next()){var o=i.value;t.delete(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}))}))},t.prototype.replace=function(t){var e=this;return ue((function(){var n,r=b(n=t)?Object.keys(n):Array.isArray(n)?n.map((function(t){return c(t,1)[0]})):T(n)||Ne(n)?Array.from(n.keys()):d("Cannot get keys from '"+n+"'");Array.from(e.keys()).filter((function(t){return-1===r.indexOf(t)})).forEach((function(t){return e.delete(t)})),e.merge(t)})),this},Object.defineProperty(t.prototype,"size",{get:function(){return this._keysAtom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.toPOJO=function(){var t,e,n={};try{for(var r=s(this),i=r.next();!i.done;i=r.next()){var o=c(i.value,2),a=o[0],u=o[1];n["symbol"==typeof a?a:w(a)]=u}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t.prototype.toJS=function(){return new Map(this)},t.prototype.toJSON=function(){return this.toPOJO()},t.prototype.toString=function(){var t=this;return this.name+"[{ "+Array.from(this.keys()).map((function(e){return w(e)+": "+t.get(e)})).join(", ")+" }]"},t.prototype.observe=function(t,e){return ve(this,t)},t.prototype.intercept=function(t){return ye(this,t)},t}(),Ne=E("ObservableMap",Ie),Re={},Be=function(){function t(t,e,n){if(void 0===e&&(e=U),void 0===n&&(n="ObservableSet@"+f()),this.name=n,this[Oe]=Re,this._data=new Set,this._atom=N(this.name),this[Symbol.toStringTag]="Set","function"!=typeof Set)throw new Error("mobx.set requires Set polyfill for the current browser. Check babel-polyfill or core-js/es6/set.js");this.enhancer=function(t,r){return e(t,r,n)},t&&this.replace(t)}return t.prototype.dehanceValue=function(t){return void 0!==this.dehancer?this.dehancer(t):t},t.prototype.clear=function(){var t=this;ue((function(){lt((function(){var e,n;try{for(var r=s(t._data.values()),i=r.next();!i.done;i=r.next()){var o=i.value;t.delete(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}))}))},t.prototype.forEach=function(t,e){var n,r;try{for(var i=s(this),o=i.next();!o.done;o=i.next()){var a=o.value;t.call(e,a,a,this)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._atom.reportObserved(),this._data.size},enumerable:!0,configurable:!0}),t.prototype.add=function(t){var e=this;if(st(this._atom),de(this)&&!(r=me(this,{type:"add",object:this,newValue:t})))return this;if(!this.has(t)){ue((function(){e._data.add(e.enhancer(t,void 0)),e._atom.reportChanged()}));var n=ge(this),r=n?{type:"add",object:this,newValue:t}:null;n&&be(this,r)}return this},t.prototype.delete=function(t){var e=this;if(de(this)&&!(r=me(this,{type:"delete",object:this,oldValue:t})))return!1;if(this.has(t)){var n=ge(this),r=n?{type:"delete",object:this,oldValue:t}:null;return ue((function(){e._atom.reportChanged(),e._data.delete(t)})),n&&be(this,r),!0}return!1},t.prototype.has=function(t){return this._atom.reportObserved(),this._data.has(this.dehanceValue(t))},t.prototype.entries=function(){var t=0,e=Array.from(this.keys()),n=Array.from(this.values());return Ke({next:function(){var r=t;return t+=1,r<n.length?{value:[e[r],n[r]],done:!1}:{done:!0}}})},t.prototype.keys=function(){return this.values()},t.prototype.values=function(){this._atom.reportObserved();var t=this,e=0,n=Array.from(this._data.values());return Ke({next:function(){return e<n.length?{value:t.dehanceValue(n[e++]),done:!1}:{done:!0}}})},t.prototype.replace=function(t){var e=this;return De(t)&&(t=t.toJS()),ue((function(){Array.isArray(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):S(t)?(e.clear(),t.forEach((function(t){return e.add(t)}))):null!=t&&d("Cannot initialize set from "+t)})),this},t.prototype.observe=function(t,e){return ve(this,t)},t.prototype.intercept=function(t){return ye(this,t)},t.prototype.toJS=function(){return new Set(this)},t.prototype.toString=function(){return this.name+"[ "+Array.from(this).join(", ")+" ]"},t.prototype[(Oe=O,Symbol.iterator)]=function(){return this.values()},t}(),De=E("ObservableSet",Be),Pe=function(){function t(t,e,n,r){void 0===e&&(e=new Map),this.target=t,this.values=e,this.name=n,this.defaultEnhancer=r,this.keysAtom=new C(n+".keys")}return t.prototype.read=function(t){return this.values.get(t).get()},t.prototype.write=function(t,e){var n=this.target,r=this.values.get(t);if(r instanceof kt)r.set(e);else{if(de(this)){if(!(o=me(this,{type:"update",object:this.proxy||n,name:t,newValue:e})))return;e=o.newValue}if((e=r.prepareNewValue(e))!==Rt.UNCHANGED){var i=ge(this),o=i?{type:"update",object:this.proxy||n,oldValue:r.value,name:t,newValue:e}:null;r.setNewValue(e),i&&be(this,o)}}},t.prototype.has=function(t){var e=this.pendingKeys||(this.pendingKeys=new Map),n=e.get(t);if(n)return n.get();var r=!!this.values.get(t);return n=new St(r,z,this.name+"."+w(t)+"?",!1),e.set(t,n),n.get()},t.prototype.addObservableProp=function(t,e,n){void 0===n&&(n=this.defaultEnhancer);var r=this.target;if(de(this)){var i=me(this,{object:this.proxy||r,name:t,type:"add",newValue:e});if(!i)return;e=i.newValue}var o=new St(e,n,this.name+"."+w(t),!1);this.values.set(t,o),e=o.value,Object.defineProperty(r,t,function(t){return Me[t]||(Me[t]={configurable:!0,enumerable:!0,get:function(){return this[O].read(t)},set:function(e){this[O].write(t,e)}})}(t)),this.notifyPropertyAddition(t,e)},t.prototype.addComputedProp=function(t,e,n){var r,i,o,a=this.target;n.name=n.name||this.name+"."+w(e),this.values.set(e,new kt(n)),(t===a||(r=t,i=e,!(o=Object.getOwnPropertyDescriptor(r,i))||!1!==o.configurable&&!1!==o.writable))&&Object.defineProperty(t,e,function(t){return Le[t]||(Le[t]={configurable:Rt.computedConfigurable,enumerable:!1,get:function(){return je(this).read(t)},set:function(e){je(this).write(t,e)}})}(e))},t.prototype.remove=function(t){if(this.values.has(t)){var e=this.target;if(de(this)&&!(a=me(this,{object:this.proxy||e,name:t,type:"remove"})))return;try{xt();var n=ge(this),r=this.values.get(t),i=r&&r.get();if(r&&r.set(void 0),this.keysAtom.reportChanged(),this.values.delete(t),this.pendingKeys){var o=this.pendingKeys.get(t);o&&o.set(!1)}delete this.target[t];var a=n?{type:"remove",object:this.proxy||e,oldValue:i,name:t}:null;n&&be(this,a)}finally{Mt()}}},t.prototype.illegalAccess=function(t,e){console.warn("Property '"+e+"' of '"+t+"' was accessed through the prototype chain. Use 'decorate' instead to declare the prop or access it statically through it's owner")},t.prototype.observe=function(t,e){return ve(this,t)},t.prototype.intercept=function(t){return ye(this,t)},t.prototype.notifyPropertyAddition=function(t,e){var n=ge(this),r=n?{type:"add",object:this.proxy||this.target,name:t,newValue:e}:null;if(n&&be(this,r),this.pendingKeys){var i=this.pendingKeys.get(t);i&&i.set(!0)}this.keysAtom.reportChanged()},t.prototype.getKeys=function(){var t,e;this.keysAtom.reportObserved();var n=[];try{for(var r=s(this.values),i=r.next();!i.done;i=r.next()){var o=c(i.value,2),a=o[0];o[1]instanceof St&&n.push(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},t}();function xe(t,e,n){if(void 0===e&&(e=""),void 0===n&&(n=U),Object.prototype.hasOwnProperty.call(t,O))return t[O];b(t)||(e=(t.constructor.name||"ObservableObject")+"@"+f()),e||(e="ObservableObject@"+f());var r=new Pe(t,new Map,w(e),n);return _(t,O,r),r}var Me=Object.create(null),Le=Object.create(null);function je(t){return t[O]||(L(t),t[O])}var Fe=E("ObservableObjectAdministration",Pe);function Ue(t){return!!v(t)&&(L(t),Fe(t[O]))}function ze(t,e){if("object"==typeof t&&null!==t){if(Ae(t))return void 0!==e&&d(!1),t[O].atom;if(De(t))return t[O];if(Ne(t)){var n=t;return void 0===e?n._keysAtom:((r=n._data.get(e)||n._hasMap.get(e))||d(!1),r)}var r;if(L(t),e&&!t[O]&&t[e],Ue(t))return e?((r=t[O].values.get(e))||d(!1),r):d(!1);if(I(t)||wt(t)||Gt(t))return t}else if("function"==typeof t&&Gt(t[O]))return t[O];return d(!1)}function Ve(t,e){return(void 0!==e?ze(t,e):Ue(t)||Ne(t)||De(t)?function t(e,n){return e||d("Expecting some object"),void 0!==n?t(ze(e,n)):I(e)||wt(e)||Gt(e)?e:Ne(e)||De(e)?e:(L(e),e[O]?e[O]:void d(!1))}(t):ze(t)).name}var He=Object.prototype.toString;function Ge(t,e,n){return void 0===n&&(n=-1),function t(e,n,r,i,o){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var a=typeof e;if("function"!==a&&"object"!==a&&"object"!=typeof n)return!1;e=qe(e),n=qe(n);var s=He.call(e);if(s!==He.call(n))return!1;switch(s){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(n)}var c="[object Array]"===s;if(!c){if("object"!=typeof e||"object"!=typeof n)return!1;var u=e.constructor,l=n.constructor;if(u!==l&&!("function"==typeof u&&u instanceof u&&"function"==typeof l&&l instanceof l)&&"constructor"in e&&"constructor"in n)return!1}if(0===r)return!1;r<0&&(r=-1),o=o||[];for(var h=(i=i||[]).length;h--;)if(i[h]===e)return o[h]===n;if(i.push(e),o.push(n),c){if((h=e.length)!==n.length)return!1;for(;h--;)if(!t(e[h],n[h],r-1,i,o))return!1}else{var p=Object.keys(e),f=void 0;if(h=p.length,Object.keys(n).length!==h)return!1;for(;h--;)if(!We(n,f=p[h])||!t(e[f],n[f],r-1,i,o))return!1}return i.pop(),o.pop(),!0}(t,e,n)}function qe(t){return Ae(t)?t.slice():T(t)||Ne(t)?Array.from(t.entries()):S(t)||De(t)?Array.from(t.entries()):t}function We(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ke(t){return t[Symbol.iterator]=Ye,t}function Ye(){return this}if("undefined"==typeof Proxy||"undefined"==typeof Symbol)throw new Error("[mobx] MobX 5+ requires Proxy and Symbol objects. If your environment doesn't support Symbol or Proxy objects, please downgrade to MobX 4. For React Native Android, consider upgrading JSCore.");"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:qt,extras:{getDebugName:Ve},$mobx:O})}).call(this,n(53),n(30))},function(t,e,n){t.exports=n(417)()},function(t,e,n){"use strict";var r=n(78),i={};i[n(15)("toStringTag")]="z",i+""!="[object z]"&&n(34)(Object.prototype,"toString",(function(){return"[object "+r(this)+"]"}),!0)},function(t,e,n){for(var r=n(6),i=n(52),o=n(34),a=n(16),s=n(41),c=n(67),u=n(15),l=u("iterator"),h=u("toStringTag"),p=c.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(f),y=0;y<d.length;y++){var m,g=d[y],v=f[g],b=a[g],_=b&&b.prototype;if(_&&(_[l]||s(_,l,p),_[h]||s(_,h,g),c[g]=p,v))for(m in r)_[m]||o(_,m,r[m],!0)}},function(t,e,n){"use strict";var r=n(83),i=n(154),o=n(67),a=n(45);t.exports=n(109)(Array,"Array",(function(t,e){this._t=a(t),this._i=0,this._k=e}),(function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):i(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])}),"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(143),o=n(203),a=n(204),s=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),c=new o.ErrorFactory("app","Firebase",s),u="[DEFAULT]",l=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.services_={},this.tokenListeners_=[],this.analyticsEventRequests_=[],this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=o.deepCopy(t);var i=this;this.INTERNAL={getUid:function(){return null},getToken:function(){return Promise.resolve(null)},addAuthTokenListener:function(t){r.tokenListeners_.push(t),setTimeout((function(){return t(null)}),0)},removeAuthTokenListener:function(t){r.tokenListeners_=r.tokenListeners_.filter((function(e){return e!==t}))},analytics:{logEvent:function(){i.analyticsEventRequests_.push(arguments)}}}}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){t.firebase_.INTERNAL.removeApp(t.name_);for(var e=[],n=0,r=Object.keys(t.services_);n<r.length;n++)for(var i=r[n],o=0,a=Object.keys(t.services_[i]);o<a.length;o++){var s=a[o];e.push(t.services_[i][s])}return Promise.all(e.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))})).then((function(){t.isDeleted_=!0,t.services_={}}))},t.prototype._getService=function(t,e){if(void 0===e&&(e=u),this.checkDestroyed_(),this.services_[t]||(this.services_[t]={}),!this.services_[t][e]){var n=e!==u?e:void 0,r=this.firebase_.INTERNAL.factories[t](this,this.extendApp.bind(this),n);this.services_[t][e]=r}return this.services_[t][e]},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=u),this.services_[t]&&this.services_[t][e]&&delete this.services_[t][e]},t.prototype.extendApp=function(t){if(o.deepExtend(this,t),t.INTERNAL){if(t.INTERNAL.addAuthTokenListener){for(var e=0,n=this.tokenListeners_;e<n.length;e++){var r=n[e];this.INTERNAL.addAuthTokenListener(r)}this.tokenListeners_=[]}if(t.INTERNAL.analytics){for(var i=0,a=this.analyticsEventRequests_;i<a.length;i++){var s=a[i];this.INTERNAL.analytics.logEvent.apply(void 0,s)}this.analyticsEventRequests_=[]}}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw c.create("app-deleted",{appName:this.name_})},t}();l.prototype.name&&l.prototype.options||l.prototype.delete||console.log("dc");var h=new a.Logger("@firebase/app");
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(o.isBrowser()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var p=self.firebase.SDK_VERSION;p&&p.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var f=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function t(){var e=
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){var e={},n={},r={},i={__esModule:!0,initializeApp:function(n,r){void 0===r&&(r={}),"object"==typeof r&&null!==r||(r={name:r});var a=r;void 0===a.name&&(a.name=u);var s=a.name;if("string"!=typeof s||!s)throw c.create("bad-app-name",{appName:String(s)});if(o.contains(e,s))throw c.create("duplicate-app",{appName:s});var h=new t(n,a,i);return e[s]=h,l(h,"create"),h},app:a,apps:null,SDK_VERSION:"7.2.3",INTERNAL:{registerService:function(e,u,l,p,f){if(void 0===f&&(f=!1),n[e])return h.debug("There were multiple attempts to register service "+e+"."),i[e];function d(t){if(void 0===t&&(t=a()),"function"!=typeof t[e])throw c.create("invalid-app-argument",{appName:e});return t[e]()}return n[e]=u,p&&(r[e]=p,s().forEach((function(t){p("create",t)}))),void 0!==l&&o.deepExtend(d,l),i[e]=d,t.prototype[e]=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this._getService.bind(this,e);return r.apply(this,f?t:[])},d},removeApp:function(t){l(e[t],"delete"),delete e[t]},factories:n,useAsService:p}};function a(t){if(t=t||u,!o.contains(e,t))throw c.create("no-app",{appName:t});return e[t]}function s(){return Object.keys(e).map((function(t){return e[t]}))}function l(t,e){for(var i=0,o=Object.keys(n);i<o.length;i++){var a=p(0,o[i]);if(null===a)return;r[a]&&r[a](e,t)}}function p(t,e){return"serverAuth"===e?null:e}return i.default=i,Object.defineProperty(i,"apps",{get:s}),a.App=t,i}(l);return e.INTERNAL=i.__assign(i.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){o.deepExtend(e,t)},createSubscribe:o.createSubscribe,ErrorFactory:o.ErrorFactory,deepExtend:o.deepExtend}),e}(),d=f.initializeApp;f.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return o.isNode()&&h.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),d.apply(void 0,t)};var y=f;e.default=y,e.firebase=y},function(t,e,n){var r=n(47),i=n(52);n(163)("keys",(function(){return function(t){return i(r(t))}}))},function(t,e,n){"use strict";var r=n(14),i=n(152)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(83)("includes")},function(t,e){t.exports=o},function(t,e,n){"use strict";var r=n(14),i=n(161);r(r.P+r.F*n(162)("includes"),"String",{includes:function(t){return!!~i(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e){t.exports=a},function(t,e,n){var r=n(26).f,i=Function.prototype,o=/^\s*function ([^ (]*)/;"name"in i||n(23)&&r(i,"name",{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){var r=n(16),i=n(37),o=n(41),a=n(34),s=n(44),c=function(t,e,n){var u,l,h,p,f=t&c.F,d=t&c.G,y=t&c.S,m=t&c.P,g=t&c.B,v=d?r:y?r[e]||(r[e]={}):(r[e]||{}).prototype,b=d?i:i[e]||(i[e]={}),_=b.prototype||(b.prototype={});for(u in d&&(n=e),n)h=((l=!f&&v&&void 0!==v[u])?v:n)[u],p=g&&l?s(h,r):m&&"function"==typeof h?s(Function.call,h):h,v&&a(v,u,h,t&c.U),b[u]!=h&&o(b,u,p),m&&_[u]!=h&&(_[u]=h)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e,n){var r=n(79)("wks"),i=n(64),o=n(16).Symbol,a="function"==typeof o;(t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))}).store=r},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){t.exports=s},function(t,e){t.exports=c},function(t,e,n){var r=n(22);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){"use strict";var r,i,o,a,s=n(63),c=n(16),u=n(44),l=n(78),h=n(14),p=n(22),f=n(66),d=n(113),y=n(114),m=n(115),g=n(158).set,v=n(259)(),b=n(116),_=n(159),E=n(260),T=n(160),S=c.TypeError,k=c.process,w=k&&k.versions,A=w&&w.v8||"",O=c.Promise,C="process"==l(k),I=function(){},N=i=b.f,R=!!function(){try{var t=O.resolve(1),e=(t.constructor={})[n(15)("species")]=function(t){t(I,I)};return(C||"function"==typeof PromiseRejectionEvent)&&t.then(I)instanceof e&&0!==A.indexOf("6.6")&&-1===E.indexOf("Chrome/66")}catch(t){}}(),B=function(t){var e;return!(!p(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;v((function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a,s=i?e.ok:e.fail,c=e.resolve,u=e.reject,l=e.domain;try{s?(i||(2==t._h&&M(t),t._h=1),!0===s?n=r:(l&&l.enter(),n=s(r),l&&(l.exit(),a=!0)),n===e.promise?u(S("Promise-chain cycle")):(o=B(n))?o.call(n,c,u):c(n)):u(r)}catch(t){l&&!a&&l.exit(),u(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&P(t)}))}},P=function(t){g.call(c,(function(){var e,n,r,i=t._v,o=x(t);if(o&&(e=_((function(){C?k.emit("unhandledRejection",i,t):(n=c.onunhandledrejection)?n({promise:t,reason:i}):(r=c.console)&&r.error&&r.error("Unhandled promise rejection",i)})),t._h=C||x(t)?2:1),t._a=void 0,o&&e.e)throw e.v}))},x=function(t){return 1!==t._h&&0===(t._a||t._c).length},M=function(t){g.call(c,(function(){var e;C?k.emit("rejectionHandled",t):(e=c.onrejectionhandled)&&e({promise:t,reason:t._v})}))},L=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},j=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw S("Promise can't be resolved itself");(e=B(t))?v((function(){var r={_w:n,_d:!1};try{e.call(t,u(j,r,1),u(L,r,1))}catch(t){L.call(r,t)}})):(n._v=t,n._s=1,D(n,!1))}catch(t){L.call({_w:n,_d:!1},t)}}};R||(O=function(t){d(this,O,"Promise","_h"),f(t),r.call(this);try{t(u(j,this,1),u(L,this,1))}catch(t){L.call(this,t)}},(r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=n(117)(O.prototype,{then:function(t,e){var n=N(m(this,O));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=C?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=u(j,t,1),this.reject=u(L,t,1)},b.f=N=function(t){return t===O||t===a?new o(t):i(t)}),h(h.G+h.W+h.F*!R,{Promise:O}),n(68)(O,"Promise"),n(118)("Promise"),a=n(37).Promise,h(h.S+h.F*!R,"Promise",{reject:function(t){var e=N(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!R),"Promise",{resolve:function(t){return T(s&&this===a?O:this,t)}}),h(h.S+h.F*!(R&&n(119)((function(t){O.all(t).catch(I)}))),"Promise",{all:function(t){var e=this,n=N(e),r=n.resolve,i=n.reject,o=_((function(){var n=[],o=0,a=1;y(t,!1,(function(t){var s=o++,c=!1;n.push(void 0),a++,e.resolve(t).then((function(t){c||(c=!0,n[s]=t,--a||r(n))}),i)})),--a||r(n)}));return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=N(e),r=n.reject,i=_((function(){y(t,!1,(function(t){e.resolve(t).then(n.resolve,r)}))}));return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=u},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(24)((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}))},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){"use strict";var r=n(14),i=n(164)(5),o=!0;"find"in[]&&Array(1).find((function(){o=!1})),r(r.P+r.F*o,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(83)("find")},function(t,e,n){var r=n(19),i=n(149),o=n(80),a=Object.defineProperty;e.f=n(23)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(14),i=n(311),o=n(45),a=n(89),s=n(169);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),c=a.f,u=i(r),l={},h=0;u.length>h;)void 0!==(n=c(r,e=u[h++]))&&s(l,e,n);return l}})},function(t,e,n){"use strict";var r=n(16),i=n(42),o=n(23),a=n(14),s=n(34),c=n(91).KEY,u=n(24),l=n(79),h=n(68),p=n(64),f=n(15),d=n(183),y=n(312),m=n(313),g=n(165),v=n(19),b=n(22),_=n(47),E=n(45),T=n(80),S=n(65),k=n(82),w=n(314),A=n(89),O=n(87),C=n(26),I=n(52),N=A.f,R=C.f,B=w.f,D=r.Symbol,P=r.JSON,x=P&&P.stringify,M=f("_hidden"),L=f("toPrimitive"),j={}.propertyIsEnumerable,F=l("symbol-registry"),U=l("symbols"),z=l("op-symbols"),V=Object.prototype,H="function"==typeof D&&!!O.f,G=r.QObject,q=!G||!G.prototype||!G.prototype.findChild,W=o&&u((function(){return 7!=k(R({},"a",{get:function(){return R(this,"a",{value:7}).a}})).a}))?function(t,e,n){var r=N(V,e);r&&delete V[e],R(t,e,n),r&&t!==V&&R(V,e,r)}:R,K=function(t){var e=U[t]=k(D.prototype);return e._k=t,e},Y=H&&"symbol"==typeof D.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof D},J=function(t,e,n){return t===V&&J(z,e,n),v(t),e=T(e,!0),v(n),i(U,e)?(n.enumerable?(i(t,M)&&t[M][e]&&(t[M][e]=!1),n=k(n,{enumerable:S(0,!1)})):(i(t,M)||R(t,M,S(1,{})),t[M][e]=!0),W(t,e,n)):R(t,e,n)},Q=function(t,e){v(t);for(var n,r=m(e=E(e)),i=0,o=r.length;o>i;)J(t,n=r[i++],e[n]);return t},X=function(t){var e=j.call(this,t=T(t,!0));return!(this===V&&i(U,t)&&!i(z,t))&&(!(e||!i(this,t)||!i(U,t)||i(this,M)&&this[M][t])||e)},Z=function(t,e){if(t=E(t),e=T(e,!0),t!==V||!i(U,e)||i(z,e)){var n=N(t,e);return!n||!i(U,e)||i(t,M)&&t[M][e]||(n.enumerable=!0),n}},$=function(t){for(var e,n=B(E(t)),r=[],o=0;n.length>o;)i(U,e=n[o++])||e==M||e==c||r.push(e);return r},tt=function(t){for(var e,n=t===V,r=B(n?z:E(t)),o=[],a=0;r.length>a;)!i(U,e=r[a++])||n&&!i(V,e)||o.push(U[e]);return o};H||(s((D=function(){if(this instanceof D)throw TypeError("Symbol is not a constructor!");var t=p(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(z,n),i(this,M)&&i(this[M],t)&&(this[M][t]=!1),W(this,t,S(1,n))};return o&&q&&W(V,t,{configurable:!0,set:e}),K(t)}).prototype,"toString",(function(){return this._k})),A.f=Z,C.f=J,n(70).f=w.f=$,n(69).f=X,O.f=tt,o&&!n(63)&&s(V,"propertyIsEnumerable",X,!0),d.f=function(t){return K(f(t))}),a(a.G+a.W+a.F*!H,{Symbol:D});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),nt=0;et.length>nt;)f(et[nt++]);for(var rt=I(f.store),it=0;rt.length>it;)y(rt[it++]);a(a.S+a.F*!H,"Symbol",{for:function(t){return i(F,t+="")?F[t]:F[t]=D(t)},keyFor:function(t){if(!Y(t))throw TypeError(t+" is not a symbol!");for(var e in F)if(F[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),a(a.S+a.F*!H,"Object",{create:function(t,e){return void 0===e?k(t):Q(k(t),e)},defineProperty:J,defineProperties:Q,getOwnPropertyDescriptor:Z,getOwnPropertyNames:$,getOwnPropertySymbols:tt});var ot=u((function(){O.f(1)}));a(a.S+a.F*ot,"Object",{getOwnPropertySymbols:function(t){return O.f(_(t))}}),P&&a(a.S+a.F*(!H||u((function(){var t=D();return"[null]"!=x([t])||"{}"!=x({a:t})||"{}"!=x(Object(t))}))),"JSON",{stringify:function(t){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=e=r[1],(b(e)||void 0!==t)&&!Y(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!Y(e))return e}),r[1]=e,x.apply(P,r)}}),D.prototype[L]||n(41)(D.prototype,L,D.prototype.valueOf),h(D,"Symbol"),h(Math,"Math",!0),h(r.JSON,"JSON",!0)},function(t,e,n){t.exports=function(){"use strict";var t=Array.prototype.slice;function e(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function n(t){return a(t)?t:W(t)}function r(t){return s(t)?t:K(t)}function i(t){return c(t)?t:Y(t)}function o(t){return a(t)&&!u(t)?t:J(t)}function a(t){return!(!t||!t[h])}function s(t){return!(!t||!t[p])}function c(t){return!(!t||!t[f])}function u(t){return s(t)||c(t)}function l(t){return!(!t||!t[d])}e(r,n),e(i,n),e(o,n),n.isIterable=a,n.isKeyed=s,n.isIndexed=c,n.isAssociative=u,n.isOrdered=l,n.Keyed=r,n.Indexed=i,n.Set=o;var h="@@__IMMUTABLE_ITERABLE__@@",p="@@__IMMUTABLE_KEYED__@@",f="@@__IMMUTABLE_INDEXED__@@",d="@@__IMMUTABLE_ORDERED__@@",y=5,m=1<<y,g=m-1,v={},b={value:!1},_={value:!1};function E(t){return t.value=!1,t}function T(t){t&&(t.value=!0)}function S(){}function k(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function w(t){return void 0===t.size&&(t.size=t.__iterate(O)),t.size}function A(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?w(t)+e:e}function O(){return!0}function C(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function I(t,e){return R(t,e,0)}function N(t,e){return R(t,e,e)}function R(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}var B=0,D=1,P=2,x="function"==typeof Symbol&&Symbol.iterator,M="@@iterator",L=x||M;function j(t){this.next=t}function F(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function U(){return{value:void 0,done:!0}}function z(t){return!!G(t)}function V(t){return t&&"function"==typeof t.next}function H(t){var e=G(t);return e&&e.call(t)}function G(t){var e=t&&(x&&t[x]||t[M]);if("function"==typeof e)return e}function q(t){return t&&"number"==typeof t.length}function W(t){return null==t?ot():a(t)?t.toSeq():function(t){var e=ct(t)||"object"==typeof t&&new et(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}(t)}function K(t){return null==t?ot().toKeyedSeq():a(t)?s(t)?t.toSeq():t.fromEntrySeq():at(t)}function Y(t){return null==t?ot():a(t)?s(t)?t.entrySeq():t.toIndexedSeq():st(t)}function J(t){return(null==t?ot():a(t)?s(t)?t.entrySeq():t:st(t)).toSetSeq()}j.prototype.toString=function(){return"[Iterator]"},j.KEYS=B,j.VALUES=D,j.ENTRIES=P,j.prototype.inspect=j.prototype.toSource=function(){return this.toString()},j.prototype[L]=function(){return this},e(W,n),W.of=function(){return W(arguments)},W.prototype.toSeq=function(){return this},W.prototype.toString=function(){return this.__toString("Seq {","}")},W.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},W.prototype.__iterate=function(t,e){return ut(this,t,e,!0)},W.prototype.__iterator=function(t,e){return lt(this,t,e,!0)},e(K,W),K.prototype.toKeyedSeq=function(){return this},e(Y,W),Y.of=function(){return Y(arguments)},Y.prototype.toIndexedSeq=function(){return this},Y.prototype.toString=function(){return this.__toString("Seq [","]")},Y.prototype.__iterate=function(t,e){return ut(this,t,e,!1)},Y.prototype.__iterator=function(t,e){return lt(this,t,e,!1)},e(J,W),J.of=function(){return J(arguments)},J.prototype.toSetSeq=function(){return this},W.isSeq=it,W.Keyed=K,W.Set=J,W.Indexed=Y;var Q,X,Z,$="@@__IMMUTABLE_SEQ__@@";function tt(t){this._array=t,this.size=t.length}function et(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function nt(t){this._iterable=t,this.size=t.length||t.size}function rt(t){this._iterator=t,this._iteratorCache=[]}function it(t){return!(!t||!t[$])}function ot(){return Q||(Q=new tt([]))}function at(t){var e=Array.isArray(t)?new tt(t).fromEntrySeq():V(t)?new rt(t).fromEntrySeq():z(t)?new nt(t).fromEntrySeq():"object"==typeof t?new et(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function st(t){var e=ct(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function ct(t){return q(t)?new tt(t):V(t)?new rt(t):z(t)?new nt(t):void 0}function ut(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,a=0;a<=o;a++){var s=i[n?o-a:a];if(!1===e(s[1],r?s[0]:a,t))return a+1}return a}return t.__iterateUncached(e,n)}function lt(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,a=0;return new j((function(){var t=i[n?o-a:a];return a++>o?{value:void 0,done:!0}:F(e,r?t[0]:a-1,t[1])}))}return t.__iteratorUncached(e,n)}function ht(t,e){return e?function t(e,n,r,i){return Array.isArray(n)?e.call(i,r,Y(n).map((function(r,i){return t(e,r,i,n)}))):ft(n)?e.call(i,r,K(n).map((function(r,i){return t(e,r,i,n)}))):n}(e,t,"",{"":t}):pt(t)}function pt(t){return Array.isArray(t)?Y(t).map(pt).toList():ft(t)?K(t).map(pt).toMap():t}function ft(t){return t&&(t.constructor===Object||void 0===t.constructor)}function dt(t,e){if(t===e||t!=t&&e!=e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if((t=t.valueOf())===(e=e.valueOf())||t!=t&&e!=e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function yt(t,e){if(t===e)return!0;if(!a(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||s(t)!==s(e)||c(t)!==c(e)||l(t)!==l(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!u(t);if(l(t)){var r=t.entries();return e.every((function(t,e){var i=r.next().value;return i&&dt(i[1],t)&&(n||dt(i[0],e))}))&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var h=!0,p=e.__iterate((function(e,r){if(n?!t.has(e):i?!dt(e,t.get(r,v)):!dt(t.get(r,v),e))return h=!1,!1}));return h&&t.size===p}function mt(t,e){if(!(this instanceof mt))return new mt(t,e);if(this._value=t,this.size=void 0===e?1/0:Math.max(0,e),0===this.size){if(X)return X;X=this}}function gt(t,e){if(!t)throw new Error(e)}function vt(t,e,n){if(!(this instanceof vt))return new vt(t,e,n);if(gt(0!==n,"Cannot step a Range by 0"),t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,this.size=Math.max(0,Math.ceil((e-t)/n-1)+1),0===this.size){if(Z)return Z;Z=this}}function bt(){throw TypeError("Abstract")}function _t(){}function Et(){}function Tt(){}W.prototype[$]=!0,e(tt,Y),tt.prototype.get=function(t,e){return this.has(t)?this._array[A(this,t)]:e},tt.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===t(n[e?r-i:i],i,this))return i+1;return i},tt.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new j((function(){return i>r?{value:void 0,done:!0}:F(t,i,n[e?r-i++:i++])}))},e(et,K),et.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},et.prototype.has=function(t){return this._object.hasOwnProperty(t)},et.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var a=r[e?i-o:o];if(!1===t(n[a],a,this))return o+1}return o},et.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new j((function(){var a=r[e?i-o:o];return o++>i?{value:void 0,done:!0}:F(t,a,n[a])}))},et.prototype[d]=!0,e(nt,Y),nt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=H(this._iterable),r=0;if(V(n))for(var i;!(i=n.next()).done&&!1!==t(i.value,r++,this););return r},nt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=H(this._iterable);if(!V(n))return new j(U);var r=0;return new j((function(){var e=n.next();return e.done?e:F(t,r++,e.value)}))},e(rt,Y),rt.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n,r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,this))return o;for(;!(n=r.next()).done;){var a=n.value;if(i[o]=a,!1===t(a,o++,this))break}return o},rt.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new j((function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return F(t,i,r[i++])}))},e(mt,Y),mt.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},mt.prototype.get=function(t,e){return this.has(t)?this._value:e},mt.prototype.includes=function(t){return dt(this._value,t)},mt.prototype.slice=function(t,e){var n=this.size;return C(t,e,n)?this:new mt(this._value,N(e,n)-I(t,n))},mt.prototype.reverse=function(){return this},mt.prototype.indexOf=function(t){return dt(this._value,t)?0:-1},mt.prototype.lastIndexOf=function(t){return dt(this._value,t)?this.size:-1},mt.prototype.__iterate=function(t,e){for(var n=0;n<this.size;n++)if(!1===t(this._value,n,this))return n+1;return n},mt.prototype.__iterator=function(t,e){var n=this,r=0;return new j((function(){return r<n.size?F(t,r++,n._value):{value:void 0,done:!0}}))},mt.prototype.equals=function(t){return t instanceof mt?dt(this._value,t._value):yt(t)},e(vt,Y),vt.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},vt.prototype.get=function(t,e){return this.has(t)?this._start+A(this,t)*this._step:e},vt.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},vt.prototype.slice=function(t,e){return C(t,e,this.size)?this:(t=I(t,this.size),(e=N(e,this.size))<=t?new vt(0,0):new vt(this.get(t,this._end),this.get(e,this._end),this._step))},vt.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},vt.prototype.lastIndexOf=function(t){return this.indexOf(t)},vt.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===t(i,o,this))return o+1;i+=e?-r:r}return o},vt.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new j((function(){var a=i;return i+=e?-r:r,o>n?{value:void 0,done:!0}:F(t,o++,a)}))},vt.prototype.equals=function(t){return t instanceof vt?this._start===t._start&&this._end===t._end&&this._step===t._step:yt(this,t)},e(bt,n),e(_t,bt),e(Et,bt),e(Tt,bt),bt.Keyed=_t,bt.Indexed=Et,bt.Set=Tt;var St="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){var n=65535&(t|=0),r=65535&(e|=0);return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0};function kt(t){return t>>>1&1073741824|3221225471&t}function wt(t){if(!1===t||null==t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null==t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!=t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)n^=t/=4294967295;return kt(n)}if("string"===e)return t.length>Dt?function(t){var e=Mt[t];return void 0===e&&(e=At(t),xt===Pt&&(xt=0,Mt={}),xt++,Mt[t]=e),e}(t):At(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return function(t){var e;if(Nt&&void 0!==(e=Ot.get(t)))return e;if(void 0!==(e=t[Bt]))return e;if(!It){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Bt]))return e;if(void 0!==(e=function(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}(t)))return e}if(e=++Rt,1073741824&Rt&&(Rt=0),Nt)Ot.set(t,e);else{if(void 0!==Ct&&!1===Ct(t))throw new Error("Non-extensible objects are not allowed as keys.");if(It)Object.defineProperty(t,Bt,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Bt]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Bt]=e}}return e}(t);if("function"==typeof t.toString)return At(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function At(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return kt(e)}var Ot,Ct=Object.isExtensible,It=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Nt="function"==typeof WeakMap;Nt&&(Ot=new WeakMap);var Rt=0,Bt="__immutablehash__";"function"==typeof Symbol&&(Bt=Symbol(Bt));var Dt=16,Pt=255,xt=0,Mt={};function Lt(t){gt(t!==1/0,"Cannot perform this action with an infinite size.")}function jt(t){return null==t?Zt():Ft(t)&&!l(t)?t:Zt().withMutations((function(e){var n=r(t);Lt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Ft(t){return!(!t||!t[zt])}e(jt,_t),jt.of=function(){var e=t.call(arguments,0);return Zt().withMutations((function(t){for(var n=0;n<e.length;n+=2){if(n+1>=e.length)throw new Error("Missing value for key: "+e[n]);t.set(e[n],e[n+1])}}))},jt.prototype.toString=function(){return this.__toString("Map {","}")},jt.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},jt.prototype.set=function(t,e){return $t(this,t,e)},jt.prototype.setIn=function(t,e){return this.updateIn(t,v,(function(){return e}))},jt.prototype.remove=function(t){return $t(this,t,v)},jt.prototype.deleteIn=function(t){return this.updateIn(t,(function(){return v}))},jt.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},jt.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=function t(e,n,r,i){var o=e===v,a=n.next();if(a.done){var s=o?r:e,c=i(s);return c===s?e:c}gt(o||e&&e.set,"invalid keyPath");var u=a.value,l=o?v:e.get(u,v),h=t(l,n,r,i);return h===l?e:h===v?e.remove(u):(o?Zt():e).set(u,h)}(this,rn(t),e,n);return r===v?void 0:r},jt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Zt()},jt.prototype.merge=function(){return re(this,void 0,arguments)},jt.prototype.mergeWith=function(e){var n=t.call(arguments,1);return re(this,e,n)},jt.prototype.mergeIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Zt(),(function(t){return"function"==typeof t.merge?t.merge.apply(t,n):n[n.length-1]}))},jt.prototype.mergeDeep=function(){return re(this,ie,arguments)},jt.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return re(this,oe(e),n)},jt.prototype.mergeDeepIn=function(e){var n=t.call(arguments,1);return this.updateIn(e,Zt(),(function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,n):n[n.length-1]}))},jt.prototype.sort=function(t){return Ie(We(this,t))},jt.prototype.sortBy=function(t,e){return Ie(We(this,e,t))},jt.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},jt.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new S)},jt.prototype.asImmutable=function(){return this.__ensureOwner()},jt.prototype.wasAltered=function(){return this.__altered},jt.prototype.__iterator=function(t,e){return new Yt(this,t,e)},jt.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate((function(e){return r++,t(e[1],e[0],n)}),e),r},jt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Xt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},jt.isMap=Ft;var Ut,zt="@@__IMMUTABLE_MAP__@@",Vt=jt.prototype;function Ht(t,e){this.ownerID=t,this.entries=e}function Gt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function qt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function Wt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function Kt(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function Yt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&Qt(t._root)}function Jt(t,e){return F(t,e[0],e[1])}function Qt(t,e){return{node:t,index:0,__prev:e}}function Xt(t,e,n,r){var i=Object.create(Vt);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Zt(){return Ut||(Ut=Xt(0))}function $t(t,e,n){var r,i;if(t._root){var o=E(b),a=E(_);if(r=te(t._root,t.__ownerID,0,void 0,e,n,o,a),!a.value)return t;i=t.size+(o.value?n===v?-1:1:0)}else{if(n===v)return t;i=1,r=new Ht(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?Xt(i,r):Zt()}function te(t,e,n,r,i,o,a,s){return t?t.update(e,n,r,i,o,a,s):o===v?t:(T(s),T(a),new Kt(e,r,[i,o]))}function ee(t){return t.constructor===Kt||t.constructor===Wt}function ne(t,e,n,r,i){if(t.keyHash===r)return new Wt(e,r,[t.entry,i]);var o,a=(0===n?t.keyHash:t.keyHash>>>n)&g,s=(0===n?r:r>>>n)&g;return new Gt(e,1<<a|1<<s,a===s?[ne(t,e,n+y,r,i)]:(o=new Kt(e,r,i),a<s?[t,o]:[o,t]))}function re(t,e,n){for(var i=[],o=0;o<n.length;o++){var s=n[o],c=r(s);a(s)||(c=c.map((function(t){return ht(t)}))),i.push(c)}return ae(t,e,i)}function ie(t,e,n){return t&&t.mergeDeep&&a(e)?t.mergeDeep(e):dt(t,e)?t:e}function oe(t){return function(e,n,r){if(e&&e.mergeDeepWith&&a(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return dt(e,i)?e:i}}function ae(t,e,n){return 0===(n=n.filter((function(t){return 0!==t.size}))).length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations((function(t){for(var r=e?function(n,r){t.update(r,v,(function(t){return t===v?n:e(t,n,r)}))}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)})):t.constructor(n[0])}function se(t){return t=(t=(858993459&(t-=t>>1&1431655765))+(t>>2&858993459))+(t>>4)&252645135,127&(t+=t>>8)+(t>>16)}function ce(t,e,n,r){var i=r?t:k(t);return i[e]=n,i}Vt[zt]=!0,Vt.delete=Vt.remove,Vt.removeIn=Vt.deleteIn,Ht.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(dt(n,i[o][0]))return i[o][1];return r},Ht.prototype.update=function(t,e,n,r,i,o,a){for(var s=i===v,c=this.entries,u=0,l=c.length;u<l&&!dt(r,c[u][0]);u++);var h=u<l;if(h?c[u][1]===i:s)return this;if(T(a),(s||!h)&&T(o),!s||1!==c.length){if(!h&&!s&&c.length>=ue)return function(t,e,n,r){t||(t=new S);for(var i=new Kt(t,wt(n),[n,r]),o=0;o<e.length;o++){var a=e[o];i=i.update(t,0,void 0,a[0],a[1])}return i}(t,c,r,i);var p=t&&t===this.ownerID,f=p?c:k(c);return h?s?u===l-1?f.pop():f[u]=f.pop():f[u]=[r,i]:f.push([r,i]),p?(this.entries=f,this):new Ht(t,f)}},Gt.prototype.get=function(t,e,n,r){void 0===e&&(e=wt(n));var i=1<<((0===t?e:e>>>t)&g),o=this.bitmap;return 0==(o&i)?r:this.nodes[se(o&i-1)].get(t+y,e,n,r)},Gt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=wt(r));var s=(0===e?n:n>>>e)&g,c=1<<s,u=this.bitmap,l=0!=(u&c);if(!l&&i===v)return this;var h=se(u&c-1),p=this.nodes,f=l?p[h]:void 0,d=te(f,t,e+y,n,r,i,o,a);if(d===f)return this;if(!l&&d&&p.length>=le)return function(t,e,n,r,i){for(var o=0,a=new Array(m),s=0;0!==n;s++,n>>>=1)a[s]=1&n?e[o++]:void 0;return a[r]=i,new qt(t,o+1,a)}(t,p,u,s,d);if(l&&!d&&2===p.length&&ee(p[1^h]))return p[1^h];if(l&&d&&1===p.length&&ee(d))return d;var b=t&&t===this.ownerID,_=l?d?u:u^c:u|c,E=l?d?ce(p,h,d,b):function(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,a=0;a<r;a++)a===e&&(o=1),i[a]=t[a+o];return i}(p,h,b):function(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),a=0,s=0;s<i;s++)s===e?(o[s]=n,a=-1):o[s]=t[s+a];return o}(p,h,d,b);return b?(this.bitmap=_,this.nodes=E,this):new Gt(t,_,E)},qt.prototype.get=function(t,e,n,r){void 0===e&&(e=wt(n));var i=(0===t?e:e>>>t)&g,o=this.nodes[i];return o?o.get(t+y,e,n,r):r},qt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=wt(r));var s=(0===e?n:n>>>e)&g,c=i===v,u=this.nodes,l=u[s];if(c&&!l)return this;var h=te(l,t,e+y,n,r,i,o,a);if(h===l)return this;var p=this.count;if(l){if(!h&&--p<he)return function(t,e,n,r){for(var i=0,o=0,a=new Array(n),s=0,c=1,u=e.length;s<u;s++,c<<=1){var l=e[s];void 0!==l&&s!==r&&(i|=c,a[o++]=l)}return new Gt(t,i,a)}(t,u,p,s)}else p++;var f=t&&t===this.ownerID,d=ce(u,s,h,f);return f?(this.count=p,this.nodes=d,this):new qt(t,p,d)},Wt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,a=i.length;o<a;o++)if(dt(n,i[o][0]))return i[o][1];return r},Wt.prototype.update=function(t,e,n,r,i,o,a){void 0===n&&(n=wt(r));var s=i===v;if(n!==this.keyHash)return s?this:(T(a),T(o),ne(this,t,e,n,[r,i]));for(var c=this.entries,u=0,l=c.length;u<l&&!dt(r,c[u][0]);u++);var h=u<l;if(h?c[u][1]===i:s)return this;if(T(a),(s||!h)&&T(o),s&&2===l)return new Kt(t,this.keyHash,c[1^u]);var p=t&&t===this.ownerID,f=p?c:k(c);return h?s?u===l-1?f.pop():f[u]=f.pop():f[u]=[r,i]:f.push([r,i]),p?(this.entries=f,this):new Wt(t,this.keyHash,f)},Kt.prototype.get=function(t,e,n,r){return dt(n,this.entry[0])?this.entry[1]:r},Kt.prototype.update=function(t,e,n,r,i,o,a){var s=i===v,c=dt(r,this.entry[0]);return(c?i===this.entry[1]:s)?this:(T(a),s?void T(o):c?t&&t===this.ownerID?(this.entry[1]=i,this):new Kt(t,this.keyHash,[r,i]):(T(o),ne(this,t,e,wt(r),[r,i])))},Ht.prototype.iterate=Wt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},Gt.prototype.iterate=qt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},Kt.prototype.iterate=function(t,e){return t(this.entry)},e(Yt,j),Yt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return Jt(t,r.entry)}else if(r.entries){if(i<=(n=r.entries.length-1))return Jt(t,r.entries[this._reverse?n-i:i])}else if(i<=(n=r.nodes.length-1)){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return Jt(t,o.entry);e=this._stack=Qt(o,e)}continue}e=this._stack=this._stack.__prev}return{value:void 0,done:!0}};var ue=m/4,le=m/2,he=m/4;function pe(t){var e=Te();if(null==t)return e;if(fe(t))return t;var n=i(t),r=n.size;return 0===r?e:(Lt(r),r>0&&r<m?Ee(0,r,y,null,new me(n.toArray())):e.withMutations((function(t){t.setSize(r),n.forEach((function(e,n){return t.set(n,e)}))})))}function fe(t){return!(!t||!t[de])}e(pe,Et),pe.of=function(){return this(arguments)},pe.prototype.toString=function(){return this.__toString("List [","]")},pe.prototype.get=function(t,e){if((t=A(this,t))>=0&&t<this.size){var n=we(this,t+=this._origin);return n&&n.array[t&g]}return e},pe.prototype.set=function(t,e){return function(t,e,n){if((e=A(t,e))!=e)return t;if(e>=t.size||e<0)return t.withMutations((function(t){e<0?Ae(t,e).set(0,n):Ae(t,0,e+1).set(e,n)}));e+=t._origin;var r=t._tail,i=t._root,o=E(_);return e>=Ce(t._capacity)?r=Se(r,t.__ownerID,0,e,n,o):i=Se(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Ee(t._origin,t._capacity,t._level,i,r):t}(this,t,e)},pe.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},pe.prototype.insert=function(t,e){return this.splice(t,0,e)},pe.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=y,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Te()},pe.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations((function(n){Ae(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])}))},pe.prototype.pop=function(){return Ae(this,0,-1)},pe.prototype.unshift=function(){var t=arguments;return this.withMutations((function(e){Ae(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])}))},pe.prototype.shift=function(){return Ae(this,1)},pe.prototype.merge=function(){return Oe(this,void 0,arguments)},pe.prototype.mergeWith=function(e){var n=t.call(arguments,1);return Oe(this,e,n)},pe.prototype.mergeDeep=function(){return Oe(this,ie,arguments)},pe.prototype.mergeDeepWith=function(e){var n=t.call(arguments,1);return Oe(this,oe(e),n)},pe.prototype.setSize=function(t){return Ae(this,0,t)},pe.prototype.slice=function(t,e){var n=this.size;return C(t,e,n)?this:Ae(this,I(t,n),N(e,n))},pe.prototype.__iterator=function(t,e){var n=0,r=_e(this,e);return new j((function(){var e=r();return e===be?{value:void 0,done:!0}:F(t,n++,e)}))},pe.prototype.__iterate=function(t,e){for(var n,r=0,i=_e(this,e);(n=i())!==be&&!1!==t(n,r++,this););return r},pe.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Ee(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},pe.isList=fe;var de="@@__IMMUTABLE_LIST__@@",ye=pe.prototype;function me(t,e){this.array=t,this.ownerID=e}ye[de]=!0,ye.delete=ye.remove,ye.setIn=Vt.setIn,ye.deleteIn=ye.removeIn=Vt.removeIn,ye.update=Vt.update,ye.updateIn=Vt.updateIn,ye.mergeIn=Vt.mergeIn,ye.mergeDeepIn=Vt.mergeDeepIn,ye.withMutations=Vt.withMutations,ye.asMutable=Vt.asMutable,ye.asImmutable=Vt.asImmutable,ye.wasAltered=Vt.wasAltered,me.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&g;if(r>=this.array.length)return new me([],t);var i,o=0===r;if(e>0){var a=this.array[r];if((i=a&&a.removeBefore(t,e-y,n))===a&&o)return this}if(o&&!i)return this;var s=ke(this,t);if(!o)for(var c=0;c<r;c++)s.array[c]=void 0;return i&&(s.array[r]=i),s},me.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r,i=n-1>>>e&g;if(i>=this.array.length)return this;if(e>0){var o=this.array[i];if((r=o&&o.removeAfter(t,e-y,n))===o&&i===this.array.length-1)return this}var a=ke(this,t);return a.array.splice(i+1),r&&(a.array[i]=r),a};var ge,ve,be={};function _e(t,e){var n=t._origin,r=t._capacity,i=Ce(r),o=t._tail;return function t(a,s,c){return 0===s?function(t,a){var s=a===i?o&&o.array:t&&t.array,c=a>n?0:n-a,u=r-a;return u>m&&(u=m),function(){if(c===u)return be;var t=e?--u:c++;return s&&s[t]}}(a,c):function(i,o,a){var s,c=i&&i.array,u=a>n?0:n-a>>o,l=1+(r-a>>o);return l>m&&(l=m),function(){for(;;){if(s){var n=s();if(n!==be)return n;s=null}if(u===l)return be;var r=e?--l:u++;s=t(c&&c[r],o-y,a+(r<<o))}}}(a,s,c)}(t._root,t._level,0)}function Ee(t,e,n,r,i,o,a){var s=Object.create(ye);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=a,s.__altered=!1,s}function Te(){return ge||(ge=Ee(0,0,y))}function Se(t,e,n,r,i,o){var a,s=r>>>n&g,c=t&&s<t.array.length;if(!c&&void 0===i)return t;if(n>0){var u=t&&t.array[s],l=Se(u,e,n-y,r,i,o);return l===u?t:((a=ke(t,e)).array[s]=l,a)}return c&&t.array[s]===i?t:(T(o),a=ke(t,e),void 0===i&&s===a.array.length-1?a.array.pop():a.array[s]=i,a)}function ke(t,e){return e&&t&&e===t.ownerID?t:new me(t?t.array.slice():[],e)}function we(t,e){if(e>=Ce(t._capacity))return t._tail;if(e<1<<t._level+y){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&g],r-=y;return n}}function Ae(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new S,i=t._origin,o=t._capacity,a=i+e,s=void 0===n?o:n<0?o+n:i+n;if(a===i&&s===o)return t;if(a>=s)return t.clear();for(var c=t._level,u=t._root,l=0;a+l<0;)u=new me(u&&u.array.length?[void 0,u]:[],r),l+=1<<(c+=y);l&&(a+=l,i+=l,s+=l,o+=l);for(var h=Ce(o),p=Ce(s);p>=1<<c+y;)u=new me(u&&u.array.length?[u]:[],r),c+=y;var f=t._tail,d=p<h?we(t,s-1):p>h?new me([],r):f;if(f&&p>h&&a<o&&f.array.length){for(var m=u=ke(u,r),v=c;v>y;v-=y){var b=h>>>v&g;m=m.array[b]=ke(m.array[b],r)}m.array[h>>>y&g]=f}if(s<o&&(d=d&&d.removeAfter(r,0,s)),a>=p)a-=p,s-=p,c=y,u=null,d=d&&d.removeBefore(r,0,a);else if(a>i||p<h){for(l=0;u;){var _=a>>>c&g;if(_!==p>>>c&g)break;_&&(l+=(1<<c)*_),c-=y,u=u.array[_]}u&&a>i&&(u=u.removeBefore(r,c,a-l)),u&&p<h&&(u=u.removeAfter(r,c,p-l)),l&&(a-=l,s-=l)}return t.__ownerID?(t.size=s-a,t._origin=a,t._capacity=s,t._level=c,t._root=u,t._tail=d,t.__hash=void 0,t.__altered=!0,t):Ee(a,s,c,u,d)}function Oe(t,e,n){for(var r=[],o=0,s=0;s<n.length;s++){var c=n[s],u=i(c);u.size>o&&(o=u.size),a(c)||(u=u.map((function(t){return ht(t)}))),r.push(u)}return o>t.size&&(t=t.setSize(o)),ae(t,e,r)}function Ce(t){return t<m?0:t-1>>>y<<y}function Ie(t){return null==t?Be():Ne(t)?t:Be().withMutations((function(e){var n=r(t);Lt(n.size),n.forEach((function(t,n){return e.set(n,t)}))}))}function Ne(t){return Ft(t)&&l(t)}function Re(t,e,n,r){var i=Object.create(Ie.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Be(){return ve||(ve=Re(Zt(),Te()))}function De(t,e,n){var r,i,o=t._map,a=t._list,s=o.get(e),c=void 0!==s;if(n===v){if(!c)return t;a.size>=m&&a.size>=2*o.size?(r=(i=a.filter((function(t,e){return void 0!==t&&s!==e}))).toKeyedSeq().map((function(t){return t[0]})).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=s===a.size-1?a.pop():a.set(s,void 0))}else if(c){if(n===a.get(s)[1])return t;r=o,i=a.set(s,[e,n])}else r=o.set(e,a.size),i=a.set(a.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):Re(r,i)}function Pe(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function xe(t){this._iter=t,this.size=t.size}function Me(t){this._iter=t,this.size=t.size}function Le(t){this._iter=t,this.size=t.size}function je(t){var e=tn(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=en,e.__iterateUncached=function(e,n){var r=this;return t.__iterate((function(t,n){return!1!==e(n,t,r)}),n)},e.__iteratorUncached=function(e,n){if(e===P){var r=t.__iterator(e,n);return new j((function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t}))}return t.__iterator(e===D?B:D,n)},e}function Fe(t,e,n){var r=tn(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,v);return o===v?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate((function(t,i,a){return!1!==r(e.call(n,t,i,a),i,o)}),i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(P,i);return new j((function(){var i=o.next();if(i.done)return i;var a=i.value,s=a[0];return F(r,s,e.call(n,a[1],s,t),i)}))},r}function Ue(t,e){var n=tn(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=je(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=en,n.__iterate=function(e,n){var r=this;return t.__iterate((function(t,n){return e(t,n,r)}),!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function ze(t,e,n,r){var i=tn(t);return r&&(i.has=function(r){var i=t.get(r,v);return i!==v&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,v);return o!==v&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var a=this,s=0;return t.__iterate((function(t,o,c){if(e.call(n,t,o,c))return s++,i(t,r?o:s-1,a)}),o),s},i.__iteratorUncached=function(i,o){var a=t.__iterator(P,o),s=0;return new j((function(){for(;;){var o=a.next();if(o.done)return o;var c=o.value,u=c[0],l=c[1];if(e.call(n,l,u,t))return F(i,r?u:s++,l,o)}}))},i}function Ve(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),C(e,n,i))return t;var o=I(e,i),a=N(n,i);if(o!=o||a!=a)return Ve(t.toSeq().cacheResult(),e,n,r);var s,c=a-o;c==c&&(s=c<0?0:c);var u=tn(t);return u.size=0===s?s:t.size&&s||void 0,!r&&it(t)&&s>=0&&(u.get=function(e,n){return(e=A(this,e))>=0&&e<s?t.get(e+o,n):n}),u.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var a=0,c=!0,u=0;return t.__iterate((function(t,n){if(!c||!(c=a++<o))return u++,!1!==e(t,r?n:u-1,i)&&u!==s})),u},u.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);var i=0!==s&&t.__iterator(e,n),a=0,c=0;return new j((function(){for(;a++<o;)i.next();if(++c>s)return{value:void 0,done:!0};var t=i.next();return r||e===D?t:F(e,c-1,e===B?void 0:t.value[1],t)}))},u}function He(t,e,n,r){var i=tn(t);return i.__iterateUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,c=0;return t.__iterate((function(t,o,u){if(!s||!(s=e.call(n,t,o,u)))return c++,i(t,r?o:c-1,a)})),c},i.__iteratorUncached=function(i,o){var a=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(P,o),c=!0,u=0;return new j((function(){var t,o,l;do{if((t=s.next()).done)return r||i===D?t:F(i,u++,i===B?void 0:t.value[1],t);var h=t.value;o=h[0],l=h[1],c&&(c=e.call(n,l,o,a))}while(c);return i===P?t:F(i,o,l,t)}))},i}function Ge(t,e){var n=s(t),i=[t].concat(e).map((function(t){return a(t)?n&&(t=r(t)):t=n?at(t):st(Array.isArray(t)?t:[t]),t})).filter((function(t){return 0!==t.size}));if(0===i.length)return t;if(1===i.length){var o=i[0];if(o===t||n&&s(o)||c(t)&&c(o))return o}var u=new tt(i);return n?u=u.toKeyedSeq():c(t)||(u=u.toSetSeq()),(u=u.flatten(!0)).size=i.reduce((function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}}),0),u}function qe(t,e,n){var r=tn(t);return r.__iterateUncached=function(r,i){var o=0,s=!1;return function t(c,u){var l=this;c.__iterate((function(i,c){return(!e||u<e)&&a(i)?t(i,u+1):!1===r(i,n?c:o++,l)&&(s=!0),!s}),i)}(t,0),o},r.__iteratorUncached=function(r,i){var o=t.__iterator(r,i),s=[],c=0;return new j((function(){for(;o;){var t=o.next();if(!1===t.done){var u=t.value;if(r===P&&(u=u[1]),e&&!(s.length<e)||!a(u))return n?t:F(r,c++,u,t);s.push(o),o=u.__iterator(r,i)}else o=s.pop()}return{value:void 0,done:!0}}))},r}function We(t,e,n){e||(e=nn);var r=s(t),i=0,o=t.toSeq().map((function(e,r){return[r,e,i++,n?n(e,r,t):e]})).toArray();return o.sort((function(t,n){return e(t[3],n[3])||t[2]-n[2]})).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?K(o):c(t)?Y(o):J(o)}function Ke(t,e,n){if(e||(e=nn),n){var r=t.toSeq().map((function(e,r){return[e,n(e,r,t)]})).reduce((function(t,n){return Ye(e,t[1],n[1])?n:t}));return r&&r[0]}return t.reduce((function(t,n){return Ye(e,t,n)?n:t}))}function Ye(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(null==n||n!=n)||r>0}function Je(t,e,r){var i=tn(t);return i.size=new tt(r).map((function(t){return t.size})).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(D,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map((function(t){return t=n(t),H(i?t.reverse():t)})),a=0,s=!1;return new j((function(){var n;return s||(n=o.map((function(t){return t.next()})),s=n.some((function(t){return t.done}))),s?{value:void 0,done:!0}:F(t,a++,e.apply(null,n.map((function(t){return t.value}))))}))},i}function Qe(t,e){return it(t)?e:t.constructor(e)}function Xe(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ze(t){return Lt(t.size),w(t)}function $e(t){return s(t)?r:c(t)?i:o}function tn(t){return Object.create((s(t)?K:c(t)?Y:J).prototype)}function en(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):W.prototype.cacheResult.call(this)}function nn(t,e){return t>e?1:t<e?-1:0}function rn(t){var e=H(t);if(!e){if(!q(t))throw new TypeError("Expected iterable or array-like: "+t);e=H(n(t))}return e}function on(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var a=Object.keys(t);!function(t,e){try{e.forEach(un.bind(void 0,t))}catch(t){}}(i,a),i.size=a.length,i._name=e,i._keys=a,i._defaultValues=t}this._map=jt(o)},i=r.prototype=Object.create(an);return i.constructor=r,r}e(Ie,jt),Ie.of=function(){return this(arguments)},Ie.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Ie.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Ie.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Be()},Ie.prototype.set=function(t,e){return De(this,t,e)},Ie.prototype.remove=function(t){return De(this,t,v)},Ie.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Ie.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate((function(e){return e&&t(e[1],e[0],n)}),e)},Ie.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Ie.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Re(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Ie.isOrderedMap=Ne,Ie.prototype[d]=!0,Ie.prototype.delete=Ie.prototype.remove,e(Pe,K),Pe.prototype.get=function(t,e){return this._iter.get(t,e)},Pe.prototype.has=function(t){return this._iter.has(t)},Pe.prototype.valueSeq=function(){return this._iter.valueSeq()},Pe.prototype.reverse=function(){var t=this,e=Ue(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},Pe.prototype.map=function(t,e){var n=this,r=Fe(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},Pe.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Ze(this):0,function(i){return t(i,e?--n:n++,r)}),e)},Pe.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(D,e),r=e?Ze(this):0;return new j((function(){var i=n.next();return i.done?i:F(t,e?--r:r++,i.value,i)}))},Pe.prototype[d]=!0,e(xe,Y),xe.prototype.includes=function(t){return this._iter.includes(t)},xe.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate((function(e){return t(e,r++,n)}),e)},xe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(D,e),r=0;return new j((function(){var e=n.next();return e.done?e:F(t,r++,e.value,e)}))},e(Me,J),Me.prototype.has=function(t){return this._iter.includes(t)},Me.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){return t(e,e,n)}),e)},Me.prototype.__iterator=function(t,e){var n=this._iter.__iterator(D,e);return new j((function(){var e=n.next();return e.done?e:F(t,e.value,e.value,e)}))},e(Le,K),Le.prototype.entrySeq=function(){return this._iter.toSeq()},Le.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate((function(e){if(e){Xe(e);var r=a(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}}),e)},Le.prototype.__iterator=function(t,e){var n=this._iter.__iterator(D,e);return new j((function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Xe(r);var i=a(r);return F(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}}))},xe.prototype.cacheResult=Pe.prototype.cacheResult=Me.prototype.cacheResult=Le.prototype.cacheResult=en,e(on,_t),on.prototype.toString=function(){return this.__toString(cn(this)+" {","}")},on.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},on.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},on.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=sn(this,Zt()))},on.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+cn(this));if(this._map&&!this._map.has(t)&&e===this._defaultValues[t])return this;var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:sn(this,n)},on.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:sn(this,e)},on.prototype.wasAltered=function(){return this._map.wasAltered()},on.prototype.__iterator=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterator(t,e)},on.prototype.__iterate=function(t,e){var n=this;return r(this._defaultValues).map((function(t,e){return n.get(e)})).__iterate(t,e)},on.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?sn(this,e,t):(this.__ownerID=t,this._map=e,this)};var an=on.prototype;function sn(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function cn(t){return t._name||t.constructor.name||"Record"}function un(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){gt(this.__ownerID,"Cannot set on an immutable record."),this.set(e,t)}})}function ln(t){return null==t?gn():hn(t)&&!l(t)?t:gn().withMutations((function(e){var n=o(t);Lt(n.size),n.forEach((function(t){return e.add(t)}))}))}function hn(t){return!(!t||!t[fn])}an.delete=an.remove,an.deleteIn=an.removeIn=Vt.removeIn,an.merge=Vt.merge,an.mergeWith=Vt.mergeWith,an.mergeIn=Vt.mergeIn,an.mergeDeep=Vt.mergeDeep,an.mergeDeepWith=Vt.mergeDeepWith,an.mergeDeepIn=Vt.mergeDeepIn,an.setIn=Vt.setIn,an.update=Vt.update,an.updateIn=Vt.updateIn,an.withMutations=Vt.withMutations,an.asMutable=Vt.asMutable,an.asImmutable=Vt.asImmutable,e(ln,Tt),ln.of=function(){return this(arguments)},ln.fromKeys=function(t){return this(r(t).keySeq())},ln.prototype.toString=function(){return this.__toString("Set {","}")},ln.prototype.has=function(t){return this._map.has(t)},ln.prototype.add=function(t){return yn(this,this._map.set(t,!0))},ln.prototype.remove=function(t){return yn(this,this._map.remove(t))},ln.prototype.clear=function(){return yn(this,this._map.clear())},ln.prototype.union=function(){var e=t.call(arguments,0);return 0===(e=e.filter((function(t){return 0!==t.size}))).length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations((function(t){for(var n=0;n<e.length;n++)o(e[n]).forEach((function(e){return t.add(e)}))})):this.constructor(e[0])},ln.prototype.intersect=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return o(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.every((function(t){return t.includes(n)}))||t.remove(n)}))}))},ln.prototype.subtract=function(){var e=t.call(arguments,0);if(0===e.length)return this;e=e.map((function(t){return o(t)}));var n=this;return this.withMutations((function(t){n.forEach((function(n){e.some((function(t){return t.includes(n)}))&&t.remove(n)}))}))},ln.prototype.merge=function(){return this.union.apply(this,arguments)},ln.prototype.mergeWith=function(e){var n=t.call(arguments,1);return this.union.apply(this,n)},ln.prototype.sort=function(t){return vn(We(this,t))},ln.prototype.sortBy=function(t,e){return vn(We(this,e,t))},ln.prototype.wasAltered=function(){return this._map.wasAltered()},ln.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate((function(e,r){return t(r,r,n)}),e)},ln.prototype.__iterator=function(t,e){return this._map.map((function(t,e){return e})).__iterator(t,e)},ln.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},ln.isSet=hn;var pn,fn="@@__IMMUTABLE_SET__@@",dn=ln.prototype;function yn(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function mn(t,e){var n=Object.create(dn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function gn(){return pn||(pn=mn(Zt()))}function vn(t){return null==t?Sn():bn(t)?t:Sn().withMutations((function(e){var n=o(t);Lt(n.size),n.forEach((function(t){return e.add(t)}))}))}function bn(t){return hn(t)&&l(t)}dn[fn]=!0,dn.delete=dn.remove,dn.mergeDeep=dn.merge,dn.mergeDeepWith=dn.mergeWith,dn.withMutations=Vt.withMutations,dn.asMutable=Vt.asMutable,dn.asImmutable=Vt.asImmutable,dn.__empty=gn,dn.__make=mn,e(vn,ln),vn.of=function(){return this(arguments)},vn.fromKeys=function(t){return this(r(t).keySeq())},vn.prototype.toString=function(){return this.__toString("OrderedSet {","}")},vn.isOrderedSet=bn;var _n,En=vn.prototype;function Tn(t,e){var n=Object.create(En);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Sn(){return _n||(_n=Tn(Be()))}function kn(t){return null==t?Nn():wn(t)?t:Nn().unshiftAll(t)}function wn(t){return!(!t||!t[On])}En[d]=!0,En.__empty=Sn,En.__make=Tn,e(kn,Et),kn.of=function(){return this(arguments)},kn.prototype.toString=function(){return this.__toString("Stack [","]")},kn.prototype.get=function(t,e){var n=this._head;for(t=A(this,t);n&&t--;)n=n.next;return n?n.value:e},kn.prototype.peek=function(){return this._head&&this._head.value},kn.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):In(t,e)},kn.prototype.pushAll=function(t){if(0===(t=i(t)).size)return this;Lt(t.size);var e=this.size,n=this._head;return t.reverse().forEach((function(t){e++,n={value:t,next:n}})),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):In(e,n)},kn.prototype.pop=function(){return this.slice(1)},kn.prototype.unshift=function(){return this.push.apply(this,arguments)},kn.prototype.unshiftAll=function(t){return this.pushAll(t)},kn.prototype.shift=function(){return this.pop.apply(this,arguments)},kn.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Nn()},kn.prototype.slice=function(t,e){if(C(t,e,this.size))return this;var n=I(t,this.size);if(N(e,this.size)!==this.size)return Et.prototype.slice.call(this,t,e);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):In(r,i)},kn.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?In(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},kn.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},kn.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new j((function(){if(r){var e=r.value;return r=r.next,F(t,n++,e)}return{value:void 0,done:!0}}))},kn.isStack=wn;var An,On="@@__IMMUTABLE_STACK__@@",Cn=kn.prototype;function In(t,e,n,r){var i=Object.create(Cn);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Nn(){return An||(An=In(0))}function Rn(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}Cn[On]=!0,Cn.withMutations=Vt.withMutations,Cn.asMutable=Vt.asMutable,Cn.asImmutable=Vt.asImmutable,Cn.wasAltered=Vt.wasAltered,n.Iterator=j,Rn(n,{toArray:function(){Lt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate((function(e,n){t[n]=e})),t},toIndexedSeq:function(){return new xe(this)},toJS:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJS?t.toJS():t})).__toJS()},toJSON:function(){return this.toSeq().map((function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t})).__toJS()},toKeyedSeq:function(){return new Pe(this,!0)},toMap:function(){return jt(this.toKeyedSeq())},toObject:function(){Lt(this.size);var t={};return this.__iterate((function(e,n){t[n]=e})),t},toOrderedMap:function(){return Ie(this.toKeyedSeq())},toOrderedSet:function(){return vn(s(this)?this.valueSeq():this)},toSet:function(){return ln(s(this)?this.valueSeq():this)},toSetSeq:function(){return new Me(this)},toSeq:function(){return c(this)?this.toIndexedSeq():s(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return kn(s(this)?this.valueSeq():this)},toList:function(){return pe(s(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){var e=t.call(arguments,0);return Qe(this,Ge(this,e))},includes:function(t){return this.some((function(e){return dt(e,t)}))},entries:function(){return this.__iterator(P)},every:function(t,e){Lt(this.size);var n=!0;return this.__iterate((function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1})),n},filter:function(t,e){return Qe(this,ze(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return Lt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){Lt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate((function(r){n?n=!1:e+=t,e+=null!=r?r.toString():""})),e},keys:function(){return this.__iterator(B)},map:function(t,e){return Qe(this,Fe(this,t,e))},reduce:function(t,e,n){var r,i;return Lt(this.size),arguments.length<2?i=!0:r=e,this.__iterate((function(e,o,a){i?(i=!1,r=e):r=t.call(n,r,e,o,a)})),r},reduceRight:function(t,e,n){var r=this.toKeyedSeq().reverse();return r.reduce.apply(r,arguments)},reverse:function(){return Qe(this,Ue(this,!0))},slice:function(t,e){return Qe(this,Ve(this,t,e,!0))},some:function(t,e){return!this.every(Mn(t),e)},sort:function(t){return Qe(this,We(this,t))},values:function(){return this.__iterator(D)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some((function(){return!0}))},count:function(t,e){return w(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return function(t,e,n){var r=jt().asMutable();return t.__iterate((function(i,o){r.update(e.call(n,i,o,t),0,(function(t){return t+1}))})),r.asImmutable()}(this,t,e)},equals:function(t){return yt(this,t)},entrySeq:function(){var t=this;if(t._cache)return new tt(t._cache);var e=t.toSeq().map(xn).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Mn(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate((function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1})),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(O)},flatMap:function(t,e){return Qe(this,function(t,e,n){var r=$e(t);return t.toSeq().map((function(i,o){return r(e.call(n,i,o,t))})).flatten(!0)}(this,t,e))},flatten:function(t){return Qe(this,qe(this,t,!0))},fromEntrySeq:function(){return new Le(this)},get:function(t,e){return this.find((function(e,n){return dt(n,t)}),void 0,e)},getIn:function(t,e){for(var n,r=this,i=rn(t);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,v):v)===v)return e}return r},groupBy:function(t,e){return function(t,e,n){var r=s(t),i=(l(t)?Ie():jt()).asMutable();t.__iterate((function(o,a){i.update(e.call(n,o,a,t),(function(t){return(t=t||[]).push(r?[a,o]:o),t}))}));var o=$e(t);return i.map((function(e){return Qe(t,o(e))}))}(this,t,e)},has:function(t){return this.get(t,v)!==v},hasIn:function(t){return this.getIn(t,v)!==v},isSubset:function(t){return t="function"==typeof t.includes?t:n(t),this.every((function(e){return t.includes(e)}))},isSuperset:function(t){return(t="function"==typeof t.isSubset?t:n(t)).isSubset(this)},keyOf:function(t){return this.findKey((function(e){return dt(e,t)}))},keySeq:function(){return this.toSeq().map(Pn).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return Ke(this,t)},maxBy:function(t,e){return Ke(this,e,t)},min:function(t){return Ke(this,t?Ln(t):Un)},minBy:function(t,e){return Ke(this,e?Ln(e):Un,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return Qe(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return Qe(this,He(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Mn(t),e)},sortBy:function(t,e){return Qe(this,We(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return Qe(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return Qe(this,function(t,e,n){var r=tn(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var a=0;return t.__iterate((function(t,i,s){return e.call(n,t,i,s)&&++a&&r(t,i,o)})),a},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var a=t.__iterator(P,i),s=!0;return new j((function(){if(!s)return{value:void 0,done:!0};var t=a.next();if(t.done)return t;var i=t.value,c=i[0],u=i[1];return e.call(n,u,c,o)?r===P?t:F(r,c,u,t):(s=!1,{value:void 0,done:!0})}))},r}(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Mn(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=function(t){if(t.size===1/0)return 0;var e=l(t),n=s(t),r=e?1:0;return function(t,e){return e=St(e,3432918353),e=St(e<<15|e>>>-15,461845907),e=St(e<<13|e>>>-13,5),e=St((e=(e+3864292196|0)^t)^e>>>16,2246822507),kt((e=St(e^e>>>13,3266489909))^e>>>16)}(t.__iterate(n?e?function(t,e){r=31*r+zn(wt(t),wt(e))|0}:function(t,e){r=r+zn(wt(t),wt(e))|0}:e?function(t){r=31*r+wt(t)|0}:function(t){r=r+wt(t)|0}),r)}(this))}});var Bn=n.prototype;Bn[h]=!0,Bn[L]=Bn.values,Bn.__toJS=Bn.toArray,Bn.__toStringMapper=jn,Bn.inspect=Bn.toSource=function(){return this.toString()},Bn.chain=Bn.flatMap,Bn.contains=Bn.includes,Rn(r,{flip:function(){return Qe(this,je(this))},mapEntries:function(t,e){var n=this,r=0;return Qe(this,this.toSeq().map((function(i,o){return t.call(e,[o,i],r++,n)})).fromEntrySeq())},mapKeys:function(t,e){var n=this;return Qe(this,this.toSeq().flip().map((function(r,i){return t.call(e,r,i,n)})).flip())}});var Dn=r.prototype;function Pn(t,e){return e}function xn(t,e){return[e,t]}function Mn(t){return function(){return!t.apply(this,arguments)}}function Ln(t){return function(){return-t.apply(this,arguments)}}function jn(t){return"string"==typeof t?JSON.stringify(t):String(t)}function Fn(){return k(arguments)}function Un(t,e){return t<e?1:t>e?-1:0}function zn(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}return Dn[p]=!0,Dn[L]=Bn.entries,Dn.__toJS=Bn.toObject,Dn.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+jn(t)},Rn(i,{toKeyedSeq:function(){return new Pe(this,!1)},filter:function(t,e){return Qe(this,ze(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return Qe(this,Ue(this,!1))},slice:function(t,e){return Qe(this,Ve(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=I(t,t<0?this.count():this.size);var r=this.slice(0,t);return Qe(this,1===n?r:r.concat(k(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return Qe(this,qe(this,t,!1))},get:function(t,e){return(t=A(this,t))<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find((function(e,n){return n===t}),void 0,e)},has:function(t){return(t=A(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return Qe(this,function(t,e){var n=tn(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate((function(t,r){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)}),r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(D,r),a=0;return new j((function(){return(!i||a%2)&&(i=o.next()).done?i:a%2?F(n,a++,e):F(n,a++,i.value,i)}))},n}(this,t))},interleave:function(){var t=[this].concat(k(arguments)),e=Je(this.toSeq(),Y.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),Qe(this,n)},keySeq:function(){return vt(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return Qe(this,He(this,t,e,!1))},zip:function(){var t=[this].concat(k(arguments));return Qe(this,Je(this,Fn,t))},zipWith:function(t){var e=k(arguments);return e[0]=this,Qe(this,Je(this,t,e))}}),i.prototype[f]=!0,i.prototype[d]=!0,Rn(o,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),o.prototype.has=Bn.includes,o.prototype.contains=o.prototype.includes,Rn(K,r.prototype),Rn(Y,i.prototype),Rn(J,o.prototype),Rn(_t,r.prototype),Rn(Et,i.prototype),Rn(Tt,o.prototype),{Iterable:n,Seq:W,Collection:bt,Map:jt,OrderedMap:Ie,List:pe,Stack:kn,Set:ln,OrderedSet:vn,Record:on,Range:vt,Repeat:mt,is:dt,fromJS:ht}}()},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(19),i=n(46),o=n(121),a=n(84);n(86)("match",1,(function(t,e,n,s){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=s(n,t,this);if(e.done)return e.value;var c=r(t),u=String(this);if(!c.global)return a(c,u);var l=c.unicode;c.lastIndex=0;for(var h,p=[],f=0;null!==(h=a(c,u));){var d=String(h[0]);p[f]=d,""===d&&(c.lastIndex=o(u,i(c.lastIndex),l)),f++}return 0===f?null:p}]}))},function(t,e,n){"use strict";var r=n(16),i=n(42),o=n(51),a=n(124),s=n(80),c=n(24),u=n(70).f,l=n(89).f,h=n(26).f,p=n(301).trim,f=r.Number,d=f,y=f.prototype,m="Number"==o(n(82)(y)),g="trim"in String.prototype,v=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){var n,r,i,o=(e=g?e.trim():p(e,3)).charCodeAt(0);if(43===o||45===o){if(88===(n=e.charCodeAt(2))||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,c=e.slice(2),u=0,l=c.length;u<l;u++)if((a=c.charCodeAt(u))<48||a>i)return NaN;return parseInt(c,r)}}return+e};if(!f(" 0o1")||!f("0b1")||f("+0x1")){f=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof f&&(m?c((function(){y.valueOf.call(n)})):"Number"!=o(n))?a(new d(v(e)),n,f):v(e)};for(var b,_=n(23)?u(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),E=0;_.length>E;E++)i(d,b=_[E])&&!i(f,b)&&h(f,b,l(d,b));f.prototype=y,y.constructor=f,n(34)(r,"Number",f)}},function(t,e){t.exports=l},function(t,e,n){var r=n(16),i=n(41),o=n(42),a=n(64)("src"),s=n(253),c=(""+s).split("toString");n(37).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var u="function"==typeof n;u&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(u&&(o(n,a)||i(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:s?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,"toString",(function(){return"function"==typeof this&&this[a]||s.call(this)}))},function(t,e,n){"use strict";var r=e.NAMESPACES={HTML:"http://www.w3.org/1999/xhtml",MATHML:"http://www.w3.org/1998/Math/MathML",SVG:"http://www.w3.org/2000/svg",XLINK:"http://www.w3.org/1999/xlink",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"};e.ATTRS={TYPE:"type",ACTION:"action",ENCODING:"encoding",PROMPT:"prompt",NAME:"name",COLOR:"color",FACE:"face",SIZE:"size"},e.DOCUMENT_MODE={NO_QUIRKS:"no-quirks",QUIRKS:"quirks",LIMITED_QUIRKS:"limited-quirks"};var i=e.TAG_NAMES={A:"a",ADDRESS:"address",ANNOTATION_XML:"annotation-xml",APPLET:"applet",AREA:"area",ARTICLE:"article",ASIDE:"aside",B:"b",BASE:"base",BASEFONT:"basefont",BGSOUND:"bgsound",BIG:"big",BLOCKQUOTE:"blockquote",BODY:"body",BR:"br",BUTTON:"button",CAPTION:"caption",CENTER:"center",CODE:"code",COL:"col",COLGROUP:"colgroup",DD:"dd",DESC:"desc",DETAILS:"details",DIALOG:"dialog",DIR:"dir",DIV:"div",DL:"dl",DT:"dt",EM:"em",EMBED:"embed",FIELDSET:"fieldset",FIGCAPTION:"figcaption",FIGURE:"figure",FONT:"font",FOOTER:"footer",FOREIGN_OBJECT:"foreignObject",FORM:"form",FRAME:"frame",FRAMESET:"frameset",H1:"h1",H2:"h2",H3:"h3",H4:"h4",H5:"h5",H6:"h6",HEAD:"head",HEADER:"header",HGROUP:"hgroup",HR:"hr",HTML:"html",I:"i",IMG:"img",IMAGE:"image",INPUT:"input",IFRAME:"iframe",KEYGEN:"keygen",LABEL:"label",LI:"li",LINK:"link",LISTING:"listing",MAIN:"main",MALIGNMARK:"malignmark",MARQUEE:"marquee",MATH:"math",MENU:"menu",MENUITEM:"menuitem",META:"meta",MGLYPH:"mglyph",MI:"mi",MO:"mo",MN:"mn",MS:"ms",MTEXT:"mtext",NAV:"nav",NOBR:"nobr",NOFRAMES:"noframes",NOEMBED:"noembed",NOSCRIPT:"noscript",OBJECT:"object",OL:"ol",OPTGROUP:"optgroup",OPTION:"option",P:"p",PARAM:"param",PLAINTEXT:"plaintext",PRE:"pre",RB:"rb",RP:"rp",RT:"rt",RTC:"rtc",RUBY:"ruby",S:"s",SCRIPT:"script",SECTION:"section",SELECT:"select",SOURCE:"source",SMALL:"small",SPAN:"span",STRIKE:"strike",STRONG:"strong",STYLE:"style",SUB:"sub",SUMMARY:"summary",SUP:"sup",TABLE:"table",TBODY:"tbody",TEMPLATE:"template",TEXTAREA:"textarea",TFOOT:"tfoot",TD:"td",TH:"th",THEAD:"thead",TITLE:"title",TR:"tr",TRACK:"track",TT:"tt",U:"u",UL:"ul",SVG:"svg",VAR:"var",WBR:"wbr",XMP:"xmp"},o=e.SPECIAL_ELEMENTS=Object.create(null);o[r.HTML]=Object.create(null),o[r.HTML][i.ADDRESS]=!0,o[r.HTML][i.APPLET]=!0,o[r.HTML][i.AREA]=!0,o[r.HTML][i.ARTICLE]=!0,o[r.HTML][i.ASIDE]=!0,o[r.HTML][i.BASE]=!0,o[r.HTML][i.BASEFONT]=!0,o[r.HTML][i.BGSOUND]=!0,o[r.HTML][i.BLOCKQUOTE]=!0,o[r.HTML][i.BODY]=!0,o[r.HTML][i.BR]=!0,o[r.HTML][i.BUTTON]=!0,o[r.HTML][i.CAPTION]=!0,o[r.HTML][i.CENTER]=!0,o[r.HTML][i.COL]=!0,o[r.HTML][i.COLGROUP]=!0,o[r.HTML][i.DD]=!0,o[r.HTML][i.DETAILS]=!0,o[r.HTML][i.DIR]=!0,o[r.HTML][i.DIV]=!0,o[r.HTML][i.DL]=!0,o[r.HTML][i.DT]=!0,o[r.HTML][i.EMBED]=!0,o[r.HTML][i.FIELDSET]=!0,o[r.HTML][i.FIGCAPTION]=!0,o[r.HTML][i.FIGURE]=!0,o[r.HTML][i.FOOTER]=!0,o[r.HTML][i.FORM]=!0,o[r.HTML][i.FRAME]=!0,o[r.HTML][i.FRAMESET]=!0,o[r.HTML][i.H1]=!0,o[r.HTML][i.H2]=!0,o[r.HTML][i.H3]=!0,o[r.HTML][i.H4]=!0,o[r.HTML][i.H5]=!0,o[r.HTML][i.H6]=!0,o[r.HTML][i.HEAD]=!0,o[r.HTML][i.HEADER]=!0,o[r.HTML][i.HGROUP]=!0,o[r.HTML][i.HR]=!0,o[r.HTML][i.HTML]=!0,o[r.HTML][i.IFRAME]=!0,o[r.HTML][i.IMG]=!0,o[r.HTML][i.INPUT]=!0,o[r.HTML][i.LI]=!0,o[r.HTML][i.LINK]=!0,o[r.HTML][i.LISTING]=!0,o[r.HTML][i.MAIN]=!0,o[r.HTML][i.MARQUEE]=!0,o[r.HTML][i.MENU]=!0,o[r.HTML][i.META]=!0,o[r.HTML][i.NAV]=!0,o[r.HTML][i.NOEMBED]=!0,o[r.HTML][i.NOFRAMES]=!0,o[r.HTML][i.NOSCRIPT]=!0,o[r.HTML][i.OBJECT]=!0,o[r.HTML][i.OL]=!0,o[r.HTML][i.P]=!0,o[r.HTML][i.PARAM]=!0,o[r.HTML][i.PLAINTEXT]=!0,o[r.HTML][i.PRE]=!0,o[r.HTML][i.SCRIPT]=!0,o[r.HTML][i.SECTION]=!0,o[r.HTML][i.SELECT]=!0,o[r.HTML][i.SOURCE]=!0,o[r.HTML][i.STYLE]=!0,o[r.HTML][i.SUMMARY]=!0,o[r.HTML][i.TABLE]=!0,o[r.HTML][i.TBODY]=!0,o[r.HTML][i.TD]=!0,o[r.HTML][i.TEMPLATE]=!0,o[r.HTML][i.TEXTAREA]=!0,o[r.HTML][i.TFOOT]=!0,o[r.HTML][i.TH]=!0,o[r.HTML][i.THEAD]=!0,o[r.HTML][i.TITLE]=!0,o[r.HTML][i.TR]=!0,o[r.HTML][i.TRACK]=!0,o[r.HTML][i.UL]=!0,o[r.HTML][i.WBR]=!0,o[r.HTML][i.XMP]=!0,o[r.MATHML]=Object.create(null),o[r.MATHML][i.MI]=!0,o[r.MATHML][i.MO]=!0,o[r.MATHML][i.MN]=!0,o[r.MATHML][i.MS]=!0,o[r.MATHML][i.MTEXT]=!0,o[r.MATHML][i.ANNOTATION_XML]=!0,o[r.SVG]=Object.create(null),o[r.SVG][i.TITLE]=!0,o[r.SVG][i.FOREIGN_OBJECT]=!0,o[r.SVG][i.DESC]=!0},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(320);Object.defineProperty(e,"arrayEqual",{enumerable:!0,get:function(){return pe(r).default}});var i=n(321);Object.defineProperty(e,"arrayMax",{enumerable:!0,get:function(){return pe(i).default}});var o=n(322);Object.defineProperty(e,"arrayMin",{enumerable:!0,get:function(){return pe(o).default}});var a=n(184);Object.defineProperty(e,"arrayToObject",{enumerable:!0,get:function(){return pe(a).default}});var s=n(323);Object.defineProperty(e,"getLast",{enumerable:!0,get:function(){return pe(s).default}});var c=n(324);Object.defineProperty(e,"mergeSortedArrays",{enumerable:!0,get:function(){return pe(c).default}});var u=n(325);Object.defineProperty(e,"sequence",{enumerable:!0,get:function(){return pe(u).default}});var l=n(326);Object.defineProperty(e,"groupArrayToNestedArray",{enumerable:!0,get:function(){return pe(l).default}});var h=n(327);Object.defineProperty(e,"barrier2FromContract",{enumerable:!0,get:function(){return pe(h).default}});var p=n(328);Object.defineProperty(e,"barrierFromContract",{enumerable:!0,get:function(){return pe(p).default}});var f=n(329);Object.defineProperty(e,"callPutBarrier",{enumerable:!0,get:function(){return pe(f).default}});var d=n(134);Object.defineProperty(e,"commonRelativeBarrier",{enumerable:!0,get:function(){return pe(d).default}});var y=n(330);Object.defineProperty(e,"extractBarrier",{enumerable:!0,get:function(){return pe(y).default}});var m=n(133);Object.defineProperty(e,"getAbsoluteBarrierFromContract",{enumerable:!0,get:function(){return pe(m).default}});var g=n(185);Object.defineProperty(e,"relativeBarrier",{enumerable:!0,get:function(){return pe(g).default}});var v=n(331);Object.defineProperty(e,"relativeBarrier2",{enumerable:!0,get:function(){return pe(v).default}});var b=n(135);Object.defineProperty(e,"dateAsLocalISOString",{enumerable:!0,get:function(){return pe(b).default}});var _=n(75);Object.defineProperty(e,"dateToDateString",{enumerable:!0,get:function(){return pe(_).default}});var E=n(332);Object.defineProperty(e,"dateToEpoch",{enumerable:!0,get:function(){return pe(E).default}});var T=n(333);Object.defineProperty(e,"dateToGMTString",{enumerable:!0,get:function(){return pe(T).default}});var S=n(186);Object.defineProperty(e,"dateToTimeString",{enumerable:!0,get:function(){return pe(S).default}});var k=n(334);Object.defineProperty(e,"dateToUTCTimeString",{enumerable:!0,get:function(){return pe(k).default}});var w=n(96);Object.defineProperty(e,"epochToDate",{enumerable:!0,get:function(){return pe(w).default}});var A=n(335);Object.defineProperty(e,"epochToDateString",{enumerable:!0,get:function(){return pe(A).default}});var O=n(336);Object.defineProperty(e,"epochToDateTimeString",{enumerable:!0,get:function(){return pe(O).default}});var C=n(337);Object.defineProperty(e,"epochToTimeString",{enumerable:!0,get:function(){return pe(C).default}});var I=n(338);Object.defineProperty(e,"epochToUTCDateString",{enumerable:!0,get:function(){return pe(I).default}});var N=n(339);Object.defineProperty(e,"epochToUTCTimeString",{enumerable:!0,get:function(){return pe(N).default}});var R=n(340);Object.defineProperty(e,"getLastXMonthEpoch",{enumerable:!0,get:function(){return pe(R).default}});var B=n(341);Object.defineProperty(e,"isDateValid",{enumerable:!0,get:function(){return pe(B).default}});var D=n(342);Object.defineProperty(e,"last30DaysEpoch",{enumerable:!0,get:function(){return pe(D).default}});var P=n(343);Object.defineProperty(e,"last7DaysEpoch",{enumerable:!0,get:function(){return pe(P).default}});var x=n(344);Object.defineProperty(e,"nextXDay",{enumerable:!0,get:function(){return pe(x).default}});var M=n(136);Object.defineProperty(e,"nowAsEpoch",{enumerable:!0,get:function(){return pe(M).default}});var L=n(345);Object.defineProperty(e,"oneYearAfterStr",{enumerable:!0,get:function(){return pe(L).default}});var j=n(346);Object.defineProperty(e,"secondsToTimeString",{enumerable:!0,get:function(){return pe(j).default}});var F=n(187);Object.defineProperty(e,"splitSecsToUnits",{enumerable:!0,get:function(){return pe(F).default}});var U=n(137);Object.defineProperty(e,"timeStringBigger",{enumerable:!0,get:function(){return pe(U).default}});var z=n(347);Object.defineProperty(e,"timeStringIsBetween",{enumerable:!0,get:function(){return pe(z).default}});var V=n(188);Object.defineProperty(e,"timeStringSmaller",{enumerable:!0,get:function(){return pe(V).default}});var H=n(348);Object.defineProperty(e,"timeStringToSeconds",{enumerable:!0,get:function(){return pe(H).default}});var G=n(349);Object.defineProperty(e,"todayEpoch",{enumerable:!0,get:function(){return pe(G).default}});var q=n(350);Object.defineProperty(e,"todayLocaleString",{enumerable:!0,get:function(){return pe(q).default}});var W=n(351);Object.defineProperty(e,"todayUTCString",{enumerable:!0,get:function(){return pe(W).default}});var K=n(76);Object.defineProperty(e,"xDayEpoch",{enumerable:!0,get:function(){return pe(K).default}});var Y=n(352);Object.defineProperty(e,"xMonthsAfter",{enumerable:!0,get:function(){return pe(Y).default}});var J=n(138);Object.defineProperty(e,"yesterdayEpoch",{enumerable:!0,get:function(){return pe(J).default}});var Q=n(353);Object.defineProperty(e,"yesterdayString",{enumerable:!0,get:function(){return pe(Q).default}});var X=n(354);Object.defineProperty(e,"yesterdayUTCString",{enumerable:!0,get:function(){return pe(X).default}});var Z=n(355);Object.defineProperty(e,"returnValidDate",{enumerable:!0,get:function(){return pe(Z).default}});var $=n(356);Object.defineProperty(e,"returnValidTime",{enumerable:!0,get:function(){return pe($).default}});var tt=n(357);Object.defineProperty(e,"isValidTime",{enumerable:!0,get:function(){return pe(tt).default}});var et=n(358);Object.defineProperty(e,"timeLeftToNextRealityCheck",{enumerable:!0,get:function(){return pe(et).default}});var nt=n(189);Object.defineProperty(e,"durationSecHelper",{enumerable:!0,get:function(){return pe(nt).default}});var rt=n(359);Object.defineProperty(e,"durationText",{enumerable:!0,get:function(){return pe(rt).default}});var it=n(97);Object.defineProperty(e,"durationToSecs",{enumerable:!0,get:function(){return pe(it).default}});var ot=n(190);Object.defineProperty(e,"durationUnits",{enumerable:!0,get:function(){return pe(ot).default}});var at=n(360);Object.defineProperty(e,"extractDuration",{enumerable:!0,get:function(){return pe(at).default}});var st=n(139);Object.defineProperty(e,"extractDurationHelper",{enumerable:!0,get:function(){return pe(st).default}});var ct=n(361);Object.defineProperty(e,"extractForwardStartingDuration",{enumerable:!0,get:function(){return pe(ct).default}});var ut=n(191);Object.defineProperty(e,"extractMinMaxInUnits",{enumerable:!0,get:function(){return pe(ut).default}});var lt=n(362);Object.defineProperty(e,"isDurationLessThan2Mins",{enumerable:!0,get:function(){return pe(lt).default}});var ht=n(192);Object.defineProperty(e,"isDurationTick",{enumerable:!0,get:function(){return pe(ht).default}});var pt=n(363);Object.defineProperty(e,"isDurationWithinRange",{enumerable:!0,get:function(){return pe(pt).default}});var ft=n(364);Object.defineProperty(e,"calculateLastDigitStats",{enumerable:!0,get:function(){return pe(ft).default}});var dt=n(365);Object.defineProperty(e,"digitsToPips",{enumerable:!0,get:function(){return pe(dt).default}});var yt=n(193);Object.defineProperty(e,"getLastDigit",{enumerable:!0,get:function(){return pe(yt).default}});var mt=n(366);Object.defineProperty(e,"noOfDecimals",{enumerable:!0,get:function(){return pe(mt).default}});var gt=n(367);Object.defineProperty(e,"numberToSignedString",{enumerable:!0,get:function(){return pe(gt).default}});var vt=n(368);Object.defineProperty(e,"pipSizeToStepSize",{enumerable:!0,get:function(){return pe(vt).default}});var bt=n(369);Object.defineProperty(e,"pipsToDigits",{enumerable:!0,get:function(){return pe(bt).default}});var _t=n(370);Object.defineProperty(e,"toMoney",{enumerable:!0,get:function(){return pe(_t).default}});var Et=n(371);Object.defineProperty(e,"filterDeep",{enumerable:!0,get:function(){return pe(Et).default}});var Tt=n(372);Object.defineProperty(e,"findDeep",{enumerable:!0,get:function(){return pe(Tt).default}});var St=n(95);Object.defineProperty(e,"groupByKey",{enumerable:!0,get:function(){return pe(St).default}});var kt=n(373);Object.defineProperty(e,"immutableChildrenToJS",{enumerable:!0,get:function(){return pe(kt).default}});var wt=n(374);Object.defineProperty(e,"areArraysEqual",{enumerable:!0,get:function(){return pe(wt).default}});var At=n(375);Object.defineProperty(e,"areCandleArrayEqual",{enumerable:!0,get:function(){return pe(At).default}});var Ot=n(376);Object.defineProperty(e,"areTickArraysEqual",{enumerable:!0,get:function(){return pe(Ot).default}});var Ct=n(140);Object.defineProperty(e,"doArrayDifferJustOneEntry",{enumerable:!0,get:function(){return pe(Ct).default}});var It=n(194);Object.defineProperty(e,"doCandleEqual",{enumerable:!0,get:function(){return pe(It).default}});var Nt=n(377);Object.defineProperty(e,"doCandlesDifferJustOneEntry",{enumerable:!0,get:function(){return pe(Nt).default}});var Rt=n(378);Object.defineProperty(e,"doTicksDifferJustOneEntry",{enumerable:!0,get:function(){return pe(Rt).default}});var Bt=n(195);Object.defineProperty(e,"doTicksEqual",{enumerable:!0,get:function(){return pe(Bt).default}});var Dt=n(379);Object.defineProperty(e,"getLastOHLCTick",{enumerable:!0,get:function(){return pe(Dt).default}});var Pt=n(380);Object.defineProperty(e,"getLastTickQuote",{enumerable:!0,get:function(){return pe(Pt).default}});var xt=n(381);Object.defineProperty(e,"historyToTicks",{enumerable:!0,get:function(){return pe(xt).default}});var Mt=n(382);Object.defineProperty(e,"ohlcToData",{enumerable:!0,get:function(){return pe(Mt).default}});var Lt=n(383);Object.defineProperty(e,"ohlcToTicks",{enumerable:!0,get:function(){return pe(Lt).default}});var jt=n(384);Object.defineProperty(e,"tickToData",{enumerable:!0,get:function(){return pe(jt).default}});var Ft=n(385);Object.defineProperty(e,"askPriceFromProposal",{enumerable:!0,get:function(){return pe(Ft).default}});var Ut=n(386);Object.defineProperty(e,"computeStartEndForContract",{enumerable:!0,get:function(){return pe(Ut).default}});var zt=n(387);Object.defineProperty(e,"contractCategoryToText",{enumerable:!0,get:function(){return pe(zt).default}});var Vt=n(388);Object.defineProperty(e,"contractCodeToText",{enumerable:!0,get:function(){return pe(Vt).default}});var Ht=n(389);Object.defineProperty(e,"extractSpreadInfo",{enumerable:!0,get:function(){return pe(Ht).default}});var Gt=n(390);Object.defineProperty(e,"isIntraday",{enumerable:!0,get:function(){return pe(Gt).default}});var qt=n(391);Object.defineProperty(e,"normalizedContractFor",{enumerable:!0,get:function(){return pe(qt).default}});var Wt=n(392);Object.defineProperty(e,"tradeToFriendlyType",{enumerable:!0,get:function(){return pe(Wt).default}});var Kt=n(196);Object.defineProperty(e,"tradeTypeCodeToText",{enumerable:!0,get:function(){return pe(Kt).default}});var Yt=n(393);Object.defineProperty(e,"tradeTypeTextToCode",{enumerable:!0,get:function(){return pe(Yt).default}});var Jt=n(98);Object.defineProperty(e,"tradeTypes",{enumerable:!0,get:function(){return pe(Jt).default}});var Qt=n(197);Object.defineProperty(e,"typeHasBarrier",{enumerable:!0,get:function(){return pe(Qt).default}});var Xt=n(394);Object.defineProperty(e,"Analytics",{enumerable:!0,get:function(){return pe(Xt).default}});var Zt=n(395);Object.defineProperty(e,"brandColor",{enumerable:!0,get:function(){return pe(Zt).default}});var $t=n(396);Object.defineProperty(e,"directionClassName",{enumerable:!0,get:function(){return pe($t).default}});var te=n(397);Object.defineProperty(e,"errorToString",{enumerable:!0,get:function(){return pe(te).default}});var ee=n(398);Object.defineProperty(e,"getUniqueId",{enumerable:!0,get:function(){return pe(ee).default}});var ne=n(399);Object.defineProperty(e,"isMobile",{enumerable:!0,get:function(){return pe(ne).default}});var re=n(400);Object.defineProperty(e,"isValidEmail",{enumerable:!0,get:function(){return pe(re).default}});var ie=n(401);Object.defineProperty(e,"isValidPassword",{enumerable:!0,get:function(){return pe(ie).default}});var oe=n(402);Object.defineProperty(e,"addFullscreenEventListener",{enumerable:!0,get:function(){return pe(oe).default}});var ae=n(403);Object.defineProperty(e,"exitFullscreen",{enumerable:!0,get:function(){return pe(ae).default}});var se=n(404);Object.defineProperty(e,"removeFullscreenEventListener",{enumerable:!0,get:function(){return pe(se).default}});var ce=n(405);Object.defineProperty(e,"requestFullscreen",{enumerable:!0,get:function(){return pe(ce).default}});var ue=n(406);Object.defineProperty(e,"showInfo",{enumerable:!0,get:function(){return pe(ue).default}});var le=n(407);Object.defineProperty(e,"showError",{enumerable:!0,get:function(){return pe(le).default}});var he=n(408);function pe(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"windowResizeEvent",{enumerable:!0,get:function(){return pe(he).default}})},function(t,e){var n=t.exports={version:"2.6.10"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=function(t){"use strict";var e,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function c(t,e,n,r){var i=e&&e.prototype instanceof y?e:y,o=Object.create(i.prototype),a=new O(r||[]);return o._invoke=function(t,e,n){var r=l;return function(i,o){if(r===p)throw new Error("Generator is already running");if(r===f){if("throw"===i)throw o;return I()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=f,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=p;var c=u(t,e,n);if("normal"===c.type){if(r=n.done?f:h,c.arg===d)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=f,n.method="throw",n.arg=c.arg)}}}(t,n,a),o}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var l="suspendedStart",h="suspendedYield",p="executing",f="completed",d={};function y(){}function m(){}function g(){}var v={};v[o]=function(){return this};var b=Object.getPrototypeOf,_=b&&b(b(C([])));_&&_!==n&&r.call(_,o)&&(v=_);var E=g.prototype=y.prototype=Object.create(v);function T(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function S(t){var e;this._invoke=function(n,i){function o(){return new Promise((function(e,o){!function e(n,i,o,a){var s=u(t[n],t,i);if("throw"!==s.type){var c=s.arg,l=c.value;return l&&"object"==typeof l&&r.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,o,a)}),(function(t){e("throw",t,o,a)})):Promise.resolve(l).then((function(t){c.value=t,o(c)}),(function(t){return e("throw",t,o,a)}))}a(s.arg)}(n,i,e,o)}))}return e=e?e.then(o,o):o()}}function k(t,n){var r=t.iterator[n.method];if(r===e){if(n.delegate=null,"throw"===n.method){if(t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method))return d;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=u(r,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,d;var o=i.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function C(t){if(t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function n(){for(;++i<t.length;)if(r.call(t,i))return n.value=t[i],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}return{next:I}}function I(){return{value:e,done:!0}}return m.prototype=E.constructor=g,g.constructor=m,g[s]=m.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(E),t},t.awrap=function(t){return{__await:t}},T(S.prototype),S.prototype[a]=function(){return this},t.AsyncIterator=S,t.async=function(e,n,r,i){var o=new S(c(e,n,r,i));return t.isGeneratorFunction(n)?o:o.next().then((function(t){return t.done?t.value:o.next()}))},T(E),E[s]="Generator",E[o]=function(){return this},E.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=C,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(A),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return s.type="throw",s.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],s=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(c&&u){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=t,a.arg=e,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),d},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),d}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;A(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e,n){(function(t){var r=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++)n[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return n},i=/%[sdj%]/g;e.format=function(t){if(!g(t)){for(var e=[],n=0;n<arguments.length;n++)e.push(s(arguments[n]));return e.join(" ")}n=1;for(var r=arguments,o=r.length,a=String(t).replace(i,(function(t){if("%%"===t)return"%";if(n>=o)return t;switch(t){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return t}})),c=r[n];n<o;c=r[++n])y(c)||!_(c)?a+=" "+c:a+=" "+s(c);return a},e.deprecate=function(n,r){if(void 0!==t&&!0===t.noDeprecation)return n;if(void 0===t)return function(){return e.deprecate(n,r).apply(this,arguments)};var i=!1;return function(){if(!i){if(t.throwDeprecation)throw new Error(r);t.traceDeprecation?console.trace(r):console.error(r),i=!0}return n.apply(this,arguments)}};var o,a={};function s(t,n){var r={seen:[],stylize:u};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),d(n)?r.showHidden=n:n&&e._extend(r,n),v(r.showHidden)&&(r.showHidden=!1),v(r.depth)&&(r.depth=2),v(r.colors)&&(r.colors=!1),v(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),l(r,t,r.depth)}function c(t,e){var n=s.styles[e];return n?"["+s.colors[n][0]+"m"+t+"["+s.colors[n][1]+"m":t}function u(t,e){return t}function l(t,n,r){if(t.customInspect&&n&&S(n.inspect)&&n.inspect!==e.inspect&&(!n.constructor||n.constructor.prototype!==n)){var i=n.inspect(r,t);return g(i)||(i=l(t,i,r)),i}var o=function(t,e){if(v(e))return t.stylize("undefined","undefined");if(g(e)){var n="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(n,"string")}return m(e)?t.stylize(""+e,"number"):d(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,n);if(o)return o;var a=Object.keys(n),s=function(t){var e={};return t.forEach((function(t,n){e[t]=!0})),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(n)),T(n)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(n);if(0===a.length){if(S(n)){var c=n.name?": "+n.name:"";return t.stylize("[Function"+c+"]","special")}if(b(n))return t.stylize(RegExp.prototype.toString.call(n),"regexp");if(E(n))return t.stylize(Date.prototype.toString.call(n),"date");if(T(n))return h(n)}var u,_="",k=!1,w=["{","}"];return f(n)&&(k=!0,w=["[","]"]),S(n)&&(_=" [Function"+(n.name?": "+n.name:"")+"]"),b(n)&&(_=" "+RegExp.prototype.toString.call(n)),E(n)&&(_=" "+Date.prototype.toUTCString.call(n)),T(n)&&(_=" "+h(n)),0!==a.length||k&&0!=n.length?r<0?b(n)?t.stylize(RegExp.prototype.toString.call(n),"regexp"):t.stylize("[Object]","special"):(t.seen.push(n),u=k?function(t,e,n,r,i){for(var o=[],a=0,s=e.length;a<s;++a)C(e,String(a))?o.push(p(t,e,n,r,String(a),!0)):o.push("");return i.forEach((function(i){i.match(/^\d+$/)||o.push(p(t,e,n,r,i,!0))})),o}(t,n,r,s,a):a.map((function(e){return p(t,n,r,s,e,k)})),t.seen.pop(),function(t,e,n){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?n[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+n[1]:n[0]+e+" "+t.join(", ")+" "+n[1]}(u,_,w)):w[0]+_+w[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function p(t,e,n,r,i,o){var a,s,c;if((c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]}).get?s=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(s=t.stylize("[Setter]","special")),C(r,i)||(a="["+i+"]"),s||(t.seen.indexOf(c.value)<0?(s=y(n)?l(t,c.value,null):l(t,c.value,n-1)).indexOf("\n")>-1&&(s=o?s.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+s.split("\n").map((function(t){return"   "+t})).join("\n")):s=t.stylize("[Circular]","special")),v(a)){if(o&&i.match(/^\d+$/))return s;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+s}function f(t){return Array.isArray(t)}function d(t){return"boolean"==typeof t}function y(t){return null===t}function m(t){return"number"==typeof t}function g(t){return"string"==typeof t}function v(t){return void 0===t}function b(t){return _(t)&&"[object RegExp]"===k(t)}function _(t){return"object"==typeof t&&null!==t}function E(t){return _(t)&&"[object Date]"===k(t)}function T(t){return _(t)&&("[object Error]"===k(t)||t instanceof Error)}function S(t){return"function"==typeof t}function k(t){return Object.prototype.toString.call(t)}function w(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(n){if(v(o)&&(o=t.env.NODE_DEBUG||""),n=n.toUpperCase(),!a[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=t.pid;a[n]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",n,r,t)}}else a[n]=function(){};return a[n]},e.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=d,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=g,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=v,e.isRegExp=b,e.isObject=_,e.isDate=E,e.isError=T,e.isFunction=S,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=n(276);var A=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function O(){var t=new Date,e=[w(t.getHours()),w(t.getMinutes()),w(t.getSeconds())].join(":");return[t.getDate(),A[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",O(),e.format.apply(e,arguments))},e.inherits=n(277),e._extend=function(t,e){if(!e||!_(e))return t;for(var n=Object.keys(e),r=n.length;r--;)t[n[r]]=e[n[r]];return t};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function N(t,e){if(!t){var n=new Error("Promise was rejected with a falsy value");n.reason=t,t=n}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(I&&t[I]){var e;if("function"!=typeof(e=t[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,n,r=new Promise((function(t,r){e=t,n=r})),i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);i.push((function(t,r){t?n(t):e(r)}));try{t.apply(this,i)}catch(t){n(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),I&&Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,r(t))},e.promisify.custom=I,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var i=n.pop();if("function"!=typeof i)throw new TypeError("The last argument must be of type Function");var o=this,a=function(){return i.apply(o,arguments)};e.apply(this,n).then((function(e){t.nextTick(a,null,e)}),(function(e){t.nextTick(N,e,a)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(e)),Object.defineProperties(n,r(e)),n}}).call(this,n(53))},function(t,e){t.exports=h},function(t,e,n){var r=n(26),i=n(65);t.exports=n(23)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){"use strict";var r=n(150)(!0);n(109)(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})}))},function(t,e,n){var r=n(66);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e,n){var r=n(110),i=n(57);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(81),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e,n){var r=n(57);t.exports=function(t){return Object(r(t))}},function(t,e,n){"use strict";var r=n(19),i=n(47),o=n(46),a=n(81),s=n(121),c=n(84),u=Math.max,l=Math.min,h=Math.floor,p=/\$([$&`']|\d\d?|<[^>]*>)/g,f=/\$([$&`']|\d\d?)/g;n(86)("replace",2,(function(t,e,n,d){return[function(r,i){var o=t(this),a=null==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},function(t,e){var i=d(n,t,this,e);if(i.done)return i.value;var h=r(t),p=String(this),f="function"==typeof e;f||(e=String(e));var m=h.global;if(m){var g=h.unicode;h.lastIndex=0}for(var v=[];;){var b=c(h,p);if(null===b)break;if(v.push(b),!m)break;""===String(b[0])&&(h.lastIndex=s(p,o(h.lastIndex),g))}for(var _,E="",T=0,S=0;S<v.length;S++){b=v[S];for(var k=String(b[0]),w=u(l(a(b.index),p.length),0),A=[],O=1;O<b.length;O++)A.push(void 0===(_=b[O])?_:String(_));var C=b.groups;if(f){var I=[k].concat(A,w,p);void 0!==C&&I.push(C);var N=String(e.apply(void 0,I))}else N=y(k,p,w,A,C,e);w>=T&&(E+=p.slice(T,w)+N,T=w+k.length)}return E+p.slice(T)}];function y(t,e,r,o,a,s){var c=r+t.length,u=o.length,l=f;return void 0!==a&&(a=i(a),l=p),n.call(s,l,(function(n,i){var s;switch(i.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,r);case"'":return e.slice(c);case"<":s=a[i.slice(1,-1)];break;default:var l=+i;if(0===l)return n;if(l>u){var p=h(l/10);return 0===p?n:p<=u?void 0===o[p-1]?i.charAt(1):o[p-1]+i.charAt(1):n}s=o[l-1]}return void 0===s?"":s}))}}))},function(t,e,n){"use strict";var r=n(14),i=n(164)(6),o="findIndex",a=!0;o in[]&&Array(1)[o]((function(){a=!1})),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(83)(o)},function(t,e){t.exports=p},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var r=n(151),i=n(112);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],l=!1,h=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var t=s(p);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.prependListener=y,i.prependOnceListener=y,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";var r=n(44),i=n(14),o=n(47),a=n(155),s=n(156),c=n(46),u=n(169),l=n(157);i(i.S+i.F*!n(119)((function(t){Array.from(t)})),"Array",{from:function(t){var e,n,i,h,p=o(t),f="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,m=void 0!==y,g=0,v=l(p);if(m&&(y=r(y,d>2?arguments[2]:void 0,2)),null==v||f==Array&&s(v))for(n=new f(e=c(p.length));e>g;g++)u(n,g,m?y(p[g],g):p[g]);else for(h=v.call(p),n=new f;!(i=h.next()).done;g++)u(n,g,m?a(h,y,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){"use strict";var r=n(94),i=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e};t.exports=h;var o=n(73);o.inherits=n(61);var a=n(176),s=n(132);o.inherits(h,a);for(var c=i(s.prototype),u=0;u<c.length;u++){var l=c[u];h.prototype[l]||(h.prototype[l]=s.prototype[l])}function h(t){if(!(this instanceof h))return new h(t);a.call(this,t),s.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",p)}function p(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),h.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},function(t,e){t.exports=f},function(t,e){t.exports=function(t){if(null==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){"use strict";var r=n(120),i=n(19),o=n(115),a=n(121),s=n(46),c=n(84),u=n(122),l=n(24),h=Math.min,p=[].push,f=!l((function(){RegExp(4294967295,"y")}));n(86)("split",2,(function(t,e,n,l){var d;return d="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);for(var o,a,s,c=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),h=0,f=void 0===e?4294967295:e>>>0,d=new RegExp(t.source,l+"g");(o=u.call(d,i))&&!((a=d.lastIndex)>h&&(c.push(i.slice(h,o.index)),o.length>1&&o.index<i.length&&p.apply(c,o.slice(1)),s=o[0].length,h=a,c.length>=f));)d.lastIndex===o.index&&d.lastIndex++;return h===i.length?!s&&d.test("")||c.push(""):c.push(i.slice(h)),c.length>f?c.slice(0,f):c}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),o=null==n?void 0:n[e];return void 0!==o?o.call(n,i,r):d.call(String(i),n,r)},function(t,e){var r=l(d,t,this,e,d!==n);if(r.done)return r.value;var u=i(t),p=String(this),y=o(u,RegExp),m=u.unicode,g=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),v=new y(f?u:"^(?:"+u.source+")",g),b=void 0===e?4294967295:e>>>0;if(0===b)return[];if(0===p.length)return null===c(v,p)?[p]:[];for(var _=0,E=0,T=[];E<p.length;){v.lastIndex=f?E:0;var S,k=c(v,f?p:p.slice(E));if(null===k||(S=h(s(v.lastIndex+(f?0:E)),p.length))===_)E=a(p,E,m);else{if(T.push(p.slice(_,E)),T.length===b)return T;for(var w=1;w<=k.length-1;w++)if(T.push(k[w]),T.length===b)return T;E=_=S}}return T.push(p.slice(_)),T}]}))},function(t,e,n){var r=n(14);r(r.S+r.F,"Object",{assign:n(264)})},function(t,e,n){"use strict";var r=n(271),i=n(72),o=n(272),a=i.CODE_POINTS,s=i.CODE_POINT_SEQUENCES,c={0:65533,13:13,128:8364,129:129,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,141:141,142:381,143:143,144:144,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,157:157,158:382,159:376},u="DATA_STATE";function l(t){return t===a.SPACE||t===a.LINE_FEED||t===a.TABULATION||t===a.FORM_FEED}function h(t){return t>=a.DIGIT_0&&t<=a.DIGIT_9}function p(t){return t>=a.LATIN_CAPITAL_A&&t<=a.LATIN_CAPITAL_Z}function f(t){return t>=a.LATIN_SMALL_A&&t<=a.LATIN_SMALL_Z}function d(t){return f(t)||p(t)}function y(t,e){return h(t)||e&&(t>=a.LATIN_CAPITAL_A&&t<=a.LATIN_CAPITAL_F||t>=a.LATIN_SMALL_A&&t<=a.LATIN_SMALL_F)}function m(t){return t+32}function g(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(t>>>10&1023|55296)+String.fromCharCode(56320|1023&t))}function v(t){return String.fromCharCode(m(t))}function b(t,e){for(var n=o[++t],r=++t,i=r+n-1;r<=i;){var a=r+i>>>1,s=o[a];if(s<e)r=a+1;else{if(!(s>e))return o[a+n];i=a-1}}return-1}var _=t.exports=function(){this.preprocessor=new r,this.tokenQueue=[],this.allowCDATA=!1,this.state=u,this.returnState="",this.tempBuff=[],this.additionalAllowedCp=void 0,this.lastStartTagName="",this.consumedAfterSnapshot=-1,this.active=!1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr=null};_.CHARACTER_TOKEN="CHARACTER_TOKEN",_.NULL_CHARACTER_TOKEN="NULL_CHARACTER_TOKEN",_.WHITESPACE_CHARACTER_TOKEN="WHITESPACE_CHARACTER_TOKEN",_.START_TAG_TOKEN="START_TAG_TOKEN",_.END_TAG_TOKEN="END_TAG_TOKEN",_.COMMENT_TOKEN="COMMENT_TOKEN",_.DOCTYPE_TOKEN="DOCTYPE_TOKEN",_.EOF_TOKEN="EOF_TOKEN",_.HIBERNATION_TOKEN="HIBERNATION_TOKEN",_.MODE={DATA:u,RCDATA:"RCDATA_STATE",RAWTEXT:"RAWTEXT_STATE",SCRIPT_DATA:"SCRIPT_DATA_STATE",PLAINTEXT:"PLAINTEXT_STATE"},_.getTokenAttr=function(t,e){for(var n=t.attrs.length-1;n>=0;n--)if(t.attrs[n].name===e)return t.attrs[n].value;return null},_.prototype.getNextToken=function(){for(;!this.tokenQueue.length&&this.active;){this._hibernationSnapshot();var t=this._consume();this._ensureHibernation()||this[this.state](t)}return this.tokenQueue.shift()},_.prototype.write=function(t,e){this.active=!0,this.preprocessor.write(t,e)},_.prototype.insertHtmlAtCurrentPos=function(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t)},_.prototype._hibernationSnapshot=function(){this.consumedAfterSnapshot=0},_.prototype._ensureHibernation=function(){if(this.preprocessor.endOfChunkHit){for(;this.consumedAfterSnapshot>0;this.consumedAfterSnapshot--)this.preprocessor.retreat();return this.active=!1,this.tokenQueue.push({type:_.HIBERNATION_TOKEN}),!0}return!1},_.prototype._consume=function(){return this.consumedAfterSnapshot++,this.preprocessor.advance()},_.prototype._unconsume=function(){this.consumedAfterSnapshot--,this.preprocessor.retreat()},_.prototype._unconsumeSeveral=function(t){for(;t--;)this._unconsume()},_.prototype._reconsumeInState=function(t){this.state=t,this._unconsume()},_.prototype._consumeSubsequentIfMatch=function(t,e,n){for(var r=0,i=!0,o=t.length,s=0,c=e,u=void 0;s<o;s++){if(s>0&&(c=this._consume(),r++),c===a.EOF){i=!1;break}if(c!==(u=t[s])&&(n||c!==m(u))){i=!1;break}}return i||this._unconsumeSeveral(r),i},_.prototype._lookahead=function(){var t=this._consume();return this._unconsume(),t},_.prototype.isTempBufferEqualToScriptString=function(){if(this.tempBuff.length!==s.SCRIPT_STRING.length)return!1;for(var t=0;t<this.tempBuff.length;t++)if(this.tempBuff[t]!==s.SCRIPT_STRING[t])return!1;return!0},_.prototype._createStartTagToken=function(){this.currentToken={type:_.START_TAG_TOKEN,tagName:"",selfClosing:!1,attrs:[]}},_.prototype._createEndTagToken=function(){this.currentToken={type:_.END_TAG_TOKEN,tagName:"",attrs:[]}},_.prototype._createCommentToken=function(){this.currentToken={type:_.COMMENT_TOKEN,data:""}},_.prototype._createDoctypeToken=function(t){this.currentToken={type:_.DOCTYPE_TOKEN,name:t,forceQuirks:!1,publicId:null,systemId:null}},_.prototype._createCharacterToken=function(t,e){this.currentCharacterToken={type:t,chars:e}},_.prototype._createAttr=function(t){this.currentAttr={name:t,value:""}},_.prototype._isDuplicateAttr=function(){return null!==_.getTokenAttr(this.currentToken,this.currentAttr.name)},_.prototype._leaveAttrName=function(t){this.state=t,this._isDuplicateAttr()||this.currentToken.attrs.push(this.currentAttr)},_.prototype._leaveAttrValue=function(t){this.state=t},_.prototype._isAppropriateEndTagToken=function(){return this.lastStartTagName===this.currentToken.tagName},_.prototype._emitCurrentToken=function(){this._emitCurrentCharacterToken(),this.currentToken.type===_.START_TAG_TOKEN&&(this.lastStartTagName=this.currentToken.tagName),this.tokenQueue.push(this.currentToken),this.currentToken=null},_.prototype._emitCurrentCharacterToken=function(){this.currentCharacterToken&&(this.tokenQueue.push(this.currentCharacterToken),this.currentCharacterToken=null)},_.prototype._emitEOFToken=function(){this._emitCurrentCharacterToken(),this.tokenQueue.push({type:_.EOF_TOKEN})},_.prototype._appendCharToCurrentCharacterToken=function(t,e){this.currentCharacterToken&&this.currentCharacterToken.type!==t&&this._emitCurrentCharacterToken(),this.currentCharacterToken?this.currentCharacterToken.chars+=e:this._createCharacterToken(t,e)},_.prototype._emitCodePoint=function(t){var e=_.CHARACTER_TOKEN;l(t)?e=_.WHITESPACE_CHARACTER_TOKEN:t===a.NULL&&(e=_.NULL_CHARACTER_TOKEN),this._appendCharToCurrentCharacterToken(e,g(t))},_.prototype._emitSeveralCodePoints=function(t){for(var e=0;e<t.length;e++)this._emitCodePoint(t[e])},_.prototype._emitChar=function(t){this._appendCharToCurrentCharacterToken(_.CHARACTER_TOKEN,t)},_.prototype._consumeNumericEntity=function(t){var e="",n=void 0;do{e+=g(this._consume()),n=this._lookahead()}while(n!==a.EOF&&y(n,t));this._lookahead()===a.SEMICOLON&&this._consume();var r,i=parseInt(e,t?16:10);return c[i]||((r=i)>=55296&&r<=57343||r>1114111?a.REPLACEMENT_CHARACTER:i)},_.prototype._consumeNamedEntity=function(t){for(var e=null,n=0,r=null,i=0,s=!1,c=0;c>-1;){var u=o[c],l=u<7;if(l&&1&u&&(e=2&u?[o[++c],o[++c]]:[o[++c]],n=i,r===a.SEMICOLON)){s=!0;break}if(i++,(r=this._consume())===a.EOF)break;c=l?4&u?b(c,r):-1:r===u?++c:-1}if(e){if(!s&&(this._unconsumeSeveral(i-n),t)){var p=this._lookahead();if(p===a.EQUALS_SIGN||function(t){return d(t)||h(t)}(p))return this._unconsumeSeveral(n),null}return e}return this._unconsumeSeveral(i),null},_.prototype._consumeCharacterReference=function(t,e){if(l(t)||t===a.GREATER_THAN_SIGN||t===a.AMPERSAND||t===this.additionalAllowedCp||t===a.EOF)return this._unconsume(),null;if(t===a.NUMBER_SIGN){var n=!1,r=this._lookahead();return r!==a.LATIN_SMALL_X&&r!==a.LATIN_CAPITAL_X||(this._consume(),n=!0),(r=this._lookahead())!==a.EOF&&y(r,n)?[this._consumeNumericEntity(n)]:(this._unconsumeSeveral(n?2:1),null)}return this._unconsume(),this._consumeNamedEntity(e)};var E=_.prototype;E.DATA_STATE=function(t){this.preprocessor.dropParsedChunk(),t===a.AMPERSAND?this.state="CHARACTER_REFERENCE_IN_DATA_STATE":t===a.LESS_THAN_SIGN?this.state="TAG_OPEN_STATE":t===a.NULL?this._emitCodePoint(t):t===a.EOF?this._emitEOFToken():this._emitCodePoint(t)},E.CHARACTER_REFERENCE_IN_DATA_STATE=function(t){this.additionalAllowedCp=void 0;var e=this._consumeCharacterReference(t,!1);this._ensureHibernation()||(e?this._emitSeveralCodePoints(e):this._emitChar("&"),this.state=u)},E.RCDATA_STATE=function(t){this.preprocessor.dropParsedChunk(),t===a.AMPERSAND?this.state="CHARACTER_REFERENCE_IN_RCDATA_STATE":t===a.LESS_THAN_SIGN?this.state="RCDATA_LESS_THAN_SIGN_STATE":t===a.NULL?this._emitChar(i.REPLACEMENT_CHARACTER):t===a.EOF?this._emitEOFToken():this._emitCodePoint(t)},E.CHARACTER_REFERENCE_IN_RCDATA_STATE=function(t){this.additionalAllowedCp=void 0;var e=this._consumeCharacterReference(t,!1);this._ensureHibernation()||(e?this._emitSeveralCodePoints(e):this._emitChar("&"),this.state="RCDATA_STATE")},E.RAWTEXT_STATE=function(t){this.preprocessor.dropParsedChunk(),t===a.LESS_THAN_SIGN?this.state="RAWTEXT_LESS_THAN_SIGN_STATE":t===a.NULL?this._emitChar(i.REPLACEMENT_CHARACTER):t===a.EOF?this._emitEOFToken():this._emitCodePoint(t)},E.SCRIPT_DATA_STATE=function(t){this.preprocessor.dropParsedChunk(),t===a.LESS_THAN_SIGN?this.state="SCRIPT_DATA_LESS_THAN_SIGN_STATE":t===a.NULL?this._emitChar(i.REPLACEMENT_CHARACTER):t===a.EOF?this._emitEOFToken():this._emitCodePoint(t)},E.PLAINTEXT_STATE=function(t){this.preprocessor.dropParsedChunk(),t===a.NULL?this._emitChar(i.REPLACEMENT_CHARACTER):t===a.EOF?this._emitEOFToken():this._emitCodePoint(t)},E.TAG_OPEN_STATE=function(t){t===a.EXCLAMATION_MARK?this.state="MARKUP_DECLARATION_OPEN_STATE":t===a.SOLIDUS?this.state="END_TAG_OPEN_STATE":d(t)?(this._createStartTagToken(),this._reconsumeInState("TAG_NAME_STATE")):t===a.QUESTION_MARK?this._reconsumeInState("BOGUS_COMMENT_STATE"):(this._emitChar("<"),this._reconsumeInState(u))},E.END_TAG_OPEN_STATE=function(t){d(t)?(this._createEndTagToken(),this._reconsumeInState("TAG_NAME_STATE")):t===a.GREATER_THAN_SIGN?this.state=u:t===a.EOF?(this._reconsumeInState(u),this._emitChar("<"),this._emitChar("/")):this._reconsumeInState("BOGUS_COMMENT_STATE")},E.TAG_NAME_STATE=function(t){l(t)?this.state="BEFORE_ATTRIBUTE_NAME_STATE":t===a.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":t===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):p(t)?this.currentToken.tagName+=v(t):t===a.NULL?this.currentToken.tagName+=i.REPLACEMENT_CHARACTER:t===a.EOF?this._reconsumeInState(u):this.currentToken.tagName+=g(t)},E.RCDATA_LESS_THAN_SIGN_STATE=function(t){t===a.SOLIDUS?(this.tempBuff=[],this.state="RCDATA_END_TAG_OPEN_STATE"):(this._emitChar("<"),this._reconsumeInState("RCDATA_STATE"))},E.RCDATA_END_TAG_OPEN_STATE=function(t){d(t)?(this._createEndTagToken(),this._reconsumeInState("RCDATA_END_TAG_NAME_STATE")):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState("RCDATA_STATE"))},E.RCDATA_END_TAG_NAME_STATE=function(t){if(p(t))this.currentToken.tagName+=v(t),this.tempBuff.push(t);else if(f(t))this.currentToken.tagName+=g(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(l(t))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(t===a.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(t===a.GREATER_THAN_SIGN)return this.state=u,void this._emitCurrentToken()}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RCDATA_STATE")}},E.RAWTEXT_LESS_THAN_SIGN_STATE=function(t){t===a.SOLIDUS?(this.tempBuff=[],this.state="RAWTEXT_END_TAG_OPEN_STATE"):(this._emitChar("<"),this._reconsumeInState("RAWTEXT_STATE"))},E.RAWTEXT_END_TAG_OPEN_STATE=function(t){d(t)?(this._createEndTagToken(),this._reconsumeInState("RAWTEXT_END_TAG_NAME_STATE")):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState("RAWTEXT_STATE"))},E.RAWTEXT_END_TAG_NAME_STATE=function(t){if(p(t))this.currentToken.tagName+=v(t),this.tempBuff.push(t);else if(f(t))this.currentToken.tagName+=g(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(l(t))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(t===a.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(t===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=u)}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("RAWTEXT_STATE")}},E.SCRIPT_DATA_LESS_THAN_SIGN_STATE=function(t){t===a.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_END_TAG_OPEN_STATE"):t===a.EXCLAMATION_MARK?(this.state="SCRIPT_DATA_ESCAPE_START_STATE",this._emitChar("<"),this._emitChar("!")):(this._emitChar("<"),this._reconsumeInState("SCRIPT_DATA_STATE"))},E.SCRIPT_DATA_END_TAG_OPEN_STATE=function(t){d(t)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_END_TAG_NAME_STATE")):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState("SCRIPT_DATA_STATE"))},E.SCRIPT_DATA_END_TAG_NAME_STATE=function(t){if(p(t))this.currentToken.tagName+=v(t),this.tempBuff.push(t);else if(f(t))this.currentToken.tagName+=g(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(l(t))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(t===a.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(t===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=u)}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_STATE")}},E.SCRIPT_DATA_ESCAPE_START_STATE=function(t){t===a.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPE_START_DASH_STATE",this._emitChar("-")):this._reconsumeInState("SCRIPT_DATA_STATE")},E.SCRIPT_DATA_ESCAPE_START_DASH_STATE=function(t){t===a.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChar("-")):this._reconsumeInState("SCRIPT_DATA_STATE")},E.SCRIPT_DATA_ESCAPED_STATE=function(t){t===a.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_STATE",this._emitChar("-")):t===a.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":t===a.NULL?this._emitChar(i.REPLACEMENT_CHARACTER):t===a.EOF?this._reconsumeInState(u):this._emitCodePoint(t)},E.SCRIPT_DATA_ESCAPED_DASH_STATE=function(t){t===a.HYPHEN_MINUS?(this.state="SCRIPT_DATA_ESCAPED_DASH_DASH_STATE",this._emitChar("-")):t===a.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":t===a.NULL?(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChar(i.REPLACEMENT_CHARACTER)):t===a.EOF?this._reconsumeInState(u):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(t))},E.SCRIPT_DATA_ESCAPED_DASH_DASH_STATE=function(t){t===a.HYPHEN_MINUS?this._emitChar("-"):t===a.LESS_THAN_SIGN?this.state="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE":t===a.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChar(">")):t===a.NULL?(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitChar(i.REPLACEMENT_CHARACTER)):t===a.EOF?this._reconsumeInState(u):(this.state="SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(t))},E.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN_STATE=function(t){t===a.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE"):d(t)?(this.tempBuff=[],this._emitChar("<"),this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE")):(this._emitChar("<"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))},E.SCRIPT_DATA_ESCAPED_END_TAG_OPEN_STATE=function(t){d(t)?(this._createEndTagToken(),this._reconsumeInState("SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE")):(this._emitChar("<"),this._emitChar("/"),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE"))},E.SCRIPT_DATA_ESCAPED_END_TAG_NAME_STATE=function(t){if(p(t))this.currentToken.tagName+=v(t),this.tempBuff.push(t);else if(f(t))this.currentToken.tagName+=g(t),this.tempBuff.push(t);else{if(this._isAppropriateEndTagToken()){if(l(t))return void(this.state="BEFORE_ATTRIBUTE_NAME_STATE");if(t===a.SOLIDUS)return void(this.state="SELF_CLOSING_START_TAG_STATE");if(t===a.GREATER_THAN_SIGN)return this._emitCurrentToken(),void(this.state=u)}this._emitChar("<"),this._emitChar("/"),this._emitSeveralCodePoints(this.tempBuff),this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")}},E.SCRIPT_DATA_DOUBLE_ESCAPE_START_STATE=function(t){l(t)||t===a.SOLIDUS||t===a.GREATER_THAN_SIGN?(this.state=this.isTempBufferEqualToScriptString()?"SCRIPT_DATA_DOUBLE_ESCAPED_STATE":"SCRIPT_DATA_ESCAPED_STATE",this._emitCodePoint(t)):p(t)?(this.tempBuff.push(m(t)),this._emitCodePoint(t)):f(t)?(this.tempBuff.push(t),this._emitCodePoint(t)):this._reconsumeInState("SCRIPT_DATA_ESCAPED_STATE")},E.SCRIPT_DATA_DOUBLE_ESCAPED_STATE=function(t){t===a.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE",this._emitChar("-")):t===a.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChar("<")):t===a.NULL?this._emitChar(i.REPLACEMENT_CHARACTER):t===a.EOF?this._reconsumeInState(u):this._emitCodePoint(t)},E.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_STATE=function(t){t===a.HYPHEN_MINUS?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE",this._emitChar("-")):t===a.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChar("<")):t===a.NULL?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChar(i.REPLACEMENT_CHARACTER)):t===a.EOF?this._reconsumeInState(u):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(t))},E.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH_STATE=function(t){t===a.HYPHEN_MINUS?this._emitChar("-"):t===a.LESS_THAN_SIGN?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE",this._emitChar("<")):t===a.GREATER_THAN_SIGN?(this.state="SCRIPT_DATA_STATE",this._emitChar(">")):t===a.NULL?(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitChar(i.REPLACEMENT_CHARACTER)):t===a.EOF?this._reconsumeInState(u):(this.state="SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(t))},E.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN_STATE=function(t){t===a.SOLIDUS?(this.tempBuff=[],this.state="SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE",this._emitChar("/")):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")},E.SCRIPT_DATA_DOUBLE_ESCAPE_END_STATE=function(t){l(t)||t===a.SOLIDUS||t===a.GREATER_THAN_SIGN?(this.state=this.isTempBufferEqualToScriptString()?"SCRIPT_DATA_ESCAPED_STATE":"SCRIPT_DATA_DOUBLE_ESCAPED_STATE",this._emitCodePoint(t)):p(t)?(this.tempBuff.push(m(t)),this._emitCodePoint(t)):f(t)?(this.tempBuff.push(t),this._emitCodePoint(t)):this._reconsumeInState("SCRIPT_DATA_DOUBLE_ESCAPED_STATE")},E.BEFORE_ATTRIBUTE_NAME_STATE=function(t){l(t)||(t===a.SOLIDUS||t===a.GREATER_THAN_SIGN||t===a.EOF?this._reconsumeInState("AFTER_ATTRIBUTE_NAME_STATE"):t===a.EQUALS_SIGN?(this._createAttr("="),this.state="ATTRIBUTE_NAME_STATE"):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))},E.ATTRIBUTE_NAME_STATE=function(t){l(t)||t===a.SOLIDUS||t===a.GREATER_THAN_SIGN||t===a.EOF?(this._leaveAttrName("AFTER_ATTRIBUTE_NAME_STATE"),this._unconsume()):t===a.EQUALS_SIGN?this._leaveAttrName("BEFORE_ATTRIBUTE_VALUE_STATE"):p(t)?this.currentAttr.name+=v(t):t===a.QUOTATION_MARK||t===a.APOSTROPHE||t===a.LESS_THAN_SIGN?this.currentAttr.name+=g(t):t===a.NULL?this.currentAttr.name+=i.REPLACEMENT_CHARACTER:this.currentAttr.name+=g(t)},E.AFTER_ATTRIBUTE_NAME_STATE=function(t){l(t)||(t===a.SOLIDUS?this.state="SELF_CLOSING_START_TAG_STATE":t===a.EQUALS_SIGN?this.state="BEFORE_ATTRIBUTE_VALUE_STATE":t===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):t===a.EOF?this._reconsumeInState(u):(this._createAttr(""),this._reconsumeInState("ATTRIBUTE_NAME_STATE")))},E.BEFORE_ATTRIBUTE_VALUE_STATE=function(t){l(t)||(t===a.QUOTATION_MARK?this.state="ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE":t===a.APOSTROPHE?this.state="ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE":this._reconsumeInState("ATTRIBUTE_VALUE_UNQUOTED_STATE"))},E.ATTRIBUTE_VALUE_DOUBLE_QUOTED_STATE=function(t){t===a.QUOTATION_MARK?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":t===a.AMPERSAND?(this.additionalAllowedCp=a.QUOTATION_MARK,this.returnState=this.state,this.state="CHARACTER_REFERENCE_IN_ATTRIBUTE_VALUE_STATE"):t===a.NULL?this.currentAttr.value+=i.REPLACEMENT_CHARACTER:t===a.EOF?this._reconsumeInState(u):this.currentAttr.value+=g(t)},E.ATTRIBUTE_VALUE_SINGLE_QUOTED_STATE=function(t){t===a.APOSTROPHE?this.state="AFTER_ATTRIBUTE_VALUE_QUOTED_STATE":t===a.AMPERSAND?(this.additionalAllowedCp=a.APOSTROPHE,this.returnState=this.state,this.state="CHARACTER_REFERENCE_IN_ATTRIBUTE_VALUE_STATE"):t===a.NULL?this.currentAttr.value+=i.REPLACEMENT_CHARACTER:t===a.EOF?this._reconsumeInState(u):this.currentAttr.value+=g(t)},E.ATTRIBUTE_VALUE_UNQUOTED_STATE=function(t){l(t)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):t===a.AMPERSAND?(this.additionalAllowedCp=a.GREATER_THAN_SIGN,this.returnState=this.state,this.state="CHARACTER_REFERENCE_IN_ATTRIBUTE_VALUE_STATE"):t===a.GREATER_THAN_SIGN?(this._leaveAttrValue(u),this._emitCurrentToken()):t===a.NULL?this.currentAttr.value+=i.REPLACEMENT_CHARACTER:t===a.QUOTATION_MARK||t===a.APOSTROPHE||t===a.LESS_THAN_SIGN||t===a.EQUALS_SIGN||t===a.GRAVE_ACCENT?this.currentAttr.value+=g(t):t===a.EOF?this._reconsumeInState(u):this.currentAttr.value+=g(t)},E.CHARACTER_REFERENCE_IN_ATTRIBUTE_VALUE_STATE=function(t){var e=this._consumeCharacterReference(t,!0);if(!this._ensureHibernation()){if(e)for(var n=0;n<e.length;n++)this.currentAttr.value+=g(e[n]);else this.currentAttr.value+="&";this.state=this.returnState}},E.AFTER_ATTRIBUTE_VALUE_QUOTED_STATE=function(t){l(t)?this._leaveAttrValue("BEFORE_ATTRIBUTE_NAME_STATE"):t===a.SOLIDUS?this._leaveAttrValue("SELF_CLOSING_START_TAG_STATE"):t===a.GREATER_THAN_SIGN?(this._leaveAttrValue(u),this._emitCurrentToken()):t===a.EOF?this._reconsumeInState(u):this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE")},E.SELF_CLOSING_START_TAG_STATE=function(t){t===a.GREATER_THAN_SIGN?(this.currentToken.selfClosing=!0,this.state=u,this._emitCurrentToken()):t===a.EOF?this._reconsumeInState(u):this._reconsumeInState("BEFORE_ATTRIBUTE_NAME_STATE")},E.BOGUS_COMMENT_STATE=function(){this._createCommentToken(),this._reconsumeInState("BOGUS_COMMENT_STATE_CONTINUATION")},E.BOGUS_COMMENT_STATE_CONTINUATION=function(t){for(;;){if(t===a.GREATER_THAN_SIGN){this.state=u;break}if(t===a.EOF){this._reconsumeInState(u);break}if(this.currentToken.data+=t===a.NULL?i.REPLACEMENT_CHARACTER:g(t),this._hibernationSnapshot(),t=this._consume(),this._ensureHibernation())return}this._emitCurrentToken()},E.MARKUP_DECLARATION_OPEN_STATE=function(t){var e=this._consumeSubsequentIfMatch(s.DASH_DASH_STRING,t,!0),n=!e&&this._consumeSubsequentIfMatch(s.DOCTYPE_STRING,t,!1),r=!e&&!n&&this.allowCDATA&&this._consumeSubsequentIfMatch(s.CDATA_START_STRING,t,!0);this._ensureHibernation()||(e?(this._createCommentToken(),this.state="COMMENT_START_STATE"):n?this.state="DOCTYPE_STATE":r?this.state="CDATA_SECTION_STATE":this._reconsumeInState("BOGUS_COMMENT_STATE"))},E.COMMENT_START_STATE=function(t){t===a.HYPHEN_MINUS?this.state="COMMENT_START_DASH_STATE":t===a.NULL?(this.currentToken.data+=i.REPLACEMENT_CHARACTER,this.state="COMMENT_STATE"):t===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):t===a.EOF?(this._emitCurrentToken(),this._reconsumeInState(u)):(this.currentToken.data+=g(t),this.state="COMMENT_STATE")},E.COMMENT_START_DASH_STATE=function(t){t===a.HYPHEN_MINUS?this.state="COMMENT_END_STATE":t===a.NULL?(this.currentToken.data+="-",this.currentToken.data+=i.REPLACEMENT_CHARACTER,this.state="COMMENT_STATE"):t===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):t===a.EOF?(this._emitCurrentToken(),this._reconsumeInState(u)):(this.currentToken.data+="-",this.currentToken.data+=g(t),this.state="COMMENT_STATE")},E.COMMENT_STATE=function(t){t===a.HYPHEN_MINUS?this.state="COMMENT_END_DASH_STATE":t===a.NULL?this.currentToken.data+=i.REPLACEMENT_CHARACTER:t===a.EOF?(this._emitCurrentToken(),this._reconsumeInState(u)):this.currentToken.data+=g(t)},E.COMMENT_END_DASH_STATE=function(t){t===a.HYPHEN_MINUS?this.state="COMMENT_END_STATE":t===a.NULL?(this.currentToken.data+="-",this.currentToken.data+=i.REPLACEMENT_CHARACTER,this.state="COMMENT_STATE"):t===a.EOF?(this._emitCurrentToken(),this._reconsumeInState(u)):(this.currentToken.data+="-",this.currentToken.data+=g(t),this.state="COMMENT_STATE")},E.COMMENT_END_STATE=function(t){t===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):t===a.EXCLAMATION_MARK?this.state="COMMENT_END_BANG_STATE":t===a.HYPHEN_MINUS?this.currentToken.data+="-":t===a.NULL?(this.currentToken.data+="--",this.currentToken.data+=i.REPLACEMENT_CHARACTER,this.state="COMMENT_STATE"):t===a.EOF?(this._reconsumeInState(u),this._emitCurrentToken()):(this.currentToken.data+="--",this.currentToken.data+=g(t),this.state="COMMENT_STATE")},E.COMMENT_END_BANG_STATE=function(t){t===a.HYPHEN_MINUS?(this.currentToken.data+="--!",this.state="COMMENT_END_DASH_STATE"):t===a.GREATER_THAN_SIGN?(this.state=u,this._emitCurrentToken()):t===a.NULL?(this.currentToken.data+="--!",this.currentToken.data+=i.REPLACEMENT_CHARACTER,this.state="COMMENT_STATE"):t===a.EOF?(this._emitCurrentToken(),this._reconsumeInState(u)):(this.currentToken.data+="--!",this.currentToken.data+=g(t),this.state="COMMENT_STATE")},E.DOCTYPE_STATE=function(t){l(t)||(t===a.GREATER_THAN_SIGN?(this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):t===a.EOF?(this._createDoctypeToken(null),this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(u)):(this._createDoctypeToken(""),this._reconsumeInState("DOCTYPE_NAME_STATE")))},E.DOCTYPE_NAME_STATE=function(t){l(t)||t===a.GREATER_THAN_SIGN||t===a.EOF?this._reconsumeInState("AFTER_DOCTYPE_NAME_STATE"):p(t)?this.currentToken.name+=v(t):t===a.NULL?this.currentToken.name+=i.REPLACEMENT_CHARACTER:this.currentToken.name+=g(t)},E.AFTER_DOCTYPE_NAME_STATE=function(t){if(!l(t))if(t===a.GREATER_THAN_SIGN)this.state=u,this._emitCurrentToken();else{var e=this._consumeSubsequentIfMatch(s.PUBLIC_STRING,t,!1),n=!e&&this._consumeSubsequentIfMatch(s.SYSTEM_STRING,t,!1);this._ensureHibernation()||(e?this.state="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE":n?this.state="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE":(this.currentToken.forceQuirks=!0,this.state="BOGUS_DOCTYPE_STATE"))}},E.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER_STATE=function(t){l(t)||(t===a.QUOTATION_MARK?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE"):t===a.APOSTROPHE?(this.currentToken.publicId="",this.state="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE"):(this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))},E.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED_STATE=function(t){t===a.QUOTATION_MARK?this.state="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE":t===a.NULL?this.currentToken.publicId+=i.REPLACEMENT_CHARACTER:t===a.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):t===a.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(u)):this.currentToken.publicId+=g(t)},E.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED_STATE=function(t){t===a.APOSTROPHE?this.state="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE":t===a.NULL?this.currentToken.publicId+=i.REPLACEMENT_CHARACTER:t===a.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):t===a.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(u)):this.currentToken.publicId+=g(t)},E.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS_STATE=function(t){l(t)||(t===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=u):t===a.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):t===a.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):(this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))},E.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER_STATE=function(t){l(t)||(t===a.QUOTATION_MARK?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE"):t===a.APOSTROPHE?(this.currentToken.systemId="",this.state="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE"):(this.currentToken.forceQuirks=!0,this._reconsumeInState("BOGUS_DOCTYPE_STATE")))},E.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED_STATE=function(t){t===a.QUOTATION_MARK?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":t===a.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):t===a.NULL?this.currentToken.systemId+=i.REPLACEMENT_CHARACTER:t===a.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(u)):this.currentToken.systemId+=g(t)},E.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED_STATE=function(t){t===a.APOSTROPHE?this.state="AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE":t===a.GREATER_THAN_SIGN?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this.state=u):t===a.NULL?this.currentToken.systemId+=i.REPLACEMENT_CHARACTER:t===a.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(u)):this.currentToken.systemId+=g(t)},E.AFTER_DOCTYPE_SYSTEM_IDENTIFIER_STATE=function(t){l(t)||(t===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=u):t===a.EOF?(this.currentToken.forceQuirks=!0,this._emitCurrentToken(),this._reconsumeInState(u)):this.state="BOGUS_DOCTYPE_STATE")},E.BOGUS_DOCTYPE_STATE=function(t){t===a.GREATER_THAN_SIGN?(this._emitCurrentToken(),this.state=u):t===a.EOF&&(this._emitCurrentToken(),this._reconsumeInState(u))},E.CDATA_SECTION_STATE=function(t){for(;;){if(t===a.EOF){this._reconsumeInState(u);break}var e=this._consumeSubsequentIfMatch(s.CDATA_END_STRING,t,!0);if(this._ensureHibernation())break;if(e){this.state=u;break}if(this._emitCodePoint(t),this._hibernationSnapshot(),t=this._consume(),this._ensureHibernation())break}}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}}},function(t,e){t.exports=d},function(t,e){t.exports=!1},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){t.exports={}},function(t,e,n){var r=n(26).f,i=n(42),o=n(15)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(151),i=n(112).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(14),i=n(167)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";e.REPLACEMENT_CHARACTER="�",e.CODE_POINTS={EOF:-1,NULL:0,TABULATION:9,CARRIAGE_RETURN:13,LINE_FEED:10,FORM_FEED:12,SPACE:32,EXCLAMATION_MARK:33,QUOTATION_MARK:34,NUMBER_SIGN:35,AMPERSAND:38,APOSTROPHE:39,HYPHEN_MINUS:45,SOLIDUS:47,DIGIT_0:48,DIGIT_9:57,SEMICOLON:59,LESS_THAN_SIGN:60,EQUALS_SIGN:61,GREATER_THAN_SIGN:62,QUESTION_MARK:63,LATIN_CAPITAL_A:65,LATIN_CAPITAL_F:70,LATIN_CAPITAL_X:88,LATIN_CAPITAL_Z:90,GRAVE_ACCENT:96,LATIN_SMALL_A:97,LATIN_SMALL_F:102,LATIN_SMALL_X:120,LATIN_SMALL_Z:122,REPLACEMENT_CHARACTER:65533},e.CODE_POINT_SEQUENCES={DASH_DASH_STRING:[45,45],DOCTYPE_STRING:[68,79,67,84,89,80,69],CDATA_START_STRING:[91,67,68,65,84,65,91],CDATA_END_STRING:[93,93,62],SCRIPT_STRING:[115,99,114,105,112,116],PUBLIC_STRING:[80,85,66,76,73,67],SYSTEM_STRING:[83,89,83,84,69,77]}},function(t,e,n){(function(t){function n(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===n(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===n(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===n(t)},e.isError=function(t){return"[object Error]"===n(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=t.isBuffer}).call(this,n(131).Buffer)},function(t,e,n){"use strict";var r=n(19),i=n(307),o=n(84);n(86)("search",1,(function(t,e,n,a){return[function(n){var r=t(this),i=null==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},function(t){var e=a(n,t,this);if(e.done)return e.value;var s=r(t),c=String(this),u=s.lastIndex;i(u,0)||(s.lastIndex=0);var l=o(s,c);return i(s.lastIndex,u)||(s.lastIndex=u),null===l?-1:l.index}]}))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(135))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(t).slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=60*t*60*24;return Math.floor(Date.now()/1e3)+e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.takeField=function(t,e){return t.map((function(t){return e?t[e]:t}))},i=(e.takeLast=function(t,e,n){return r(t.slice(e>t.length?0:t.length-e,t.length),n)},e.sum=function(t){return t.reduce((function(t,e){return t+e}))},e.mean=function(t){return t.reduce((function(t,e){return t+e}))/t.length});e.stddev=function(t){var e=i(t),n=t.map((function(t){return Math.pow(t-e,2)})),r=i(n);return Math.sqrt(r)}},function(t,e,n){var r=n(51),i=n(15)("toStringTag"),o="Arguments"==r(function(){return arguments}());t.exports=function(t){var e,n,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),i))?n:o?r(e):"Object"==(a=r(e))&&"function"==typeof e.callee?"Arguments":a}},function(t,e,n){var r=n(37),i=n(16),o=i["__core-js_shared__"]||(i["__core-js_shared__"]={});(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:r.version,mode:n(63)?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(t,e,n){var r=n(22);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(19),i=n(255),o=n(112),a=n(111)("IE_PROTO"),s=function(){},c=function(){var t,e=n(108)("iframe"),r=o.length;for(e.style.display="none",n(153).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),c=t.F;r--;)delete c.prototype[o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=r(t),n=new s,s.prototype=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(15)("unscopables"),i=Array.prototype;null==i[r]&&n(41)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){"use strict";var r=n(78),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"==typeof n){var o=n.call(t,e);if("object"!=typeof o)throw new TypeError("RegExp exec method returned something other than an Object or null");return o}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},function(t,e,n){"use strict";var r=n(19);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(263);var r=n(34),i=n(41),o=n(24),a=n(57),s=n(15),c=n(122),u=s("species"),l=!o((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),h=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=s(t),f=!o((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),d=f?!o((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[p](""),!e})):void 0;if(!f||!d||"replace"===t&&!l||"split"===t&&!h){var y=/./[p],m=n(a,p,""[t],(function(t,e,n,r,i){return e.exec===c?f&&!i?{done:!0,value:y.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),g=m[0],v=m[1];r(String.prototype,t,g),i(RegExp.prototype,p,2==e?function(t,e){return v.call(t,this,e)}:function(t){return v.call(t,this)})}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var r=n(16),i=n(124),o=n(26).f,a=n(70).f,s=n(120),c=n(85),u=r.RegExp,l=u,h=u.prototype,p=/a/g,f=/a/g,d=new u(p)!==p;if(n(23)&&(!d||n(24)((function(){return f[n(15)("match")]=!1,u(p)!=p||u(f)==f||"/a/i"!=u(p,"i")})))){u=function(t,e){var n=this instanceof u,r=s(t),o=void 0===e;return!n&&r&&t.constructor===u&&o?t:i(d?new l(r&&!o?t.source:t,e):l((r=t instanceof u)?t.source:t,r&&o?c.call(t):e),n?this:h,u)};for(var y=function(t){t in u||o(u,t,{configurable:!0,get:function(){return l[t]},set:function(e){l[t]=e}})},m=a(l),g=0;m.length>g;)y(m[g++]);h.constructor=u,u.prototype=h,n(34)(r,"RegExp",u)}n(118)("RegExp")},function(t,e,n){var r=n(69),i=n(65),o=n(45),a=n(80),s=n(42),c=n(149),u=Object.getOwnPropertyDescriptor;e.f=n(23)?u:function(t,e){if(t=o(t),e=a(e,!0),c)try{return u(t,e)}catch(t){}if(s(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(22),i=n(91).onFreeze;n(163)("freeze",(function(t){return function(e){return t&&r(e)?t(i(e)):e}}))},function(t,e,n){var r=n(64)("meta"),i=n(22),o=n(42),a=n(26).f,s=0,c=Object.isExtensible||function(){return!0},u=!n(24)((function(){return c(Object.preventExtensions({}))})),l=function(t){a(t,r,{value:{i:"O"+ ++s,w:{}}})},h=t.exports={KEY:r,NEED:!1,fastKey:function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[r].i},getWeak:function(t,e){if(!o(t,r)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[r].w},onFreeze:function(t){return u&&h.NEED&&c(t)&&!o(t,r)&&l(t),t}}},function(t,e,n){"use strict";(t.exports=function(t){var e={},n=this._getOverriddenMethods(this,e);Object.keys(n).forEach((function(r){"function"==typeof n[r]&&(e[r]=t[r],t[r]=n[r])}))}).prototype._getOverriddenMethods=function(){throw new Error("Not implemented")}},function(t,e,n){t.exports=i;var r=n(128).EventEmitter;function i(){r.call(this)}n(61)(i,r),i.Readable=n(129),i.Writable=n(290),i.Duplex=n(291),i.Transform=n(292),i.PassThrough=n(293),i.Stream=i,i.prototype.pipe=function(t,e){var n=this;function i(e){t.writable&&!1===t.write(e)&&n.pause&&n.pause()}function o(){n.readable&&n.resume&&n.resume()}n.on("data",i),t.on("drain",o),t._isStdio||e&&!1===e.end||(n.on("end",s),n.on("close",c));var a=!1;function s(){a||(a=!0,t.end())}function c(){a||(a=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(l(),0===r.listenerCount(this,"error"))throw t}function l(){n.removeListener("data",i),t.removeListener("drain",o),n.removeListener("end",s),n.removeListener("close",c),n.removeListener("error",u),t.removeListener("error",u),n.removeListener("end",l),n.removeListener("close",l),t.removeListener("close",l)}return n.on("error",u),t.on("error",u),n.on("end",l),n.on("close",l),t.on("close",l),t.emit("pipe",n),t}},function(t,e,n){"use strict";(function(e){void 0===e||!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?t.exports={nextTick:function(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,a,s=arguments.length;switch(s){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick((function(){t.call(null,n)}));case 3:return e.nextTick((function(){t.call(null,n,r)}));case 4:return e.nextTick((function(){t.call(null,n,r,i)}));default:for(o=new Array(s-1),a=0;a<o.length;)o[a++]=arguments[a];return e.nextTick((function(){t.apply(null,o)}))}}}:t.exports=e}).call(this,n(53))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n={};return t.forEach((function(t){var r=t[e];n[r]||(n[r]=[]),n[r].push(t)})),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date(1e3*t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){switch(e){case"t":case"s":return t;case"m":return 60*t;case"h":return 3600*t;case"d":return 86400*t;default:throw new Error("Duration unit not valid: "+e+", only allow ['t', 's', 'm', 'h', 'd']")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{value:"CALL",text:"Rise",img:"img/trade-call.svg",ticks:!0,barrier:!1},{value:"PUT",text:"Fall",img:"img/trade-put.svg",ticks:!0,barrier:!1},{value:"HIGHER",text:"Higher",img:"img/trade-higher.svg",ticks:!1,barrier:!1},{value:"LOWER",text:"Lower",img:"img/trade-lower.svg",ticks:!1,barrier:!1},{value:"DIGITMATCH",text:"Digit Match",img:"img/trade-digitmatch.svg",ticks:!0,barrier:!0},{value:"DIGITDIFF",text:"Digit Differs",img:"img/trade-digitdiff.svg",tick:!0,barrier:!0},{value:"DIGITOVER",text:"Digit Over",img:"img/trade-digitover.svg",tick:!0,barrier:!0},{value:"DIGITUNDER",text:"Digit Under",img:"img/trade-digitunder.svg",tick:!0,barrier:!0},{value:"DIGITEVEN",text:"Digit Even",img:"img/trade-digiteven.svg",tick:!0,barrier:!1},{value:"DIGITODD",text:"Digit Odd",img:"img/trade-digitodd.svg",tick:!0,barrier:!1},{value:"ASIANU",text:"Asian Up",img:"img/trade-asianu.svg",ticks:!0,barrier:!1},{value:"ASIAND",text:"Asian Down",img:"img/trade-asiand.svg",ticks:!0,barrier:!1},{value:"EXPIRYRANGE",text:"Ends Between",img:"img/trade-expiryrange.svg",ticks:!1,barrier:!1},{value:"EXPIRYMISS",text:"Ends Outside",img:"img/trade-expirymiss.svg",ticks:!1,barrier:!1},{value:"RANGE",text:"Stays Between",img:"img/trade-range.svg",ticks:!1,barrier:!1},{value:"UPORDOWN",text:"Goes Outside",img:"img/trade-upordown.svg",ticks:!1,barrier:!1},{value:"ONETOUCH",text:"Touches",img:"img/trade-onetouch.svg",ticks:!1,barrier:!1},{value:"NOTOUCH",text:"Does Not Touch",img:"img/trade-notouch.svg",ticks:!1,barrier:!1},{value:"SPREADU",text:"Spread Long",img:"img/trade-spreadu.svg",ticks:!1,barrier:!1},{value:"SPREADD",text:"Spread Short",img:"img/trade-spreadu.svg",ticks:!1,barrier:!1}]},function(t,e){t.exports=y},function(t,e,n){(function(n){var r,i;void 0===(i="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){a(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,a=o.saveAs||("object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,a){var s=o.URL||o.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?i(c):r(c.href)?e(t,n,a):i(c,c.target="_blank")):(c.href=s.createObjectURL(t),setTimeout((function(){s.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(r(t))e(t,n,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){i(a)}))}}:function(t,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var a="application/octet-stream"===t.type,s=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&s)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},u.readAsDataURL(t)}else{var l=o.URL||o.webkitURL,h=l.createObjectURL(t);i?i.location=h:location.href=h,i=null,setTimeout((function(){l.revokeObjectURL(h)}),4e4)}});o.saveAs=a.saveAs=a,t.exports=a})?r.apply(e,[]):r)||(t.exports=i)}).call(this,n(30))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.simpleMovingAverageArray=void 0;var r=n(36),i=n(77),o=function(t,e){var n=e.periods,r=e.field;if(t.length<n)throw new Error("Periods longer than data length");var o=(0,i.takeLast)(t,n,r);return(0,i.sum)(o)/n};e.simpleMovingAverageArray=function(t,e){var n=e.periods,i=e.pipSize,a=void 0===i?2:i;return(0,r.sequence)(t.length-n+1).map((function(r,i){return+o(t.slice(i,i+n),e).toFixed(a)}))},e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exponentialMovingAverageArray=void 0;var r=n(77),i=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=e.periods,o=e.field,a=e.pipSize,s=void 0===a?2:a,c=2/(i+1),u=(0,r.takeField)(t,o);if(n)return(u[0]-n)*c+n;if(t.length<i)throw new Error("Periods longer than data length");var l=(0,r.mean)((0,r.takeField)(t.slice(0,i),o));return+u.slice(i).reduce((function(t,e){return(e-t)*c+t}),l).toFixed(s)};e.exponentialMovingAverageArray=function(t,e){var n=e.periods,r=i(t.slice(0,n),e);return t.slice(n-1).map((function(t,n){return n?r=i([t],e,r):r}))},e.default=i},function(t,e){t.exports=m},function(t,e){t.exports=g},function(t,e){t.exports=v},function(t,e){t.exports=b},function(t,e,n){"use strict";var r,i=(r=n(7))&&"object"==typeof r&&"default"in r?r.default:r;
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.exports=i},function(t,e,n){var r=n(22),i=n(16).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){"use strict";var r=n(63),i=n(14),o=n(34),a=n(41),s=n(67),c=n(254),u=n(68),l=n(257),h=n(15)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,d,y,m,g){c(n,e,d);var v,b,_,E=function(t){if(!p&&t in w)return w[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},T=e+" Iterator",S="values"==y,k=!1,w=t.prototype,A=w[h]||w["@@iterator"]||y&&w[y],O=A||E(y),C=y?S?E("entries"):O:void 0,I="Array"==e&&w.entries||A;if(I&&(_=l(I.call(new t)))!==Object.prototype&&_.next&&(u(_,T,!0),r||"function"==typeof _[h]||a(_,h,f)),S&&A&&"values"!==A.name&&(k=!0,O=function(){return A.call(this)}),r&&!g||!p&&!k&&w[h]||a(w,h,O),s[e]=O,s[T]=f,y)if(v={values:S?O:E("values"),keys:m?O:E("keys"),entries:C},g)for(b in v)b in w||o(w,b,v[b]);else i(i.P+i.F*(p||k),e,v);return v}},function(t,e,n){var r=n(51);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e,n){var r=n(79)("keys"),i=n(64);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(44),i=n(155),o=n(156),a=n(19),s=n(46),c=n(157),u={},l={};(e=t.exports=function(t,e,n,h,p){var f,d,y,m,g=p?function(){return t}:c(t),v=r(n,h,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(f=s(t.length);f>b;b++)if((m=e?v(a(d=t[b])[0],d[1]):v(t[b]))===u||m===l)return m}else for(y=g.call(t);!(d=y.next()).done;)if((m=i(y,v,d.value,e))===u||m===l)return m}).BREAK=u,e.RETURN=l},function(t,e,n){var r=n(19),i=n(66),o=n(15)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||null==(n=r(a)[o])?e:i(n)}},function(t,e,n){"use strict";var r=n(66);function i(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r})),this.resolve=r(e),this.reject=r(n)}t.exports.f=function(t){return new i(t)}},function(t,e,n){var r=n(34);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(16),i=n(26),o=n(23),a=n(15)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){var r=n(15)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,(function(){throw 2}))}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){var r=n(22),i=n(51),o=n(15)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){"use strict";var r=n(150)(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},function(t,e,n){"use strict";var r,i,o=n(85),a=RegExp.prototype.exec,s=String.prototype.replace,c=a,u=(r=/a/,i=/b*/g,a.call(r,"a"),a.call(i,"a"),0!==r.lastIndex||0!==i.lastIndex),l=void 0!==/()??/.exec("")[1];(u||l)&&(c=function(t){var e,n,r,i,c=this;return l&&(n=new RegExp("^"+c.source+"$(?!\\s)",o.call(c))),u&&(e=c.lastIndex),r=a.call(c,t),u&&r&&(c.lastIndex=c.global?r.index+r[0].length:e),l&&r&&r.length>1&&s.call(r[0],n,(function(){for(i=1;i<arguments.length-2;i++)void 0===arguments[i]&&(r[i]=void 0)})),r}),t.exports=c},function(t,e,n){"use strict";var r=n(14),i=n(66),o=n(47),a=n(24),s=[].sort,c=[1,2,3];r(r.P+r.F*(a((function(){c.sort(void 0)}))||!a((function(){c.sort(null)}))||!n(265)(s)),"Array",{sort:function(t){return void 0===t?s.call(o(this)):s.call(o(this),i(t))}})},function(t,e,n){var r=n(22),i=n(269).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(35).DOCUMENT_MODE;e.createDocument=function(){return{nodeName:"#document",mode:r.NO_QUIRKS,childNodes:[]}},e.createDocumentFragment=function(){return{nodeName:"#document-fragment",childNodes:[]}},e.createElement=function(t,e,n){return{nodeName:t,tagName:t,attrs:n,namespaceURI:e,childNodes:[],parentNode:null}},e.createCommentNode=function(t){return{nodeName:"#comment",data:t,parentNode:null}};var i=function(t){return{nodeName:"#text",value:t,parentNode:null}},o=e.appendChild=function(t,e){t.childNodes.push(e),e.parentNode=t},a=e.insertBefore=function(t,e,n){var r=t.childNodes.indexOf(n);t.childNodes.splice(r,0,e),e.parentNode=t};e.setTemplateContent=function(t,e){t.content=e},e.getTemplateContent=function(t){return t.content},e.setDocumentType=function(t,e,n,r){for(var i=null,a=0;a<t.childNodes.length;a++)if("#documentType"===t.childNodes[a].nodeName){i=t.childNodes[a];break}i?(i.name=e,i.publicId=n,i.systemId=r):o(t,{nodeName:"#documentType",name:e,publicId:n,systemId:r})},e.setDocumentMode=function(t,e){t.mode=e},e.getDocumentMode=function(t){return t.mode},e.detachNode=function(t){if(t.parentNode){var e=t.parentNode.childNodes.indexOf(t);t.parentNode.childNodes.splice(e,1),t.parentNode=null}},e.insertText=function(t,e){if(t.childNodes.length){var n=t.childNodes[t.childNodes.length-1];if("#text"===n.nodeName)return void(n.value+=e)}o(t,i(e))},e.insertTextBefore=function(t,e,n){var r=t.childNodes[t.childNodes.indexOf(n)-1];r&&"#text"===r.nodeName?r.value+=e:a(t,i(e),n)},e.adoptAttributes=function(t,e){for(var n=[],r=0;r<t.attrs.length;r++)n.push(t.attrs[r].name);for(var i=0;i<e.length;i++)-1===n.indexOf(e[i].name)&&t.attrs.push(e[i])},e.getFirstChild=function(t){return t.childNodes[0]},e.getChildNodes=function(t){return t.childNodes},e.getParentNode=function(t){return t.parentNode},e.getAttrList=function(t){return t.attrs},e.getTagName=function(t){return t.tagName},e.getNamespaceURI=function(t){return t.namespaceURI},e.getTextNodeContent=function(t){return t.value},e.getCommentNodeContent=function(t){return t.data},e.getDocumentTypeNodeName=function(t){return t.name},e.getDocumentTypeNodePublicId=function(t){return t.publicId},e.getDocumentTypeNodeSystemId=function(t){return t.systemId},e.isTextNode=function(t){return"#text"===t.nodeName},e.isCommentNode=function(t){return"#comment"===t.nodeName},e.isDocumentTypeNode=function(t){return"#documentType"===t.nodeName},e.isElementNode=function(t){return!!t.tagName}},function(t,e,n){"use strict";t.exports=function(t,e){return[t,e=e||Object.create(null)].reduce((function(t,e){return Object.keys(e).forEach((function(n){t[n]=e[n]})),t}),Object.create(null))}},function(t,e,n){"use strict";var r=n(35).DOCUMENT_MODE,i=["+//silmaril//dtd html pro v0r11 19970101//en","-//advasoft ltd//dtd html 3.0 aswedit + extensions//en","-//as//dtd html 3.0 aswedit + extensions//en","-//ietf//dtd html 2.0 level 1//en","-//ietf//dtd html 2.0 level 2//en","-//ietf//dtd html 2.0 strict level 1//en","-//ietf//dtd html 2.0 strict level 2//en","-//ietf//dtd html 2.0 strict//en","-//ietf//dtd html 2.0//en","-//ietf//dtd html 2.1e//en","-//ietf//dtd html 3.0//en","-//ietf//dtd html 3.0//en//","-//ietf//dtd html 3.2 final//en","-//ietf//dtd html 3.2//en","-//ietf//dtd html 3//en","-//ietf//dtd html level 0//en","-//ietf//dtd html level 0//en//2.0","-//ietf//dtd html level 1//en","-//ietf//dtd html level 1//en//2.0","-//ietf//dtd html level 2//en","-//ietf//dtd html level 2//en//2.0","-//ietf//dtd html level 3//en","-//ietf//dtd html level 3//en//3.0","-//ietf//dtd html strict level 0//en","-//ietf//dtd html strict level 0//en//2.0","-//ietf//dtd html strict level 1//en","-//ietf//dtd html strict level 1//en//2.0","-//ietf//dtd html strict level 2//en","-//ietf//dtd html strict level 2//en//2.0","-//ietf//dtd html strict level 3//en","-//ietf//dtd html strict level 3//en//3.0","-//ietf//dtd html strict//en","-//ietf//dtd html strict//en//2.0","-//ietf//dtd html strict//en//3.0","-//ietf//dtd html//en","-//ietf//dtd html//en//2.0","-//ietf//dtd html//en//3.0","-//metrius//dtd metrius presentational//en","-//microsoft//dtd internet explorer 2.0 html strict//en","-//microsoft//dtd internet explorer 2.0 html//en","-//microsoft//dtd internet explorer 2.0 tables//en","-//microsoft//dtd internet explorer 3.0 html strict//en","-//microsoft//dtd internet explorer 3.0 html//en","-//microsoft//dtd internet explorer 3.0 tables//en","-//netscape comm. corp.//dtd html//en","-//netscape comm. corp.//dtd strict html//en","-//o'reilly and associates//dtd html 2.0//en","-//o'reilly and associates//dtd html extended 1.0//en","-//spyglass//dtd html 2.0 extended//en","-//sq//dtd html 2.0 hotmetal + extensions//en","-//sun microsystems corp.//dtd hotjava html//en","-//sun microsystems corp.//dtd hotjava strict html//en","-//w3c//dtd html 3 1995-03-24//en","-//w3c//dtd html 3.2 draft//en","-//w3c//dtd html 3.2 final//en","-//w3c//dtd html 3.2//en","-//w3c//dtd html 3.2s draft//en","-//w3c//dtd html 4.0 frameset//en","-//w3c//dtd html 4.0 transitional//en","-//w3c//dtd html experimental 19960712//en","-//w3c//dtd html experimental 970421//en","-//w3c//dtd w3 html//en","-//w3o//dtd w3 html 3.0//en","-//w3o//dtd w3 html 3.0//en//","-//webtechs//dtd mozilla html 2.0//en","-//webtechs//dtd mozilla html//en"],o=i.concat(["-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"]),a=["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"],s=["-//W3C//DTD XHTML 1.0 Frameset//","-//W3C//DTD XHTML 1.0 Transitional//"],c=s.concat(["-//W3C//DTD HTML 4.01 Frameset//","-//W3C//DTD HTML 4.01 Transitional//"]);function u(t){var e=-1!==t.indexOf('"')?"'":'"';return e+t+e}function l(t,e){for(var n=0;n<e.length;n++)if(0===t.indexOf(e[n]))return!0;return!1}e.getDocumentMode=function(t,e,n){if("html"!==t)return r.QUIRKS;if(n&&"http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd"===n.toLowerCase())return r.QUIRKS;if(null!==e){if(e=e.toLowerCase(),a.indexOf(e)>-1)return r.QUIRKS;var u=null===n?o:i;if(l(e,u))return r.QUIRKS;if(l(e,u=null===n?s:c))return r.LIMITED_QUIRKS}return r.NO_QUIRKS},e.serializeContent=function(t,e,n){var r="!DOCTYPE ";return t&&(r+=t),null!==e?r+=" PUBLIC "+u(e):null!==n&&(r+=" SYSTEM"),null!==n&&(r+=" "+u(n)),r}},function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var c=10;function u(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function l(t,e,n,r){var i,o,a,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(t))>0&&a.length>i&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,s=c,console&&console.warn&&console.warn(s)}return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}function p(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=h.bind(r);return i.listener=n,r.wrapFn=i,i}function f(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):y(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function y(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return u(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var c=i[t];if(void 0===c)return!1;if("function"==typeof c)o(c,this,e);else{var u=c.length,l=y(c,u);for(n=0;n<u;++n)o(l[n],this,e)}return!0},s.prototype.addListener=function(t,e){return l(this,t,e,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(t,e){return l(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,p(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,p(this,t,e)),this},s.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return f(this,t,!0)},s.prototype.rawListeners=function(t){return f(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(t,e,n){(e=t.exports=n(176)).Stream=e,e.Readable=e,e.Writable=n(132),e.Duplex=n(55),e.Transform=n(181),e.PassThrough=n(289)},function(t,e,n){var r=n(131),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var r=n(280),i=n(281),o=n(177);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=p(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return V(t).length;default:if(r)return z(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return w(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var h=!0,p=0;p<c;p++)if(u(t,o+p)!==u(e,p)){h=!1;break}if(h)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return H(z(e,t.length-n),t,n,r)}function E(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return H(V(e),t,n,r)}function k(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function w(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,c,u=t[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(u[h]!==l[h]){o=u[h],a=l[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=U(t[o]);return i}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,o){return o||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):x(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):x(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:z(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(t){return t<16?"0"+t.toString(16):t.toString(16)}function z(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function V(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(30))},function(t,e,n){"use strict";(function(e,r,i){var o=n(94);function a(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e,n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(void 0),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}(e,t)}}t.exports=v;var s,c=!e.browser&&["v0.10","v0.9."].indexOf(e.version.slice(0,5))>-1?r:o.nextTick;v.WritableState=g;var u=n(73);u.inherits=n(61);var l,h={deprecate:n(287)},p=n(178),f=n(130).Buffer,d=i.Uint8Array||function(){},y=n(179);function m(){}function g(t,e){s=s||n(55),t=t||{};var r=e instanceof s;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var i=t.highWaterMark,u=t.writableHighWaterMark,l=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(u||0===u)?u:l,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===t.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var n=t._writableState,r=n.sync,i=n.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(n),e)!function(t,e,n,r,i){--e.pendingcb,n?(o.nextTick(i,r),o.nextTick(k,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(i(r),t._writableState.errorEmitted=!0,t.emit("error",r),k(t,e))}(t,n,r,e,i);else{var a=T(n);a||n.corked||n.bufferProcessing||!n.bufferedRequest||E(t,n),r?c(_,t,n,a,i):_(t,n,a,i)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new a(this)}function v(t){if(s=s||n(55),!(l.call(v,this)||this instanceof s))return new v(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),p.call(this)}function b(t,e,n,r,i,o,a){e.writelen=r,e.writecb=a,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function _(t,e,n,r){n||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),k(t,e)}function E(t,e){e.bufferProcessing=!0;var n=e.bufferedRequest;if(t._writev&&n&&n.next){var r=e.bufferedRequestCount,i=new Array(r),o=e.corkedRequestsFree;o.entry=n;for(var s=0,c=!0;n;)i[s]=n,n.isBuf||(c=!1),n=n.next,s+=1;i.allBuffers=c,b(t,e,!0,e.length,i,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new a(e),e.bufferedRequestCount=0}else{for(;n;){var u=n.chunk,l=n.encoding,h=n.callback;if(b(t,e,!1,e.objectMode?1:u.length,u,l,h),n=n.next,e.bufferedRequestCount--,e.writing)break}null===n&&(e.lastBufferedRequest=null)}e.bufferedRequest=n,e.bufferProcessing=!1}function T(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function S(t,e){t._final((function(n){e.pendingcb--,n&&t.emit("error",n),e.prefinished=!0,t.emit("prefinish"),k(t,e)}))}function k(t,e){var n=T(e);return n&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,o.nextTick(S,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),n}u.inherits(v,p),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:h.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===v&&t&&t._writableState instanceof g}})):l=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,n){var r,i=this._writableState,a=!1,s=!i.objectMode&&(r=t,f.isBuffer(r)||r instanceof d);return s&&!f.isBuffer(t)&&(t=function(t){return f.from(t)}(t)),"function"==typeof e&&(n=e,e=null),s?e="buffer":e||(e=i.defaultEncoding),"function"!=typeof n&&(n=m),i.ended?function(t,e){var n=new Error("write after end");t.emit("error",n),o.nextTick(e,n)}(this,n):(s||function(t,e,n,r){var i=!0,a=!1;return null===n?a=new TypeError("May not write null values to stream"):"string"==typeof n||void 0===n||e.objectMode||(a=new TypeError("Invalid non-string/buffer chunk")),a&&(t.emit("error",a),o.nextTick(r,a),i=!1),i}(this,i,t,n))&&(i.pendingcb++,a=function(t,e,n,r,i,o){if(!n){var a=function(t,e,n){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=f.from(e,n)),e}(e,r,i);r!==a&&(n=!0,i="buffer",r=a)}var s=e.objectMode?1:r.length;e.length+=s;var c=e.length<e.highWaterMark;if(c||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else b(t,e,!1,s,r,i,o);return c}(this,i,s,t,e,n)),a},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.bufferedRequest||E(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,n){n(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,n){var r=this._writableState;"function"==typeof t?(n=t,t=null,e=null):"function"==typeof e&&(n=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||function(t,e,n){e.ending=!0,k(t,e),n&&(e.finished?o.nextTick(n):t.once("finish",n)),e.ended=!0,t.writable=!1}(this,r,n)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=y.destroy,v.prototype._undestroy=y.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}}).call(this,n(53),n(285).setImmediate,n(30))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"barrier",r=+t[n];if(!r)return e;if("relative"!==t.barrierType)return r;if(void 0===t.entry_spot&&void 0===e)throw new Error("Relative barrier can not be calculated");return r+(+t.entry_spot||e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return+t+(+e||n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date(t-60*t.getTimezoneOffset()*1e3).toISOString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return Math.floor(Date.now()/1e3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=+t.slice(0,2),r=+t.slice(3,5),i=+t.slice(6),o=+e.slice(0,2),a=+e.slice(3,5),s=+e.slice(6);return n!==o?n>o:r!==a?r>a:i>s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(76))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(-1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(189)),i=o(n(191));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(e.indexOf("SPREAD")>-1)return[];var n=t.filter((function(t){return"t"===t.min_contract_duration.slice(-1)})).length>0?{min:5,max:10,unit:"t"}:void 0,o=t.filter((function(t){return"t"!==t.min_contract_duration.slice(-1)}));if(0===o.length)return n?[n]:[];var a=o.map((function(t){return(0,r.default)(t.min_contract_duration)})).filter((function(t){return!!t})).reduce((function(t,e){return Math.min(t,e)})),s=o.map((function(t){return(0,r.default)(t.max_contract_duration)})).filter((function(t){return!!t})).reduce((function(t,e){return Math.max(t,e)})),c=(0,i.default)(a,s);return n&&c.unshift(n),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return t===e},r=t.length,i=e.length,o=Math.abs(r-i);switch(o){case 0:return 0!==r&&(1===r?!n(t[0],e[0]):n(t[t.length-1],e[e.length-2])||n(t[t.length-2],e[e.length-1]));case 1:return 0===r||0===i||n(t[t.length-1],e[e.length-2])||n(t[t.length-2],e[e.length-1]);default:return!1}}},function(t,e){t.exports=_},function(t,e){t.exports=E},function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",(function(){return i})),n.d(e,"__assign",(function(){return o})),n.d(e,"__rest",(function(){return a})),n.d(e,"__decorate",(function(){return s})),n.d(e,"__param",(function(){return c})),n.d(e,"__metadata",(function(){return u})),n.d(e,"__awaiter",(function(){return l})),n.d(e,"__generator",(function(){return h})),n.d(e,"__exportStar",(function(){return p})),n.d(e,"__values",(function(){return f})),n.d(e,"__read",(function(){return d})),n.d(e,"__spread",(function(){return y})),n.d(e,"__spreadArrays",(function(){return m})),n.d(e,"__await",(function(){return g})),n.d(e,"__asyncGenerator",(function(){return v})),n.d(e,"__asyncDelegator",(function(){return b})),n.d(e,"__asyncValues",(function(){return _})),n.d(e,"__makeTemplateObject",(function(){return E})),n.d(e,"__importStar",(function(){return T})),n.d(e,"__importDefault",(function(){return S}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function s(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function c(t,e){return function(n,r){e(n,r,t)}}function u(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){t.done?i(t.value):new n((function(e){e(t.value)})).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function h(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function f(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function y(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function m(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function v(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise((function(n,r){o.push([t,e,n,r])>1||s(t,e)}))})}function s(t,e){try{(n=i[t](e)).value instanceof g?Promise.resolve(n.value.v).then(c,u):l(o[0][2],n)}catch(t){l(o[0][3],t)}var n}function c(t){s("next",t)}function u(t){s("throw",t)}function l(t,e){t(e),o.shift(),o.length&&s(o[0][0],o[0][1])}}function b(t){var e,n;return e={},r("next"),r("throw",(function(t){throw t})),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:g(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function _(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=f(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise((function(r,i){!function(t,e,n,r){Promise.resolve(r).then((function(e){t({value:e,done:n})}),e)}(r,i,(e=t[n](e)).done,e.value)}))}}}function E(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function T(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function S(t){return t&&t.__esModule?t:{default:t}}},function(t,e){t.exports=T},function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=135)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(8))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(t).slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=60*t*60*24;return Math.floor(Date.now()/1e3)+e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date(1e3*t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){switch(e){case"t":case"s":return t;case"m":return 60*t;case"h":return 3600*t;case"d":return 86400*t;default:throw new Error("Duration unit not valid: "+e+", only allow ['t', 's', 'm', 'h', 'd']")}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n={};return t.forEach((function(t){var r=t[e];n[r]||(n[r]=[]),n[r].push(t)})),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=[{value:"CALL",text:"Rise",img:"img/trade-call.svg",ticks:!0,barrier:!1},{value:"PUT",text:"Fall",img:"img/trade-put.svg",ticks:!0,barrier:!1},{value:"HIGHER",text:"Higher",img:"img/trade-higher.svg",ticks:!1,barrier:!1},{value:"LOWER",text:"Lower",img:"img/trade-lower.svg",ticks:!1,barrier:!1},{value:"DIGITMATCH",text:"Digit Match",img:"img/trade-digitmatch.svg",ticks:!0,barrier:!0},{value:"DIGITDIFF",text:"Digit Differs",img:"img/trade-digitdiff.svg",tick:!0,barrier:!0},{value:"DIGITOVER",text:"Digit Over",img:"img/trade-digitover.svg",tick:!0,barrier:!0},{value:"DIGITUNDER",text:"Digit Under",img:"img/trade-digitunder.svg",tick:!0,barrier:!0},{value:"DIGITEVEN",text:"Digit Even",img:"img/trade-digiteven.svg",tick:!0,barrier:!1},{value:"DIGITODD",text:"Digit Odd",img:"img/trade-digitodd.svg",tick:!0,barrier:!1},{value:"ASIANU",text:"Asian Up",img:"img/trade-asianu.svg",ticks:!0,barrier:!1},{value:"ASIAND",text:"Asian Down",img:"img/trade-asiand.svg",ticks:!0,barrier:!1},{value:"EXPIRYRANGE",text:"Ends Between",img:"img/trade-expiryrange.svg",ticks:!1,barrier:!1},{value:"EXPIRYMISS",text:"Ends Outside",img:"img/trade-expirymiss.svg",ticks:!1,barrier:!1},{value:"RANGE",text:"Stays Between",img:"img/trade-range.svg",ticks:!1,barrier:!1},{value:"UPORDOWN",text:"Goes Outside",img:"img/trade-upordown.svg",ticks:!1,barrier:!1},{value:"ONETOUCH",text:"Touches",img:"img/trade-onetouch.svg",ticks:!1,barrier:!1},{value:"NOTOUCH",text:"Does Not Touch",img:"img/trade-notouch.svg",ticks:!1,barrier:!1},{value:"SPREADU",text:"Spread Long",img:"img/trade-spreadu.svg",ticks:!1,barrier:!1},{value:"SPREADD",text:"Spread Short",img:"img/trade-spreadu.svg",ticks:!1,barrier:!1}]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){return+t+(+e||n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"barrier",r=+t[n];if(!r)return e;if("relative"!==t.barrierType)return r;if(void 0===t.entry_spot&&void 0===e)throw new Error("Relative barrier can not be calculated");return r+(+t.entry_spot||e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date(t-60*t.getTimezoneOffset()*1e3).toISOString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return Math.floor(Date.now()/1e3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=+t.slice(0,2),r=+t.slice(3,5),i=+t.slice(6),o=+e.slice(0,2),a=+e.slice(3,5),s=+e.slice(6);return n!==o?n>o:r!==a?r>a:i>s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(-1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(21)),i=o(n(23));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){if(e.indexOf("SPREAD")>-1)return[];var n=t.filter((function(t){return"t"===t.min_contract_duration.slice(-1)})).length>0?{min:5,max:10,unit:"t"}:void 0,o=t.filter((function(t){return"t"!==t.min_contract_duration.slice(-1)}));if(0===o.length)return n?[n]:[];var a=o.map((function(t){return(0,r.default)(t.min_contract_duration)})).filter((function(t){return!!t})).reduce((function(t,e){return Math.min(t,e)})),s=o.map((function(t){return(0,r.default)(t.max_contract_duration)})).filter((function(t){return!!t})).reduce((function(t,e){return Math.max(t,e)})),c=(0,i.default)(a,s);return n&&c.unshift(n),c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t,e){return t===e},r=t.length,i=e.length,o=Math.abs(r-i);switch(o){case 0:return 0!==r&&(1===r?!n(t[0],e[0]):n(t[t.length-1],e[e.length-2])||n(t[t.length-2],e[e.length-1]));case 1:return 0===r||0===i||n(t[t.length-1],e[e.length-2])||n(t[t.length-2],e[e.length-1]);default:return!1}}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.messageHandlers={}}return t.prototype.emitSingle=function(t,e){(this.messageHandlers[t]||[]).forEach((function(t){t(e)}))},t.prototype.emitWildcard=function(t){(this.messageHandlers["*"]||[]).forEach((function(e){e(t)}))},t.prototype.emit=function(t,e){this.emitSingle(t,e),this.emitWildcard(e)},t.prototype.on=function(t,e){this.messageHandlers[t]?this.messageHandlers[t].push(e):this.messageHandlers[t]=[e]},t.prototype.ignoreAll=function(t){delete this.messageHandlers[t]},t}();e.default=r},function(t,e,n){"use strict";e.__esModule=!0,e.helpers=e.autoAdjustGetData=void 0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.getDataForSymbol=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:600,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ticks",o=arguments[4],a=(0,i.nowAsEpoch)();return s(t,e,a-n,a,r,o)},e.getDataForContract=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"ticks",o=arguments[4];return n?e().then((function(e){var a=e.underlying,c=+e.date_start;if(c>(0,i.nowAsEpoch)())return s(t,a,(0,i.nowAsEpoch)()-600,(0,i.nowAsEpoch)(),r,o,{isSold:!!e.sell_time});var u=e.sell_time||(0,i.nowAsEpoch)(),l=.05*(u-c),h=Math.min(c-l,u-n);return s(t,a,Math.round(h),Math.round(u),r,o,{isSold:!!e.sell_time})})):e().then((function(e){var n=e.underlying,a=(0,i.computeStartEndForContract)(e),c=a.start,u=a.end;return s(t,n,c,u,r,o,{isSold:!!e.sell_time})}))};var i=n(25),o=[60,120,180,300,600,900,1800,3600,7200,14400,28800,86400],a=function(t){return t.map((function(t){return{quote:+t.open,epoch:+t.epoch}}))},s=e.autoAdjustGetData=function(t,e,n,i){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"ticks",c=arguments[5],u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},l=i-n,h=l/2;if(h>=700||"candles"===s){var p=l/700,f=60;return o.forEach((function(t,e){p>t&&p<=o[e+1]&&(f=o[e+1])})),f=Math.min(86400,f),t.getTickHistory(e,{start:n,end:i,adjust_start_time:1,count:700,style:"candles",granularity:f,subscribe:c?1:void 0}).then((function(t){return r({},u,"ticks"===s?{ticks:a(t.candles),symbol:e}:{candles:t.candles,symbol:e})}))}return t.getTickHistory(e,{start:n,end:i,adjust_start_time:1,count:700,style:"ticks",subscribe:c?1:void 0}).then((function(t){var n=t.history.times.map((function(e,n){return{epoch:+e,quote:+t.history.prices[n]}}));return r({},u,{ticks:n,symbol:e})}))};e.helpers={autoAdjustGetData:s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.reduce((function(t,e){return Object.keys(e).forEach((function(n){Array.isArray(t[n])?t[n].push(e[n]):t[n]=[e[n]]})),t}),{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(6))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t.barrier,t.entry_spot,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(8))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(t).slice(11,19)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Math.floor(t/60),n=Math.floor(e/60);return[t,e,n,Math.floor(n/24)]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(10))&&r.__esModule?r:{default:r};e.default=function(t,e){return t!==e&&!(0,i.default)(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(3))&&r.__esModule?r:{default:r};e.default=function(t){var e=+t.slice(0,-1),n=t.slice(-1);return(0,i.default)(e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["t","s","m","h","d"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(22)),i=o(n(19));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,n){if(e<=1)return!1;switch(n){case"s":case"m":return t<60;case"h":return t<24;case"d":default:return!0}};e.default=function(t,e){for(var n=(0,i.default)(t),o=(0,i.default)(e),s=[],c=0;c<n.length;c++){var u=r.default[c+1],l=n[c],h=o[c];a(l,h,u)&&s.push({unit:u,min:l>0?l:1,max:h})}return s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return!!t&&"t"===t.slice(-1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(42);Object.defineProperty(e,"arrayEqual",{enumerable:!0,get:function(){return pe(r).default}});var i=n(43);Object.defineProperty(e,"arrayMax",{enumerable:!0,get:function(){return pe(i).default}});var o=n(44);Object.defineProperty(e,"arrayMin",{enumerable:!0,get:function(){return pe(o).default}});var a=n(16);Object.defineProperty(e,"arrayToObject",{enumerable:!0,get:function(){return pe(a).default}});var s=n(45);Object.defineProperty(e,"getLast",{enumerable:!0,get:function(){return pe(s).default}});var c=n(47);Object.defineProperty(e,"mergeSortedArrays",{enumerable:!0,get:function(){return pe(c).default}});var u=n(48);Object.defineProperty(e,"sequence",{enumerable:!0,get:function(){return pe(u).default}});var l=n(46);Object.defineProperty(e,"groupArrayToNestedArray",{enumerable:!0,get:function(){return pe(l).default}});var h=n(49);Object.defineProperty(e,"barrier2FromContract",{enumerable:!0,get:function(){return pe(h).default}});var p=n(50);Object.defineProperty(e,"barrierFromContract",{enumerable:!0,get:function(){return pe(p).default}});var f=n(51);Object.defineProperty(e,"callPutBarrier",{enumerable:!0,get:function(){return pe(f).default}});var d=n(6);Object.defineProperty(e,"commonRelativeBarrier",{enumerable:!0,get:function(){return pe(d).default}});var y=n(52);Object.defineProperty(e,"extractBarrier",{enumerable:!0,get:function(){return pe(y).default}});var m=n(7);Object.defineProperty(e,"getAbsoluteBarrierFromContract",{enumerable:!0,get:function(){return pe(m).default}});var g=n(17);Object.defineProperty(e,"relativeBarrier",{enumerable:!0,get:function(){return pe(g).default}});var v=n(53);Object.defineProperty(e,"relativeBarrier2",{enumerable:!0,get:function(){return pe(v).default}});var b=n(8);Object.defineProperty(e,"dateAsLocalISOString",{enumerable:!0,get:function(){return pe(b).default}});var _=n(0);Object.defineProperty(e,"dateToDateString",{enumerable:!0,get:function(){return pe(_).default}});var E=n(54);Object.defineProperty(e,"dateToEpoch",{enumerable:!0,get:function(){return pe(E).default}});var T=n(55);Object.defineProperty(e,"dateToGMTString",{enumerable:!0,get:function(){return pe(T).default}});var S=n(18);Object.defineProperty(e,"dateToTimeString",{enumerable:!0,get:function(){return pe(S).default}});var k=n(56);Object.defineProperty(e,"dateToUTCTimeString",{enumerable:!0,get:function(){return pe(k).default}});var w=n(2);Object.defineProperty(e,"epochToDate",{enumerable:!0,get:function(){return pe(w).default}});var A=n(57);Object.defineProperty(e,"epochToDateString",{enumerable:!0,get:function(){return pe(A).default}});var O=n(58);Object.defineProperty(e,"epochToDateTimeString",{enumerable:!0,get:function(){return pe(O).default}});var C=n(59);Object.defineProperty(e,"epochToTimeString",{enumerable:!0,get:function(){return pe(C).default}});var I=n(60);Object.defineProperty(e,"epochToUTCDateString",{enumerable:!0,get:function(){return pe(I).default}});var N=n(61);Object.defineProperty(e,"epochToUTCTimeString",{enumerable:!0,get:function(){return pe(N).default}});var R=n(62);Object.defineProperty(e,"getLastXMonthEpoch",{enumerable:!0,get:function(){return pe(R).default}});var B=n(63);Object.defineProperty(e,"isDateValid",{enumerable:!0,get:function(){return pe(B).default}});var D=n(65);Object.defineProperty(e,"last30DaysEpoch",{enumerable:!0,get:function(){return pe(D).default}});var P=n(66);Object.defineProperty(e,"last7DaysEpoch",{enumerable:!0,get:function(){return pe(P).default}});var x=n(67);Object.defineProperty(e,"nextXDay",{enumerable:!0,get:function(){return pe(x).default}});var M=n(9);Object.defineProperty(e,"nowAsEpoch",{enumerable:!0,get:function(){return pe(M).default}});var L=n(68);Object.defineProperty(e,"oneYearAfterStr",{enumerable:!0,get:function(){return pe(L).default}});var j=n(71);Object.defineProperty(e,"secondsToTimeString",{enumerable:!0,get:function(){return pe(j).default}});var F=n(19);Object.defineProperty(e,"splitSecsToUnits",{enumerable:!0,get:function(){return pe(F).default}});var U=n(10);Object.defineProperty(e,"timeStringBigger",{enumerable:!0,get:function(){return pe(U).default}});var z=n(73);Object.defineProperty(e,"timeStringIsBetween",{enumerable:!0,get:function(){return pe(z).default}});var V=n(20);Object.defineProperty(e,"timeStringSmaller",{enumerable:!0,get:function(){return pe(V).default}});var H=n(74);Object.defineProperty(e,"timeStringToSeconds",{enumerable:!0,get:function(){return pe(H).default}});var G=n(75);Object.defineProperty(e,"todayEpoch",{enumerable:!0,get:function(){return pe(G).default}});var q=n(76);Object.defineProperty(e,"todayLocaleString",{enumerable:!0,get:function(){return pe(q).default}});var W=n(77);Object.defineProperty(e,"todayUTCString",{enumerable:!0,get:function(){return pe(W).default}});var K=n(1);Object.defineProperty(e,"xDayEpoch",{enumerable:!0,get:function(){return pe(K).default}});var Y=n(78);Object.defineProperty(e,"xMonthsAfter",{enumerable:!0,get:function(){return pe(Y).default}});var J=n(11);Object.defineProperty(e,"yesterdayEpoch",{enumerable:!0,get:function(){return pe(J).default}});var Q=n(79);Object.defineProperty(e,"yesterdayString",{enumerable:!0,get:function(){return pe(Q).default}});var X=n(80);Object.defineProperty(e,"yesterdayUTCString",{enumerable:!0,get:function(){return pe(X).default}});var Z=n(69);Object.defineProperty(e,"returnValidDate",{enumerable:!0,get:function(){return pe(Z).default}});var $=n(70);Object.defineProperty(e,"returnValidTime",{enumerable:!0,get:function(){return pe($).default}});var tt=n(64);Object.defineProperty(e,"isValidTime",{enumerable:!0,get:function(){return pe(tt).default}});var et=n(72);Object.defineProperty(e,"timeLeftToNextRealityCheck",{enumerable:!0,get:function(){return pe(et).default}});var nt=n(21);Object.defineProperty(e,"durationSecHelper",{enumerable:!0,get:function(){return pe(nt).default}});var rt=n(88);Object.defineProperty(e,"durationText",{enumerable:!0,get:function(){return pe(rt).default}});var it=n(3);Object.defineProperty(e,"durationToSecs",{enumerable:!0,get:function(){return pe(it).default}});var ot=n(22);Object.defineProperty(e,"durationUnits",{enumerable:!0,get:function(){return pe(ot).default}});var at=n(89);Object.defineProperty(e,"extractDuration",{enumerable:!0,get:function(){return pe(at).default}});var st=n(12);Object.defineProperty(e,"extractDurationHelper",{enumerable:!0,get:function(){return pe(st).default}});var ct=n(90);Object.defineProperty(e,"extractForwardStartingDuration",{enumerable:!0,get:function(){return pe(ct).default}});var ut=n(23);Object.defineProperty(e,"extractMinMaxInUnits",{enumerable:!0,get:function(){return pe(ut).default}});var lt=n(91);Object.defineProperty(e,"isDurationLessThan2Mins",{enumerable:!0,get:function(){return pe(lt).default}});var ht=n(24);Object.defineProperty(e,"isDurationTick",{enumerable:!0,get:function(){return pe(ht).default}});var pt=n(92);Object.defineProperty(e,"isDurationWithinRange",{enumerable:!0,get:function(){return pe(pt).default}});var ft=n(101);Object.defineProperty(e,"calculateLastDigitStats",{enumerable:!0,get:function(){return pe(ft).default}});var dt=n(102);Object.defineProperty(e,"digitsToPips",{enumerable:!0,get:function(){return pe(dt).default}});var yt=n(26);Object.defineProperty(e,"getLastDigit",{enumerable:!0,get:function(){return pe(yt).default}});var mt=n(103);Object.defineProperty(e,"noOfDecimals",{enumerable:!0,get:function(){return pe(mt).default}});var gt=n(104);Object.defineProperty(e,"numberToSignedString",{enumerable:!0,get:function(){return pe(gt).default}});var vt=n(105);Object.defineProperty(e,"pipSizeToStepSize",{enumerable:!0,get:function(){return pe(vt).default}});var bt=n(106);Object.defineProperty(e,"pipsToDigits",{enumerable:!0,get:function(){return pe(bt).default}});var _t=n(107);Object.defineProperty(e,"toMoney",{enumerable:!0,get:function(){return pe(_t).default}});var Et=n(108);Object.defineProperty(e,"filterDeep",{enumerable:!0,get:function(){return pe(Et).default}});var Tt=n(109);Object.defineProperty(e,"findDeep",{enumerable:!0,get:function(){return pe(Tt).default}});var St=n(4);Object.defineProperty(e,"groupByKey",{enumerable:!0,get:function(){return pe(St).default}});var kt=n(110);Object.defineProperty(e,"immutableChildrenToJS",{enumerable:!0,get:function(){return pe(kt).default}});var wt=n(111);Object.defineProperty(e,"areArraysEqual",{enumerable:!0,get:function(){return pe(wt).default}});var At=n(112);Object.defineProperty(e,"areCandleArrayEqual",{enumerable:!0,get:function(){return pe(At).default}});var Ot=n(113);Object.defineProperty(e,"areTickArraysEqual",{enumerable:!0,get:function(){return pe(Ot).default}});var Ct=n(13);Object.defineProperty(e,"doArrayDifferJustOneEntry",{enumerable:!0,get:function(){return pe(Ct).default}});var It=n(27);Object.defineProperty(e,"doCandleEqual",{enumerable:!0,get:function(){return pe(It).default}});var Nt=n(114);Object.defineProperty(e,"doCandlesDifferJustOneEntry",{enumerable:!0,get:function(){return pe(Nt).default}});var Rt=n(115);Object.defineProperty(e,"doTicksDifferJustOneEntry",{enumerable:!0,get:function(){return pe(Rt).default}});var Bt=n(28);Object.defineProperty(e,"doTicksEqual",{enumerable:!0,get:function(){return pe(Bt).default}});var Dt=n(116);Object.defineProperty(e,"getLastOHLCTick",{enumerable:!0,get:function(){return pe(Dt).default}});var Pt=n(117);Object.defineProperty(e,"getLastTickQuote",{enumerable:!0,get:function(){return pe(Pt).default}});var xt=n(118);Object.defineProperty(e,"historyToTicks",{enumerable:!0,get:function(){return pe(xt).default}});var Mt=n(119);Object.defineProperty(e,"ohlcToData",{enumerable:!0,get:function(){return pe(Mt).default}});var Lt=n(120);Object.defineProperty(e,"ohlcToTicks",{enumerable:!0,get:function(){return pe(Lt).default}});var jt=n(121);Object.defineProperty(e,"tickToData",{enumerable:!0,get:function(){return pe(jt).default}});var Ft=n(122);Object.defineProperty(e,"askPriceFromProposal",{enumerable:!0,get:function(){return pe(Ft).default}});var Ut=n(123);Object.defineProperty(e,"computeStartEndForContract",{enumerable:!0,get:function(){return pe(Ut).default}});var zt=n(124);Object.defineProperty(e,"contractCategoryToText",{enumerable:!0,get:function(){return pe(zt).default}});var Vt=n(125);Object.defineProperty(e,"contractCodeToText",{enumerable:!0,get:function(){return pe(Vt).default}});var Ht=n(126);Object.defineProperty(e,"extractSpreadInfo",{enumerable:!0,get:function(){return pe(Ht).default}});var Gt=n(127);Object.defineProperty(e,"isIntraday",{enumerable:!0,get:function(){return pe(Gt).default}});var qt=n(128);Object.defineProperty(e,"normalizedContractFor",{enumerable:!0,get:function(){return pe(qt).default}});var Wt=n(129);Object.defineProperty(e,"tradeToFriendlyType",{enumerable:!0,get:function(){return pe(Wt).default}});var Kt=n(29);Object.defineProperty(e,"tradeTypeCodeToText",{enumerable:!0,get:function(){return pe(Kt).default}});var Yt=n(130);Object.defineProperty(e,"tradeTypeTextToCode",{enumerable:!0,get:function(){return pe(Yt).default}});var Jt=n(5);Object.defineProperty(e,"tradeTypes",{enumerable:!0,get:function(){return pe(Jt).default}});var Qt=n(30);Object.defineProperty(e,"typeHasBarrier",{enumerable:!0,get:function(){return pe(Qt).default}});var Xt=n(93);Object.defineProperty(e,"Analytics",{enumerable:!0,get:function(){return pe(Xt).default}});var Zt=n(94);Object.defineProperty(e,"brandColor",{enumerable:!0,get:function(){return pe(Zt).default}});var $t=n(95);Object.defineProperty(e,"directionClassName",{enumerable:!0,get:function(){return pe($t).default}});var te=n(96);Object.defineProperty(e,"errorToString",{enumerable:!0,get:function(){return pe(te).default}});var ee=n(97);Object.defineProperty(e,"getUniqueId",{enumerable:!0,get:function(){return pe(ee).default}});var ne=n(98);Object.defineProperty(e,"isMobile",{enumerable:!0,get:function(){return pe(ne).default}});var re=n(99);Object.defineProperty(e,"isValidEmail",{enumerable:!0,get:function(){return pe(re).default}});var ie=n(100);Object.defineProperty(e,"isValidPassword",{enumerable:!0,get:function(){return pe(ie).default}});var oe=n(81);Object.defineProperty(e,"addFullscreenEventListener",{enumerable:!0,get:function(){return pe(oe).default}});var ae=n(82);Object.defineProperty(e,"exitFullscreen",{enumerable:!0,get:function(){return pe(ae).default}});var se=n(83);Object.defineProperty(e,"removeFullscreenEventListener",{enumerable:!0,get:function(){return pe(se).default}});var ce=n(84);Object.defineProperty(e,"requestFullscreen",{enumerable:!0,get:function(){return pe(ce).default}});var ue=n(86);Object.defineProperty(e,"showInfo",{enumerable:!0,get:function(){return pe(ue).default}});var le=n(85);Object.defineProperty(e,"showError",{enumerable:!0,get:function(){return pe(le).default}});var he=n(87);function pe(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"windowResizeEvent",{enumerable:!0,get:function(){return pe(he).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return+t.toFixed(e).slice(-1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return!t&&t===e||!!t&&!!e&&t.epoch===e.epoch&&t.close===e.close}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return!t&&t===e||!!t&&!!e&&t.epoch===e.epoch&&t.quote===e.quote}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(5))&&r.__esModule?r:{default:r};e.default=function(t){var e=i.default.find((function(e){return e.value===t}));return e?e.text:"Unknown"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(5))&&r.__esModule?r:{default:r};e.default=function(t){var e=i.default.find((function(e){return e.value===t}));return!(!e||!e.barrier)}},function(t,e,n){"use strict";e.__esModule=!0,e.OAuth=e.helpers=e.LiveApi=e.LiveEvents=void 0;var r=n(14);Object.defineProperty(e,"LiveEvents",{enumerable:!0,get:function(){return s(r).default}});var i=n(33);Object.defineProperty(e,"LiveApi",{enumerable:!0,get:function(){return s(i).default}});var o=n(15);Object.defineProperty(e,"helpers",{enumerable:!0,get:function(){return o.helpers}});var a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(34));function s(t){return t&&t.__esModule?t:{default:t}}e.OAuth=a},function(t,e,n){"use strict";e.__esModule=!0;var r=function(){return{token:void 0,balance:!1,contracts:new Set,allContract:!1,transactions:!1,ticks:new Set,ticksHistory:new Map,candlesHistory:new Map,proposals:new Set,streamIdMapping:new Map}};e.default=function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resetState=function(){e.state=r()},this.getState=function(){return e.state},this.authorize=function(t){e.state.token=t},this.subscribeToBalance=function(){e.state.balance=!0},this.unsubscribeFromBalance=function(){e.state.balance=!1},this.subscribeToOpenContract=function(t,n){n&&(e.state.contracts.add(t),e.state.streamIdMapping.set(n,t))},this.unsubscribeFromAllOpenContracts=function(){e.state.contracts.clear(),e.state.allContract=!1},this.subscribeToAllOpenContracts=function(){e.state.allContract=!0},this.subscribeToTransactions=function(){e.state.transactions=!0},this.unsubscribeFromTransactions=function(){e.state.transactions=!1},this.subscribeToTick=function(t){e.state.ticks.add(t)},this.subscribeToTicks=function(t){t.forEach(e.subscribeToTick)},this.unsubscribeFromAllTicks=function(){e.state.ticks.clear(),e.state.ticksHistory.clear()},this.unsubscribeFromAllCandles=function(){e.state.candlesHistory.clear()},this.getTickHistory=function(t,n){n&&1===n.subscribe&&("candles"===n.style?e.state.candlesHistory.set(t,n):e.state.ticksHistory.set(t,n))},this.subscribeToPriceForContractProposal=function(t,n){n&&(e.state.proposals.add(t),e.state.streamIdMapping.set(n,t))},this.unsubscribeFromAllProposals=function(){e.state.proposals.clear()},this.unsubscribeByID=function(t){e.state.streamIdMapping.forEach((function(n,r){r===t&&(e.state.contracts.delete(n),e.state.proposals.delete(n))})),e.state.streamIdMapping.delete(t)},this.state=r()}},function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(132),o=n(25),a=p(n(14)),s=p(n(35)),c=h(n(37)),u=p(n(32)),l=h(n(15));function h(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function p(t){return t&&t.__esModule?t:{default:t}}(0,o.getUniqueId)();var f="wss://frontend.binaryws.com/websockets/v3",d=function(){},y=d,m="undefined"!=typeof window?window.WebSocket:y,g=function(t){return"AlreadySubscribed"===t.code},v=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.onOpen=function(){n.resubscribe(),n.executeBufferedExecutes()},this.disconnect=function(){n.token="",n.socket.onclose=d;try{n.socket.close()}catch(t){}},this.resubscribe=function(){var t=n.apiState.getState().token,e=n.resubscriptions,r=e.authorized,i=e.unauthorized;n.authStream.take(1).subscribe((function(){Object.keys(r).forEach((function(t){return r[t]()})),n.sendBufferedSends()})),Object.keys(i).forEach((function(t){return i[t]()})),t?n.authorize(t):n.sendBufferedSends()},this.getInState=function(t){return n.apiState.getState()[t]},this.resubscriptions={authorized:{balance:function(){n.getInState("balance")&&n.subscribeToBalance()},transaction:function(){n.getInState("transactions")&&n.subscribeToTransactions()},proposal_open_contract:function(){n.getInState("allContract")&&n.subscribeToAllOpenContracts(),n.getInState("contracts").forEach((function(t){return n.subscribeToOpenContract(t)}))}},unauthorized:{tick:function(){0!==n.getInState("ticks").size&&n.subscribeToTicks([].concat(n.getInState("ticks"))),n.getInState("ticksHistory").forEach((function(t,e){return n.getTickHistory(e,t)}))},ohlc:function(){n.getInState("candlesHistory").forEach((function(t,e){return n.getTickHistory(e,t)}))},proposal:function(){n.getInState("proposals").forEach((function(t){return n.subscribeToPriceForContractProposal(t)}))}}},this.queuedResubscriptions=new Set,this.shouldResubscribeOnError=function(t){var e=t.msg_type,r=t.error;return!!["CallError","WrongResponse","GetProposalFailure","ProposalArrayFailure","ContractValidationError","ContractCreationFailure"].includes(r.code)&&(Object.keys(n.resubscriptions).forEach((function(t){var r=n.resubscriptions[t],i=Object.keys(r).find((function(t){return t===e}));i&&!n.queuedResubscriptions.has(i)&&(n.queuedResubscriptions.add(i),setTimeout((function(){n.queuedResubscriptions.delete(i),r[i]()}),500))})),!0)},this.changeLanguage=function(t){if(t!==n.language){n.socket.onclose=d;try{n.socket.close()}catch(t){}n.language=t,n.connect()}},this.isReady=function(){return!!n.socket&&1===n.socket.readyState},this.sendBufferedSends=function(){for(;n.bufferedSends.length>0;)n.bufferedSends.shift()()},this.executeBufferedExecutes=function(){for(;n.bufferedExecutes.length>0;)n.bufferedExecutes.shift()()},this.resolvePromiseForResponse=function(t){if(void 0===t.req_id)return Promise.resolve();var e=t.req_id.toString(),r=n.unresolvedPromises[e];return r?(delete n.unresolvedPromises[e],t.error?g(t.error)?Promise.resolve():r.reject(new s.default(t)):r.resolve(t)):(t.error&&n.shouldResubscribeOnError(t),Promise.resolve())},this.publishToObservables=function(t){if(void 0!==t.req_id){var e=t.req_id.toString(),r=n.uncompleteOneTimeObs[e],i=n.uncompleteStreamObs[e];(r||i)&&(t.error?g(t.error)||(r?r.onError(new s.default(t)):i.onError(new s.default(t))):r?(r.onNext(t),r.onCompleted()):i.onNext(t))}},this.onMessage=function(t){var e=JSON.parse(t.data);return"authorize"===e.msg_type&&n.onAuth&&(e.error||n.onAuth.next()),e.error?n.events.emit("error",e):n.events.emit(e.msg_type,e),n.useRx?n.publishToObservables(e):n.resolvePromiseForResponse(e)},this.generatePromiseOrObservable=function(t){var e=t.req_id.toString();return n.useRx?i.Observable.create((function(r){return t.subscribe||t.ticks?n.uncompleteStreamObs[e]=r:n.uncompleteOneTimeObs[e]=r,function(){delete n.uncompleteOneTimeObs[e],delete n.uncompleteStreamObs[e]}})).publish():new Promise((function(t,r){n.unresolvedPromises[e]={resolve:t,reject:r}}))},this.sendAndUpdateState=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),a=1;a<e;a++)i[a-1]=arguments[a];var s=(0,o.getUniqueId)(),u=c[t].apply(c,i),l=r({req_id:s},u),h=function(){var e;n.sendSpy(JSON.stringify(l)),n.socket.send(JSON.stringify(l)),n.apiState[t]&&(e=n.apiState)[t].apply(e,i)};if(n.isReady()?h():n.bufferedSends.push(h),void 0!==l.req_id){var p=function(e){if(!n.apiState[t])return e;var r;if(e.proposal_open_contract&&e.proposal_open_contract.id)(r=n.apiState)[t].apply(r,i.concat([e.proposal_open_contract.id]));else if(e.proposal&&e.proposal.id){var o;(o=n.apiState)[t].apply(o,i.concat([e.proposal.id]))}return e};if(n.useRx){var f=n.generatePromiseOrObservable(l);return f.take(1).forEach(p),f}return n.generatePromiseOrObservable(l).then(p)}},this.execute=function(t){n.isReady()?t():n.bufferedExecutes.push(t)},this.send=function(t){console.warn("This method is deprecated, use high-level methods");var e=(0,o.getUniqueId)();return n.sendRaw(r({req_id:e},t))},this.sendRaw=function(t){console.warn("This method is deprecated, use high-level methods");var e=function(){n.sendSpy(JSON.stringify(t)),n.socket.send(JSON.stringify(t))};if(n.isReady()?e():n.bufferedSends.push(e),void 0!==t.req_id)return n.generatePromiseOrObservable(t)};var l=e||{},h=l.apiUrl,p=void 0===h?f:h,y=l.language,v=void 0===y?"en":y,b=l.appId,_=void 0===b?0:b,E=l.brand,T=void 0===E?"":E,S=l.sendSpy,k=void 0===S?function(){}:S,w=l.websocket,A=l.connection,O=l.keepAlive,C=l.useRx,I=void 0!==C&&C;this.apiUrl=p,this.language=v,this.appId=_,this.brand=T,this.sendSpy=k,this.useRx=I,O&&setInterval((function(){return n.ping()}),6e4),w&&(m=w),this.bufferedSends=[],this.bufferedExecutes=[],this.unresolvedPromises={},this.events=new a.default,this.apiState=new u.default,I&&(this.uncompleteOneTimeObs={},this.uncompleteStreamObs={}),this.authStream=i.Observable.create((function(t){return n.onAuth=t,function(){n.onAuth=null}})),this.bindCallsAndStateMutators(),this.connect(A)}return t.prototype.bindCallsAndStateMutators=function(){var t=this;Object.keys(c).forEach((function(e){t[e]=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.sendAndUpdateState.apply(t,[e].concat(r))}})),Object.keys(l).forEach((function(e){t[e]=function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return l[e].apply(l,[t].concat(r))}}))},t.prototype.connect=function(t){var e=this,n=this.brand?"&brand="+this.brand:"",r=this.apiUrl+"?l="+this.language+"&app_id="+this.appId+n;Object.keys(this.unresolvedPromises).forEach((function(t){var n=new Error("Websocket disconnected before response received.");n.name="DisconnectError",e.unresolvedPromises[t].reject(n),delete e.unresolvedPromises[t]}));try{this.socket=t||new m(r)}catch(t){}finally{this.socket.onopen=this.onOpen,this.socket.onclose=function(){return e.connect()},this.socket.onmessage=this.onMessage}},t}();e.default=v},function(t,e,n){"use strict";e.__esModule=!0,e.oauthUrl=function(t){return"https://www.binary.com/oauth2/authorize?app_id="+t},e.oauthUrlWithLanguage=function(t,e){return"https://www.binary.com/oauth2/authorize?app_id="+t+"&l="+e},e.parseOAuthResponse=function(t){var e=t.split("/redirect?");if(2!==e.length)throw new Error("Not a valid url");for(var n=e[1].split(/acct\d=(\w+)&token\d=([\w-]+)/g),r=[],i=1;i<n.length;i+=3)r.push({account:n[i],token:n[i+1]});return r}},function(t,e,n){"use strict";e.__esModule=!0;var r=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,n));r.stack=(new Error).stack,r.error=n,r.name=n.error.code;var i=n.error.message,o=n.echo_req,a=JSON.stringify(o,null,2);return r.message="[ServerError] "+i+"\n"+a,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(Error);e.default=r},function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.deleteApiToken=function(t){return{api_token:1,delete_token:t}},e.getApiTokens=function(){return{api_token:1}},e.createApiToken=function(t,e){return{api_token:1,new_token:t,new_token_scopes:e}},e.changePassword=function(t,e){return{change_password:1,old_password:t,new_password:e}},e.registerApplication=function(t){return r({app_register:1},t)},e.getAllAppList=function(){return{app_list:1}},e.getAppslistById=function(t){return{app_get:t}},e.deleteApplication=function(t){return{app_delete:t}},e.createRealAccountMaltaInvest=function(t){return r({new_account_maltainvest:1},t)},e.createRealAccount=function(t){return r({new_account_real:1},t)},e.setAccountCurrency=function(t){return{set_account_currency:t}},e.setSelfExclusion=function(t){return r({set_self_exclusion:1},t)},e.setAccountSettings=function(t){return r({set_settings:1},t)},e.setTnCApproval=function(){return{tnc_approval:1}}},function(t,e,n){"use strict";e.__esModule=!0;var r=n(41);Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})}));var i=n(39);Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})}));var o=n(40);Object.keys(o).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})}));var a=n(38);Object.keys(a).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})}));var s=n(36);Object.keys(s).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return s[t]}})}))},function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.getCashierLockStatus=function(){return{cashier_password:1}},e.setCashierLock=function(t){return r({cashier_password:1},t)},e.withdrawToPaymentAgent=function(t){return r({paymentagent_withdraw:1},t)},e.paymentAgentTransfer=function(t){return r({paymentagent_transfer:1},t)},e.transferBetweenAccounts=function(t){return r({transfer_between_accounts:1},t)}},function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.getAccountLimits=function(){return{get_limits:1}},e.getAccountSettings=function(){return{get_settings:1}},e.getAccountStatus=function(){return{get_account_status:1}},e.getSelfExclusion=function(){return{get_self_exclusion:1}},e.logOut=function(){return{logout:1}},e.getStatement=function(t){return r({statement:1},t)},e.getPortfolio=function(){return{portfolio:1}},e.getProfitTable=function(t){return r({profit_table:1},t)},e.getRealityCheckSummary=function(){return{reality_check:1}},e.subscribeToBalance=function(){return{balance:1,subscribe:1}},e.unsubscribeFromBalance=function(){return{forget_all:"balance"}},e.subscribeToOpenContract=function(t){return{proposal_open_contract:1,subscribe:1,contract_id:t}},e.getContractInfo=function(t){return{proposal_open_contract:1,contract_id:t}},e.subscribeToAllOpenContracts=function(){return{proposal_open_contract:1,subscribe:1}},e.unsubscribeFromAllOpenContracts=function(){return{forget_all:"proposal_open_contract"}},e.subscribeToTransactions=function(){return{transaction:1,subscribe:1}},e.unsubscribeFromTransactions=function(){return{forget_all:"transaction"}}},function(t,e,n){"use strict";e.__esModule=!0,e.buyContract=function(t,e){return{buy:t,price:e}},e.buyContractParams=function(t,e){return{buy:1,price:e,parameters:t}},e.sellContract=function(t,e){return{sell:t,price:e}},e.sellExpiredContracts=function(){return{sell_expired:1}},e.topUpVirtualAccount=function(){return{topup_virtual:1}}},function(t,e,n){"use strict";e.__esModule=!0;var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};e.getActiveSymbolsBrief=function(){return{active_symbols:"brief"}},e.getActiveSymbolsFull=function(){return{active_symbols:"full"}},e.getAssetIndex=function(){return{asset_index:1}},e.authorize=function(t){return{authorize:t}},e.getContractsForSymbol=function(t){return{contracts_for:t}},e.unsubscribeFromTick=function(t){return{forget:t}},e.unsubscribeFromTicks=function(t){return{forget:t}},e.unsubscribeByID=function(t){return{forget:t}},e.unsubscribeFromAllTicks=function(){return{forget_all:"ticks"}},e.unsubscribeFromAllCandles=function(){return{forget_all:"candles"}},e.unsubscribeFromAllProposals=function(){return{forget_all:"proposal"}},e.unsubscribeFromAllPortfolios=function(){return{forget_all:"portfolio"}},e.getLandingCompany=function(t){return{landing_company:t}},e.getLandingCompanyDetails=function(t){return{landing_company_details:t}},e.createVirtualAccount=function(t){return r({new_account_virtual:1},t)},e.ping=function(){return{ping:1}},e.getPaymentAgentsForCountry=function(t){return{paymentagent_list:t}},e.getPayoutCurrencies=function(){return{payout_currencies:1}},e.getPriceProposalForContract=function(t){return r({proposal:1},t)},e.subscribeToPriceForContractProposal=function(t){return r({proposal:1,subscribe:1},t)},e.getResidences=function(){return{residence_list:1}},e.getStatesForCountry=function(t){return{states_list:t}},e.subscribeToTick=function(t){return{ticks:t}},e.subscribeToTicks=function(t){return{ticks:t}},e.getTickHistory=function(t,e){return r({ticks_history:t},e||{end:"latest"})},e.getCandles=function(t,e){return r({ticks_history:t,style:"candles"},e||{end:"latest"})},e.getCandlesForLastNDays=function(t,e){return{ticks_history:t,style:"candles",start:Math.floor(Date.now()/1e3)-60*(e-1)*60*24,end:"latest",granularity:86400,count:30}},e.getServerTime=function(){return{time:1}},e.getTradingTimes=function(t){return{trading_times:t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}},e.verifyEmail=function(t,e){return{verify_email:t,type:e}},e.getWebsiteStatus=function(){return{website_status:1}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.length===e.length&&!t.some((function(t,n){return t!==e[n]}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.max.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.min.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&(0===t.length?void 0:t[t.length-1])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.reduce((function(t,n){var r=n[e],i=t.findIndex((function(t){return t.some((function(t){return t[e]===r}))}));return i>-1?t[i].push(n):t.push([n]),t}),[])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(t,e){var i=n(t),o=r(e);return i>o?1:i<o?-1:0},a=t.slice(0),s=e.slice(0),c=[];a.length>0||s.length>0;){var u=a[0],l=s[0];if(!u){c=c.concat(s);break}if(!l){c=c.concat(a);break}var h=c.length>0&&c[c.length-1],p=void 0;switch(o(u,l)){case 0:i&&s.shift(),p=a.shift();break;case 1:p=s.shift();break;case-1:p=a.shift()}if(i&&h&&n(h)===r(p))break;c.push(p)}return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Array.from(Array(t).keys())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(7))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t,e,"barrier2")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(7))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t,e,"barrier")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(17))&&r.__esModule?r:{default:r};e.default=function(t,e){return t.barrier?(0,i.default)(t,e):+t.entry_spot||e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(4))&&r.__esModule?r:{default:r},o=function(t,e){var n=Object.keys(t),r={};return n.forEach((function(n){var i=t[n].find((function(t){return!!t.barrier}));i&&(r[n]=[{name:e,defaultValue:i.barrier}])})),r};e.default=function(t,e){var n,r,a,s=(0,i.default)(t,"expiry_type");switch(e){case"CALL":return o(s,"Higher than");case"PUT":return o(s,"Lower than");case"ONETOUCH":case"NOTOUCH":return o(s,"Touch spot");case"EXPIRYMISS":case"EXPIRYRANGE":case"RANGE":case"UPORDOWN":return n=s,r=Object.keys(n),a={},r.forEach((function(t){var e=n[t];a[t]=[{name:"High barrier",defaultValue:e[0].high_barrier},{name:"Low barrier",defaultValue:e[0].low_barrier}]})),a;case"DIGITMATCH":case"DIGITDIFF":case"DIGITOVER":case"DIGITUNDER":return function(t){var e=Object.keys(t),n={};return e.forEach((function(e){var r=t[e];n[e]=[{name:"Digit",values:r[0].last_digit_range,defaultValue:r[0].last_digit_range[0]}]})),n}(s);case"DIGITODD":case"DIGITEVEN":case"ASIANU":case"ASIAND":case"SPREADU":case"SPREADD":default:return}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(6))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t.barrier2,t.entry_spot,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.floor(t.getTime()/1e3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.toISOString().replace(/T/," ").replace(/\..+/,"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.toISOString().slice(11,19)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(2)),i=o(n(0));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,i.default)((0,r.default)(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(2))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(t).toUTCString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(18))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(new Date(1e3*t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(2))&&r.__esModule?r:{default:r};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,i.default)(t).toISOString().slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date(1e3*t).toISOString().slice(11,19)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new Date;return e.setMonth(e.getMonth()-t),Math.floor(e.getTime()/1e3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return!isNaN(t.getTime())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.split(":");return!(e.length<2||e.length>3)&&-1===e.map((function(t,e){switch(e){case 0:return parseInt(t,0)<24;case 1:default:return parseInt(t,0)<=59}})).indexOf(!1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(-29)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(-6)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new Date;return e.setDate(e.getDate()+t),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(0))&&r.__esModule?r:{default:r};e.default=function(){var t=new Date;return t.setFullYear((new Date).getFullYear()+1),(0,i.default)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.split(e).map((function(t){switch(t.length){case 0:return"01";case 1:return"0"+("0"===t?"1":t);default:return t}})).join(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.split(e).map((function(t){switch(t.length){case 0:return"00";case 1:return"0"+t;default:return t}})).join(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Math.floor(t/60/60/24),n=Math.floor(t%86400/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return(e>0?e+" day(s)":"")+(n>0?n+" hour(s)":"")+(r>0?r+" minute(s)":"")+(i>0?i+" second(s)":"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(9))&&r.__esModule?r:{default:r};e.default=function(t,e){return e-((0,i.default)()-t)%e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(10)),i=o(n(20));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){return(0,r.default)(e,t)?(0,r.default)(n,t)&&(0,i.default)(n,e):!((0,r.default)(n,e)&&(0,i.default)(n,t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.split(":");if(2!==e.length)throw new Error("Time string format incorrect, expecting HH:mm, actual: "+t);return 3600*+e[0]+60*+e[1]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(1))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(0)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(0))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(new Date)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(new Date).toISOString().slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date((new Date).setMonth((new Date).getMonth()+t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(0)),i=o(n(11));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return(0,r.default)(new Date(1e3*(0,i.default)()))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(11))&&r.__esModule?r:{default:r};e.default=function(){return new Date(1e3*(0,i.default)()).toISOString().slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){document.addEventListener("fullscreenchange",(function(){return t(document.fullscreen)})),document.addEventListener("webkitfullscreenchange",(function(){return t(document.webkitIsFullScreen)})),document.addEventListener("mozfullscreenchange",(function(){return t(document.mozFullScreen)})),document.addEventListener("MSFullscreenChange",(function(){return t(document.msFullscreenElement)}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),document.removeEventListener("MSFullscreenChange",t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof alert?alert:function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof alert?alert:function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){"undefined"!=typeof window&&setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),100)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{t:"Ticks",s:"Seconds",m:"Minutes",h:"Hours",d:"Days"}[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(12))&&r.__esModule?r:{default:r};e.default=function(t,e){var n=t.filter((function(t){return t.contract_type===e})).filter((function(t){return!t.forward_starting_options}));if(0!==n.length)return(0,i.default)(n,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=s(n(16)),o=s(n(4)),a=s(n(12));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=t.filter((function(t){return!!t.forward_starting_options&&t.contract_type===e}));if(0!==n.length){if(n.length>1)throw new Error("Can not have more than one contract with forward starting options");var s=n[0].forward_starting_options,c=(0,o.default)(s||[],"date"),u=[];Object.keys(c).sort((function(t,e){return+t-+e})).forEach((function(t){var e=c[t].map((function(t){return{open:new Date(1e3*t.open),close:new Date(1e3*t.close)}})),n=(0,i.default)(e);u.push(r({date:new Date(1e3*t)},n))}));var l=(0,a.default)(n,e);return{range:u,options:l}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(24)),i=o(n(3));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,r.default)(e)||(0,i.default)(t,e)<120}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=n.find((function(t){return t.unit===e}));return!!r&&t<=r.max&&t>=r.min}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){},i=function(t){return t||"undefined"!=typeof window&&window.ga||r};e.trackUserId=function(t,e){return i(e)("set","userId",t)},e.trackRoute=function(t,e){return i(e)("send","pageview",t)},e.trackEvent=function(t,e,n,r){return i(r)("send",{hitType:"event",eventCategory:t,eventAction:e,eventLabel:n})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"rgba(42, 48, 82, "+t+")"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(t<0?"number-negative":t>0&&"number-positive")||""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.split(")").length>1?t.split(")")[1]:t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=0;e.default=function(){return r++}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return"undefined"!=typeof window&&/Mobile/.test(window.navigator.userAgent)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return/\S+@\S+\.\S+/.test(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return/^[ -~]{6,25}$/.test(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(26))&&r.__esModule?r:{default:r};e.default=function(t,e){return t.reduce((function(t,n){return t[(0,i.default)(n.quote,e)]++,t}),[0,0,0,0,0,0,0,0,0,0]).map((function(e){return t.length&&e/t.length*100}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.pow(10,-t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.toString();return e.includes(".")?e.split(".")[1].length:0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t>0?"+"+t:t.toString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return isNaN(t)?"0.01":"0."+Array(t).join("0")+1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.abs(Math.log10(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(+t).toFixed(2)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return Object.keys(t).reduce((function(n,r){return e(t[r])&&(n[r]=t[r]),n}),{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function t(e,n){if("object"!==(void 0===e?"undefined":r(e))||null==e)return!1;var i=Object.keys(e).map((function(t){return e[t]}));return i.map((function(t,e){return n(t,e)})).indexOf(!0)>-1||i.map((function(e){return t(e,n)})).indexOf(!0)>-1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.toPlainJS=function(t){return t&&(void 0===t.toJS?t:t.toJS())};e.default=function(t){return t&&Object.keys(t).reduce((function(e,n){return e[n]=r(t[n]),e}),{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.length,r=e.length;if(n!==r)return!1;if(0===n)return!0;var i=t[n-1],o=e[r-1];return i.epoch===o.epoch&&i.close===o.close}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.length===e.length&&(0===t.length||t[t.length-1].epoch===e[e.length-1].epoch)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(27)),i=o(n(13));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,i.default)(t,e,r.default)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(28)),i=o(n(13));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,i.default)(t,e,r.default)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&(0===t.length?void 0:+t[t.length-1].close)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&t.length>0?t[t.length-1].quote:void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.times.map((function(e,n){return{epoch:+e,quote:+t.prices[n]}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return[1e3*+(t.open_time||t.epoch),+t.open,+t.high,+t.low,+t.close]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.map((function(t){return{quote:+t.open,epoch:+t.epoch}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return[1e3*+t.epoch,+t.quote]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&+t.ask_price}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(9))&&r.__esModule?r:{default:r};e.default=function(t){var e=(0,i.default)();if(t.tick_count)return{start:+t.date_start-5,end:+t.exit_tick_time+5||e};var n=+t.date_start,r=+t.exit_tick_time||+t.date_expiry;if(r<=n){var o=new RangeError("Contract ends time is earlier than start time");throw o.name="ContractEndsBeforeStart",o}var a=.05*(r-n),s=a?n-a:n,c=r?r+a:e;return{end:Math.round(c),start:Math.round(s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{callput:"Up/Down",risefall:"Rise/Fall",higherlower:"Higher/Lower",asian:"Asians",digits:"Digits",endsinout:"Ends In/Out",staysinout:"Stays In/Out",touchnotouch:"Touch/No Touch",spreads:"Spreads"}[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{contract_id:"Contract ID",purchase_time:"Purchase Time",ask_price:"Ask Price",bid_price:"Bid Price",date_start:"Start Time",date_expiry:"Expiry Time",date_settlement:"Settlement Time",expiry_time:"Expiry Time",current_spot:"Current Spot",current_spot_time:"Current Spot Time",entry_spot:"Entry Spot",entry_tick_time:"Entry Spot Time",sell_price:"Sell Price",payout:"Potential Payout",buy_price:"Purchase Price",barrier:"Barrier",low_barrier:"Low Barrier",high_barrier:"High Barrier",sell_time:"Sell Time",exit_tick_time:"Exit Spot Time",exit_tick:"Exit Spot",sell_spot_time:"DO NOT USE",entry_tick:"DO NOT USE",sell_spot:"DO NOT USE"}[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{amountPerPoint:t[0].amount_per_point,stopType:t[0].stop_type,stopLoss:t[0].stop_loss,stopProfit:t[0].stop_profit}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(3))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t,e)<86400}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(4))&&r.__esModule?r:{default:r};e.default=function(t){var e=t.map((function(t){return{amount_per_point:t.amount_per_point,barrier:t.barrier,barriers:t.barriers,contract_category:t.contract_category,contract_category_display:t.contract_category_display,contract_display:t.contract_display,contract_type:t.contract_type,expiry_type:t.expiry_type,forward_starting_options:t.forward_starting_options,high_barrier:t.high_barrier,last_digit_range:t.last_digit_range,low_barrier:t.low_barrier,min_contract_duration:t.min_contract_duration,max_contract_duration:t.max_contract_duration,stop_type:t.stop_type,stop_loss:t.stop_loss,stop_profit:t.stop_profit}})),n=(0,i.default)(e,"contract_category");return Object.keys(n).forEach((function(t){var e=n[t],r=(0,i.default)(e,"contract_type");n[t]=r})),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(29)),i=o(n(30));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,r.default)(t)+((0,i.default)(t)?" "+e:"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(5))&&r.__esModule?r:{default:r};e.default=function(t){var e=i.default.find((function(e){return e.text===t}));if(!e)throw new Error("Unknown trade type text");return e.value}},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(t){r=a}}();var c,u=[],l=!1,h=-1;function p(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var t=s(p);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function y(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new d(t,e)),1!==u.length||l||s(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=y,i.addListener=y,i.once=y,i.off=y,i.removeListener=y,i.removeAllListeners=y,i.emit=y,i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){(function(t,r,i){var o;(function(a){var s={function:!0,object:!0};function c(t){return t&&t.Object===Object?t:null}var u,l=s[typeof e]&&e&&!e.nodeType?e:null,h=s[typeof t]&&t&&!t.nodeType?t:null,p=c(l&&h&&"object"==typeof r&&r),f=c(s[typeof self]&&self),d=c(s[typeof window]&&window),y=h&&h.exports===l?l:null,m=c(s[typeof this]&&this),g=p||d!==(m&&m.window)&&d||f||m||Function("return this")(),v={internals:{},config:{Promise:g.Promise},helpers:{}},b=v.helpers.noop=function(){},_=v.helpers.identity=function(t){return t},E=v.helpers.defaultNow=Date.now,T=v.helpers.defaultComparer=function(t,e){return _t(t,e)},S=v.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},k=(v.helpers.defaultKeySerializer=function(t){return t.toString()},v.helpers.defaultError=function(t){throw t}),w=v.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},A=v.helpers.isFunction=((u=function(t){return"function"==typeof t||!1})(/x/)&&(u=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),u);function O(t){for(var e=t.length,n=new Array(e),r=0;r<e;r++)n[r]=t[r];return n}var C={e:{}},I=v.internals.tryCatch=function(t){if(!A(t))throw new TypeError("fn must be a function");return e=t,function(){try{return e.apply(this,arguments)}catch(t){return C.e=t,C}};var e};function N(t){throw t}v.config.longStackSupport=!1;var R=!1,B=I((function(){throw new Error}))();R=!!B.e&&!!B.e.stack;var D,P=L(),x="From previous event:";function M(t){var e=j(t);if(!e)return!1;var n=e[0],r=e[1];return n===D&&r>=P&&r<=Hr}function L(){if(R)try{throw new Error}catch(n){var t=n.stack.split("\n"),e=j(t[0].indexOf("@")>0?t[1]:t[2]);if(!e)return;return D=e[0],e[1]}}function j(t){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}var F=v.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)};F.prototype=Object.create(Error.prototype),F.prototype.name="EmptyError";var U=v.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)};U.prototype=Object.create(Error.prototype),U.prototype.name="ObjectDisposedError";var z=v.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)};z.prototype=Object.create(Error.prototype),z.prototype.name="ArgumentOutOfRangeError";var V=v.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)};V.prototype=Object.create(Error.prototype),V.prototype.name="NotSupportedError";var H=v.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)};H.prototype=Object.create(Error.prototype),H.prototype.name="NotImplementedError";var G=v.helpers.notImplemented=function(){throw new H},q=(v.helpers.notSupported=function(){throw new V},"function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_");g.Set&&"function"==typeof(new g.Set)["@@iterator"]&&(q="@@iterator");var W=v.doneEnumerator={done:!0,value:a},K=v.helpers.isIterable=function(t){return t&&t[q]!==a},Y=v.helpers.isArrayLike=function(t){return t&&t.length!==a};v.helpers.iterator=q;var J=v.internals.bindCallback=function(t,e,n){if(void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}},Q="[object Arguments]",X="[object Array]",Z="[object Boolean]",$="[object Date]",tt="[object Error]",et="[object Number]",nt="[object Object]",rt="[object RegExp]",it="[object String]",ot={};ot["[object Float32Array]"]=ot["[object Float64Array]"]=ot["[object Int8Array]"]=ot["[object Int16Array]"]=ot["[object Int32Array]"]=ot["[object Uint8Array]"]=ot["[object Uint8ClampedArray]"]=ot["[object Uint16Array]"]=ot["[object Uint32Array]"]=!0,ot[Q]=ot[X]=ot["[object ArrayBuffer]"]=ot[Z]=ot[$]=ot[tt]=ot["[object Function]"]=ot["[object Map]"]=ot[et]=ot[nt]=ot[rt]=ot["[object Set]"]=ot[it]=ot["[object WeakMap]"]=!1;var at=Object.prototype,st=at.hasOwnProperty,ct=at.toString,ut=Math.pow(2,53)-1,lt=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(i){if("object"!=typeof i&&("function"!=typeof i||null===i))throw new TypeError("Object.keys called on non-object");var o,a,s=[];for(o in i)t.call(i,o)&&s.push(o);if(e)for(a=0;a<r;a++)t.call(i,n[a])&&s.push(n[a]);return s}}();function ht(t,e,n,r,i,o){var s=lt(t),c=s.length;if(c!==lt(e).length&&!r)return!1;for(var u,l=c;l--;)if(u=s[l],!(r?u in e:st.call(e,u)))return!1;for(var h=r;++l<c;){var p=t[u=s[l]],f=e[u];if(!(void 0===a?n(p,f,r,i,o):void 0))return!1;h||(h="constructor"===u)}if(!h){var d=t.constructor,y=e.constructor;if(d!==y&&"constructor"in t&&"constructor"in e&&!("function"==typeof d&&d instanceof d&&"function"==typeof y&&y instanceof y))return!1}return!0}var pt=v.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)};function ft(t){return!!t&&"object"==typeof t}function dt(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=ut}var yt=function(){try{Object({toString:0}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),mt=Array.isArray||function(t){return ft(t)&&dt(t.length)&&ct.call(t)===X};function gt(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function vt(t,e,n,r,i,o){var s=-1,c=t.length,u=e.length;if(c!==u&&!(r&&u>c))return!1;for(;++s<c;){var l=t[s],h=e[s];if(void 0!==a)return!1;if(r){if(!gt(e,(function(t){return l===t||n(l,t,r,i,o)})))return!1}else if(l!==h&&!n(l,h,r,i,o))return!1}return!0}function bt(t,e,n,r,i){return t===e||(null==t||null==e||!pt(t)&&!ft(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var a,s=mt(t),c=mt(e),u=X,l=X;s||((u=ct.call(t))===Q?u=nt:u!==nt&&(s=ft(a=t)&&dt(a.length)&&!!ot[ct.call(a)])),c||(l=ct.call(e))===Q&&(l=nt);var h=u===nt&&!yt(t),p=l===nt&&!yt(e),f=u===l;if(f&&!s&&!h)return function(t,e,n){switch(n){case Z:case $:return+t==+e;case tt:return t.name===e.name&&t.message===e.message;case et:return t!==+t?e!==+e:t===+e;case rt:case it:return t===e+""}return!1}(t,e,u);if(!r){var d=h&&st.call(t,"__wrapped__"),y=p&&st.call(e,"__wrapped__");if(d||y)return n(d?t.value():t,y?e.value():e,r,i,o)}if(!f)return!1;i||(i=[]),o||(o=[]);for(var m=i.length;m--;)if(i[m]===t)return o[m]===e;i.push(t),o.push(e);var g=(s?vt:ht)(t,e,n,r,i,o);return i.pop(),o.pop(),g}(t,e,bt,n,r,i))}var _t=v.internals.isEqual=function(t,e){return bt(t,e)},Et=(Array.prototype.slice,v.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n}),Tt=v.internals.addProperties=function(t){for(var e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(var i=0,o=e.length;i<o;i++){var a=e[i];for(var s in a)t[s]=a[s]}};function St(t,e){for(var n=new Array(t),r=0;r<t;r++)n[r]=e();return n}v.internals.addRef=function(t,e){return new xr((function(n){return new Pt(e.getDisposable(),t.subscribe(n))}))};var kt=v.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},wt=kt.prototype;wt.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},wt.remove=function(t){var e=!1;if(!this.isDisposed){var n=this.disposables.indexOf(t);-1!==n&&(e=!0,this.disposables.splice(n,1),this.length--,t.dispose())}return e},wt.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=this.disposables.length,e=new Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}};var At=v.Disposable=function(t){this.isDisposed=!1,this.action=t||b};At.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)};var Ot=At.create=function(t){return new At(t)},Ct=At.empty={dispose:b},It=At.isDisposable=function(t){return t&&A(t.dispose)},Nt=At.checkDisposed=function(t){if(t.isDisposed)throw new U},Rt=At._fixup=function(t){return It(t)?t:Ct},Bt=v.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null};Bt.prototype.getDisposable=function(){return this.current},Bt.prototype.setDisposable=function(t){if(this.current)throw new Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},Bt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}};var Dt=v.SerialDisposable=function(){this.isDisposed=!1,this.current=null};Dt.prototype.getDisposable=function(){return this.current},Dt.prototype.setDisposable=function(t){var e=this.isDisposed;if(!e){var n=this.current;this.current=t}n&&n.dispose(),e&&t&&t.dispose()},Dt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()};var Pt=v.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1};Pt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this._first;this._first=null,t&&t.dispose();var e=this._second;this._second=null,e&&e.dispose()}};var xt=v.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1};xt.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}},v.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,this.disposable.count--,0===this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?Ct:new t(this)},e}();var Mt=v.internals.ScheduledItem=function(t,e,n,r,i){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=i||S,this.disposable=new Bt};Mt.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},Mt.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},Mt.prototype.isCancelled=function(){return this.disposable.isDisposed},Mt.prototype.invokeCore=function(){return Rt(this.action(this.scheduler,this.state))};var Lt=v.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new H},e.scheduleFuture=function(e,n,r){var i=n;return i instanceof Date&&(i-=this.now()),0===(i=t.normalize(i))?this.schedule(e,r):this._scheduleFuture(e,i,r)},e._scheduleFuture=function(t,e,n){throw new H},t.now=E,t.prototype.now=E,t.normalize=function(t){return t<0&&(t=0),t},t}(),jt=Lt.normalize,Ft=Lt.isScheduler;!function(t){function e(t,e){var n=e[0],r=e[1],i=new kt;return r(n,(function e(n){var o=!1,a=!1,s=t.schedule(n,(function(t,n){return o?i.remove(s):a=!0,r(n,e),Ct}));a||(i.add(s),o=!0)})),i}function n(t,e){var n=e[0],r=e[1],i=new kt;return r(n,(function e(n,o){var a=!1,s=!1,c=t.scheduleFuture(n,o,(function(t,n){return a?i.remove(c):s=!0,r(n,e),Ct}));s||(i.add(c),a=!0)})),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(Lt.prototype),Lt.prototype.schedulePeriodic=function(t,e,n){if(void 0===g.setInterval)throw new V;e=jt(e);var r=t,i=g.setInterval((function(){r=n(r)}),e);return Ot((function(){g.clearInterval(i)}))};var Ut,zt,Vt=function(t){function e(){t.call(this)}return Et(e,t),e.prototype.schedule=function(t,e){return Rt(e(this,t))},e}(Lt),Ht=Lt.immediate=new Vt,Gt=function(t){var e;function n(){for(;e.length>0;){var t=e.dequeue();!t.isCancelled()&&t.invoke()}}function r(){t.call(this)}return Et(r,t),r.prototype.schedule=function(t,r){var i=new Mt(this,t,r,this.now());if(e)e.enqueue(i);else{(e=new Zt(4)).enqueue(i);var o=I(n)();e=null,o===C&&N(o.e)}return i.disposable},r.prototype.scheduleRequired=function(){return!e},r}(Lt),qt=Lt.currentThread=new Gt,Wt=(v.internals.SchedulePeriodicRecursive=function(){function t(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return t.prototype.start=function(){var t=new Bt;return this._cancel=t,t.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,function(t){return function(e,n){n(0,t._period);var r=I(t._action)(t._state);r===C&&(t._cancel.dispose(),N(r.e)),t._state=r}}(this))),t},t}(),function(){var t,e=b;if(g.setTimeout)t=g.setTimeout,e=g.clearTimeout;else{if(!g.WScript)throw new V;t=function(t,e){g.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}()),Kt=Wt.setTimeout,Yt=Wt.clearTimeout;!function(){var t=1,e={},n=!1;function r(t){if(n)Kt((function(){r(t)}),0);else{var i=e[t];if(i){n=!0;var o=I(i)();zt(t),n=!1,o===C&&N(o.e)}}}zt=function(t){delete e[t]};var o=new RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),a="function"==typeof(a=p&&y&&p.setImmediate)&&!o.test(a)&&a;if(A(a))Ut=function(n){var i=t++;return e[i]=n,a((function(){r(i)})),i};else if(void 0!==i&&"[object process]"==={}.toString.call(i))Ut=function(n){var o=t++;return e[o]=n,i.nextTick((function(){r(o)})),o};else if(function(){if(!g.postMessage||g.importScripts)return!1;var t=!1,e=g.onmessage;return g.onmessage=function(){t=!0},g.postMessage("","*"),g.onmessage=e,t}()){var s="ms.rx.schedule"+Math.random();g.addEventListener("message",(function(t){"string"==typeof t.data&&t.data.substring(0,s.length)===s&&r(t.data.substring(s.length))}),!1),Ut=function(n){var r=t++;return e[r]=n,g.postMessage(s+r,"*"),r}}else if(g.MessageChannel){var c=new g.MessageChannel;c.port1.onmessage=function(t){r(t.data)},Ut=function(n){var r=t++;return e[r]=n,c.port2.postMessage(r),r}}else Ut="document"in g&&"onreadystatechange"in g.document.createElement("script")?function(n){var i=g.document.createElement("script"),o=t++;return e[o]=n,i.onreadystatechange=function(){r(o),i.onreadystatechange=null,i.parentNode.removeChild(i),i=null},g.document.documentElement.appendChild(i),o}:function(n){var i=t++;return e[i]=n,Kt((function(){r(i)}),0),i}}();var Jt=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(At._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function i(t){this._id=t,this.isDisposed=!1}return Et(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,zt(this._id))},i.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Yt(this._id))},e.prototype.schedule=function(t,e){var i=new Bt,o=Ut(n(i,e,this,t));return new Pt(i,new r(o))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var o=new Bt,a=Kt(n(o,r,this,t),e);return new Pt(o,new i(a))},e}(Lt),Qt=Lt.default=Lt.async=new Jt;function Xt(t,e){this.id=t,this.value=e}Xt.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e};var Zt=v.internals.PriorityQueue=function(t){this.items=new Array(t),this.length=0},$t=Zt.prototype;$t.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},$t.percolate=function(t){if(!(t>=this.length||t<0)){var e=t-1>>1;if(!(e<0||e===t)&&this.isHigherPriority(t,e)){var n=this.items[t];this.items[t]=this.items[e],this.items[e]=n,this.percolate(e)}}},$t.heapify=function(t){if(+t||(t=0),!(t>=this.length||t<0)){var e=2*t+1,n=2*t+2,r=t;if(e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t){var i=this.items[t];this.items[t]=this.items[r],this.items[r]=i,this.heapify(r)}}},$t.peek=function(){return this.items[0].value},$t.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=a,this.heapify()},$t.dequeue=function(){var t=this.peek();return this.removeAt(0),t},$t.enqueue=function(t){var e=this.length++;this.items[e]=new Xt(Zt.count++,t),this.percolate(e)},$t.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Zt.count=0;var te,ee=v.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new H},t.prototype._acceptObserver=function(t,e,n){throw new H},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Ft(t)||(t=Ht),new xr((function(n){return t.schedule(e,(function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()}))}))},t}(),ne=function(t){function e(t){this.value=t,this.kind="N"}return Et(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(ee),re=function(t){function e(t){this.error=t,this.kind="E"}return Et(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(ee),ie=function(t){function e(){this.kind="C"}return Et(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(ee),oe=ee.createOnNext=function(t){return new ne(t)},ae=ee.createOnError=function(t){return new re(t)},se=ee.createOnCompleted=function(){return new ie},ce=v.Observer=function(){},ue=ce.create=function(t,e,n){return t||(t=b),e||(e=k),n||(n=b),new he(t,e,n)},le=v.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return Et(e,t),e.prototype.next=G,e.prototype.error=G,e.prototype.completed=G,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(ce),he=v.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return Et(e,t),e.prototype.next=function(t){this._onNext(t)},e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(le),pe=v.Observable=function(){function t(){if(v.config.longStackSupport&&R){var t=this._subscribe,e=I(N)(new Error).e;this.stack=e.stack.substring(e.stack.indexOf("\n")+1),this._subscribe=function(t,e){return function(n){var r=n.onError;return n.onError=function(e){(function(t,e){if(R&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(x)){for(var n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack);var i=n.join("\n"+x+"\n");t.stack=function(t){for(var e=t.split("\n"),n=[],r=0,i=e.length;r<i;r++){var o=e[r];!M(o)&&-1===(a=o).indexOf("(module.js:")&&-1===a.indexOf("(node.js:")&&o&&n.push(o)}var a;return n.join("\n")}(i)}})(e,t),r.call(n,e)},e.call(t,n)}}(this,t)}}return te=t.prototype,t.isObservable=function(t){return t&&A(t.subscribe)},te.subscribe=te.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:ue(t,e,n))},te.subscribeOnNext=function(t,e){return this._subscribe(ue(void 0!==e?function(n){t.call(e,n)}:t))},te.subscribeOnError=function(t,e){return this._subscribe(ue(null,void 0!==e?function(n){t.call(e,n)}:t))},te.subscribeOnCompleted=function(t,e){return this._subscribe(ue(null,null,void 0!==e?function(){t.call(e)}:t))},t}(),fe=v.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new Dt}function n(t,e){var n;if(t.queue.length>0){n=t.queue.shift();var r=I(n)();if(r===C)return t.queue=[],t.hasFaulted=!0,N(r.e);e(t)}else t.isAcquired=!1}return Et(e,t),e.prototype.next=function(t){this.queue.push(function(t,e){return function(){t.onNext(e)}}(this.observer,t))},e.prototype.error=function(t){this.queue.push(function(t,e){return function(){t.onError(e)}}(this.observer,t))},e.prototype.completed=function(){var t;this.queue.push((t=this.observer,function(){t.onCompleted()}))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,n))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(le),de=v.ObservableBase=function(t){function e(t,e){var n,r=e[0],i=e[1],o=I(i.subscribeCore).call(i,r);o!==C||r.fail(C.e)||N(C.e),r.setDisposable((n=o)&&A(n.dispose)?n:A(n)?Ot(n):Ct)}function n(){t.call(this)}return Et(n,t),n.prototype._subscribe=function(t){var n=new Mr(t),r=[n,this];return qt.scheduleRequired()?qt.schedule(r,e):e(0,r),n},n.prototype.subscribeCore=G,n}(pe),ye=v.FlatMapObservable=function(t){function e(e,n,r,i){this.resultSelector=A(r)?r:null,this.selector=J(A(n)?n:function(){return n},i,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},Et(n,le),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map((function(t,r){return this.resultSelector(e,t,n,r)}),this):t},n.prototype.next=function(t){var e=this.i++,n=I(this.selector)(t,e,this.source);if(n===C)return this.o.onError(n.e);w(n)&&(n=cr(n)),(Y(n)||K(n))&&(n=pe.from(n)),this.o.onNext(this._wrapResult(n,t,e))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(de),me=v.internals.Enumerable=function(){};function ge(t){this._s=t,this.isDisposed=!1}ge.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)};var ve=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=I(t.e.next).call(t.e);if(n===C)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();var i=n.value;w(i)&&(i=cr(i));var o=new Bt;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Dt,r={isDisposed:!1,o:t,subscription:e,e:this.sources[q]()},i=qt.scheduleRecursive(r,n);return new xt([e,i,new ge(r)])},Et(r,le),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(de);me.prototype.concat=function(){return new ve(this)};var be=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){if(!t.isDisposed){var n=I(t.e.next).call(t.e);if(n===C)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();var i=n.value;w(i)&&(i=cr(i));var o=new Bt;t.subscription.setDisposable(o),o.setDisposable(i.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Dt,r={isDisposed:!1,e:this.sources[q](),subscription:e,lastError:null,o:t},i=qt.scheduleRecursive(r,n);return new xt([e,i,new ge(r)])},Et(r,le),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(de);me.prototype.catchError=function(){return new be(this)};var _e=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return Et(e,t),e.prototype[q]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?W:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(me),Ee=me.repeat=function(t,e){return new _e(t,e)},Te=function(t){function e(t,e,n){this.s=t,this.fn=e?J(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return Et(e,t),e.prototype[q]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:W},e}(me),Se=me.of=function(t,e,n){return new Te(t,e,n)},ke=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},Et(n,le),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(de);te.toArray=function(){return new ke(this)},pe.create=function(t,e){return new xr(t,e)};var we=function(t){function e(e){this._f=e,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=I(this._f)();return e===C?Ye(e.e).subscribe(t):(w(e)&&(e=cr(e)),e.subscribe(t))},e}(de),Ae=pe.defer=function(t){return new we(t)},Oe=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),Ct}return Et(e,t),e.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===Ht?r(0,t):this.scheduler.schedule(t,r)},e}(de),Ce=new Oe(Ht),Ie=pe.empty=function(t){return Ft(t)||(t=Ht),t===Ht?Ce:new Oe(t)},Ne=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=function(t){var e=t[q];if(!e&&"string"==typeof t)return new Be(t)[q]();if(!e&&t.length!==a)return new Pe(t)[q]();if(!e)throw new TypeError("Object is not iterable");return t[q]()}(Object(this._iterable));return this._scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){var o=I(e.next).call(e);if(o===C)return t.onError(o.e);if(o.done)return t.onCompleted();var a=o.value;if(A(n)&&(a=I(n)(a,r))===C)return t.onError(a.e);t.onNext(a),i(r+1)}}(t,e,this._fn))},e}(de),Re=Math.pow(2,53)-1;function Be(t){this._s=t}function De(t){this._s=t,this._l=t.length,this._i=0}function Pe(t){this._a=t}function xe(t){var e,n;this._a=t,this._l=(n=+t.length,isNaN(n)?0:0!==n&&"number"==typeof(e=n)&&g.isFinite(e)?(n=function(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}(n)*Math.floor(Math.abs(n)))<=0?0:n>Re?Re:n:n),this._i=0}Be.prototype[q]=function(){return new De(this._s)},De.prototype[q]=function(){return this},De.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:W},Pe.prototype[q]=function(){return new xe(this._a)},xe.prototype[q]=function(){return this},xe.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:W};var Me=pe.from=function(t,e,n,r){if(null==t)throw new Error("iterable cannot be null.");if(e&&!A(e))throw new Error("mapFn when provided must be a function");if(e)var i=J(e,n,2);return Ft(r)||(r=qt),new Ne(t,i,r)},Le=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,function(t,e){var n=e.length;return function(r,i){r<n?(t.onNext(e[r]),i(r+1)):t.onCompleted()}}(t,this._args))},e}(de),je=pe.fromArray=function(t,e){return Ft(e)||(e=qt),new Le(t,e)},Fe=new(function(t){function e(){t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return Ct},e}(de)),Ue=pe.never=function(){return Fe};function ze(t,e){return Ft(t)||(t=qt),new Le(e,t)}pe.of=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return new Le(e,qt)},pe.ofWithScheduler=function(t){for(var e=arguments.length,n=new Array(e-1),r=1;r<e;r++)n[r-1]=arguments[r];return new Le(n,t)};var Ve=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){if(r<n.length){var o=n[r];t.onNext([o,e[o]]),i(r+1)}else t.onCompleted()}}(t,this._o,this._keys))},e}(de);pe.pairs=function(t,e){return e||(e=qt),new Ve(t,e)};var He=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,function(t,e,n){return function(r,i){r<e?(n.onNext(t+r),i(r+1)):n.onCompleted()}}(this.start,this.rangeCount,t))},e}(de);pe.range=function(t,e,n){return Ft(n)||(n=qt),new He(t,e,n)};var Ge=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return new qe(t,this).run()},e}(de);function qe(t,e){this.observer=t,this.parent=e}qe.prototype.run=function(){var t=this.observer,e=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,(function(n,r){if((-1===n||n>0)&&(t.onNext(e),n>0&&n--),0===n)return t.onCompleted();r(n)}))},pe.repeat=function(t,e,n){return Ft(n)||(n=qt),new Ge(t,e,n)};var We=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),Ct}return Et(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===Ht?n(0,e):this._scheduler.schedule(e,n)},e}(de),Ke=(pe.return=pe.just=function(t,e){return Ft(e)||(e=Ht),new We(t,e)},function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0];return e[1].onError(n),Ct}return Et(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===Ht?n(0,e):this._scheduler.schedule(e,n)},e}(de)),Ye=pe.throw=function(t,e){return Ft(e)||(e=Ht),new Ke(t,e)},Je=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Bt,n=new Dt;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Qe(t,n,this._fn))),n},e}(de),Qe=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e=I(this._fn)(t);if(e===C)return this._o.onError(e.e);w(e)&&(e=cr(e));var n=new Bt;this._s.setDisposable(n),n.setDisposable(e.subscribe(this._o))},e}(le);te.catch=function(t){return A(t)?new Je(this,t):Xe([this,t])};var Xe=pe.catch=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}return Se(t).catchError()};function Ze(){return!1}function $e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}te.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Array.isArray(e[0])?e[0].unshift(this):e.unshift(this),nn.apply(this,e)};var tn=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){for(var e=this._params.length,n=new Array(e),r={hasValue:St(e,Ze),hasValueAll:!1,isDone:St(e,Ze),values:new Array(e)},i=0;i<e;i++){var o=this._params[i],a=new Bt;n[i]=a,w(o)&&(o=cr(o)),a.setDisposable(o.subscribe(new en(t,i,this._cb,r)))}return new xt(n)},e}(de),en=function(t){function e(e,n,r,i){this._o=e,this._i=n,this._cb=r,this._state=i,t.call(this)}return Et(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(_))){var e=I(this._cb).apply(null,this._state.values);if(e===C)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter((n=this._i,function(t,e){return e!==n})).every(_)&&this._o.onCompleted();var n},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(_)&&this._o.onCompleted()},e}(le),nn=pe.combineLatest=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=A(e[t-1])?e.pop():$e;return Array.isArray(e[0])&&(e=e[0]),new tn(e,r)};te.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),an.apply(null,t)};var rn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(le),on=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();var n=t.sources[t.i];w(n)&&(n=cr(n));var r=new Bt;t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new rn(t,e)))}}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Dt,r=Ot(b),i={o:t,i:0,subscription:e,disposable:r,sources:this._sources},o=Ht.scheduleRecursive(i,n);return new xt([e,r,o])},e}(de),an=pe.concat=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{t=new Array(arguments.length);for(var e=0,n=arguments.length;e<n;e++)t[e]=arguments[e]}return new on(t)};te.concatAll=function(){return this.merge(1)};var sn=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new kt;return e.add(this.source.subscribe(new cn(t,this.maxConcurrent,e))),e},e}(de),cn=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Et(e,t),e.prototype.handleSubscribe=function(t){var e=new Bt;this.g.add(e),w(t)&&(t=cr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},Et(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(le);te.merge=function(t){return"number"!=typeof t?un(this,t):new sn(this,t)};var un=pe.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Ft(arguments[0]))for(t=arguments[0],e=1;e<r;e++)n.push(arguments[e]);else for(t=Ht,e=0;e<r;e++)n.push(arguments[e]);else for(t=Ht,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),ze(t,n).mergeAll()},ln=v.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)};ln.prototype=Object.create(Error.prototype),ln.prototype.name="CompositeError";var hn=function(t){function e(e){this.source=e,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new kt,n=new Bt,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new pn(e,r))),e},e}(de),pn=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new ln(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return Et(e,t),e.prototype.next=function(t){var e=new Bt;this._group.add(e),w(t)&&(t=cr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},Et(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(le);pe.mergeDelayError=function(){var t;if(Array.isArray(arguments[0]))t=arguments[0];else{var e=arguments.length;t=new Array(e);for(var n=0;n<e;n++)t[n]=arguments[n]}var r=ze(null,t);return new hn(r)};var fn=function(t){function e(e){this.source=e,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new kt,n=new Bt;return e.add(n),n.setDisposable(this.source.subscribe(new dn(t,e))),e},e}(de),dn=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return Et(e,t),e.prototype.next=function(t){var e=new Bt;this.g.add(e),w(t)&&(t=cr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},Et(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(le);te.mergeAll=function(){return new fn(this)};var yn=function(t){function e(e,n){this._s=e,this._o=w(n)?cr(n):n,this._open=!1,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Bt;e.setDisposable(this._s.subscribe(new mn(t,this))),w(this._o)&&(this._o=cr(this._o));var n=new Bt;return n.setDisposable(this._o.subscribe(new gn(t,this,n))),new Pt(e,n)},e}(de),mn=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(le),gn=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return Et(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(le);te.skipUntil=function(t){return new yn(this,t)};var vn=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,le.call(this)}function r(t,e){this.parent=t,this.id=e,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Dt,r=this.source.subscribe(new n(t,e));return new Pt(r,e)},Et(n,le),n.prototype.next=function(t){var e=new Bt,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),w(t)&&(t=cr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},Et(r,le),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(de);te.switch=te.switchLatest=function(){return new vn(this)};var bn=function(t){function e(e,n){this.source=e,this.other=w(n)?cr(n):n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return new Pt(this.source.subscribe(t),this.other.subscribe(new _n(t)))},e}(de),_n=function(t){function e(e){this._o=e,t.call(this)}return Et(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=b,e}(le);function Ze(){return!1}function $e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}te.takeUntil=function(t){return new bn(this,t)};var En=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){for(var e=this._ss.length,n={hasValue:St(e,Ze),hasValueAll:!1,values:new Array(e)},r=this._ss.length,i=new Array(r+1),o=0;o<r;o++){var a=this._ss[o],s=new Bt;w(a)&&(a=cr(a)),s.setDisposable(a.subscribe(new Tn(t,o,n))),i[o]=s}var c=new Bt;return c.setDisposable(this._s.subscribe(new Sn(t,this._cb,n))),i[r]=c,new xt(i)},e}(de),Tn=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(_)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=b,e}(le),Sn=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return Et(e,t),e.prototype.next=function(t){var e=[t].concat(this._state.values);if(this._state.hasValueAll){var n=I(this._cb).apply(null,e);if(n===C)return this._o.onError(n.e);this._o.onNext(n)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(le);function Ze(){return!1}function kn(){return[]}te.withLatestFrom=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=A(e[t-1])?e.pop():$e;return Array.isArray(e[0])&&(e=e[0]),new En(this,e,r)};var wn=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){for(var e=this._s.length,n=new Array(e),r=St(e,Ze),i=St(e,kn),o=0;o<e;o++){var a=this._s[o],s=new Bt;n[o]=s,w(a)&&(a=cr(a)),s.setDisposable(a.subscribe(new An(t,o,this,i,r)))}return new xt(n)},e}(de),An=function(t){function e(e,n,r,i,o){this._o=e,this._i=n,this._p=r,this._q=i,this._d=o,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}return Et(e,t),e.prototype.next=function(t){if(this._q[this._i].push(t),this._q.every(n)){var e=this._q.map(r),i=I(this._p._cb).apply(null,e);if(i===C)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter((o=this._i,function(t,e){return e!==o})).every(_)&&this._o.onCompleted();var o},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(_)&&this._o.onCompleted()},e}(le);function Ze(){return!1}function kn(){return[]}function $e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}te.zip=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=A(e[t-1])?e.pop():$e;Array.isArray(e[0])&&(e=e[0]);var i=this;return e.unshift(i),new wn(e,r)},pe.zip=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.isArray(e[0])&&(e=A(e[1])?e[0].concat(e[1]):e[0]);var r=e.shift();return r.zip.apply(r,e)};var On=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){for(var e=this.sources,n=e.length,r=new Array(n),i={q:St(n,kn),done:St(n,Ze),cb:this._cb,o:t},o=0;o<n;o++)!function(t){var n=e[t],o=new Bt;(Y(n)||K(n))&&(n=Me(n)),r[t]=o,o.setDisposable(n.subscribe(new Cn(i,t)))}(o);return new xt(r)},e}(de),Cn=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}return Et(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=I(this._s.cb).apply(null,e);if(i===C)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter((o=this._i,function(t,e){return e!==o})).every(_)&&this._s.o.onCompleted();var o},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(_)&&this._s.o.onCompleted()},e}(le);te.zipIterable=function(){if(0===arguments.length)throw new Error("invalid arguments");for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=A(e[t-1])?e.pop():$e,i=this;return e.unshift(i),new On(e,r)},te.asObservable=function(){return new xr((t=this,function(e){return t.subscribe(e)}),this);var t};var In=function(t){function e(e){this.source=e,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Nn(t))},e}(de),Nn=function(t){function e(e){this._o=e,t.call(this)}return Et(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(le);te.dematerialize=function(){return new In(this)};var Rn=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Bn(t,this.keyFn,this.comparer))},e}(de),Bn=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return Et(e,t),e.prototype.next=function(t){var e,n=t;return A(this.keyFn)&&(n=I(this.keyFn)(t))===C?this.o.onError(n.e):this.hasCurrentKey&&(e=I(this.comparer)(this.currentKey,n))===C?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(le);te.distinctUntilChanged=function(t,e){return e||(e=T),new Rn(this,t,e)};var Dn=function(t){function e(e,n,r,i){this.source=e,this._oN=n,this._oE=r,this._oC=i,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||A(e._oN)?ue(e._oN||b,e._oE||b,e._oC||b):e._oN,this.isStopped=!1,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},Et(n,le),n.prototype.next=function(t){var e=I(this.t.onNext).call(this.t,t);e===C&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=I(this.t.onError).call(this.t,t);if(e===C)return this.o.onError(e.e);this.o.onError(t)},n.prototype.completed=function(){var t=I(this.t.onCompleted).call(this.t);if(t===C)return this.o.onError(t.e);this.o.onCompleted()},e}(de);te.do=te.tap=te.doAction=function(t,e,n){return new Dn(this,t,e,n)},te.doOnNext=te.tapOnNext=function(t,e){return this.tap(void 0!==e?function(n){t.call(e,n)}:t)},te.doOnError=te.tapOnError=function(t,e){return this.tap(b,void 0!==e?function(n){t.call(e,n)}:t)},te.doOnCompleted=te.tapOnCompleted=function(t,e){return this.tap(b,null,void 0!==e?function(){t.call(e)}:t)};var Pn=function(t){function e(e,n,r){this.source=e,this._fn=J(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return Et(e,t),e.prototype.subscribeCore=function(t){var e=I(this.source.subscribe).call(this.source,t);return e===C&&(this._fn(),N(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=I(this._s.dispose).call(this._s);this._fn(),t===C&&N(t.e)}},e}(de);te.finally=function(t,e){return new Pn(this,t,e)};var xn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},n.prototype.onNext=b,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(de);te.ignoreElements=function(){return new xn(this)};var Mn=function(t){function e(e,n){this.source=e,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ln(t))},e}(de),Ln=function(t){function e(e){this._o=e,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._o.onNext(oe(t))},e.prototype.error=function(t){this._o.onNext(ae(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(se()),this._o.onCompleted()},e}(le);function jn(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}te.materialize=function(){return new Mn(this)},te.repeat=function(t){return Ee(this,t).concat()},te.retry=function(t){return Ee(this,t).catchError()};var Fn=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Et(n,t),n.prototype.subscribeCore=function(t){var n=new jr,r=new jr,i=this._notifier(n).subscribe(r),o=this.source["@@iterator"](),a={isDisposed:!1},s=new Dt,c=qt.scheduleRecursive(null,(function(e,i){if(!a.isDisposed){var c=o.next();if(c.done)t.onCompleted();else{var u=c.value;w(u)&&(u=cr(u));var l=new Bt,h=new Bt;s.setDisposable(new Pt(h,l)),l.setDisposable(u.subscribe((function(e){t.onNext(e)}),(function(e){h.setDisposable(r.subscribe(i,(function(e){t.onError(e)}),(function(){t.onCompleted()}))),n.onNext(e),l.dispose()}),(function(){t.onCompleted()})))}}}));return new xt([i,s,c,e(a)])},n}(de);function jn(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}te.retryWhen=function(t){return new Fn(jn(this),t)};var Un=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return Et(n,t),n.prototype.subscribeCore=function(t){var n=new jr,r=new jr,i=this._notifier(n).subscribe(r),o=this.source["@@iterator"](),a={isDisposed:!1},s=new Dt,c=qt.scheduleRecursive(null,(function(e,i){if(!a.isDisposed){var c=o.next();if(c.done)t.onCompleted();else{var u=c.value;w(u)&&(u=cr(u));var l=new Bt,h=new Bt;s.setDisposable(new Pt(h,l)),l.setDisposable(u.subscribe((function(e){t.onNext(e)}),(function(e){t.onError(e)}),(function(){h.setDisposable(r.subscribe(i,(function(e){t.onError(e)}),(function(){t.onCompleted()}))),n.onNext(null),l.dispose()})))}}}));return new xt([i,s,c,e(a)])},n}(de);te.repeatWhen=function(t){return new Un(jn(this),t)};var zn=function(t){function e(e,n,r,i){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=i,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Vn(t,this))},e}(de),Vn=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,this._hv=!1,this._i=0,t.call(this)}return Et(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=I(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?I(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===C)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(le);te.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new zn(this,n,e,t)};var Hn=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Gn(t,this._c))},e}(de),Gn=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Et(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(le);te.skipLast=function(t){if(t<0)throw new z;return new Hn(this,t)},te.startWith=function(){var t,e=0;arguments.length&&Ft(arguments[0])?(t=arguments[0],e=1):t=Ht;for(var n=[],r=e,i=arguments.length;r<i;r++)n.push(arguments[r]);return Se([je(n,t),this]).concat()};var qn=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return Et(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(le);te.takeLast=function(t){if(t<0)throw new z;var e=this;return new xr((function(n){return e.subscribe(new qn(n,t))}),e)},te.flatMapConcat=te.concatMap=function(t,e,n){return new ye(this,t,e,n).merge(1)};var Wn=function(t){function e(e,n,r){this.source=e,this.selector=J(n,r,3),t.call(this)}function n(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,le.call(this)}return Et(e,t),e.prototype.internalMap=function(t,n){return new e(this.source,function(t,e){return function(n,r,i){return t.call(this,e.selector(n,r,i),r,i)}}(t,this),n)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this))},Et(n,le),n.prototype.next=function(t){var e=I(this.selector)(t,this.i++,this.source);if(e===C)return this.o.onError(e.e);this.o.onNext(e)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(de);function Kn(t,e){return function(n){for(var r=n,i=0;i<e;i++){var o=r[t[i]];if(void 0===o)return a;r=o}return r}}te.map=te.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof Wn?this.internalMap(n,e):new Wn(this,n,e)},te.pluck=function(){var t=arguments.length,e=new Array(t);if(0===t)throw new Error("List of properties cannot be empty.");for(var n=0;n<t;n++)e[n]=arguments[n];return this.map(Kn(e,t))},te.flatMap=te.selectMany=function(t,e,n){return new ye(this,t,e,n).mergeAll()},v.Observable.prototype.flatMapLatest=function(t,e,n){return new ye(this,t,e,n).switchLatest()};var Yn=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Et(n,le),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(de);te.skip=function(t){if(t<0)throw new z;return new Yn(this,t)};var Jn=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Qn(t,this))},e}(de),Qn=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return Et(e,t),e.prototype.next=function(t){if(!this._r){var e=I(this._p._fn)(t,this._i++,this._p);if(e===C)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(le);te.skipWhile=function(t,e){var n=J(t,e,3);return new Jn(this,n)};var Xn=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},Et(n,le),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(de);te.take=function(t,e){if(t<0)throw new z;return 0===t?Ie(e):new Xn(this,t)};var Zn=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new $n(t,this))},e}(de),$n=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return Et(e,t),e.prototype.next=function(t){if(this._r&&(this._r=I(this._p._fn)(t,this._i++,this._p),this._r===C))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(le);te.takeWhile=function(t,e){var n=J(t,e,3);return new Zn(this,n)};var tr=function(t){function e(e,n,r){this.source=e,this.predicate=J(n,r,3),t.call(this)}function n(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,le.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.predicate,this))},e.prototype.internalFilter=function(t,n){return new e(this.source,function(t,e){return function(n,r,i){return e.predicate(n,r,i)&&t.call(this,n,r,i)}}(t,this),n)},Et(n,le),n.prototype.next=function(t){var e=I(this.predicate)(t,this.i++,this.source);if(e===C)return this.o.onError(e.e);e&&this.o.onNext(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(de);function er(t,e,n,r){var i=new Fr;return r.push(function(t,e,n){return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];if(A(n)){if((i=I(n).apply(e,i))===C)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}(i,e,n)),t.apply(e,r),i.asObservable()}function nr(t,e,n,r){var i=new Fr;return r.push(function(t,e,n){return function(){var r=arguments[0];if(r)return t.onError(r);for(var i=arguments.length,o=[],a=1;a<i;a++)o[a-1]=arguments[a];if(A(n)){if((o=I(n).apply(e,o))===C)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}(i,e,n)),t.apply(e,r),i.asObservable()}function rr(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}te.filter=te.where=function(t,e){return this instanceof tr?this.internalFilter(t,e):new tr(this,t,e)},pe.fromCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return er(t,e,n,i)}},pe.fromNodeCallback=function(t,e,n){return function(){void 0===e&&(e=this);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return nr(t,e,n,i)}},rr.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},v.config.useNativeEvents=!1;var ir=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return function t(e,n,r){var i=new kt,o=Object.prototype.toString.call(e);if(function(t){return g.StaticNodeList?t instanceof g.StaticNodeList||t instanceof g.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}(e)||"[object HTMLCollection]"===o)for(var a=0,s=e.length;a<s;a++)i.add(t(e.item(a),n,r));else e&&i.add(new rr(e,n,r));return i}(this._el,this._n,function(t,e){return function(){var n=arguments[0];if(A(e)&&(n=I(e).apply(null,arguments))===C)return t.onError(n.e);t.onNext(n)}}(t,this._fn))},e}(de);pe.fromEvent=function(t,e,n){return t.addListener?ar((function(n){t.addListener(e,n)}),(function(n){t.removeListener(e,n)}),n):v.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new ir(t,e,n).publish().refCount():ar((function(n){t.on(e,n)}),(function(n){t.off(e,n)}),n)};var or=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return Et(e,t),e.prototype.subscribeCore=function(t){var e=function(t,e){return function(){var n=arguments[0];if(A(e)&&(n=I(e).apply(null,arguments))===C)return t.onError(n.e);t.onNext(n)}}(t,this._fn),r=this._add(e);return new n(this._del,e,r)},n.prototype.dispose=function(){this.isDisposed||(A(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(de),ar=pe.fromEventPattern=function(t,e,n){return new or(t,e,n).publish().refCount()},sr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Bt,i=this;return this._p.then((function(r){e.setDisposable(i._s.schedule([t,r],n))}),(function(n){e.setDisposable(i._s.schedule([t,n],r))})),e},e}(de),cr=pe.fromPromise=function(t,e){return e||(e=Qt),new sr(t,e)};te.toPromise=function(t){if(t||(t=v.config.Promise),!t)throw new V("Promise type not provided nor in Rx.config.Promise");var e=this;return new t((function(t,n){var r;e.subscribe((function(t){r=t}),n,(function(){t(r)}))}))},pe.startAsync=function(t){var e=I(t)();return e===C?Ye(e.e):cr(e)};var ur=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new Pt(this._fn2(e).subscribe(t),e.connect())},e}(de);te.multicast=function(t,e){return A(t)?new ur(this,t,e):new hr(this,t)},te.publish=function(t){return t&&A(t)?this.multicast((function(){return new jr}),t):this.multicast(new jr)},te.share=function(){return this.publish().refCount()},te.publishLast=function(t){return t&&A(t)?this.multicast((function(){return new Fr}),t):this.multicast(new Fr)},te.publishValue=function(t,e){return 2===arguments.length?this.multicast((function(){return new zr(e)}),t):this.multicast(new zr(t))},te.shareValue=function(t){return this.publishValue(t).refCount()},te.replay=function(t,e,n,r){return t&&A(t)?this.multicast((function(){return new Vr(e,n,r)}),t):this.multicast(new Vr(e,n,r))},te.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()};var lr=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return Et(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},e}(de),hr=v.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return Et(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new lr(this)},e}(pe),pr=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return Et(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(de);function fr(t,e,n){return new xr((function(r){var i=t,o=jt(e);return n.scheduleRecursiveFuture(0,i,(function(t,e){if(o>0){var a=n.now();(i=new Date(i.getTime()+o)).getTime()<=a&&(i=new Date(a+o))}r.onNext(t),e(t+1,new Date(i))}))}))}function dr(t,e,n){return t===e?new xr((function(t){return n.schedulePeriodic(0,e,(function(e){return t.onNext(e),e+1}))})):Ae((function(){return fr(new Date(n.now()+t),e,n)}))}var yr=pe.interval=function(t,e){return dr(t,t,Ft(e)?e:Qt)};function mr(t,e,n){return new xr((function(r){var i,o=!1,a=new Dt,s=null,c=[],u=!1;return i=t.materialize().timestamp(n).subscribe((function(t){var i,l;"E"===t.value.kind?((c=[]).push(t),s=t.value.error,l=!u):(c.push({value:t.value,timestamp:t.timestamp+e}),l=!o,o=!0),l&&(null!==s?r.onError(s):(i=new Bt,a.setDisposable(i),i.setDisposable(n.scheduleRecursiveFuture(null,e,(function(t,e){var i,a,l,h;if(null===s){u=!0;do{l=null,c.length>0&&c[0].timestamp-n.now()<=0&&(l=c.shift().value),null!==l&&l.accept(r)}while(null!==l);h=!1,a=0,c.length>0?(h=!0,a=Math.max(0,c[0].timestamp-n.now())):o=!1,u=!1,null!==(i=s)?r.onError(i):h&&e(null,a)}})))))})),new Pt(i,a)}),t)}function gr(t,e,n){return Ae((function(){return mr(t,e-n.now(),n)}))}function vr(t,e,n){var r,i;return A(e)?i=e:(r=e,i=n),new xr((function(e){var n=new kt,o=!1,a=new Dt;function s(){a.setDisposable(t.subscribe((function(t){var r=I(i)(t);if(r===C)return e.onError(r.e);var o=new Bt;n.add(o),o.setDisposable(r.subscribe((function(){e.onNext(t),n.remove(o),c()}),(function(t){e.onError(t)}),(function(){e.onNext(t),n.remove(o),c()})))}),(function(t){e.onError(t)}),(function(){o=!0,a.dispose(),c()})))}function c(){o&&0===n.length&&e.onCompleted()}return r?a.setDisposable(r.subscribe(s,(function(t){e.onError(t)}),s)):s(),new Pt(a,n)}),t)}pe.timer=function(t,e,n){var r;return Ft(n)||(n=Qt),null!=e&&"number"==typeof e?r=e:Ft(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===a?function(t,e){return new pr(t,e)}(t,n):t instanceof Date&&r!==a?fr(t,e,n):dr(t,r,n)},te.delay=function(){var t=arguments[0];if("number"==typeof t||t instanceof Date){var e=t,n=arguments[1];return Ft(n)||(n=Qt),e instanceof Date?gr(this,e,n):mr(this,e,n)}if(pe.isObservable(t)||A(t))return vr(this,t,arguments[1]);throw new Error("Invalid arguments")};var br=function(t){function e(e,n,r){Ft(r)||(r=Qt),this.source=e,this._dt=n,this._s=r,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e=new Dt;return new Pt(this.source.subscribe(new _r(t,this._dt,this._s,e)),e)},e}(de),_r=function(t){function e(e,n,r,i){this._o=e,this._d=n,this._scheduler=r,this._c=i,this._v=null,this._hv=!1,this._id=0,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new Bt;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,(function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1})))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(le);function Er(t,e){return new xr((function(n){var r,i=!1,o=new Dt,a=0,s=t.subscribe((function(t){var s=I(e)(t);if(s===C)return n.onError(s.e);w(s)&&(s=cr(s)),i=!0,r=t;var c=++a,u=new Bt;o.setDisposable(u),u.setDisposable(s.subscribe((function(){i&&a===c&&n.onNext(r),i=!1,u.dispose()}),(function(t){n.onError(t)}),(function(){i&&a===c&&n.onNext(r),i=!1,u.dispose()})))}),(function(t){o.dispose(),n.onError(t),i=!1,a++}),(function(){o.dispose(),i&&n.onNext(r),n.onCompleted(),i=!1,a++}));return new Pt(s,o)}),t)}te.debounce=function(){if(A(arguments[0]))return Er(this,arguments[0]);if("number"==typeof arguments[0])return new br(this,arguments[0],arguments[1]);throw new Error("Invalid arguments")};var Tr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Sr(t,this._s))},e}(de),Sr=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(le);te.timestamp=function(t){return Ft(t)||(t=Qt),new Tr(this,t)};var kr=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return Et(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new Bt};return e.sourceSubscription.setDisposable(this.source.subscribe(new Ar(e))),new Pt(e.sourceSubscription,this._sampler.subscribe(new wr(e)))},e}(de),wr=function(t){function e(e){this._s=e,t.call(this)}return Et(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(le),Ar=function(t){function e(e){this._s=e,t.call(this)}return Et(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(le);te.sample=function(t,e){return Ft(e)||(e=Qt),new kr(this,"number"==typeof t?yr(t,e):t)};var Or=v.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)};function Cr(t,e,n,r){return A(e)&&(r=n,n=e,e=Ue()),pe.isObservable(r)||(r=Ye(new Or)),new xr((function(i){var o=new Dt,a=new Dt,s=new Bt;o.setDisposable(s);var c=0,u=!1;function l(t){var e=c,n=new Bt;function s(){return u=e===c}a.setDisposable(n),n.setDisposable(t.subscribe((function(){s()&&o.setDisposable(r.subscribe(i)),n.dispose()}),(function(t){s()&&i.onError(t)}),(function(){s()&&o.setDisposable(r.subscribe(i))})))}function h(){var t=!u;return t&&c++,t}return l(e),s.setDisposable(t.subscribe((function(t){if(h()){i.onNext(t);var e=I(n)(t);if(e===C)return i.onError(e.e);l(w(e)?cr(e):e)}}),(function(t){h()&&i.onError(t)}),(function(){h()&&i.onCompleted()}))),new Pt(o,a)}),t)}function Ir(t,e,n,r){return Ft(n)&&(r=n,n=Ye(new Or)),n instanceof Error&&(n=Ye(n)),Ft(r)||(r=Qt),pe.isObservable(n)||(n=Ye(new Or)),new xr((function(i){var o=0,a=new Bt,s=new Dt,c=!1,u=new Dt;function l(){var t=o;u.setDisposable(r.scheduleFuture(null,e,(function(){(c=o===t)&&(w(n)&&(n=cr(n)),s.setDisposable(n.subscribe(i)))})))}return s.setDisposable(a),l(),a.setDisposable(t.subscribe((function(t){c||(o++,i.onNext(t),l())}),(function(t){c||(o++,i.onError(t))}),(function(){c||(o++,i.onCompleted())}))),new Pt(s,u)}),t)}Or.prototype=Object.create(Error.prototype),te.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return Ir(this,t,arguments[1],arguments[2]);if(pe.isObservable(t)||A(t))return Cr(this,t,arguments[1],arguments[2]);throw new Error("Invalid arguments")},te.throttle=function(t,e){Ft(e)||(e=Qt);var n=+t||0;if(n<=0)throw new RangeError("windowDuration cannot be less or equal zero.");var r=this;return new xr((function(t){var i=0;return r.subscribe((function(r){var o=e.now();(0===i||o-i>=n)&&(i=o,t.onNext(r))}),(function(e){t.onError(e)}),(function(){t.onCompleted()}))}),r)};var Nr=function(t){function e(e,n){this.source=e,this.controller=new jr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Et(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=Ct,i=this.pauser.distinctUntilChanged().subscribe((function(t){t?r=e.connect():(r.dispose(),r=Ct)}));return new xt([n,r,i])},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(pe);te.pausable=function(t){return new Nr(this,t)};var Rr=function(t){function e(e,n){this.source=e,this.controller=new jr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return Et(e,t),e.prototype._subscribe=function(t){var e,n,r,i,o=[];function s(){for(;o.length>0;)t.onNext(o.shift())}return(n=this.source,r=this.pauser.startWith(!1).distinctUntilChanged(),i=function(t,e){return{data:t,shouldFire:e}},new xr((function(t){var e,o=[!1,!1],a=!1,s=!1,c=new Array(2);function u(n,r){if(c[r]=n,o[r]=!0,a||(a=o.every(_))){if(e)return t.onError(e);var u=I(i).apply(null,c);if(u===C)return t.onError(u.e);t.onNext(u)}s&&c[1]&&t.onCompleted()}return new Pt(n.subscribe((function(t){u(t,0)}),(function(n){c[1]?t.onError(n):e=n}),(function(){s=!0,c[1]&&t.onCompleted()})),r.subscribe((function(t){u(t,1)}),(function(e){t.onError(e)}),(function(){s=!0,u(!0,1)})))}),n)).subscribe((function(n){e!==a&&n.shouldFire!==e?(e=n.shouldFire,n.shouldFire&&s()):(e=n.shouldFire,n.shouldFire?t.onNext(n.data):o.push(n.data))}),(function(e){s(),t.onError(e)}),(function(){s(),t.onCompleted()}))},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(pe);te.pausableBuffered=function(t){return new Rr(this,t)};var Br=function(t){function e(e,n,r){t.call(this),this.subject=new Dr(n,r),this.source=e.multicast(this.subject).refCount()}return Et(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(pe),Dr=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new jr,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||qt}return Et(e,t),Tt(e.prototype,ce,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(ee.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(ee.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(ee.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,(function(t,n){var r=e._processRequest(n);if(!e.hasCompleted&&!e.hasFailed&&r>0)return e.requestedCount=r,Ot((function(){e.requestedCount=0}))})),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(pe);te.controlled=function(t,e){return t&&Ft(t)&&(e=t,t=!0),null==t&&(t=!0),new Br(this,t,e)},te.pipe=function(t){var e=this.pausableBuffered();function n(){e.resume()}return t.addListener("drain",n),e.subscribe((function(n){!t.write(String(n))&&e.pause()}),(function(e){t.emit("error",e)}),(function(){!t._isStdio&&t.end(),t.removeListener("drain",n)})),e.resume(),t};var Pr=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return Et(e,t),e.prototype.next=function(t){var e=I(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===C&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(le);te.transduce=function(t){var e=this;return new xr((function(n){var r=t(function(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}(n));return e.subscribe(new Pr(n,r))}),e)};var xr=v.AnonymousObservable=function(t){function e(t,e){var n,r=e[0],i=e[1],o=I(i.__subscribe).call(i,r);o!==C||r.fail(C.e)||N(C.e),r.setDisposable((n=o)&&A(n.dispose)?n:A(n)?Ot(n):Ct)}function n(e,n){this.source=n,this.__subscribe=e,t.call(this)}return Et(n,t),n.prototype._subscribe=function(t){var n=new Mr(t),r=[n,this];return qt.scheduleRequired()?qt.schedule(r,e):e(0,r),n},n}(pe),Mr=function(t){function e(e){t.call(this),this.observer=e,this.m=new Bt}Et(e,t);var n=e.prototype;return n.next=function(t){var e=I(this.observer.onNext).call(this.observer,t);e===C&&(this.dispose(),N(e.e))},n.error=function(t){var e=I(this.observer.onError).call(this.observer,t);this.dispose(),e===C&&N(e.e)},n.completed=function(){var t=I(this.observer.onCompleted).call(this.observer);this.dispose(),t===C&&N(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(le),Lr=function(t,e){this._s=t,this._o=e};Lr.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}};var jr=v.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return Et(e,t),Tt(e.prototype,ce.prototype,{_subscribe:function(t){return Nt(this),this.isStopped?this.hasError?(t.onError(this.error),Ct):(t.onCompleted(),Ct):(this.observers.push(t),new Lr(this,t))},hasObservers:function(){return Nt(this),this.observers.length>0},onCompleted:function(){if(Nt(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=O(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Nt(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=O(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Nt(this),!this.isStopped)for(var e=0,n=O(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new Ur(t,e)},e}(pe),Fr=v.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return Et(e,t),Tt(e.prototype,ce.prototype,{_subscribe:function(t){return Nt(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),Ct):(this.observers.push(t),new Lr(this,t))},hasObservers:function(){return Nt(this),this.observers.length>0},onCompleted:function(){var t;if(Nt(this),!this.isStopped){this.isStopped=!0;var e=O(this.observers),n=e.length;if(this.hasValue)for(t=0;t<n;t++){var r=e[t];r.onNext(this.value),r.onCompleted()}else for(t=0;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Nt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=O(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){Nt(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(pe),Ur=v.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return Et(e,t),Tt(e.prototype,ce.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(pe),zr=v.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return Et(e,t),Tt(e.prototype,ce.prototype,{_subscribe:function(t){return Nt(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),Ct):(this.observers.push(t),t.onNext(this.value),new Lr(this,t))},getValue:function(){return Nt(this),this.hasError&&N(this.error),this.value},hasObservers:function(){return Nt(this),this.observers.length>0},onCompleted:function(){if(Nt(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=O(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(Nt(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=O(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(Nt(this),!this.isStopped){this.value=t;for(var e=0,n=O(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(pe),Vr=v.ReplaySubject=function(t){var e=Math.pow(2,53)-1;function n(n,r,i){this.bufferSize=null==n?e:n,this.windowSize=null==r?e:r,this.scheduler=i||qt,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}return Et(n,t),Tt(n.prototype,ce.prototype,{_subscribe:function(t){Nt(this);var e,n,r=new fe(this.scheduler,t),i=(e=this,n=r,Ot((function(){n.dispose(),!e.isDisposed&&e.observers.splice(e.observers.indexOf(n),1)})));this._trim(this.scheduler.now()),this.observers.push(r);for(var o=0,a=this.q.length;o<a;o++)r.onNext(this.q[o].value);return this.hasError?r.onError(this.error):this.isStopped&&r.onCompleted(),r.ensureActive(),i},hasObservers:function(){return Nt(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){if(Nt(this),!this.isStopped){var e=this.scheduler.now();this.q.push({interval:e,value:t}),this._trim(e);for(var n=0,r=O(this.observers),i=r.length;n<i;n++){var o=r[n];o.onNext(t),o.ensureActive()}}},onError:function(t){if(Nt(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;var e=this.scheduler.now();this._trim(e);for(var n=0,r=O(this.observers),i=r.length;n<i;n++){var o=r[n];o.onError(t),o.ensureActive()}this.observers.length=0}},onCompleted:function(){if(Nt(this),!this.isStopped){this.isStopped=!0;var t=this.scheduler.now();this._trim(t);for(var e=0,n=O(this.observers),r=n.length;e<r;e++){var i=n[e];i.onCompleted(),i.ensureActive()}this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(pe);v.Pauser=function(t){function e(){t.call(this)}return Et(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(jr),g.Rx=v,(o=function(){return v}.call(e,n,e,t))===a||(t.exports=o);var Hr=L()}).call(this)}).call(e,n(134)(t),n(133),n(131))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){t.exports=n(31)}])},t.exports=r()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bollingerBandsArray=void 0;var r,i=n(36),o=n(77),a=(r=n(101))&&r.__esModule?r:{default:r},s=function(t,e){var n=e.periods,r=void 0===n?20:n,i=e.field,s=e.stdDevUp,c=void 0===s?2:s,u=e.stdDevDown,l=void 0===u?2:u,h=e.pipSize,p=void 0===h?2:h,f=(0,o.takeLast)(t,r,i),d=(0,a.default)(f,{periods:r}),y=(0,o.stddev)(f),m=d+y*c,g=d-y*l;return[+d.toFixed(p),+m.toFixed(p),+g.toFixed(p)]};e.bollingerBandsArray=function(t,e){var n=e.periods;return(0,i.sequence)(t.length-n+1).map((function(r,i){return s(t.slice(i,i+n),e)}))},e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.relativeStrengthIndexArray=void 0;var r=n(36),i=n(77),o=function(t,e){return e>t?e-t:0},a=function(t,e){return e<t?t-e:0},s=function(t,e,n){var r=void 0;return t.reduce((function(t,n,i){1===i&&(r=t);var o=e(r,n);return r=n,o+(1===i?0:t)}))/n},c=function(t,e,n,r){var i=void 0;return 1===t.length?r:t.reduce((function(t,o,a){1===a&&(i=t);var s=e(i,o);return i=o,((1===a?r:t)*(n-1)+s)/n}))},u=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=e.periods,u=e.field;if(t.length<r)throw new Error("Periods longer than data length");if(t.length===r)return 0;var l=(0,i.takeField)(t.slice(0,r+1),u),h=void 0,p=void 0,f=void 0;n&&"gain"in n?(h=(0,i.takeField)(t.slice(-2),u),p=n.gain,f=n.loss):(h=(0,i.takeField)(t.slice(r,t.length),u),p=s(l,o,r),f=s(l,a,r));var d=c(h,o,r,p),y=c(h,a,r,f);if(n&&(n.gain=d,n.loss=y),0===d)return 0;if(0===y)return 100;var m=d/y;return 100-100/(1+m)};e.relativeStrengthIndexArray=function(t,e){var n=e.periods,i=e.pipSize,o=void 0===i?2:i,a={};return(0,r.sequence)(t.length-n).map((function(r,i){return+u(t.slice(0,i+n+1),e,a).toFixed(o)}))},e.default=u},function(t,e,n){"use strict";(function(t,r){var i,o=n(208);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==t?t:r;var a=Object(o.a)(i);e.a=a}).call(this,n(30),n(416)(t))},function(t,e,n){t.exports=!n(23)&&!n(24)((function(){return 7!=Object.defineProperty(n(108)("div"),"a",{get:function(){return 7}}).a}))},function(t,e,n){var r=n(81),i=n(57);t.exports=function(t){return function(e,n){var o,a,s=String(i(e)),c=r(n),u=s.length;return c<0||c>=u?t?"":void 0:(o=s.charCodeAt(c))<55296||o>56319||c+1===u||(a=s.charCodeAt(c+1))<56320||a>57343?t?s.charAt(c):o:t?s.slice(c,c+2):a-56320+(o-55296<<10)+65536}}},function(t,e,n){var r=n(42),i=n(45),o=n(152)(!1),a=n(111)("IE_PROTO");t.exports=function(t,e){var n,s=i(t),c=0,u=[];for(n in s)n!=a&&r(s,n)&&u.push(n);for(;e.length>c;)r(s,n=e[c++])&&(~o(u,n)||u.push(n));return u}},function(t,e,n){var r=n(45),i=n(46),o=n(256);t.exports=function(t){return function(e,n,a){var s,c=r(e),u=i(c.length),l=o(a,u);if(t&&n!=n){for(;u>l;)if((s=c[l++])!=s)return!0}else for(;u>l;l++)if((t||l in c)&&c[l]===n)return t||l||0;return!t&&-1}}},function(t,e,n){var r=n(16).document;t.exports=r&&r.documentElement},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(19);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(67),i=n(15)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){var r=n(78),i=n(15)("iterator"),o=n(67);t.exports=n(37).getIteratorMethod=function(t){if(null!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r,i,o,a=n(44),s=n(258),c=n(153),u=n(108),l=n(16),h=l.process,p=l.setImmediate,f=l.clearImmediate,d=l.MessageChannel,y=l.Dispatch,m=0,g={},v=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){v.call(t.data)};p&&f||(p=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++m]=function(){s("function"==typeof t?t:Function(t),e)},r(m),m},f=function(t){delete g[t]},"process"==n(51)(h)?r=function(t){h.nextTick(a(v,t,1))}:y&&y.now?r=function(t){y.now(a(v,t,1))}:d?(o=(i=new d).port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(r=function(t){l.postMessage(t+"","*")},l.addEventListener("message",b,!1)):r="onreadystatechange"in u("script")?function(t){c.appendChild(u("script")).onreadystatechange=function(){c.removeChild(this),v.call(t)}}:function(t){setTimeout(a(v,t,1),0)}),t.exports={set:p,clear:f}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(19),i=n(22),o=n(116);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e,n){var r=n(120),i=n(57);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(15)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){var r=n(14),i=n(37),o=n(24);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o((function(){n(1)})),"Object",a)}},function(t,e,n){var r=n(44),i=n(110),o=n(47),a=n(46),s=n(266);t.exports=function(t,e){var n=1==t,c=2==t,u=3==t,l=4==t,h=6==t,p=5==t||h,f=e||s;return function(e,s,d){for(var y,m,g=o(e),v=i(g),b=r(s,d,3),_=a(v.length),E=0,T=n?f(e,_):c?f(e,0):void 0;_>E;E++)if((p||E in v)&&(m=b(y=v[E],E,g),t))if(n)T[E]=m;else if(m)switch(t){case 3:return!0;case 5:return y;case 6:return E;case 2:T.push(y)}else if(l)return!1;return h?-1:u||l?l:T}}},function(t,e,n){var r=n(51);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){"use strict";n(268);var r=n(19),i=n(85),o=n(23),a=/./.toString,s=function(t){n(34)(RegExp.prototype,"toString",t,!0)};n(24)((function(){return"/a/b"!=a.call({source:"a",flags:"b"})}))?s((function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)})):"toString"!=a.name&&s((function(){return a.call(this)}))},function(t,e,n){var r=n(23),i=n(52),o=n(45),a=n(69).f;t.exports=function(t){return function(e){for(var n,s=o(e),c=i(s),u=c.length,l=0,h=[];u>l;)n=c[l++],r&&!a.call(s,n)||h.push(t?[n,s[n]]:s[n]);return h}}},function(t,e,n){var r={"./after_purchase":[212,0],"./after_purchase.js":[212,0],"./balance":[213,1],"./balance.js":[213,1],"./before_purchase":[214,2],"./before_purchase.js":[214,2],"./check_direction":[215,3],"./check_direction.js":[215,3],"./contract_check_result":[216,4],"./contract_check_result.js":[216,4],"./controls_flow_statements":[217,5],"./controls_flow_statements.js":[217,5],"./controls_for":[218,6],"./controls_for.js":[218,6],"./controls_forEach":[219,7],"./controls_forEach.js":[219,7],"./controls_if":[220,8],"./controls_if.js":[220,8],"./controls_whileUntil":[221,9],"./controls_whileUntil.js":[221,9],"./during_purchase":[222,10],"./during_purchase.js":[222,10],"./epoch":[223,11],"./epoch.js":[223,11],"./get_ohlc":[224,12],"./get_ohlc.js":[224,12],"./is_candle_black":[225,13],"./is_candle_black.js":[225,13],"./last_digit":[226,14],"./last_digit.js":[226,14],"./logic_operation":[227,15],"./logic_operation.js":[227,15],"./math_arithmetic":[228,16],"./math_arithmetic.js":[228,16],"./math_constrain":[229,17],"./math_constrain.js":[229,17],"./math_single":[230,18],"./math_single.js":[230,18],"./notify_telegram":[231,19],"./notify_telegram.js":[231,19],"./ohlc":[232,20],"./ohlc.js":[232,20],"./ohlc_values":[233,21],"./ohlc_values.js":[233,21],"./ohlc_values_in_list":[234,22],"./ohlc_values_in_list.js":[234,22],"./procedures_ifreturn":[235,23],"./procedures_ifreturn.js":[235,23],"./read_details":[236,24],"./read_details.js":[236,24],"./read_ohlc":[237,25],"./read_ohlc.js":[237,25],"./read_ohlc_obj":[238,26],"./read_ohlc_obj.js":[238,26],"./sell_at_market":[239,27],"./sell_at_market.js":[239,27],"./sell_price":[240,28],"./sell_price.js":[240,28],"./sma_statement":[241,29],"./sma_statement.js":[241,29],"./text_print":[242,30],"./text_print.js":[242,30],"./text_prompt_ext":[243,31],"./text_prompt_ext.js":[243,31],"./tick_analysis":[244,32],"./tick_analysis.js":[244,32],"./todatetime":[245,33],"./todatetime.js":[245,33],"./totimestamp":[246,34],"./totimestamp.js":[246,34],"./trade_again":[247,35],"./trade_again.js":[247,35],"./trade_definition":[248,36],"./trade_definition.js":[248,36],"./trade_definition_tradeoptions":[249,37],"./trade_definition_tradeoptions.js":[249,37],"./variables_set":[250,38],"./variables_set.js":[250,38]};function i(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],i=e[0];return n.e(e[1]).then((function(){return n(i)}))}i.keys=function(){return Object.keys(r)},i.id=168,t.exports=i},function(t,e,n){"use strict";var r=n(26),i=n(65);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){"use strict";var r=n(60),i=n(273),o=n(274),a=n(275),s=n(125),c=n(126),u=n(127),l=n(173),h=n(72),p=n(35),f=p.TAG_NAMES,d=p.NAMESPACES,y=p.ATTRS,m={locationInfo:!1,treeAdapter:s},g="hidden",v=8,b=3,_="BEFORE_HTML_MODE",E="BEFORE_HEAD_MODE",T="IN_HEAD_MODE",S="AFTER_HEAD_MODE",k="IN_BODY_MODE",w="TEXT_MODE",A="IN_TABLE_MODE",O="IN_TABLE_TEXT_MODE",C="IN_CAPTION_MODE",I="IN_COLUMN_GROUP_MODE",N="IN_TABLE_BODY_MODE",R="IN_ROW_MODE",B="IN_CELL_MODE",D="IN_SELECT_MODE",P="IN_SELECT_IN_TABLE_MODE",x="IN_TEMPLATE_MODE",M="AFTER_BODY_MODE",L="IN_FRAMESET_MODE",j="AFTER_FRAMESET_MODE",F="AFTER_AFTER_BODY_MODE",U="AFTER_AFTER_FRAMESET_MODE",z=Object.create(null);z[f.TR]=R,z[f.TBODY]=z[f.THEAD]=z[f.TFOOT]=N,z[f.CAPTION]=C,z[f.COLGROUP]=I,z[f.TABLE]=A,z[f.BODY]=k,z[f.FRAMESET]=L;var V=Object.create(null);V[f.CAPTION]=V[f.COLGROUP]=V[f.TBODY]=V[f.TFOOT]=V[f.THEAD]=A,V[f.COL]=I,V[f.TR]=N,V[f.TD]=V[f.TH]=R;var H=Object.create(null);H.INITIAL_MODE=Object.create(null),H.INITIAL_MODE[r.CHARACTER_TOKEN]=H.INITIAL_MODE[r.NULL_CHARACTER_TOKEN]=rt,H.INITIAL_MODE[r.WHITESPACE_CHARACTER_TOKEN]=Z,H.INITIAL_MODE[r.COMMENT_TOKEN]=$,H.INITIAL_MODE[r.DOCTYPE_TOKEN]=function(t,e){t._setDocumentType(e);var n=e.forceQuirks?p.DOCUMENT_MODE.QUIRKS:u.getDocumentMode(e.name,e.publicId,e.systemId);t.treeAdapter.setDocumentMode(t.document,n),t.insertionMode=_},H.INITIAL_MODE[r.START_TAG_TOKEN]=H.INITIAL_MODE[r.END_TAG_TOKEN]=H.INITIAL_MODE[r.EOF_TOKEN]=rt,H[_]=Object.create(null),H[_][r.CHARACTER_TOKEN]=H[_][r.NULL_CHARACTER_TOKEN]=it,H[_][r.WHITESPACE_CHARACTER_TOKEN]=Z,H[_][r.COMMENT_TOKEN]=$,H[_][r.DOCTYPE_TOKEN]=Z,H[_][r.START_TAG_TOKEN]=function(t,e){e.tagName===f.HTML?(t._insertElement(e,d.HTML),t.insertionMode=E):it(t,e)},H[_][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n!==f.HTML&&n!==f.HEAD&&n!==f.BODY&&n!==f.BR||it(t,e)},H[_][r.EOF_TOKEN]=it,H[E]=Object.create(null),H[E][r.CHARACTER_TOKEN]=H[E][r.NULL_CHARACTER_TOKEN]=ot,H[E][r.WHITESPACE_CHARACTER_TOKEN]=Z,H[E][r.COMMENT_TOKEN]=$,H[E][r.DOCTYPE_TOKEN]=Z,H[E][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.HEAD?(t._insertElement(e,d.HTML),t.headElement=t.openElements.current,t.insertionMode=T):ot(t,e)},H[E][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n!==f.HEAD&&n!==f.BODY&&n!==f.HTML&&n!==f.BR||ot(t,e)},H[E][r.EOF_TOKEN]=ot,H[T]=Object.create(null),H[T][r.CHARACTER_TOKEN]=H[T][r.NULL_CHARACTER_TOKEN]=ct,H[T][r.WHITESPACE_CHARACTER_TOKEN]=et,H[T][r.COMMENT_TOKEN]=$,H[T][r.DOCTYPE_TOKEN]=Z,H[T][r.START_TAG_TOKEN]=at,H[T][r.END_TAG_TOKEN]=st,H[T][r.EOF_TOKEN]=ct,H[S]=Object.create(null),H[S][r.CHARACTER_TOKEN]=H[S][r.NULL_CHARACTER_TOKEN]=ut,H[S][r.WHITESPACE_CHARACTER_TOKEN]=et,H[S][r.COMMENT_TOKEN]=$,H[S][r.DOCTYPE_TOKEN]=Z,H[S][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.BODY?(t._insertElement(e,d.HTML),t.framesetOk=!1,t.insertionMode=k):n===f.FRAMESET?(t._insertElement(e,d.HTML),t.insertionMode=L):n===f.BASE||n===f.BASEFONT||n===f.BGSOUND||n===f.LINK||n===f.META||n===f.NOFRAMES||n===f.SCRIPT||n===f.STYLE||n===f.TEMPLATE||n===f.TITLE?(t.openElements.push(t.headElement),at(t,e),t.openElements.remove(t.headElement)):n!==f.HEAD&&ut(t,e)},H[S][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.BODY||n===f.HTML||n===f.BR?ut(t,e):n===f.TEMPLATE&&st(t,e)},H[S][r.EOF_TOKEN]=ut,H[k]=Object.create(null),H[k][r.CHARACTER_TOKEN]=ht,H[k][r.NULL_CHARACTER_TOKEN]=Z,H[k][r.WHITESPACE_CHARACTER_TOKEN]=lt,H[k][r.COMMENT_TOKEN]=$,H[k][r.DOCTYPE_TOKEN]=Z,H[k][r.START_TAG_TOKEN]=Tt,H[k][r.END_TAG_TOKEN]=At,H[k][r.EOF_TOKEN]=Ot,H[w]=Object.create(null),H[w][r.CHARACTER_TOKEN]=H[w][r.NULL_CHARACTER_TOKEN]=H[w][r.WHITESPACE_CHARACTER_TOKEN]=et,H[w][r.COMMENT_TOKEN]=H[w][r.DOCTYPE_TOKEN]=H[w][r.START_TAG_TOKEN]=Z,H[w][r.END_TAG_TOKEN]=function(t,e){e.tagName===f.SCRIPT&&(t.pendingScript=t.openElements.current),t.openElements.pop(),t.insertionMode=t.originalInsertionMode},H[w][r.EOF_TOKEN]=function(t,e){t.openElements.pop(),t.insertionMode=t.originalInsertionMode,t._processToken(e)},H[A]=Object.create(null),H[A][r.CHARACTER_TOKEN]=H[A][r.NULL_CHARACTER_TOKEN]=H[A][r.WHITESPACE_CHARACTER_TOKEN]=Ct,H[A][r.COMMENT_TOKEN]=$,H[A][r.DOCTYPE_TOKEN]=Z,H[A][r.START_TAG_TOKEN]=It,H[A][r.END_TAG_TOKEN]=Nt,H[A][r.EOF_TOKEN]=Ot,H[O]=Object.create(null),H[O][r.CHARACTER_TOKEN]=function(t,e){t.pendingCharacterTokens.push(e),t.hasNonWhitespacePendingCharacterToken=!0},H[O][r.NULL_CHARACTER_TOKEN]=Z,H[O][r.WHITESPACE_CHARACTER_TOKEN]=function(t,e){t.pendingCharacterTokens.push(e)},H[O][r.COMMENT_TOKEN]=H[O][r.DOCTYPE_TOKEN]=H[O][r.START_TAG_TOKEN]=H[O][r.END_TAG_TOKEN]=H[O][r.EOF_TOKEN]=function(t,e){var n=0;if(t.hasNonWhitespacePendingCharacterToken)for(;n<t.pendingCharacterTokens.length;n++)Rt(t,t.pendingCharacterTokens[n]);else for(;n<t.pendingCharacterTokens.length;n++)t._insertCharacters(t.pendingCharacterTokens[n]);t.insertionMode=t.originalInsertionMode,t._processToken(e)},H[C]=Object.create(null),H[C][r.CHARACTER_TOKEN]=ht,H[C][r.NULL_CHARACTER_TOKEN]=Z,H[C][r.WHITESPACE_CHARACTER_TOKEN]=lt,H[C][r.COMMENT_TOKEN]=$,H[C][r.DOCTYPE_TOKEN]=Z,H[C][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.CAPTION||n===f.COL||n===f.COLGROUP||n===f.TBODY||n===f.TD||n===f.TFOOT||n===f.TH||n===f.THEAD||n===f.TR?t.openElements.hasInTableScope(f.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=A,t._processToken(e)):Tt(t,e)},H[C][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.CAPTION||n===f.TABLE?t.openElements.hasInTableScope(f.CAPTION)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.CAPTION),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=A,n===f.TABLE&&t._processToken(e)):n!==f.BODY&&n!==f.COL&&n!==f.COLGROUP&&n!==f.HTML&&n!==f.TBODY&&n!==f.TD&&n!==f.TFOOT&&n!==f.TH&&n!==f.THEAD&&n!==f.TR&&At(t,e)},H[C][r.EOF_TOKEN]=Ot,H[I]=Object.create(null),H[I][r.CHARACTER_TOKEN]=H[I][r.NULL_CHARACTER_TOKEN]=Bt,H[I][r.WHITESPACE_CHARACTER_TOKEN]=et,H[I][r.COMMENT_TOKEN]=$,H[I][r.DOCTYPE_TOKEN]=Z,H[I][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.COL?t._appendElement(e,d.HTML):n===f.TEMPLATE?at(t,e):Bt(t,e)},H[I][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.COLGROUP?t.openElements.currentTagName===f.COLGROUP&&(t.openElements.pop(),t.insertionMode=A):n===f.TEMPLATE?st(t,e):n!==f.COL&&Bt(t,e)},H[I][r.EOF_TOKEN]=Ot,H[N]=Object.create(null),H[N][r.CHARACTER_TOKEN]=H[N][r.NULL_CHARACTER_TOKEN]=H[N][r.WHITESPACE_CHARACTER_TOKEN]=Ct,H[N][r.COMMENT_TOKEN]=$,H[N][r.DOCTYPE_TOKEN]=Z,H[N][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.TR?(t.openElements.clearBackToTableBodyContext(),t._insertElement(e,d.HTML),t.insertionMode=R):n===f.TH||n===f.TD?(t.openElements.clearBackToTableBodyContext(),t._insertFakeElement(f.TR),t.insertionMode=R,t._processToken(e)):n===f.CAPTION||n===f.COL||n===f.COLGROUP||n===f.TBODY||n===f.TFOOT||n===f.THEAD?t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=A,t._processToken(e)):It(t,e)},H[N][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.TBODY||n===f.TFOOT||n===f.THEAD?t.openElements.hasInTableScope(n)&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=A):n===f.TABLE?t.openElements.hasTableBodyContextInTableScope()&&(t.openElements.clearBackToTableBodyContext(),t.openElements.pop(),t.insertionMode=A,t._processToken(e)):(n!==f.BODY&&n!==f.CAPTION&&n!==f.COL&&n!==f.COLGROUP||n!==f.HTML&&n!==f.TD&&n!==f.TH&&n!==f.TR)&&Nt(t,e)},H[N][r.EOF_TOKEN]=Ot,H[R]=Object.create(null),H[R][r.CHARACTER_TOKEN]=H[R][r.NULL_CHARACTER_TOKEN]=H[R][r.WHITESPACE_CHARACTER_TOKEN]=Ct,H[R][r.COMMENT_TOKEN]=$,H[R][r.DOCTYPE_TOKEN]=Z,H[R][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.TH||n===f.TD?(t.openElements.clearBackToTableRowContext(),t._insertElement(e,d.HTML),t.insertionMode=B,t.activeFormattingElements.insertMarker()):n===f.CAPTION||n===f.COL||n===f.COLGROUP||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR?t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=N,t._processToken(e)):It(t,e)},H[R][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.TR?t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=N):n===f.TABLE?t.openElements.hasInTableScope(f.TR)&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=N,t._processToken(e)):n===f.TBODY||n===f.TFOOT||n===f.THEAD?(t.openElements.hasInTableScope(n)||t.openElements.hasInTableScope(f.TR))&&(t.openElements.clearBackToTableRowContext(),t.openElements.pop(),t.insertionMode=N,t._processToken(e)):(n!==f.BODY&&n!==f.CAPTION&&n!==f.COL&&n!==f.COLGROUP||n!==f.HTML&&n!==f.TD&&n!==f.TH)&&Nt(t,e)},H[R][r.EOF_TOKEN]=Ot,H[B]=Object.create(null),H[B][r.CHARACTER_TOKEN]=ht,H[B][r.NULL_CHARACTER_TOKEN]=Z,H[B][r.WHITESPACE_CHARACTER_TOKEN]=lt,H[B][r.COMMENT_TOKEN]=$,H[B][r.DOCTYPE_TOKEN]=Z,H[B][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.CAPTION||n===f.COL||n===f.COLGROUP||n===f.TBODY||n===f.TD||n===f.TFOOT||n===f.TH||n===f.THEAD||n===f.TR?(t.openElements.hasInTableScope(f.TD)||t.openElements.hasInTableScope(f.TH))&&(t._closeTableCell(),t._processToken(e)):Tt(t,e)},H[B][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.TD||n===f.TH?t.openElements.hasInTableScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker(),t.insertionMode=R):n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR?t.openElements.hasInTableScope(n)&&(t._closeTableCell(),t._processToken(e)):n!==f.BODY&&n!==f.CAPTION&&n!==f.COL&&n!==f.COLGROUP&&n!==f.HTML&&At(t,e)},H[B][r.EOF_TOKEN]=Ot,H[D]=Object.create(null),H[D][r.CHARACTER_TOKEN]=et,H[D][r.NULL_CHARACTER_TOKEN]=Z,H[D][r.WHITESPACE_CHARACTER_TOKEN]=et,H[D][r.COMMENT_TOKEN]=$,H[D][r.DOCTYPE_TOKEN]=Z,H[D][r.START_TAG_TOKEN]=Dt,H[D][r.END_TAG_TOKEN]=Pt,H[D][r.EOF_TOKEN]=Ot,H[P]=Object.create(null),H[P][r.CHARACTER_TOKEN]=et,H[P][r.NULL_CHARACTER_TOKEN]=Z,H[P][r.WHITESPACE_CHARACTER_TOKEN]=et,H[P][r.COMMENT_TOKEN]=$,H[P][r.DOCTYPE_TOKEN]=Z,H[P][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.CAPTION||n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR||n===f.TD||n===f.TH?(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),t._processToken(e)):Dt(t,e)},H[P][r.END_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.CAPTION||n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR||n===f.TD||n===f.TH?t.openElements.hasInTableScope(n)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),t._processToken(e)):Pt(t,e)},H[P][r.EOF_TOKEN]=Ot,H[x]=Object.create(null),H[x][r.CHARACTER_TOKEN]=ht,H[x][r.NULL_CHARACTER_TOKEN]=Z,H[x][r.WHITESPACE_CHARACTER_TOKEN]=lt,H[x][r.COMMENT_TOKEN]=$,H[x][r.DOCTYPE_TOKEN]=Z,H[x][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;if(n===f.BASE||n===f.BASEFONT||n===f.BGSOUND||n===f.LINK||n===f.META||n===f.NOFRAMES||n===f.SCRIPT||n===f.STYLE||n===f.TEMPLATE||n===f.TITLE)at(t,e);else{var r=V[n]||k;t._popTmplInsertionMode(),t._pushTmplInsertionMode(r),t.insertionMode=r,t._processToken(e)}},H[x][r.END_TAG_TOKEN]=function(t,e){e.tagName===f.TEMPLATE&&st(t,e)},H[x][r.EOF_TOKEN]=xt,H[M]=Object.create(null),H[M][r.CHARACTER_TOKEN]=H[M][r.NULL_CHARACTER_TOKEN]=Mt,H[M][r.WHITESPACE_CHARACTER_TOKEN]=lt,H[M][r.COMMENT_TOKEN]=function(t,e){t._appendCommentNode(e,t.openElements.items[0])},H[M][r.DOCTYPE_TOKEN]=Z,H[M][r.START_TAG_TOKEN]=function(t,e){e.tagName===f.HTML?Tt(t,e):Mt(t,e)},H[M][r.END_TAG_TOKEN]=function(t,e){e.tagName===f.HTML?t.fragmentContext||(t.insertionMode=F):Mt(t,e)},H[M][r.EOF_TOKEN]=nt,H[L]=Object.create(null),H[L][r.CHARACTER_TOKEN]=H[L][r.NULL_CHARACTER_TOKEN]=Z,H[L][r.WHITESPACE_CHARACTER_TOKEN]=et,H[L][r.COMMENT_TOKEN]=$,H[L][r.DOCTYPE_TOKEN]=Z,H[L][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.FRAMESET?t._insertElement(e,d.HTML):n===f.FRAME?t._appendElement(e,d.HTML):n===f.NOFRAMES&&at(t,e)},H[L][r.END_TAG_TOKEN]=function(t,e){e.tagName!==f.FRAMESET||t.openElements.isRootHtmlElementCurrent()||(t.openElements.pop(),t.fragmentContext||t.openElements.currentTagName===f.FRAMESET||(t.insertionMode=j))},H[L][r.EOF_TOKEN]=nt,H[j]=Object.create(null),H[j][r.CHARACTER_TOKEN]=H[j][r.NULL_CHARACTER_TOKEN]=Z,H[j][r.WHITESPACE_CHARACTER_TOKEN]=et,H[j][r.COMMENT_TOKEN]=$,H[j][r.DOCTYPE_TOKEN]=Z,H[j][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.NOFRAMES&&at(t,e)},H[j][r.END_TAG_TOKEN]=function(t,e){e.tagName===f.HTML&&(t.insertionMode=U)},H[j][r.EOF_TOKEN]=nt,H[F]=Object.create(null),H[F][r.CHARACTER_TOKEN]=Lt,H[F][r.NULL_CHARACTER_TOKEN]=Lt,H[F][r.WHITESPACE_CHARACTER_TOKEN]=lt,H[F][r.COMMENT_TOKEN]=tt,H[F][r.DOCTYPE_TOKEN]=Z,H[F][r.START_TAG_TOKEN]=function(t,e){e.tagName===f.HTML?Tt(t,e):Lt(t,e)},H[F][r.END_TAG_TOKEN]=Lt,H[F][r.EOF_TOKEN]=nt,H[U]=Object.create(null),H[U][r.CHARACTER_TOKEN]=H[U][r.NULL_CHARACTER_TOKEN]=Z,H[U][r.WHITESPACE_CHARACTER_TOKEN]=lt,H[U][r.COMMENT_TOKEN]=tt,H[U][r.DOCTYPE_TOKEN]=Z,H[U][r.START_TAG_TOKEN]=function(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.NOFRAMES&&at(t,e)},H[U][r.END_TAG_TOKEN]=Z,H[U][r.EOF_TOKEN]=nt;var G=t.exports=function(t){this.options=c(m,t),this.treeAdapter=this.options.treeAdapter,this.pendingScript=null,this.options.locationInfo&&new a(this)};function q(t,e){var n=t.activeFormattingElements.getElementEntryInScopeWithTagName(e.tagName);return n?t.openElements.contains(n.element)?t.openElements.hasInScope(e.tagName)||(n=null):(t.activeFormattingElements.removeEntry(n),n=null):wt(t,e),n}function W(t,e){for(var n=null,r=t.openElements.stackTop;r>=0;r--){var i=t.openElements.items[r];if(i===e.element)break;t._isSpecialElement(i)&&(n=i)}return n||(t.openElements.popUntilElementPopped(e.element),t.activeFormattingElements.removeEntry(e)),n}function K(t,e,n){for(var r=e,i=t.openElements.getCommonAncestor(e),o=0,a=i;a!==n;o++,a=i){i=t.openElements.getCommonAncestor(a);var s=t.activeFormattingElements.getElementEntry(a),c=s&&o>=b;!s||c?(c&&t.activeFormattingElements.removeEntry(s),t.openElements.remove(a)):(a=Y(t,s),r===e&&(t.activeFormattingElements.bookmark=s),t.treeAdapter.detachNode(r),t.treeAdapter.appendChild(a,r),r=a)}return r}function Y(t,e){var n=t.treeAdapter.getNamespaceURI(e.element),r=t.treeAdapter.createElement(e.token.tagName,n,e.token.attrs);return t.openElements.replace(e.element,r),e.element=r,r}function J(t,e,n){if(t._isElementCausesFosterParenting(e))t._fosterParentElement(n);else{var r=t.treeAdapter.getTagName(e),i=t.treeAdapter.getNamespaceURI(e);r===f.TEMPLATE&&i===d.HTML&&(e=t.treeAdapter.getTemplateContent(e)),t.treeAdapter.appendChild(e,n)}}function Q(t,e,n){var r=t.treeAdapter.getNamespaceURI(n.element),i=n.token,o=t.treeAdapter.createElement(i.tagName,r,i.attrs);t._adoptNodes(e,o),t.treeAdapter.appendChild(e,o),t.activeFormattingElements.insertElementAfterBookmark(o,n.token),t.activeFormattingElements.removeEntry(n),t.openElements.remove(n.element),t.openElements.insertAfter(e,o)}function X(t,e){for(var n,r=0;r<v&&(n=q(t,e));r++){var i=W(t,n);if(!i)break;t.activeFormattingElements.bookmark=n;var o=K(t,i,n.element),a=t.openElements.getCommonAncestor(n.element);t.treeAdapter.detachNode(o),J(t,a,o),Q(t,i,n)}}function Z(){}function $(t,e){t._appendCommentNode(e,t.openElements.currentTmplContent||t.openElements.current)}function tt(t,e){t._appendCommentNode(e,t.document)}function et(t,e){t._insertCharacters(e)}function nt(t){t.stopped=!0}function rt(t,e){t.treeAdapter.setDocumentMode(t.document,p.DOCUMENT_MODE.QUIRKS),t.insertionMode=_,t._processToken(e)}function it(t,e){t._insertFakeRootElement(),t.insertionMode=E,t._processToken(e)}function ot(t,e){t._insertFakeElement(f.HEAD),t.headElement=t.openElements.current,t.insertionMode=T,t._processToken(e)}function at(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.BASE||n===f.BASEFONT||n===f.BGSOUND||n===f.LINK||n===f.META?t._appendElement(e,d.HTML):n===f.TITLE?t._switchToTextParsing(e,r.MODE.RCDATA):n===f.NOSCRIPT||n===f.NOFRAMES||n===f.STYLE?t._switchToTextParsing(e,r.MODE.RAWTEXT):n===f.SCRIPT?t._switchToTextParsing(e,r.MODE.SCRIPT_DATA):n===f.TEMPLATE?(t._insertTemplate(e,d.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1,t.insertionMode=x,t._pushTmplInsertionMode(x)):n!==f.HEAD&&ct(t,e)}function st(t,e){var n=e.tagName;n===f.HEAD?(t.openElements.pop(),t.insertionMode=S):n===f.BODY||n===f.BR||n===f.HTML?ct(t,e):n===f.TEMPLATE&&t.openElements.tmplCount>0&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t._popTmplInsertionMode(),t._resetInsertionMode())}function ct(t,e){t.openElements.pop(),t.insertionMode=S,t._processToken(e)}function ut(t,e){t._insertFakeElement(f.BODY),t.insertionMode=k,t._processToken(e)}function lt(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e)}function ht(t,e){t._reconstructActiveFormattingElements(),t._insertCharacters(e),t.framesetOk=!1}function pt(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,d.HTML)}function ft(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,d.HTML),t.skipNextNewLine=!0,t.framesetOk=!1}function dt(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}function yt(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML),t.activeFormattingElements.insertMarker(),t.framesetOk=!1}function mt(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,d.HTML),t.framesetOk=!1}function gt(t,e){t._appendElement(e,d.HTML)}function vt(t,e){t._switchToTextParsing(e,r.MODE.RAWTEXT)}function bt(t,e){t.openElements.currentTagName===f.OPTION&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML)}function _t(t,e){t.openElements.hasInScope(f.RUBY)&&t.openElements.generateImpliedEndTags(),t._insertElement(e,d.HTML)}function Et(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML)}function Tt(t,e){var n=e.tagName;switch(n.length){case 1:n===f.I||n===f.S||n===f.B||n===f.U?dt(t,e):n===f.P?pt(t,e):n===f.A?function(t,e){var n=t.activeFormattingElements.getElementEntryInScopeWithTagName(f.A);n&&(X(t,e),t.openElements.remove(n.element),t.activeFormattingElements.removeEntry(n)),t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}(t,e):Et(t,e);break;case 2:n===f.DL||n===f.OL||n===f.UL?pt(t,e):n===f.H1||n===f.H2||n===f.H3||n===f.H4||n===f.H5||n===f.H6?function(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement();var n=t.openElements.currentTagName;n!==f.H1&&n!==f.H2&&n!==f.H3&&n!==f.H4&&n!==f.H5&&n!==f.H6||t.openElements.pop(),t._insertElement(e,d.HTML)}(t,e):n===f.LI||n===f.DD||n===f.DT?function(t,e){t.framesetOk=!1;for(var n=e.tagName,r=t.openElements.stackTop;r>=0;r--){var i=t.openElements.items[r],o=t.treeAdapter.getTagName(i),a=null;if(n===f.LI&&o===f.LI?a=f.LI:n!==f.DD&&n!==f.DT||o!==f.DD&&o!==f.DT||(a=o),a){t.openElements.generateImpliedEndTagsWithExclusion(a),t.openElements.popUntilTagNamePopped(a);break}if(o!==f.ADDRESS&&o!==f.DIV&&o!==f.P&&t._isSpecialElement(i))break}t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,d.HTML)}(t,e):n===f.EM||n===f.TT?dt(t,e):n===f.BR?mt(t,e):n===f.HR?function(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t.openElements.currentTagName===f.MENUITEM&&t.openElements.pop(),t._appendElement(e,d.HTML),t.framesetOk=!1}(t,e):n===f.RB?_t(t,e):n===f.RT||n===f.RP?function(t,e){t.openElements.hasInScope(f.RUBY)&&t.openElements.generateImpliedEndTagsWithExclusion(f.RTC),t._insertElement(e,d.HTML)}(t,e):n!==f.TH&&n!==f.TD&&n!==f.TR&&Et(t,e);break;case 3:n===f.DIV||n===f.DIR||n===f.NAV?pt(t,e):n===f.PRE?ft(t,e):n===f.BIG?dt(t,e):n===f.IMG||n===f.WBR?mt(t,e):n===f.XMP?function(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._reconstructActiveFormattingElements(),t.framesetOk=!1,t._switchToTextParsing(e,r.MODE.RAWTEXT)}(t,e):n===f.SVG?function(t,e){t._reconstructActiveFormattingElements(),l.adjustTokenSVGAttrs(e),l.adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,d.SVG):t._insertElement(e,d.SVG)}(t,e):n===f.RTC?_t(t,e):n!==f.COL&&Et(t,e);break;case 4:n===f.HTML?function(t,e){0===t.openElements.tmplCount&&t.treeAdapter.adoptAttributes(t.openElements.items[0],e.attrs)}(t,e):n===f.BASE||n===f.LINK||n===f.META?at(t,e):n===f.BODY?function(t,e){var n=t.openElements.tryPeekProperlyNestedBodyElement();n&&0===t.openElements.tmplCount&&(t.framesetOk=!1,t.treeAdapter.adoptAttributes(n,e.attrs))}(t,e):n===f.MAIN?pt(t,e):n===f.FORM?function(t,e){var n=t.openElements.tmplCount>0;t.formElement&&!n||(t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,d.HTML),n||(t.formElement=t.openElements.current))}(t,e):n===f.CODE||n===f.FONT?dt(t,e):n===f.NOBR?function(t,e){t._reconstructActiveFormattingElements(),t.openElements.hasInScope(f.NOBR)&&(X(t,e),t._reconstructActiveFormattingElements()),t._insertElement(e,d.HTML),t.activeFormattingElements.pushElement(t.openElements.current,e)}(t,e):n===f.AREA?mt(t,e):n===f.MATH?function(t,e){t._reconstructActiveFormattingElements(),l.adjustTokenMathMLAttrs(e),l.adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,d.MATHML):t._insertElement(e,d.MATHML)}(t,e):n===f.MENU?function(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t.openElements.currentTagName===f.MENUITEM&&t.openElements.pop(),t._insertElement(e,d.HTML)}(t,e):n!==f.HEAD&&Et(t,e);break;case 5:n===f.STYLE||n===f.TITLE?at(t,e):n===f.ASIDE?pt(t,e):n===f.SMALL?dt(t,e):n===f.TABLE?function(t,e){t.treeAdapter.getDocumentMode(t.document)!==p.DOCUMENT_MODE.QUIRKS&&t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,d.HTML),t.framesetOk=!1,t.insertionMode=A}(t,e):n===f.EMBED?mt(t,e):n===f.INPUT?function(t,e){t._reconstructActiveFormattingElements(),t._appendElement(e,d.HTML);var n=r.getTokenAttr(e,y.TYPE);n&&n.toLowerCase()===g||(t.framesetOk=!1)}(t,e):n===f.PARAM||n===f.TRACK?gt(t,e):n===f.IMAGE?function(t,e){e.tagName=f.IMG,mt(t,e)}(t,e):n!==f.FRAME&&n!==f.TBODY&&n!==f.TFOOT&&n!==f.THEAD&&Et(t,e);break;case 6:n===f.SCRIPT?at(t,e):n===f.CENTER||n===f.FIGURE||n===f.FOOTER||n===f.HEADER||n===f.HGROUP?pt(t,e):n===f.BUTTON?function(t,e){t.openElements.hasInScope(f.BUTTON)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(f.BUTTON)),t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML),t.framesetOk=!1}(t,e):n===f.STRIKE||n===f.STRONG?dt(t,e):n===f.APPLET||n===f.OBJECT?yt(t,e):n===f.KEYGEN?mt(t,e):n===f.SOURCE?gt(t,e):n===f.IFRAME?function(t,e){t.framesetOk=!1,t._switchToTextParsing(e,r.MODE.RAWTEXT)}(t,e):n===f.SELECT?function(t,e){t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML),t.framesetOk=!1,t.insertionMode===A||t.insertionMode===C||t.insertionMode===N||t.insertionMode===R||t.insertionMode===B?t.insertionMode=P:t.insertionMode=D}(t,e):n===f.OPTION?bt(t,e):Et(t,e);break;case 7:n===f.BGSOUND?at(t,e):n===f.DETAILS||n===f.ADDRESS||n===f.ARTICLE||n===f.SECTION||n===f.SUMMARY?pt(t,e):n===f.LISTING?ft(t,e):n===f.MARQUEE?yt(t,e):n===f.NOEMBED?vt(t,e):n!==f.CAPTION&&Et(t,e);break;case 8:n===f.BASEFONT?at(t,e):n===f.MENUITEM?function(t,e){t.openElements.currentTagName===f.MENUITEM&&t.openElements.pop(),t._reconstructActiveFormattingElements(),t._insertElement(e,d.HTML)}(t,e):n===f.FRAMESET?function(t,e){var n=t.openElements.tryPeekProperlyNestedBodyElement();t.framesetOk&&n&&(t.treeAdapter.detachNode(n),t.openElements.popAllUpToHtmlElement(),t._insertElement(e,d.HTML),t.insertionMode=L)}(t,e):n===f.FIELDSET?pt(t,e):n===f.TEXTAREA?function(t,e){t._insertElement(e,d.HTML),t.skipNextNewLine=!0,t.tokenizer.state=r.MODE.RCDATA,t.originalInsertionMode=t.insertionMode,t.framesetOk=!1,t.insertionMode=w}(t,e):n===f.TEMPLATE?at(t,e):n===f.NOSCRIPT?vt(t,e):n===f.OPTGROUP?bt(t,e):n!==f.COLGROUP&&Et(t,e);break;case 9:n===f.PLAINTEXT?function(t,e){t.openElements.hasInButtonScope(f.P)&&t._closePElement(),t._insertElement(e,d.HTML),t.tokenizer.state=r.MODE.PLAINTEXT}(t,e):Et(t,e);break;case 10:n===f.BLOCKQUOTE||n===f.FIGCAPTION?pt(t,e):Et(t,e);break;default:Et(t,e)}}function St(t,e){var n=e.tagName;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n))}function kt(t,e){var n=e.tagName;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilTagNamePopped(n),t.activeFormattingElements.clearToLastMarker())}function wt(t,e){for(var n=e.tagName,r=t.openElements.stackTop;r>0;r--){var i=t.openElements.items[r];if(t.treeAdapter.getTagName(i)===n){t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilElementPopped(i);break}if(t._isSpecialElement(i))break}}function At(t,e){var n=e.tagName;switch(n.length){case 1:n===f.A||n===f.B||n===f.I||n===f.S||n===f.U?X(t,e):n===f.P?function(t){t.openElements.hasInButtonScope(f.P)||t._insertFakeElement(f.P),t._closePElement()}(t):wt(t,e);break;case 2:n===f.DL||n===f.UL||n===f.OL?St(t,e):n===f.LI?function(t){t.openElements.hasInListItemScope(f.LI)&&(t.openElements.generateImpliedEndTagsWithExclusion(f.LI),t.openElements.popUntilTagNamePopped(f.LI))}(t):n===f.DD||n===f.DT?function(t,e){var n=e.tagName;t.openElements.hasInScope(n)&&(t.openElements.generateImpliedEndTagsWithExclusion(n),t.openElements.popUntilTagNamePopped(n))}(t,e):n===f.H1||n===f.H2||n===f.H3||n===f.H4||n===f.H5||n===f.H6?function(t){t.openElements.hasNumberedHeaderInScope()&&(t.openElements.generateImpliedEndTags(),t.openElements.popUntilNumberedHeaderPopped())}(t):n===f.BR?function(t){t._reconstructActiveFormattingElements(),t._insertFakeElement(f.BR),t.openElements.pop(),t.framesetOk=!1}(t):n===f.EM||n===f.TT?X(t,e):wt(t,e);break;case 3:n===f.BIG?X(t,e):n===f.DIR||n===f.DIV||n===f.NAV?St(t,e):wt(t,e);break;case 4:n===f.BODY?function(t){t.openElements.hasInScope(f.BODY)&&(t.insertionMode=M)}(t):n===f.HTML?function(t,e){t.openElements.hasInScope(f.BODY)&&(t.insertionMode=M,t._processToken(e))}(t,e):n===f.FORM?function(t){var e=t.openElements.tmplCount>0,n=t.formElement;e||(t.formElement=null),(n||e)&&t.openElements.hasInScope(f.FORM)&&(t.openElements.generateImpliedEndTags(),e?t.openElements.popUntilTagNamePopped(f.FORM):t.openElements.remove(n))}(t):n===f.CODE||n===f.FONT||n===f.NOBR?X(t,e):n===f.MAIN||n===f.MENU?St(t,e):wt(t,e);break;case 5:n===f.ASIDE?St(t,e):n===f.SMALL?X(t,e):wt(t,e);break;case 6:n===f.CENTER||n===f.FIGURE||n===f.FOOTER||n===f.HEADER||n===f.HGROUP?St(t,e):n===f.APPLET||n===f.OBJECT?kt(t,e):n===f.STRIKE||n===f.STRONG?X(t,e):wt(t,e);break;case 7:n===f.ADDRESS||n===f.ARTICLE||n===f.DETAILS||n===f.SECTION||n===f.SUMMARY?St(t,e):n===f.MARQUEE?kt(t,e):wt(t,e);break;case 8:n===f.FIELDSET?St(t,e):n===f.TEMPLATE?st(t,e):wt(t,e);break;case 10:n===f.BLOCKQUOTE||n===f.FIGCAPTION?St(t,e):wt(t,e);break;default:wt(t,e)}}function Ot(t,e){t.tmplInsertionModeStackTop>-1?xt(t,e):t.stopped=!0}function Ct(t,e){var n=t.openElements.currentTagName;n===f.TABLE||n===f.TBODY||n===f.TFOOT||n===f.THEAD||n===f.TR?(t.pendingCharacterTokens=[],t.hasNonWhitespacePendingCharacterToken=!1,t.originalInsertionMode=t.insertionMode,t.insertionMode=O,t._processToken(e)):Rt(t,e)}function It(t,e){var n=e.tagName;switch(n.length){case 2:n===f.TD||n===f.TH||n===f.TR?function(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(f.TBODY),t.insertionMode=N,t._processToken(e)}(t,e):Rt(t,e);break;case 3:n===f.COL?function(t,e){t.openElements.clearBackToTableContext(),t._insertFakeElement(f.COLGROUP),t.insertionMode=I,t._processToken(e)}(t,e):Rt(t,e);break;case 4:n===f.FORM?function(t,e){t.formElement||0!==t.openElements.tmplCount||(t._insertElement(e,d.HTML),t.formElement=t.openElements.current,t.openElements.pop())}(t,e):Rt(t,e);break;case 5:n===f.TABLE?function(t,e){t.openElements.hasInTableScope(f.TABLE)&&(t.openElements.popUntilTagNamePopped(f.TABLE),t._resetInsertionMode(),t._processToken(e))}(t,e):n===f.STYLE?at(t,e):n===f.TBODY||n===f.TFOOT||n===f.THEAD?function(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,d.HTML),t.insertionMode=N}(t,e):n===f.INPUT?function(t,e){var n=r.getTokenAttr(e,y.TYPE);n&&n.toLowerCase()===g?t._appendElement(e,d.HTML):Rt(t,e)}(t,e):Rt(t,e);break;case 6:n===f.SCRIPT?at(t,e):Rt(t,e);break;case 7:n===f.CAPTION?function(t,e){t.openElements.clearBackToTableContext(),t.activeFormattingElements.insertMarker(),t._insertElement(e,d.HTML),t.insertionMode=C}(t,e):Rt(t,e);break;case 8:n===f.COLGROUP?function(t,e){t.openElements.clearBackToTableContext(),t._insertElement(e,d.HTML),t.insertionMode=I}(t,e):n===f.TEMPLATE?at(t,e):Rt(t,e);break;default:Rt(t,e)}}function Nt(t,e){var n=e.tagName;n===f.TABLE?t.openElements.hasInTableScope(f.TABLE)&&(t.openElements.popUntilTagNamePopped(f.TABLE),t._resetInsertionMode()):n===f.TEMPLATE?st(t,e):n!==f.BODY&&n!==f.CAPTION&&n!==f.COL&&n!==f.COLGROUP&&n!==f.HTML&&n!==f.TBODY&&n!==f.TD&&n!==f.TFOOT&&n!==f.TH&&n!==f.THEAD&&n!==f.TR&&Rt(t,e)}function Rt(t,e){var n=t.fosterParentingEnabled;t.fosterParentingEnabled=!0,t._processTokenInBodyMode(e),t.fosterParentingEnabled=n}function Bt(t,e){t.openElements.currentTagName===f.COLGROUP&&(t.openElements.pop(),t.insertionMode=A,t._processToken(e))}function Dt(t,e){var n=e.tagName;n===f.HTML?Tt(t,e):n===f.OPTION?(t.openElements.currentTagName===f.OPTION&&t.openElements.pop(),t._insertElement(e,d.HTML)):n===f.OPTGROUP?(t.openElements.currentTagName===f.OPTION&&t.openElements.pop(),t.openElements.currentTagName===f.OPTGROUP&&t.openElements.pop(),t._insertElement(e,d.HTML)):n===f.INPUT||n===f.KEYGEN||n===f.TEXTAREA||n===f.SELECT?t.openElements.hasInSelectScope(f.SELECT)&&(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode(),n!==f.SELECT&&t._processToken(e)):n!==f.SCRIPT&&n!==f.TEMPLATE||at(t,e)}function Pt(t,e){var n=e.tagName;if(n===f.OPTGROUP){var r=t.openElements.items[t.openElements.stackTop-1],i=r&&t.treeAdapter.getTagName(r);t.openElements.currentTagName===f.OPTION&&i===f.OPTGROUP&&t.openElements.pop(),t.openElements.currentTagName===f.OPTGROUP&&t.openElements.pop()}else n===f.OPTION?t.openElements.currentTagName===f.OPTION&&t.openElements.pop():n===f.SELECT&&t.openElements.hasInSelectScope(f.SELECT)?(t.openElements.popUntilTagNamePopped(f.SELECT),t._resetInsertionMode()):n===f.TEMPLATE&&st(t,e)}function xt(t,e){t.openElements.tmplCount>0?(t.openElements.popUntilTagNamePopped(f.TEMPLATE),t.activeFormattingElements.clearToLastMarker(),t._popTmplInsertionMode(),t._resetInsertionMode(),t._processToken(e)):t.stopped=!0}function Mt(t,e){t.insertionMode=k,t._processToken(e)}function Lt(t,e){t.insertionMode=k,t._processToken(e)}G.prototype.parse=function(t){var e=this.treeAdapter.createDocument();return this._bootstrap(e,null),this.tokenizer.write(t,!0),this._runParsingLoop(null),e},G.prototype.parseFragment=function(t,e){e||(e=this.treeAdapter.createElement(f.TEMPLATE,d.HTML,[]));var n=this.treeAdapter.createElement("documentmock",d.HTML,[]);this._bootstrap(n,e),this.treeAdapter.getTagName(e)===f.TEMPLATE&&this._pushTmplInsertionMode(x),this._initTokenizerForFragmentParsing(),this._insertFakeRootElement(),this._resetInsertionMode(),this._findFormInFragmentContext(),this.tokenizer.write(t,!0),this._runParsingLoop(null);var r=this.treeAdapter.getFirstChild(n),i=this.treeAdapter.createDocumentFragment();return this._adoptNodes(r,i),i},G.prototype._bootstrap=function(t,e){this.tokenizer=new r(this.options),this.stopped=!1,this.insertionMode="INITIAL_MODE",this.originalInsertionMode="",this.document=t,this.fragmentContext=e,this.headElement=null,this.formElement=null,this.openElements=new i(this.document,this.treeAdapter),this.activeFormattingElements=new o(this.treeAdapter),this.tmplInsertionModeStack=[],this.tmplInsertionModeStackTop=-1,this.currentTmplInsertionMode=null,this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1},G.prototype._runParsingLoop=function(t){for(;!this.stopped;){this._setupTokenizerCDATAMode();var e=this.tokenizer.getNextToken();if(e.type===r.HIBERNATION_TOKEN)break;if(this.skipNextNewLine&&(this.skipNextNewLine=!1,e.type===r.WHITESPACE_CHARACTER_TOKEN&&"\n"===e.chars[0])){if(1===e.chars.length)continue;e.chars=e.chars.substr(1)}if(this._processInputToken(e),t&&this.pendingScript)break}},G.prototype.runParsingLoopForCurrentChunk=function(t,e){if(this._runParsingLoop(e),e&&this.pendingScript){var n=this.pendingScript;return this.pendingScript=null,void e(n)}t&&t()},G.prototype._setupTokenizerCDATAMode=function(){var t=this._getAdjustedCurrentElement();this.tokenizer.allowCDATA=t&&t!==this.document&&this.treeAdapter.getNamespaceURI(t)!==d.HTML&&!this._isIntegrationPoint(t)},G.prototype._switchToTextParsing=function(t,e){this._insertElement(t,d.HTML),this.tokenizer.state=e,this.originalInsertionMode=this.insertionMode,this.insertionMode=w},G.prototype.switchToPlaintextParsing=function(){this.insertionMode=w,this.originalInsertionMode=k,this.tokenizer.state=r.MODE.PLAINTEXT},G.prototype._getAdjustedCurrentElement=function(){return 0===this.openElements.stackTop&&this.fragmentContext?this.fragmentContext:this.openElements.current},G.prototype._findFormInFragmentContext=function(){var t=this.fragmentContext;do{if(this.treeAdapter.getTagName(t)===f.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}while(t)},G.prototype._initTokenizerForFragmentParsing=function(){if(this.treeAdapter.getNamespaceURI(this.fragmentContext)===d.HTML){var t=this.treeAdapter.getTagName(this.fragmentContext);t===f.TITLE||t===f.TEXTAREA?this.tokenizer.state=r.MODE.RCDATA:t===f.STYLE||t===f.XMP||t===f.IFRAME||t===f.NOEMBED||t===f.NOFRAMES||t===f.NOSCRIPT?this.tokenizer.state=r.MODE.RAWTEXT:t===f.SCRIPT?this.tokenizer.state=r.MODE.SCRIPT_DATA:t===f.PLAINTEXT&&(this.tokenizer.state=r.MODE.PLAINTEXT)}},G.prototype._setDocumentType=function(t){this.treeAdapter.setDocumentType(this.document,t.name,t.publicId,t.systemId)},G.prototype._attachElementToTree=function(t){if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{var e=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.appendChild(e,t)}},G.prototype._appendElement=function(t,e){var n=this.treeAdapter.createElement(t.tagName,e,t.attrs);this._attachElementToTree(n)},G.prototype._insertElement=function(t,e){var n=this.treeAdapter.createElement(t.tagName,e,t.attrs);this._attachElementToTree(n),this.openElements.push(n)},G.prototype._insertFakeElement=function(t){var e=this.treeAdapter.createElement(t,d.HTML,[]);this._attachElementToTree(e),this.openElements.push(e)},G.prototype._insertTemplate=function(t){var e=this.treeAdapter.createElement(t.tagName,d.HTML,t.attrs),n=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(e,n),this._attachElementToTree(e),this.openElements.push(e)},G.prototype._insertFakeRootElement=function(){var t=this.treeAdapter.createElement(f.HTML,d.HTML,[]);this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t)},G.prototype._appendCommentNode=function(t,e){var n=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(e,n)},G.prototype._insertCharacters=function(t){if(this._shouldFosterParentOnInsertion())this._fosterParentText(t.chars);else{var e=this.openElements.currentTmplContent||this.openElements.current;this.treeAdapter.insertText(e,t.chars)}},G.prototype._adoptNodes=function(t,e){for(;;){var n=this.treeAdapter.getFirstChild(t);if(!n)break;this.treeAdapter.detachNode(n),this.treeAdapter.appendChild(e,n)}},G.prototype._shouldProcessTokenInForeignContent=function(t){var e=this._getAdjustedCurrentElement();if(!e||e===this.document)return!1;var n=this.treeAdapter.getNamespaceURI(e);if(n===d.HTML)return!1;if(this.treeAdapter.getTagName(e)===f.ANNOTATION_XML&&n===d.MATHML&&t.type===r.START_TAG_TOKEN&&t.tagName===f.SVG)return!1;var i=t.type===r.CHARACTER_TOKEN||t.type===r.NULL_CHARACTER_TOKEN||t.type===r.WHITESPACE_CHARACTER_TOKEN;return!((t.type===r.START_TAG_TOKEN&&t.tagName!==f.MGLYPH&&t.tagName!==f.MALIGNMARK||i)&&this._isIntegrationPoint(e,d.MATHML)||(t.type===r.START_TAG_TOKEN||i)&&this._isIntegrationPoint(e,d.HTML)||t.type===r.EOF_TOKEN)},G.prototype._processToken=function(t){H[this.insertionMode][t.type](this,t)},G.prototype._processTokenInBodyMode=function(t){H[k][t.type](this,t)},G.prototype._processTokenInForeignContent=function(t){t.type===r.CHARACTER_TOKEN?function(t,e){t._insertCharacters(e),t.framesetOk=!1}(this,t):t.type===r.NULL_CHARACTER_TOKEN?function(t,e){e.chars=h.REPLACEMENT_CHARACTER,t._insertCharacters(e)}(this,t):t.type===r.WHITESPACE_CHARACTER_TOKEN?et(this,t):t.type===r.COMMENT_TOKEN?$(this,t):t.type===r.START_TAG_TOKEN?function(t,e){if(l.causesExit(e)&&!t.fragmentContext){for(;t.treeAdapter.getNamespaceURI(t.openElements.current)!==d.HTML&&!t._isIntegrationPoint(t.openElements.current);)t.openElements.pop();t._processToken(e)}else{var n=t._getAdjustedCurrentElement(),r=t.treeAdapter.getNamespaceURI(n);r===d.MATHML?l.adjustTokenMathMLAttrs(e):r===d.SVG&&(l.adjustTokenSVGTagName(e),l.adjustTokenSVGAttrs(e)),l.adjustTokenXMLAttrs(e),e.selfClosing?t._appendElement(e,r):t._insertElement(e,r)}}(this,t):t.type===r.END_TAG_TOKEN&&function(t,e){for(var n=t.openElements.stackTop;n>0;n--){var r=t.openElements.items[n];if(t.treeAdapter.getNamespaceURI(r)===d.HTML){t._processToken(e);break}if(t.treeAdapter.getTagName(r).toLowerCase()===e.tagName){t.openElements.popUntilElementPopped(r);break}}}(this,t)},G.prototype._processInputToken=function(t){this._shouldProcessTokenInForeignContent(t)?this._processTokenInForeignContent(t):this._processToken(t)},G.prototype._isIntegrationPoint=function(t,e){var n=this.treeAdapter.getTagName(t),r=this.treeAdapter.getNamespaceURI(t),i=this.treeAdapter.getAttrList(t);return l.isIntegrationPoint(n,r,i,e)},G.prototype._reconstructActiveFormattingElements=function(){var t=this.activeFormattingElements.length;if(t){var e=t,n=null;do{if(e--,(n=this.activeFormattingElements.entries[e]).type===o.MARKER_ENTRY||this.openElements.contains(n.element)){e++;break}}while(e>0);for(var r=e;r<t;r++)n=this.activeFormattingElements.entries[r],this._insertElement(n.token,this.treeAdapter.getNamespaceURI(n.element)),n.element=this.openElements.current}},G.prototype._closeTableCell=function(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=R},G.prototype._closePElement=function(){this.openElements.generateImpliedEndTagsWithExclusion(f.P),this.openElements.popUntilTagNamePopped(f.P)},G.prototype._resetInsertionMode=function(){for(var t=this.openElements.stackTop,e=!1;t>=0;t--){var n=this.openElements.items[t];0===t&&(e=!0,this.fragmentContext&&(n=this.fragmentContext));var r=this.treeAdapter.getTagName(n),i=z[r];if(i){this.insertionMode=i;break}if(!(e||r!==f.TD&&r!==f.TH)){this.insertionMode=B;break}if(!e&&r===f.HEAD){this.insertionMode=T;break}if(r===f.SELECT){this._resetInsertionModeForSelect(t);break}if(r===f.TEMPLATE){this.insertionMode=this.currentTmplInsertionMode;break}if(r===f.HTML){this.insertionMode=this.headElement?S:E;break}if(e){this.insertionMode=k;break}}},G.prototype._resetInsertionModeForSelect=function(t){if(t>0)for(var e=t-1;e>0;e--){var n=this.openElements.items[e],r=this.treeAdapter.getTagName(n);if(r===f.TEMPLATE)break;if(r===f.TABLE)return void(this.insertionMode=P)}this.insertionMode=D},G.prototype._pushTmplInsertionMode=function(t){this.tmplInsertionModeStack.push(t),this.tmplInsertionModeStackTop++,this.currentTmplInsertionMode=t},G.prototype._popTmplInsertionMode=function(){this.tmplInsertionModeStack.pop(),this.tmplInsertionModeStackTop--,this.currentTmplInsertionMode=this.tmplInsertionModeStack[this.tmplInsertionModeStackTop]},G.prototype._isElementCausesFosterParenting=function(t){var e=this.treeAdapter.getTagName(t);return e===f.TABLE||e===f.TBODY||e===f.TFOOT||e===f.THEAD||e===f.TR},G.prototype._shouldFosterParentOnInsertion=function(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.current)},G.prototype._findFosterParentingLocation=function(){for(var t={parent:null,beforeElement:null},e=this.openElements.stackTop;e>=0;e--){var n=this.openElements.items[e],r=this.treeAdapter.getTagName(n),i=this.treeAdapter.getNamespaceURI(n);if(r===f.TEMPLATE&&i===d.HTML){t.parent=this.treeAdapter.getTemplateContent(n);break}if(r===f.TABLE){t.parent=this.treeAdapter.getParentNode(n),t.parent?t.beforeElement=n:t.parent=this.openElements.items[e-1];break}}return t.parent||(t.parent=this.openElements.items[0]),t},G.prototype._fosterParentElement=function(t){var e=this._findFosterParentingLocation();e.beforeElement?this.treeAdapter.insertBefore(e.parent,t,e.beforeElement):this.treeAdapter.appendChild(e.parent,t)},G.prototype._fosterParentText=function(t){var e=this._findFosterParentingLocation();e.beforeElement?this.treeAdapter.insertTextBefore(e.parent,t,e.beforeElement):this.treeAdapter.insertText(e.parent,t)},G.prototype._isSpecialElement=function(t){var e=this.treeAdapter.getTagName(t),n=this.treeAdapter.getNamespaceURI(t);return p.SPECIAL_ELEMENTS[n][e]}},function(t,e,n){"use strict";var r=n(92),i=n(60),o=n(172),a=n(39).inherits,s=t.exports=function(t){r.call(this,t),this.tokenizer=t,this.posTracker=new o(t.preprocessor),this.currentAttrLocation=null,this.currentTokenLocation=null};a(s,r),s.prototype._getCurrentLocation=function(){return{line:this.posTracker.line,col:this.posTracker.col,startOffset:this.posTracker.offset,endOffset:-1}},s.prototype._attachCurrentAttrLocationInfo=function(){this.currentAttrLocation.endOffset=this.posTracker.offset;var t=this.tokenizer.currentToken,e=this.tokenizer.currentAttr;t.location.attrs||(t.location.attrs=Object.create(null)),t.location.attrs[e.name]=this.currentAttrLocation},s.prototype._getOverriddenMethods=function(t,e){var n={_createStartTagToken:function(){e._createStartTagToken.call(this),this.currentToken.location=t.currentTokenLocation},_createEndTagToken:function(){e._createEndTagToken.call(this),this.currentToken.location=t.currentTokenLocation},_createCommentToken:function(){e._createCommentToken.call(this),this.currentToken.location=t.currentTokenLocation},_createDoctypeToken:function(n){e._createDoctypeToken.call(this,n),this.currentToken.location=t.currentTokenLocation},_createCharacterToken:function(n,r){e._createCharacterToken.call(this,n,r),this.currentCharacterToken.location=t.currentTokenLocation},_createAttr:function(n){e._createAttr.call(this,n),t.currentAttrLocation=t._getCurrentLocation()},_leaveAttrName:function(n){e._leaveAttrName.call(this,n),t._attachCurrentAttrLocationInfo()},_leaveAttrValue:function(n){e._leaveAttrValue.call(this,n),t._attachCurrentAttrLocationInfo()},_emitCurrentToken:function(){this.currentCharacterToken&&(this.currentCharacterToken.location.endOffset=this.currentToken.location.startOffset),this.currentToken.location.endOffset=t.posTracker.offset+1,e._emitCurrentToken.call(this)},_emitCurrentCharacterToken:function(){this.currentCharacterToken&&-1===this.currentCharacterToken.location.endOffset&&(this.currentCharacterToken.location.endOffset=t.posTracker.offset),e._emitCurrentCharacterToken.call(this)}};return Object.keys(i.MODE).forEach((function(r){var o=i.MODE[r];n[o]=function(n){t.currentTokenLocation=t._getCurrentLocation(),e[o].call(this,n)}})),n}},function(t,e,n){"use strict";var r=n(92),i=n(39).inherits,o=n(72).CODE_POINTS,a=t.exports=function(t){return t.__locTracker||(t.__locTracker=this,r.call(this,t),this.preprocessor=t,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.col=-1,this.line=1),t.__locTracker};i(a,r),Object.defineProperty(a.prototype,"offset",{get:function(){return this.droppedBufferSize+this.preprocessor.pos}}),a.prototype._getOverriddenMethods=function(t,e){return{advance:function(){var n=e.advance.call(this);return t.isEol&&(t.isEol=!1,t.line++,t.lineStartPos=t.offset),n===o.LINE_FEED&&(t.isEol=!0),t.col=t.offset-t.lineStartPos+1,n},retreat:function(){e.retreat.call(this),t.isEol=!1,t.col=t.offset-t.lineStartPos+1},dropParsedChunk:function(){var n=this.pos;e.dropParsedChunk.call(this),t.droppedBufferSize+=n-this.pos}}}},function(t,e,n){"use strict";var r=n(60),i=n(35),o=i.TAG_NAMES,a=i.NAMESPACES,s=i.ATTRS,c="text/html",u="application/xhtml+xml",l={attributename:"attributeName",attributetype:"attributeType",basefrequency:"baseFrequency",baseprofile:"baseProfile",calcmode:"calcMode",clippathunits:"clipPathUnits",diffuseconstant:"diffuseConstant",edgemode:"edgeMode",filterunits:"filterUnits",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",limitingconeangle:"limitingConeAngle",markerheight:"markerHeight",markerunits:"markerUnits",markerwidth:"markerWidth",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",numoctaves:"numOctaves",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",refx:"refX",refy:"refY",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",specularconstant:"specularConstant",specularexponent:"specularExponent",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stitchtiles:"stitchTiles",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textlength:"textLength",viewbox:"viewBox",viewtarget:"viewTarget",xchannelselector:"xChannelSelector",ychannelselector:"yChannelSelector",zoomandpan:"zoomAndPan"},h={"xlink:actuate":{prefix:"xlink",name:"actuate",namespace:a.XLINK},"xlink:arcrole":{prefix:"xlink",name:"arcrole",namespace:a.XLINK},"xlink:href":{prefix:"xlink",name:"href",namespace:a.XLINK},"xlink:role":{prefix:"xlink",name:"role",namespace:a.XLINK},"xlink:show":{prefix:"xlink",name:"show",namespace:a.XLINK},"xlink:title":{prefix:"xlink",name:"title",namespace:a.XLINK},"xlink:type":{prefix:"xlink",name:"type",namespace:a.XLINK},"xml:base":{prefix:"xml",name:"base",namespace:a.XML},"xml:lang":{prefix:"xml",name:"lang",namespace:a.XML},"xml:space":{prefix:"xml",name:"space",namespace:a.XML},xmlns:{prefix:"",name:"xmlns",namespace:a.XMLNS},"xmlns:xlink":{prefix:"xmlns",name:"xlink",namespace:a.XMLNS}},p=e.SVG_TAG_NAMES_ADJUSTMENT_MAP={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient",textpath:"textPath"},f=Object.create(null);f[o.B]=!0,f[o.BIG]=!0,f[o.BLOCKQUOTE]=!0,f[o.BODY]=!0,f[o.BR]=!0,f[o.CENTER]=!0,f[o.CODE]=!0,f[o.DD]=!0,f[o.DIV]=!0,f[o.DL]=!0,f[o.DT]=!0,f[o.EM]=!0,f[o.EMBED]=!0,f[o.H1]=!0,f[o.H2]=!0,f[o.H3]=!0,f[o.H4]=!0,f[o.H5]=!0,f[o.H6]=!0,f[o.HEAD]=!0,f[o.HR]=!0,f[o.I]=!0,f[o.IMG]=!0,f[o.LI]=!0,f[o.LISTING]=!0,f[o.MENU]=!0,f[o.META]=!0,f[o.NOBR]=!0,f[o.OL]=!0,f[o.P]=!0,f[o.PRE]=!0,f[o.RUBY]=!0,f[o.S]=!0,f[o.SMALL]=!0,f[o.SPAN]=!0,f[o.STRONG]=!0,f[o.STRIKE]=!0,f[o.SUB]=!0,f[o.SUP]=!0,f[o.TABLE]=!0,f[o.TT]=!0,f[o.U]=!0,f[o.UL]=!0,f[o.VAR]=!0,e.causesExit=function(t){var e=t.tagName;return!(e!==o.FONT||null===r.getTokenAttr(t,s.COLOR)&&null===r.getTokenAttr(t,s.SIZE)&&null===r.getTokenAttr(t,s.FACE))||f[e]},e.adjustTokenMathMLAttrs=function(t){for(var e=0;e<t.attrs.length;e++)if("definitionurl"===t.attrs[e].name){t.attrs[e].name="definitionURL";break}},e.adjustTokenSVGAttrs=function(t){for(var e=0;e<t.attrs.length;e++){var n=l[t.attrs[e].name];n&&(t.attrs[e].name=n)}},e.adjustTokenXMLAttrs=function(t){for(var e=0;e<t.attrs.length;e++){var n=h[t.attrs[e].name];n&&(t.attrs[e].prefix=n.prefix,t.attrs[e].name=n.name,t.attrs[e].namespace=n.namespace)}},e.adjustTokenSVGTagName=function(t){var e=p[t.tagName];e&&(t.tagName=e)},e.isIntegrationPoint=function(t,e,n,r){return!(r&&r!==a.HTML||!function(t,e,n){if(e===a.MATHML&&t===o.ANNOTATION_XML)for(var r=0;r<n.length;r++)if(n[r].name===s.ENCODING){var i=n[r].value.toLowerCase();return i===c||i===u}return e===a.SVG&&(t===o.FOREIGN_OBJECT||t===o.DESC||t===o.TITLE)}(t,e,n))||!(r&&r!==a.MATHML||!function(t,e){return e===a.MATHML&&(t===o.MI||t===o.MO||t===o.MN||t===o.MS||t===o.MTEXT)}(t,e))}},function(t,e,n){"use strict";var r=n(125),i=n(126),o=n(127),a=n(35),s=a.TAG_NAMES,c=a.NAMESPACES,u={treeAdapter:r},l=/&/g,h=/\u00a0/g,p=/"/g,f=/</g,d=/>/g,y=t.exports=function(t,e){this.options=i(u,e),this.treeAdapter=this.options.treeAdapter,this.html="",this.startNode=t};y.escapeString=function(t,e){return t=t.replace(l,"&amp;").replace(h,"&nbsp;"),e?t.replace(p,"&quot;"):t.replace(f,"&lt;").replace(d,"&gt;")},y.prototype.serialize=function(){return this._serializeChildNodes(this.startNode),this.html},y.prototype._serializeChildNodes=function(t){var e=this.treeAdapter.getChildNodes(t);if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.treeAdapter.isElementNode(i)?this._serializeElement(i):this.treeAdapter.isTextNode(i)?this._serializeTextNode(i):this.treeAdapter.isCommentNode(i)?this._serializeCommentNode(i):this.treeAdapter.isDocumentTypeNode(i)&&this._serializeDocumentTypeNode(i)}},y.prototype._serializeElement=function(t){var e=this.treeAdapter.getTagName(t),n=this.treeAdapter.getNamespaceURI(t);if(this.html+="<"+e,this._serializeAttributes(t),this.html+=">",e!==s.AREA&&e!==s.BASE&&e!==s.BASEFONT&&e!==s.BGSOUND&&e!==s.BR&&e!==s.BR&&e!==s.COL&&e!==s.EMBED&&e!==s.FRAME&&e!==s.HR&&e!==s.IMG&&e!==s.INPUT&&e!==s.KEYGEN&&e!==s.LINK&&e!==s.MENUITEM&&e!==s.META&&e!==s.PARAM&&e!==s.SOURCE&&e!==s.TRACK&&e!==s.WBR){var r=e===s.TEMPLATE&&n===c.HTML?this.treeAdapter.getTemplateContent(t):t;this._serializeChildNodes(r),this.html+="</"+e+">"}},y.prototype._serializeAttributes=function(t){for(var e=this.treeAdapter.getAttrList(t),n=0,r=e.length;n<r;n++){var i=e[n],o=y.escapeString(i.value,!0);this.html+=" ",i.namespace?i.namespace===c.XML?this.html+="xml:"+i.name:i.namespace===c.XMLNS?("xmlns"!==i.name&&(this.html+="xmlns:"),this.html+=i.name):i.namespace===c.XLINK?this.html+="xlink:"+i.name:this.html+=i.namespace+":"+i.name:this.html+=i.name,this.html+='="'+o+'"'}},y.prototype._serializeTextNode=function(t){var e=this.treeAdapter.getTextNodeContent(t),n=this.treeAdapter.getParentNode(t),r=void 0;n&&this.treeAdapter.isElementNode(n)&&(r=this.treeAdapter.getTagName(n)),r===s.STYLE||r===s.SCRIPT||r===s.XMP||r===s.IFRAME||r===s.NOEMBED||r===s.NOFRAMES||r===s.PLAINTEXT||r===s.NOSCRIPT?this.html+=e:this.html+=y.escapeString(e,!1)},y.prototype._serializeCommentNode=function(t){this.html+="\x3c!--"+this.treeAdapter.getCommentNodeContent(t)+"--\x3e"},y.prototype._serializeDocumentTypeNode=function(t){var e=this.treeAdapter.getDocumentTypeNodeName(t);this.html+="<"+o.serializeContent(e,null,null)+">"}},function(t,e,n){"use strict";var r=n(93).Writable,i=n(39).inherits,o=n(170),a=t.exports=function(t){r.call(this),this.parser=new o(t),this.lastChunkWritten=!1,this.writeCallback=null,this.pausedByScript=!1,this.document=this.parser.treeAdapter.createDocument(),this.pendingHtmlInsertions=[],this._resume=this._resume.bind(this),this._documentWrite=this._documentWrite.bind(this),this._scriptHandler=this._scriptHandler.bind(this),this.parser._bootstrap(this.document,null)};i(a,r),a.prototype._write=function(t,e,n){this.writeCallback=n,this.parser.tokenizer.write(t.toString("utf8"),this.lastChunkWritten),this._runParsingLoop()},a.prototype.end=function(t,e,n){this.lastChunkWritten=!0,r.prototype.end.call(this,t||"",e,n)},a.prototype._runParsingLoop=function(){this.parser.runParsingLoopForCurrentChunk(this.writeCallback,this._scriptHandler)},a.prototype._resume=function(){if(!this.pausedByScript)throw new Error("Parser was already resumed");for(;this.pendingHtmlInsertions.length;){var t=this.pendingHtmlInsertions.pop();this.parser.tokenizer.insertHtmlAtCurrentPos(t)}this.pausedByScript=!1,this.parser.tokenizer.active&&this._runParsingLoop()},a.prototype._documentWrite=function(t){this.parser.stopped||this.pendingHtmlInsertions.push(t)},a.prototype._scriptHandler=function(t){this.listeners("script").length?(this.pausedByScript=!0,this.emit("script",t,this._documentWrite,this._resume)):this._runParsingLoop()}},function(t,e,n){"use strict";(function(e,r){var i=n(94);t.exports=b;var o,a=n(177);b.ReadableState=v,n(128).EventEmitter;var s=function(t,e){return t.listeners(e).length},c=n(178),u=n(130).Buffer,l=e.Uint8Array||function(){},h=n(73);h.inherits=n(61);var p=n(282),f=void 0;f=p&&p.debuglog?p.debuglog("stream"):function(){};var d,y=n(283),m=n(179);h.inherits(b,c);var g=["error","close","destroy","pause","resume"];function v(t,e){t=t||{};var r=e instanceof(o=o||n(55));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var i=t.highWaterMark,a=t.readableHighWaterMark,s=this.objectMode?16:16384;this.highWaterMark=i||0===i?i:r&&(a||0===a)?a:s,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new y,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(d||(d=n(180).StringDecoder),this.decoder=new d(t.encoding),this.encoding=t.encoding)}function b(t){if(o=o||n(55),!(this instanceof b))return new b(t);this._readableState=new v(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),c.call(this)}function _(t,e,n,r,i){var o,a=t._readableState;return null===e?(a.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,k(t)}}(t,a)):(i||(o=function(t,e){var n,r;return r=e,u.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}(a,e)),o?t.emit("error",o):a.objectMode||e&&e.length>0?("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===u.prototype||(e=function(t){return u.from(t)}(e)),r?a.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):E(t,a,e,!0):a.ended?t.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!n?(e=a.decoder.write(e),a.objectMode||0!==e.length?E(t,a,e,!1):A(t,a)):E(t,a,e,!1))):r||(a.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(a)}function E(t,e,n,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,r?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&k(t)),A(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=u.from(t,e),e=""),n=!0),_(this,t,e,!1,n)},b.prototype.unshift=function(t){return _(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return d||(d=n(180).StringDecoder),this._readableState.decoder=new d(t),this._readableState.encoding=t,this};var T=8388608;function S(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=T?t=T:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function k(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?i.nextTick(w,t):w(t))}function w(t){f("emit readable"),t.emit("readable"),N(t)}function A(t,e){e.readingMore||(e.readingMore=!0,i.nextTick(O,t,e))}function O(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function C(t){f("readable nexttick read 0"),t.read(0)}function I(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),N(t),e.flowing&&!e.reading&&t.read(0)}function N(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function R(t,e){return 0===e.length?null:(e.objectMode?n=e.buffer.shift():!t||t>=e.length?(n=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):n=function(t,e,n){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():n?function(t,e){var n=e.head,r=1,i=n.data;for(t-=i.length;n=n.next;){var o=n.data,a=t>o.length?o.length:t;if(a===o.length?i+=o:i+=o.slice(0,t),0==(t-=a)){a===o.length?(++r,n.next?e.head=n.next:e.head=e.tail=null):(e.head=n,n.data=o.slice(a));break}++r}return e.length-=r,i}(t,e):function(t,e){var n=u.allocUnsafe(t),r=e.head,i=1;for(r.data.copy(n),t-=r.data.length;r=r.next;){var o=r.data,a=t>o.length?o.length:t;if(o.copy(n,n.length-t,0,a),0==(t-=a)){a===o.length?(++i,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=o.slice(a));break}++i}return e.length-=i,n}(t,e),r}(t,e.buffer,e.decoder),n);var n}function B(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,i.nextTick(D,e,t))}function D(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function P(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,n=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?B(this):k(this),null;if(0===(t=S(t,e))&&e.ended)return 0===e.length&&B(this),null;var r,i=e.needReadable;return f("need readable",i),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",i=!0),e.ended||e.reading?f("reading or ended",i=!1):i&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=S(n,e))),null===(r=t>0?R(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),n!==t&&e.ended&&B(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var n=this,o=this._readableState;switch(o.pipesCount){case 0:o.pipes=t;break;case 1:o.pipes=[o.pipes,t];break;default:o.pipes.push(t)}o.pipesCount+=1,f("pipe count=%d opts=%j",o.pipesCount,e);var c=e&&!1===e.end||t===r.stdout||t===r.stderr?v:u;function u(){f("onend"),t.end()}o.endEmitted?i.nextTick(c):n.once("end",c),t.on("unpipe",(function e(r,i){f("onunpipe"),r===n&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),t.removeListener("close",m),t.removeListener("finish",g),t.removeListener("drain",l),t.removeListener("error",y),t.removeListener("unpipe",e),n.removeListener("end",u),n.removeListener("end",v),n.removeListener("data",d),h=!0,!o.awaitDrain||t._writableState&&!t._writableState.needDrain||l())}));var l=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&s(t,"data")&&(e.flowing=!0,N(t))}}(n);t.on("drain",l);var h=!1,p=!1;function d(e){f("ondata"),p=!1,!1!==t.write(e)||p||((1===o.pipesCount&&o.pipes===t||o.pipesCount>1&&-1!==P(o.pipes,t))&&!h&&(f("false write response, pause",n._readableState.awaitDrain),n._readableState.awaitDrain++,p=!0),n.pause())}function y(e){f("onerror",e),v(),t.removeListener("error",y),0===s(t,"error")&&t.emit("error",e)}function m(){t.removeListener("finish",g),v()}function g(){f("onfinish"),t.removeListener("close",m),v()}function v(){f("unpipe"),n.unpipe(t)}return n.on("data",d),function(t,e,n){if("function"==typeof t.prependListener)return t.prependListener(e,n);t._events&&t._events[e]?a(t._events[e])?t._events[e].unshift(n):t._events[e]=[n,t._events[e]]:t.on(e,n)}(t,"error",y),t.once("close",m),t.once("finish",g),t.emit("pipe",n),o.flowing||(f("pipe resume"),n.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,n={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,n),this);if(!t){var r=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var o=0;o<i;o++)r[o].emit("unpipe",this,n);return this}var a=P(e.pipes,t);return-1===a?this:(e.pipes.splice(a,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,n),this)},b.prototype.on=function(t,e){var n=c.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&k(this):i.nextTick(C,this))}return n},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,i.nextTick(I,t,e))}(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,n=this._readableState,r=!1;for(var i in t.on("end",(function(){if(f("wrapped end"),n.decoder&&!n.ended){var t=n.decoder.end();t&&t.length&&e.push(t)}e.push(null)})),t.on("data",(function(i){f("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i||(n.objectMode||i&&i.length)&&(e.push(i)||(r=!0,t.pause()))})),t)void 0===this[i]&&"function"==typeof t[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));for(var o=0;o<g.length;o++)t.on(g[o],this.emit.bind(this,g[o]));return this._read=function(e){f("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=R}).call(this,n(30),n(53))},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){t.exports=n(128).EventEmitter},function(t,e,n){"use strict";var r=n(94);function i(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var n=this,o=this._readableState&&this._readableState.destroyed,a=this._writableState&&this._writableState.destroyed;return o||a?(e?e(t):!t||this._writableState&&this._writableState.errorEmitted||r.nextTick(i,this,t),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,(function(t){!e&&t?(r.nextTick(i,n,t),n._writableState&&(n._writableState.errorEmitted=!0)):e&&e(t)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(t,e,n){"use strict";var r=n(288).Buffer,i=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=c,this.end=u,e=4;break;case"utf8":this.fillLast=s,e=4;break;case"base64":this.text=l,this.end=h,e=3;break;default:return this.write=p,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function a(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function s(t){var e=this.lastTotal-this.lastNeed,n=function(t,e,n){if(128!=(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"�"}}(this,t);return void 0!==n?n:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function c(t,e){if((t.length-e)%2==0){var n=t.toString("utf16le",e);if(n){var r=n.charCodeAt(n.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],n.slice(0,-1)}return n}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function u(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var n=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,n)}return e}function l(t,e){var n=(t.length-e)%3;return 0===n?t.toString("base64",e):(this.lastNeed=3-n,this.lastTotal=3,1===n?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-n))}function h(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function p(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.StringDecoder=o,o.prototype.write=function(t){if(0===t.length)return"";var e,n;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";n=this.lastNeed,this.lastNeed=0}else n=0;return n<t.length?e?e+this.text(t,n):this.text(t,n):e||""},o.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e},o.prototype.text=function(t,e){var n=function(t,e,n){var r=e.length-1;if(r<n)return 0;var i=a(e[r]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(t.lastNeed=i-2),i):--r<n||-2===i?0:(i=a(e[r]))>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=n;var r=t.length-(n-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},o.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},function(t,e,n){"use strict";t.exports=a;var r=n(55),i=n(73);function o(t,e){var n=this._transformState;n.transforming=!1;var r=n.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,null!=e&&this.push(e),r(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function a(t){if(!(this instanceof a))return new a(t);r.call(this,t),this._transformState={afterTransform:o.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",s)}function s(){var t=this;"function"==typeof this._flush?this._flush((function(e,n){c(t,e,n)})):c(this,null,null)}function c(t,e,n){if(e)return t.emit("error",e);if(null!=n&&t.push(n),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}i.inherits=n(61),i.inherits(a,r),a.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},a.prototype._transform=function(t,e,n){throw new Error("_transform() is not implemented")},a.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},a.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},a.prototype._destroy=function(t,e){var n=this;r.prototype._destroy.call(this,t,(function(t){e(t),n.emit("close")}))}},function(t,e,n){var r=n(14),i=n(167)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){e.f=n(15)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.reduce((function(t,e){return Object.keys(e).forEach((function(n){Array.isArray(t[n])?t[n].push(e[n]):t[n]=[e[n]]})),t}),{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(134))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t.barrier,t.entry_spot,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(135))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(t).slice(11,19)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Math.floor(t/60),n=Math.floor(e/60);return[t,e,n,Math.floor(n/24)]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(137))&&r.__esModule?r:{default:r};e.default=function(t,e){return t!==e&&!(0,i.default)(t,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(97))&&r.__esModule?r:{default:r};e.default=function(t){var e=+t.slice(0,-1),n=t.slice(-1);return(0,i.default)(e,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=["t","s","m","h","d"]},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(190)),i=o(n(187));function o(t){return t&&t.__esModule?t:{default:t}}var a=function(t,e,n){if(e<=1)return!1;switch(n){case"s":case"m":return t<60;case"h":return t<24;case"d":default:return!0}};e.default=function(t,e){for(var n=(0,i.default)(t),o=(0,i.default)(e),s=[],c=0;c<n.length;c++){var u=r.default[c+1],l=n[c],h=o[c];a(l,h,u)&&s.push({unit:u,min:l>0?l:1,max:h})}return s}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return!!t&&"t"===t.slice(-1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return+t.toFixed(e).slice(-1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return!t&&t===e||!!t&&!!e&&t.epoch===e.epoch&&t.close===e.close}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return!t&&t===e||!!t&&!!e&&t.epoch===e.epoch&&t.quote===e.quote}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(98))&&r.__esModule?r:{default:r};e.default=function(t){var e=i.default.find((function(e){return e.value===t}));return e?e.text:"Unknown"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(98))&&r.__esModule?r:{default:r};e.default=function(t){var e=i.default.find((function(e){return e.value===t}));return!(!e||!e.barrier)}},function(t,e,n){var r=n(22);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e){t.exports=S},function(t,e){t.exports=k},function(t,e){t.exports=w},function(t,e){t.exports=A},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(143),i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,e){if(!t)throw a(e)},a=function(t){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,c=i+2<t.length,u=c?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,p=(15&s)<<2|u>>6,f=63&u;c||(f=64,a||(p=64)),r.push(n[l],n[h],n[p],n[f])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,c=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==c)throw Error();var u=o<<2|a>>4;if(r.push(u),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==c){var h=s<<6&192|c;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){try{return c.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=l(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var h=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var f="FirebaseError",d=function(t){function e(n,r){var i=t.call(this,r)||this;return i.code=n,i.name=f,Object.setPrototypeOf(i,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(i,y.prototype.create),i}return r.__extends(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?m(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",c=new d(i,s),u=0,l=Object.keys(r);u<l.length;u++){var h=l[u];"_"!==h.slice(-1)&&(h in c&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),c[h]=r[h])}return c},t}();function m(t,e){return t.replace(g,(function(t,n){var r=e[n];return null!=r?r.toString():"<"+n+"?>"}))}var g=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(t){return JSON.parse(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var b=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=v(u(o[0])||""),n=v(u(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}},_=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],c=this.chain_[1],u=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=l^c&(u^l),a=1518500249):(o=c^u^l,a=1859775393):r<60?(o=c&u|l&(c|u),a=2400959708):(o=c^u^l,a=3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=u,u=4294967295&(c<<30|c>>>2),c=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}(),E=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=T),void 0===r.error&&(r.error=T),void 0===r.complete&&(r.complete=T);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T(){}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}return t+" failed: "+r+" argument "}e.CONSTANTS=i,e.Deferred=h,e.ErrorFactory=y,e.FirebaseError=d,e.Sha1=_,e.assert=o,e.assertionError=a,e.async=function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];Promise.resolve(!0).then((function(){t.apply(void 0,n)})).catch((function(t){e&&e(t)}))}},e.base64=c,e.base64Decode=u,e.base64Encode=function(t){var e=s(t);return c.encodeByteArray(e,!0)},e.contains=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},e.decode=b,e.deepCopy=
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return l(void 0,t)},e.deepExtend=l,e.errorPrefix=S,e.getUA=p,e.isAdmin=function(t){var e=b(t).claims;return"object"==typeof e&&!0===e.admin},e.isBrowser=function(){return"object"==typeof self&&self.self===self},e.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},e.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())},e.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},e.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},e.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},e.isValidFormat=function(t){var e=b(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},e.isValidTimestamp=function(t){var e=b(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&n>=r&&n<=i},e.issuedAtTime=function(t){var e=b(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},e.jsonEval=v,e.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.querystring=function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""},e.querystringDecode=function(t){var e={};return t.replace(/^\?/,"").split("&").forEach((function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}})),e},e.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},e.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e},e.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;o(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},e.stringify=function(t){return JSON.stringify(t)},e.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},e.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(t,e,r)+"must be a valid function.")},e.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(t,e,r)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */,e.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(t,e,r)+"must be a valid firebase namespace.")}}).call(this,n(30))},function(t,e,n){"use strict";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */n.r(e),n.d(e,"LogLevel",(function(){return i})),n.d(e,"Logger",(function(){return c})),n.d(e,"setLogLevel",(function(){return u}));var i,o=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(i||(i={}));var a=i.INFO,s=function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(e<t.logLevel)){var a=(new Date).toISOString();switch(e){case i.DEBUG:case i.VERBOSE:console.log.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case i.INFO:console.info.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case i.WARN:console.warn.apply(console,r(["["+a+"]  "+t.name+":"],n));break;case i.ERROR:console.error.apply(console,r(["["+a+"]  "+t.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+e+")")}}},c=function(){function t(t){this.name=t,this._logLevel=a,this._logHandler=s,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in i))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._logHandler.apply(this,r([this,i.ERROR],t))},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u(t){o.forEach((function(e){e.logLevel=t}))}},function(t,e,n){"use strict";var r=n(270),i=n(1),o=n(299),a=n(300);function s(t,e){if("#text"===t.nodeName)return t.value;if("#comment"===t.nodeName)return t.value;var n=t.attrs.reduce((function(t,e){var n=o(e.name);return t[n]="style"===n?a(e.value):e.value,t}),{key:e});if(0===t.childNodes.length)return i.createElement(t.tagName,n);if("script"===t.nodeName)return n.dangerouslySetInnerHTML={__html:t.childNodes[0].value},i.createElement("script",n);var r=t.childNodes.map(s);return i.createElement(t.tagName,n,r)}t.exports=function(t){var e=r.parseFragment(t);if(0===e.childNodes.length)return null;var n=e.childNodes.map(s);return 1===n.length?n[0]:n}},function(t,e,n){var r;r=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";
/**
 * @license
 * JavaScript Interpreter
 *
 * Copyright 2013 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(1),o=n(4),a=function t(e,n){"string"==typeof e&&(e=i.parse(e,t.PARSE_OPTIONS)),this.ast=e,this.initFunc_=n,this.paused_=!1,this.polyfills_=[],this.UNDEFINED=new t.Primitive(void 0,this),this.NULL=new t.Primitive(null,this),this.NAN=new t.Primitive(NaN,this),this.TRUE=new t.Primitive(!0,this),this.FALSE=new t.Primitive(!1,this),this.NUMBER_ZERO=new t.Primitive(0,this),this.NUMBER_ONE=new t.Primitive(1,this),this.STRING_EMPTY=new t.Primitive("",this),this.global=this.createScope(this.ast,null),this.NAN.parent=this.NUMBER,this.TRUE.parent=this.BOOLEAN,this.FALSE.parent=this.BOOLEAN,this.NUMBER_ZERO.parent=this.NUMBER,this.NUMBER_ONE.parent=this.NUMBER,this.STRING_EMPTY.parent=this.STRING,this.ast=i.parse(this.polyfills_.join("\n"),t.PARSE_OPTIONS),this.polyfills_=void 0,this.stripLocations_(this.ast,void 0,void 0),this.stateStack=[{node:this.ast,scope:this.global,thisExpression:this.global,done:!1}],this.run(),this.value=this.UNDEFINED,this.ast=e,this.stateStack=[{node:this.ast,scope:this.global,thisExpression:this.global,done:!1}]};a.PARSE_OPTIONS={ecmaVersion:5},a.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},a.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},a.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},a.prototype.appendCode=function(t){var e=this.stateStack[0];if(!e||"Program"!=e.node.type)throw Error("Expecting original AST to start with a Program node.");if("string"==typeof t&&(t=i.parse(t,a.PARSE_OPTIONS)),!t||"Program"!=t.type)throw Error("Expecting new AST to start with a Program node.");this.populateScope_(t,e.scope);for(var n,r=0;n=t.body[r];r++)e.node.body.push(n);e.done=!1},a.prototype.step=function(){var t=this.stateStack[this.stateStack.length-1];return!(!t||"Program"==t.node.type&&t.done)&&(!!this.paused_||(this["step"+t.node.type](),!!t.node.end||this.step()))},a.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},a.prototype.initGlobalScope=function(t){this.setProperty(t,"Infinity",this.createPrimitive(1/0),a.READONLY_DESCRIPTOR),this.setProperty(t,"NaN",this.NAN,a.READONLY_DESCRIPTOR),this.setProperty(t,"undefined",this.UNDEFINED,a.READONLY_DESCRIPTOR),this.setProperty(t,"window",t,a.READONLY_DESCRIPTOR),this.setProperty(t,"self",t),this.initFunction(t),this.initObject(t),t.parent=this.OBJECT,this.initArray(t),this.initNumber(t),this.initString(t),this.initBoolean(t),this.initDate(t),this.initMath(t),this.initRegExp(t),this.initJSON(t),this.initError(t);var e,n=this;e=function(t){return t=t||n.UNDEFINED,n.createPrimitive(isNaN(t.toNumber()))},this.setProperty(t,"isNaN",this.createNativeFunction(e)),e=function(t){return t=t||n.UNDEFINED,n.createPrimitive(isFinite(t.toNumber()))},this.setProperty(t,"isFinite",this.createNativeFunction(e)),this.setProperty(t,"parseFloat",this.getProperty(this.NUMBER,"parseFloat")),this.setProperty(t,"parseInt",this.getProperty(this.NUMBER,"parseInt"));var r=this.createObject(this.FUNCTION);r.eval=!0,this.setProperty(r,"length",this.NUMBER_ONE,a.READONLY_DESCRIPTOR),this.setProperty(t,"eval",r);for(var i=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],o=0;o<i.length;o++)e=function(t){return function(e){e=(e||n.UNDEFINED).toString();try{e=t(e)}catch(t){n.throwException(n.URI_ERROR,t.message)}return n.createPrimitive(e)}}(i[o][0]),this.setProperty(t,i[o][1],this.createNativeFunction(e));this.initFunc_&&this.initFunc_(this,t)},a.prototype.initFunction=function(t){var e,n=this,r=/^[A-Za-z_$][\w$]*$/;e=function(t){if(this.parent==n.FUNCTION)var e=this;else e=n.createObject(n.FUNCTION);if(arguments.length)var o=arguments[arguments.length-1].toString();else o="";for(var s=[],c=0;c<arguments.length-1;c++){var u=arguments[c].toString();if(!u.match(r))return void n.throwException(n.SYNTAX_ERROR,"Invalid function argument: "+u);s.push(u)}s=s.join(", "),e.parentScope=n.stateStack[0].scope;var l=i.parse("$ = function("+s+") {"+o+"};",a.PARSE_OPTIONS);if(1==l.body.length)return e.node=l.body[0].expression.right,n.setProperty(e,"length",n.createPrimitive(e.node.length),a.READONLY_DESCRIPTOR),e;n.throwException(n.SYNTAX_ERROR,"Invalid code in function body.")},this.FUNCTION=this.createObject(null),this.setProperty(t,"Function",this.FUNCTION),this.FUNCTION.type="function",this.setProperty(this.FUNCTION,"prototype",this.createObject(null)),this.FUNCTION.nativeFunc=e;var o=function(t){if(t.isPrimitive&&!n.getScope().strict)if(t==n.UNDEFINED||t==n.NULL)t=n.global;else{var e=n.createObject(t.parent);e.data=t.data,t=e}return t};e=function(t,e){var r=n.stateStack[n.stateStack.length-1];if(r.func_=this,r.funcThis_=o(t),r.arguments_=[],e)if(n.isa(e,n.ARRAY))for(var i=0;i<e.length;i++)r.arguments_[i]=n.getProperty(e,i);else n.throwException(n.TYPE_ERROR,"CreateListFromArrayLike called on non-object");r.doneArgs_=!0,r.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",e),e=function(t,e){var r=n.stateStack[n.stateStack.length-1];r.func_=this,r.funcThis_=o(t),r.arguments_=[];for(var i=1;i<arguments.length;i++)r.arguments_.push(arguments[i]);r.doneArgs_=!0,r.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",e),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind', {configurable: true, value:","function(oThis) {","if (typeof this !== 'function') {","throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),e=function(){return n.createPrimitive(this.toString())},this.setNativeFunctionPrototype(this.FUNCTION,"toString",e),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(){return n.createPrimitive(this.valueOf())},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",e),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR)},a.prototype.initObject=function(t){var e,n=this;e=function(t){if(!t||t==n.UNDEFINED||t==n.NULL)return this.parent==n.OBJECT?this:n.createObject(n.OBJECT);if(t.isPrimitive){var e=n.createObject(t.parent);return e.data=t.data,e}return t},this.OBJECT=this.createNativeFunction(e),this.setProperty(t,"Object",this.OBJECT),e=function(t){var e=n.createObject(n.ARRAY),r=0;for(var i in t.properties)n.setProperty(e,r,n.createPrimitive(i)),r++;return e},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(t){var e=n.createObject(n.ARRAY),r=0;for(var i in t.properties)t.notEnumerable[i]||(n.setProperty(e,r,n.createPrimitive(i)),r++);return e},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(t,e,r){if(e=(e||n.UNDEFINED).toString(),r instanceof a.Object){if(t.properties[e]||!t.preventExtensions){var i=n.getProperty(r,"value");i==n.UNDEFINED&&(i=null);var o=n.getProperty(r,"get"),s=n.getProperty(r,"set"),c={configurable:n.pseudoToNative(n.getProperty(r,"configurable")),enumerable:n.pseudoToNative(n.getProperty(r,"enumerable")),writable:n.pseudoToNative(n.getProperty(r,"writable")),get:o==n.UNDEFINED?void 0:o,set:s==n.UNDEFINED?void 0:s};return n.setProperty(t,e,i,c),t}n.throwException(n.TYPE_ERROR,"Can't define property "+e+", object is not extensible")}else n.throwException(n.TYPE_ERROR,"Property description must be an object.")},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(Object.prototype, 'defineProperties', {configurable: true, value:","function(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),e=function(t,e){if(!((e=(e||n.UNDEFINED).toString())in t.properties))return n.UNDEFINED;var r=!t.notConfigurable[e],i=!t.notEnumerable[e],o=!t.notWritable[e],a=t.getter[e],s=t.setter[e],c=n.createObject(n.OBJECT);return n.setProperty(c,"configurable",n.createPrimitive(r)),n.setProperty(c,"enumerable",n.createPrimitive(i)),a||s?(n.setProperty(c,"getter",a),n.setProperty(c,"setter",s)):(n.setProperty(c,"writable",n.createPrimitive(o)),n.setProperty(c,"value",n.getProperty(t,e))),c},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(t){return t.parent&&t.parent.properties&&t.parent.properties.prototype?t.parent.properties.prototype:n.NULL},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(t){return n.createPrimitive(!t.preventExtensions)},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(t){return t.isPrimitive||(t.preventExtensions=!0),t},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(){return n.createPrimitive(this.toString())},this.setNativeFunctionPrototype(this.OBJECT,"toString",e),e=function(){return n.createPrimitive(this.toString())},this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",e),e=function(){return n.createPrimitive(this.valueOf())},this.setNativeFunctionPrototype(this.OBJECT,"valueOf",e),e=function(t){if(this!=n.NULL&&this!=n.UNDEFINED)return(t=(t||n.UNDEFINED).toString())in this.properties?n.TRUE:n.FALSE;n.throwException(n.TYPE_ERROR,"Cannot convert undefined or null to object")},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",e),e=function(t){var e=(t=(t||n.UNDEFINED).toString())in this.properties&&!this.notEnumerable[t];return n.createPrimitive(e)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",e),e=function(t){for(;;){if(!(t.parent&&t.parent.properties&&t.parent.properties.prototype))return n.createPrimitive(!1);if((t=t.parent.properties.prototype)==this)return n.createPrimitive(!0)}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",e)},a.prototype.initArray=function(t){var e,n=this,r=function(t,e){var n=t?Math.floor(t.toNumber()):e;return isNaN(n)&&(n=e),n},i=function(t,e){return t.isPrimitive&&e.isPrimitive?t.data===e.data:t===e};e=function(t){if(this.parent==n.ARRAY)var e=this;else e=n.createObject(n.ARRAY);var r=arguments[0];if(1==arguments.length&&"number"==r.type)isNaN(n.arrayIndex(r))&&n.throwException(n.RANGE_ERROR,"Invalid array length"),e.length=r.data;else{for(var i=0;i<arguments.length;i++)e.properties[i]=arguments[i];e.length=i}return e},this.ARRAY=this.createNativeFunction(e),this.setProperty(t,"Array",this.ARRAY),e=function(t){return n.createPrimitive(n.isa(t,n.ARRAY))},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(){if(this.length){var t=this.properties[this.length-1];delete this.properties[this.length-1],this.length--}else t=n.UNDEFINED;return t},this.setNativeFunctionPrototype(this.ARRAY,"pop",e),e=function(t){for(var e=0;e<arguments.length;e++)this.properties[this.length]=arguments[e],this.length++;return n.createPrimitive(this.length)},this.setNativeFunctionPrototype(this.ARRAY,"push",e),e=function(){if(this.length){for(var t=this.properties[0],e=1;e<this.length;e++)this.properties[e-1]=this.properties[e];this.length--,delete this.properties[this.length]}else t=n.UNDEFINED;return t},this.setNativeFunctionPrototype(this.ARRAY,"shift",e),e=function(t){for(var e=this.length-1;e>=0;e--)this.properties[e+arguments.length]=this.properties[e];for(this.length+=arguments.length,e=0;e<arguments.length;e++)this.properties[e]=arguments[e];return n.createPrimitive(this.length)},this.setNativeFunctionPrototype(this.ARRAY,"unshift",e),e=function(){for(var t=0;t<this.length/2;t++){var e=this.properties[this.length-t-1];this.properties[this.length-t-1]=this.properties[t],this.properties[t]=e}return this},this.setNativeFunctionPrototype(this.ARRAY,"reverse",e),e=function(t,e,i){t=(t=r(t,0))<0?Math.max(this.length+t,0):Math.min(t,this.length),e=r(e,1/0),e=Math.min(e,this.length-t);for(var o=n.createObject(n.ARRAY),a=t;a<t+e;a++)o.properties[o.length++]=this.properties[a],this.properties[a]=this.properties[a+e];for(a=t+e;a<this.length-e;a++)this.properties[a]=this.properties[a+e];for(a=this.length-e;a<this.length;a++)delete this.properties[a];for(this.length-=e,a=this.length-1;a>=t;a--)this.properties[a+arguments.length-2]=this.properties[a];for(this.length+=arguments.length-2,a=2;a<arguments.length;a++)this.properties[t+a-2]=arguments[a];return o},this.setNativeFunctionPrototype(this.ARRAY,"splice",e),e=function(t,e){var i=n.createObject(n.ARRAY),o=r(t,0);o<0&&(o=this.length+o),o=Math.max(0,Math.min(o,this.length));var a=r(e,this.length);a<0&&(a=this.length+a),a=Math.max(0,Math.min(a,this.length));for(var s=0,c=o;c<a;c++){var u=n.getProperty(this,c);n.setProperty(i,s++,u)}return i},this.setNativeFunctionPrototype(this.ARRAY,"slice",e),e=function(t){if(t&&void 0!==t.data)e=t.toString();else var e=void 0;for(var r=[],i=0;i<this.length;i++)r[i]=this.properties[i];return n.createPrimitive(r.join(e))},this.setNativeFunctionPrototype(this.ARRAY,"join",e),e=function(t){for(var e=n.createObject(n.ARRAY),r=0,i=0;i<this.length;i++){var o=n.getProperty(this,i);n.setProperty(e,r++,o)}for(i=0;i<arguments.length;i++){var a=arguments[i];if(n.isa(a,n.ARRAY))for(var s=0;s<a.length;s++)o=n.getProperty(a,s),n.setProperty(e,r++,o);else n.setProperty(e,r++,a)}return e},this.setNativeFunctionPrototype(this.ARRAY,"concat",e),e=function(t,e){t=t||n.UNDEFINED;var o=r(e,0);o<0&&(o=this.length+o);for(var a=o=Math.max(0,o);a<this.length;a++){var s=n.getProperty(this,a);if(i(s,t))return n.createPrimitive(a)}return n.createPrimitive(-1)},this.setNativeFunctionPrototype(this.ARRAY,"indexOf",e),e=function(t,e){t=t||n.UNDEFINED;var o=r(e,this.length);o<0&&(o=this.length+o);for(var a=o=Math.min(o,this.length-1);a>=0;a--){var s=n.getProperty(this,a);if(i(s,t))return n.createPrimitive(a)}return n.createPrimitive(-1)},this.setNativeFunctionPrototype(this.ARRAY,"lastIndexOf",e),this.polyfills_.push("Object.defineProperty(Array.prototype, 'every', {configurable: true, value:","function(callbackfn, thisArg) {","if (this == null || typeof callbackfn !== 'function') throw new TypeError;","var T, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","k = 0;","while (k < len) {","if (k in O && !callbackfn.call(T, O[k], k, O)) return false;","k++;","}","return true;","}","});","Object.defineProperty(Array.prototype, 'filter', {configurable: true, value:","function(fun/*, thisArg*/) {","if (this === void 0 || this === null || typeof fun !== 'function') throw new TypeError;","var t = Object(this);","var len = t.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in t) {","var val = t[i];","if (fun.call(thisArg, val, i, t)) res.push(val);","}","}","return res;","}","});","Object.defineProperty(Array.prototype, 'forEach', {configurable: true, value:","function(callback, thisArg) {","if (this == null || typeof callback !== 'function') throw new TypeError;","var T, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","k = 0;","while (k < len) {","if (k in O) callback.call(T, O[k], k, O);","k++;","}","}","});","Object.defineProperty(Array.prototype, 'map', {configurable: true, value:","function(callback, thisArg) {","if (this == null || typeof callback !== 'function') new TypeError;","var T, A, k;","var O = Object(this);","var len = O.length >>> 0;","if (arguments.length > 1) T = thisArg;","A = new Array(len);","k = 0;","while (k < len) {","if (k in O) A[k] = callback.call(T, O[k], k, O);","k++;","}","return A;","}","});","Object.defineProperty(Array.prototype, 'reduce', {configurable: true, value:","function(callback /*, initialValue*/) {","if (this == null || typeof callback !== 'function') throw new TypeError;","var t = Object(this), len = t.length >>> 0, k = 0, value;","if (arguments.length == 2) {","value = arguments[1];","} else {","while (k < len && !(k in t)) k++;","if (k >= len) {","throw new TypeError('Reduce of empty array with no initial value');","}","value = t[k++];","}","for (; k < len; k++) {","if (k in t) value = callback(value, t[k], k, t);","}","return value;","}","});","Object.defineProperty(Array.prototype, 'reduceRight', {configurable: true, value:","function(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw new TypeError;","var t = Object(this), len = t.length >>> 0, k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in t)) k--;","if (k < 0) {","throw new TypeError('Reduce of empty array with no initial value');","}","value = t[k--];","}","for (; k >= 0; k--) {","if (k in t) value = callback(value, t[k], k, t);","}","return value;","}","});","Object.defineProperty(Array.prototype, 'some', {configurable: true, value:","function(fun/*, thisArg*/) {","if (this == null || typeof fun !== 'function') throw new TypeError;","var t = Object(this);","var len = t.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in t && fun.call(thisArg, t[i], i, t)) {","return true;","}","}","return false;","}","});","Object.defineProperty(Array.prototype, 'sort', {configurable: true, value:","function(opt_comp) {","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ?opt_comp(this[j], this[j + 1]) > 0 : this[j] > this[j + 1]) {","var swap = this[j];","this[j] = this[j + 1];","this[j + 1] = swap;","changes++;","}","}","if (changes <= 1) break;","}","return this;","}","});","Object.defineProperty(Array.prototype, 'toLocaleString', {configurable: true, value:","function() {","var out = [];","for (var i = 0; i < this.length; i++) {","out[i] = (this[i] === null || this[i] === undefined) ? '' : this[i].toLocaleString();","}","return out.join(',');","}","});","")},a.prototype.initNumber=function(t){var e,n=this;e=function(t){return t=t?t.toNumber():0,this.parent!=n.NUMBER?n.createPrimitive(t):(this.data=t,this)},this.NUMBER=this.createNativeFunction(e),this.setProperty(t,"Number",this.NUMBER);for(var r=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],i=0;i<r.length;i++)this.setProperty(this.NUMBER,r[i],this.createPrimitive(Number[r[i]]));e=function(t){return t=t||n.UNDEFINED,n.createPrimitive(parseFloat(t.toString()))},this.setProperty(this.NUMBER,"parseFloat",this.createNativeFunction(e)),e=function(t,e){return t=t||n.UNDEFINED,e=e||n.UNDEFINED,n.createPrimitive(parseInt(t.toString(),e.toNumber()))},this.setProperty(this.NUMBER,"parseInt",this.createNativeFunction(e)),e=function(t){t=t?t.toNumber():void 0;var e=this.toNumber();return n.createPrimitive(e.toExponential(t))},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",e),e=function(t){t=t?t.toNumber():void 0;var e=this.toNumber();return n.createPrimitive(e.toFixed(t))},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",e),e=function(t){t=t?t.toNumber():void 0;var e=this.toNumber();return n.createPrimitive(e.toPrecision(t))},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",e),e=function(t){t=t?t.toNumber():10;var e=this.toNumber();return n.createPrimitive(e.toString(t))},this.setNativeFunctionPrototype(this.NUMBER,"toString",e),e=function(t,e){return t=t?n.pseudoToNative(t):void 0,e=e?n.pseudoToNative(e):void 0,n.createPrimitive(this.toNumber().toLocaleString(t,e))},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",e)},a.prototype.initString=function(t){var e,n=this;e=function(t){return t=t?t.toString():"",this.parent!=n.STRING?n.createPrimitive(t):(this.data=t,this)},this.STRING=this.createNativeFunction(e),this.setProperty(t,"String",this.STRING),e=function(t){for(var e=0;e<arguments.length;e++)arguments[e]=arguments[e].toNumber();return n.createPrimitive(String.fromCharCode.apply(String,arguments))},this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR);for(var r=["toLowerCase","toUpperCase","toLocaleLowerCase","toLocaleUpperCase"],i=0;i<r.length;i++)e=function(t){return function(){return n.createPrimitive(t.apply(this))}}(String.prototype[r[i]]),this.setNativeFunctionPrototype(this.STRING,r[i],e);for(e=function(){var t=this.toString();return n.createPrimitive(t.replace(/^\s+|\s+$/g,""))},this.setNativeFunctionPrototype(this.STRING,"trim",e),e=function(){var t=this.toString();return n.createPrimitive(t.replace(/^\s+/g,""))},this.setNativeFunctionPrototype(this.STRING,"trimLeft",e),e=function(){var t=this.toString();return n.createPrimitive(t.replace(/\s+$/g,""))},this.setNativeFunctionPrototype(this.STRING,"trimRight",e),r=["charAt","charCodeAt","substring","slice","substr"],i=0;i<r.length;i++)e=function(t){return function(){for(var e=0;e<arguments.length;e++)arguments[e]=arguments[e].toNumber();return n.createPrimitive(t.apply(this,arguments))}}(String.prototype[r[i]]),this.setNativeFunctionPrototype(this.STRING,r[i],e);e=function(t,e){var r=this.toString();return t=(t||n.UNDEFINED).toString(),e=e?e.toNumber():void 0,n.createPrimitive(r.indexOf(t,e))},this.setNativeFunctionPrototype(this.STRING,"indexOf",e),e=function(t,e){var r=this.toString();return t=(t||n.UNDEFINED).toString(),e=e?e.toNumber():void 0,n.createPrimitive(r.lastIndexOf(t,e))},this.setNativeFunctionPrototype(this.STRING,"lastIndexOf",e),e=function(t,e,r){return t=(t||n.UNDEFINED).toString(),e=e?n.pseudoToNative(e):void 0,r=r?n.pseudoToNative(r):void 0,n.createPrimitive(this.toString().localeCompare(t,e,r))},this.setNativeFunctionPrototype(this.STRING,"localeCompare",e),e=function(t,e){var r=this.toString();t=t?n.isa(t,n.REGEXP)?t.data:t.toString():void 0,e=e?e.toNumber():void 0;for(var i=r.split(t,e),o=n.createObject(n.ARRAY),a=0;a<i.length;a++)n.setProperty(o,a,n.createPrimitive(i[a]));return o},this.setNativeFunctionPrototype(this.STRING,"split",e),e=function(t){for(var e=this.toString(),r=0;r<arguments.length;r++)e+=arguments[r].toString();return n.createPrimitive(e)},this.setNativeFunctionPrototype(this.STRING,"concat",e),e=function(t){var e=this.toString();t=t?t.data:void 0;var r=e.match(t);if(null===r)return n.NULL;for(var i=n.createObject(n.ARRAY),o=0;o<r.length;o++)n.setProperty(i,o,n.createPrimitive(r[o]));return i},this.setNativeFunctionPrototype(this.STRING,"match",e),e=function(t){var e=this.toString();return t=t?t.data:void 0,n.createPrimitive(e.search(t))},this.setNativeFunctionPrototype(this.STRING,"search",e),e=function(t,e){var r=this.toString();return t=(t||n.UNDEFINED).valueOf(),e=(e||n.UNDEFINED).toString(),n.createPrimitive(r.replace(t,e))},this.setNativeFunctionPrototype(this.STRING,"replace",e)},a.prototype.initBoolean=function(t){var e,n=this;e=function(t){return t=!!t&&t.toBoolean(),this.parent!=n.BOOLEAN?n.createPrimitive(t):(this.data=t,this)},this.BOOLEAN=this.createNativeFunction(e),this.setProperty(t,"Boolean",this.BOOLEAN)},a.prototype.initDate=function(t){var e,n=this;e=function(t,e,r,i,o,a,s){if(this.parent!=n.DATE)return n.createPrimitive(Date());var c=this;if(arguments.length)if(1!=arguments.length||"string"!=t.type&&!n.isa(t,n.STRING)){for(var u=[null],l=0;l<arguments.length;l++)u[l+1]=arguments[l]?arguments[l].toNumber():void 0;c.data=new(Function.prototype.bind.apply(Date,u))}else c.data=new Date(t.toString());else c.data=new Date;return c},this.DATE=this.createNativeFunction(e),this.setProperty(t,"Date",this.DATE),e=function(){return n.createPrimitive((new Date).getTime())},this.setProperty(this.DATE,"now",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(t){return t=t?t.toString():void 0,n.createPrimitive(Date.parse(t))},this.setProperty(this.DATE,"parse",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR),e=function(t,e,r,i,o,a,s){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u]?arguments[u].toNumber():void 0;return n.createPrimitive(Date.UTC.apply(Date,c))},this.setProperty(this.DATE,"UTC",this.createNativeFunction(e),a.NONENUMERABLE_DESCRIPTOR);for(var r=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],i=0;i<r.length;i++)e=function(t){return function(e){for(var r=[],i=0;i<arguments.length;i++)r[i]=n.pseudoToNative(arguments[i]);return n.createPrimitive(this.data[t].apply(this.data,r))}}(r[i]),this.setNativeFunctionPrototype(this.DATE,r[i],e)},a.prototype.initMath=function(t){var e=this,n=this.createObject(this.OBJECT);this.setProperty(t,"Math",n);for(var r=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],i=0;i<r.length;i++)this.setProperty(n,r[i],this.createPrimitive(Math[r[i]]),a.READONLY_NONENUMERABLE_DESCRIPTOR);var o=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"];for(i=0;i<o.length;i++){var s=function(t){return function(){for(var n=0;n<arguments.length;n++)arguments[n]=arguments[n].toNumber();return e.createPrimitive(t.apply(Math,arguments))}}(Math[o[i]]);this.setProperty(n,o[i],this.createNativeFunction(s),a.NONENUMERABLE_DESCRIPTOR)}},a.prototype.initRegExp=function(t){var e,n=this;e=function(t,e){if(this.parent==n.REGEXP)var r=this;else r=n.createObject(n.REGEXP);return t=t?t.toString():"",e=e?e.toString():"",n.populateRegExp_(r,new RegExp(t,e))},this.REGEXP=this.createNativeFunction(e),this.setProperty(t,"RegExp",this.REGEXP),this.setProperty(this.REGEXP.properties.prototype,"global",this.UNDEFINED,a.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",this.UNDEFINED,a.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",this.UNDEFINED,a.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source",this.createPrimitive("(?:)"),a.READONLY_NONENUMERABLE_DESCRIPTOR),e=function(t){return t=t.toString(),n.createPrimitive(this.data.test(t))},this.setNativeFunctionPrototype(this.REGEXP,"test",e),e=function(t){t=t.toString(),this.data.lastIndex=n.getProperty(this,"lastIndex").toNumber();var e=this.data.exec(t);if(n.setProperty(this,"lastIndex",n.createPrimitive(this.data.lastIndex)),e){for(var r=n.createObject(n.ARRAY),i=0;i<e.length;i++)n.setProperty(r,i,n.createPrimitive(e[i]));return n.setProperty(r,"index",n.createPrimitive(e.index)),n.setProperty(r,"input",n.createPrimitive(e.input)),r}return n.NULL},this.setNativeFunctionPrototype(this.REGEXP,"exec",e)},a.prototype.initJSON=function(t){var e=this,n=e.createObject(this.OBJECT);this.setProperty(t,"JSON",n);var r=function(t){try{var n=JSON.parse(t.toString())}catch(t){return void e.throwException(e.SYNTAX_ERROR,t.message)}return e.nativeToPseudo(n)};this.setProperty(n,"parse",this.createNativeFunction(r)),r=function(t){var n=e.pseudoToNative(t);return e.createPrimitive(JSON.stringify(n))},this.setProperty(n,"stringify",this.createNativeFunction(r))},a.prototype.initError=function(t){var e=this;this.ERROR=this.createNativeFunction((function(t){if(this.parent==e.ERROR)var n=this;else n=e.createObject(e.ERROR);return t&&e.setProperty(n,"message",e.createPrimitive(String(t)),a.NONENUMERABLE_DESCRIPTOR),n})),this.setProperty(t,"Error",this.ERROR),this.setProperty(this.ERROR.properties.prototype,"message",this.STRING_EMPTY,a.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name",this.createPrimitive("Error"),a.NONENUMERABLE_DESCRIPTOR);var n=function(n){var r=e.createNativeFunction((function(t){if(e.isa(this.parent,e.ERROR))var n=this;else n=e.createObject(r);return t&&e.setProperty(n,"message",e.createPrimitive(String(t)),a.NONENUMERABLE_DESCRIPTOR),n}));return e.setProperty(r,"prototype",e.createObject(e.ERROR)),e.setProperty(r.properties.prototype,"name",e.createPrimitive(n),a.NONENUMERABLE_DESCRIPTOR),e.setProperty(t,n,r),r};this.EVAL_ERROR=n("EvalError"),this.RANGE_ERROR=n("RangeError"),this.REFERENCE_ERROR=n("ReferenceError"),this.SYNTAX_ERROR=n("SyntaxError"),this.TYPE_ERROR=n("TypeError"),this.URI_ERROR=n("URIError")},a.prototype.isa=function(t,e){if(!t||!e)return!1;for(;t.parent!=e;){if(!t.parent||!t.parent.properties.prototype)return!1;t=t.parent.properties.prototype}return!0},a.prototype.comp=function(t,e){if(t.isPrimitive&&"number"==typeof t.data&&isNaN(t.data)||e.isPrimitive&&"number"==typeof e.data&&isNaN(e.data))return NaN;if(t===e)return 0;var n=t.isPrimitive?t.data:t.toString(),r=e.isPrimitive?e.data:e.toString();return n<r?-1:n>r?1:(t.isPrimitive||e.isPrimitive)&&n==r?0:NaN},a.prototype.arrayIndex=function(t){return t=Number(t),!isFinite(t)||t!=Math.floor(t)||t<0||t>=Math.pow(2,32)?NaN:t},(a.Primitive=function(t,e){var n=void 0===t?"undefined":r(t);this.data=t,this.type=n,"number"==n?this.parent=e.NUMBER:"string"==n?this.parent=e.STRING:"boolean"==n&&(this.parent=e.BOOLEAN)}).prototype.data=void 0,a.Primitive.prototype.type="undefined",a.Primitive.prototype.parent=null,a.Primitive.prototype.isPrimitive=!0,a.Primitive.prototype.toBoolean=function(){return Boolean(this.data)},a.Primitive.prototype.toNumber=function(){return Number(this.data)},a.Primitive.prototype.toString=function(){return String(this.data)},a.Primitive.prototype.valueOf=function(){return this.data},a.prototype.createPrimitive=function(t){return void 0===t?this.UNDEFINED:null===t?this.NULL:!0===t?this.TRUE:!1===t?this.FALSE:0===t?this.NUMBER_ZERO:1===t?this.NUMBER_ONE:""===t?this.STRING_EMPTY:t instanceof RegExp?this.populateRegExp_(this.createObject(this.REGEXP),t):new a.Primitive(t,this)},(a.Object=function(t){this.notConfigurable=Object.create(null),this.notEnumerable=Object.create(null),this.notWritable=Object.create(null),this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.parent=t}).prototype.type="object",a.Object.prototype.parent=null,a.Object.prototype.isPrimitive=!1,a.Object.prototype.data=void 0,a.Object.prototype.toBoolean=function(){return!0},a.Object.prototype.toNumber=function(){return Number(void 0===this.data?this.toString():this.data)},a.Object.prototype.toString=function(){return void 0===this.data?"["+this.type+"]":String(this.data)},a.Object.prototype.valueOf=function(){return void 0===this.data?this:this.data},a.prototype.createObject=function(t){var e=new a.Object(t);if(this.isa(e,this.FUNCTION)&&(e.type="function",this.setProperty(e,"prototype",this.createObject(this.OBJECT||null))),this.isa(e,this.ARRAY)&&(e.length=0,e.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this.properties[e];t[e]=!n||n.isPrimitive&&(null===n.data||void 0===n.data)?"":n.toString()}return t.join(",")}),this.isa(e,this.ERROR)){var n=this;e.toString=function(){var t=n.getProperty(this,"name").toString(),e=n.getProperty(this,"message").toString();return e?t+": "+e:t}}return e},a.prototype.populateRegExp_=function(t,e){return t.data=e,this.setProperty(t,"lastIndex",this.createPrimitive(e.lastIndex),a.NONENUMERABLE_DESCRIPTOR),this.setProperty(t,"source",this.createPrimitive(e.source),a.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(t,"global",this.createPrimitive(e.global),a.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(t,"ignoreCase",this.createPrimitive(e.ignoreCase),a.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(t,"multiline",this.createPrimitive(e.multiline),a.READONLY_NONENUMERABLE_DESCRIPTOR),t.toString=function(){return String(this.data)},t.valueOf=function(){return this.data},t},a.prototype.createFunction=function(t,e){var n=this.createObject(this.FUNCTION);return n.parentScope=e,n.node=t,this.setProperty(n,"length",this.createPrimitive(n.node.params.length),a.READONLY_DESCRIPTOR),n},a.prototype.createNativeFunction=function(t){var e=this.createObject(this.FUNCTION);return e.nativeFunc=t,this.setProperty(e,"length",this.createPrimitive(t.length),a.READONLY_DESCRIPTOR),e},a.prototype.createAsyncFunction=function(t){var e=this.createObject(this.FUNCTION);return e.asyncFunc=t,this.setProperty(e,"length",this.createPrimitive(t.length),a.READONLY_DESCRIPTOR),e},a.prototype.nativeToPseudo=function(t){if("boolean"==typeof t||"number"==typeof t||"string"==typeof t||null==t||t instanceof RegExp)return this.createPrimitive(t);if(t instanceof Function){var e=this;return this.createNativeFunction((function(){return e.nativeToPseudo(t.apply(e,Array.prototype.slice.call(arguments).map((function(t){return e.pseudoToNative(t)}))))}))}var n;if(t instanceof Array){n=this.createObject(this.ARRAY);for(var r=0;r<t.length;r++)this.setProperty(n,r,this.nativeToPseudo(t[r]))}else for(var i in n=this.createObject(this.OBJECT),t)this.setProperty(n,i,this.nativeToPseudo(t[i]));return n},a.prototype.pseudoToNative=function(t){if(t.isPrimitive||this.isa(t,this.NUMBER)||this.isa(t,this.STRING)||this.isa(t,this.BOOLEAN))return t.data;var e;if(this.isa(t,this.ARRAY)){e=[];for(var n=0;n<t.length;n++)e[n]=this.pseudoToNative(t.properties[n])}else for(var r in e={},t.properties)e[r]=this.pseudoToNative(t.properties[r]);return e},a.prototype.getProperty=function(t,e){if(e=e.toString(),t==this.UNDEFINED||t==this.NULL)return this.throwException(this.TYPE_ERROR,"Cannot read property '"+e+"' of "+t),null;if(this.isa(t,this.STRING)){if("length"==e)return this.createPrimitive(t.data.length);var n=this.arrayIndex(e);if(!isNaN(n)&&n<t.data.length)return this.createPrimitive(t.data[n])}else if(this.isa(t,this.ARRAY)&&"length"==e)return this.createPrimitive(t.length);for(;;){if(t.properties&&e in t.properties){var r=t.getter[e];return r?(r.isGetter=!0,r):t.properties[e]}if(!(t.parent&&t.parent.properties&&t.parent.properties.prototype))break;t=t.parent.properties.prototype}return this.UNDEFINED},a.prototype.hasProperty=function(t,e){if(e=e.toString(),t.isPrimitive)throw TypeError("Primitive data type has no properties");if("length"==e&&(this.isa(t,this.STRING)||this.isa(t,this.ARRAY)))return!0;if(this.isa(t,this.STRING)){var n=this.arrayIndex(e);if(!isNaN(n)&&n<t.data.length)return!0}for(;;){if(t.properties&&e in t.properties)return!0;if(!(t.parent&&t.parent.properties&&t.parent.properties.prototype))break;t=t.parent.properties.prototype}return!1},a.prototype.setProperty=function(t,e,n,i){if(e=e.toString(),i&&t.notConfigurable[e]&&this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+e),"object"!=(void 0===n?"undefined":r(n)))throw Error("Failure to wrap a value: "+n);t!=this.UNDEFINED&&t!=this.NULL||this.throwException(this.TYPE_ERROR,"Cannot set property '"+e+"' of "+t),i&&(i.get||i.set)&&(n||void 0!==i.writable)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var o=!this.stateStack||this.getScope().strict;if(t.isPrimitive)o&&this.throwException(this.TYPE_ERROR,"Can't create property '"+e+"' on '"+t.data+"'");else{if(this.isa(t,this.STRING)){var a=this.arrayIndex(e);if("length"==e||!isNaN(a)&&a<t.data.length)return void(o&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+e+"' of String '"+t.data+"'"))}if(this.isa(t,this.ARRAY)){var s;if("length"==e){var c=this.arrayIndex(n.toNumber());if(isNaN(c)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),c<t.length)for(s in t.properties)s=this.arrayIndex(s),!isNaN(s)&&c<=s&&delete t.properties[s];return void(t.length=c)}isNaN(s=this.arrayIndex(e))||(t.length=Math.max(t.length,s+1))}if(t.properties[e]||!t.preventExtensions)if(i){t.properties[e]=n,i.configurable||(t.notConfigurable[e]=!0);var u=i.get;u?t.getter[e]=u:delete t.getter[e];var l=i.set;l?t.setter[e]=l:delete t.setter[e],i.enumerable?delete t.notEnumerable[e]:t.notEnumerable[e]=!0,u||l?(delete t.notWritable[e],t.properties[e]=this.UNDEFINED):i.writable?delete t.notWritable[e]:t.notWritable[e]=!0}else{for(var h=t;;){if(h.setter&&h.setter[e])return h.setter[e];if(!(h.parent&&h.parent.properties&&h.parent.properties.prototype))break;h=h.parent.properties.prototype}t.getter&&t.getter[e]?o&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+e+"' of object '"+t+"' which only has a getter"):t.notWritable[e]?o&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+e+"' of object '"+t+"'"):t.properties[e]=n}else o&&this.throwException(this.TYPE_ERROR,"Can't add property "+e+", object is not extensible")}},a.prototype.setNativeFunctionPrototype=function(t,e,n){this.setProperty(t.properties.prototype,e,this.createNativeFunction(n),a.NONENUMERABLE_DESCRIPTOR)},a.prototype.deleteProperty=function(t,e){return e=e.toString(),!(t.isPrimitive||t.notWritable[e]||"length"==e&&this.isa(t,this.ARRAY)||!delete t.properties[e])},a.prototype.getScope=function(){for(var t=this.stateStack.length-1;t>=0;t--)if(this.stateStack[t].scope)return this.stateStack[t].scope;throw Error("No scope found.")},a.prototype.createScope=function(t,e){var n=this.createObject(null);if(n.parentScope=e,e||this.initGlobalScope(n),this.populateScope_(t,n),n.strict=!1,e&&e.strict)n.strict=!0;else{var r=t.body&&t.body[0];r&&r.expression&&"Literal"==r.expression.type&&"use strict"==r.expression.value&&(n.strict=!0)}return n},a.prototype.createSpecialScope=function(t,e){if(!t)throw Error("parentScope required");var n=e||this.createObject(null);return n.parentScope=t,n.strict=t.strict,n},a.prototype.getValueFromScope=function(t){for(var e=this.getScope(),n=t.toString();e&&e!=this.global;){if(n in e.properties)return e.properties[n];e=e.parentScope}if(e==this.global&&this.hasProperty(e,n))return this.getProperty(e,n);var r=this.stateStack[this.stateStack.length-1].node;return"UnaryExpression"==r.type&&"typeof"==r.operator?this.UNDEFINED:(this.throwException(this.REFERENCE_ERROR,n+" is not defined"),null)},a.prototype.setValueToScope=function(t,e){for(var n=this.getScope(),r=t.toString();n&&n!=this.global;){if(r in n.properties)return void(n.properties[r]=e);n=n.parentScope}if(n==this.global&&(!n.strict||this.hasProperty(n,r)))return this.setProperty(n,r,e);this.throwException(this.REFERENCE_ERROR,r+" is not defined")},a.prototype.populateScope_=function(t,e){if("VariableDeclaration"==t.type)for(var n=0;n<t.declarations.length;n++)this.setProperty(e,t.declarations[n].id.name,this.UNDEFINED);else{if("FunctionDeclaration"==t.type)return void this.setProperty(e,t.id.name,this.createFunction(t,e));if("FunctionExpression"==t.type)return;if("ExpressionStatement"==t.type)return}var i=t.constructor;for(var o in t){var a=t[o];if(a&&"object"==(void 0===a?"undefined":r(a)))if(a instanceof Array)for(n=0;n<a.length;n++)a[n]&&a[n].constructor==i&&this.populateScope_(a[n],e);else a.constructor==i&&this.populateScope_(a,e)}},a.prototype.stripLocations_=function(t,e,n){for(var i in e?t.start=e:delete t.start,n?t.end=n:delete t.end,t)if(t.hasOwnProperty(i)){var o=t[i];o&&"object"==(void 0===o?"undefined":r(o))&&this.stripLocations_(o,e,n)}},a.prototype.getValue=function(t){if(t instanceof Array){var e=t[0],n=t[1];return this.getProperty(e,n)}return this.getValueFromScope(t)},a.prototype.setValue=function(t,e){if(t instanceof Array){var n=t[0],r=t[1];return this.setProperty(n,r,e)}return this.setValueToScope(t,e)},a.prototype.throwException=function(t,e){if(void 0===e)var n=t;else n=this.createObject(t),this.setProperty(n,"message",this.createPrimitive(e),a.NONENUMERABLE_DESCRIPTOR);this.executeException(n)},a.prototype.executeException=function(t){do{this.stateStack.pop();var e=this.stateStack[this.stateStack.length-1];if("TryStatement"==e.node.type)return void(e.throwValue=t)}while(e&&"Program"!=e.node.type);var n;if(this.isa(t,this.ERROR)){var r={EvalError:EvalError,RangeError:RangeError,ReferenceError:ReferenceError,SyntaxError:SyntaxError,TypeError:TypeError,URIError:URIError},i=this.getProperty(t,"name").toString(),o=this.getProperty(t,"message").valueOf();n=(r[i]||Error)(o)}else n=t.toString();throw n},a.prototype.pushGetter_=function(t,e){var n=e instanceof Array?e[0]:e;this.stateStack.push({node:{type:"CallExpression"},doneCallee_:!0,funcThis_:n,func_:t,doneArgs_:!0,arguments_:[]})},a.prototype.pushSetter_=function(t,e,n){var r=e instanceof Array?e[0]:this.global;this.stateStack.push({node:{type:"CallExpression"},doneCallee_:!0,funcThis_:r,func_:t,doneArgs_:!0,arguments_:[n]})},a.prototype.takeStateSnapshot=function(){var t=o(this.stateStack,void 0,void 0,void 0,!0);return this.global=t[0].scope,t},a.prototype.restoreStateSnapshot=function(t){this.stateStack=o(t,void 0,void 0,void 0,!0),this.global=this.stateStack[0].scope,this.initFunc_(this,this.global)},a.prototype.stepArrayExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.n_||0;t.array_?t.value&&this.setProperty(t.array_,n-1,t.value):t.array_=this.createObject(this.ARRAY),n<e.elements.length?(t.n_=n+1,e.elements[n]?this.stateStack.push({node:e.elements[n]}):t.value=void 0):(t.array_.length=t.n_||0,this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=t.array_)},a.prototype.stepAssignmentExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(!t.doneLeft_)return t.doneLeft_=!0,void this.stateStack.push({node:e.left,components:!0});if(!t.doneRight_){if(t.leftSide_||(t.leftSide_=t.value),t.doneGetter_&&(t.leftValue_=t.value),!t.doneGetter_&&"="!=e.operator&&(t.leftValue_=this.getValue(t.leftSide_),t.leftValue_.isGetter)){t.leftValue_.isGetter=!1,t.doneGetter_=!0;var n=t.leftValue_;return void this.pushGetter_(n,t.leftSide_)}return t.doneRight_=!0,void this.stateStack.push({node:e.right})}if(t.doneSetter_)return this.stateStack.pop(),void(this.stateStack[this.stateStack.length-1].value=t.doneSetter_);var r,i=t.value;if("="==e.operator)r=i;else{var o,a,s=i,c=t.leftValue_.toNumber(),u=s.toNumber();if("+="==e.operator)"string"==t.leftValue_.type||"string"==s.type?(o=t.leftValue_.toString(),a=s.toString()):(o=c,a=u),r=o+a;else if("-="==e.operator)r=c-u;else if("*="==e.operator)r=c*u;else if("/="==e.operator)r=c/u;else if("%="==e.operator)r=c%u;else if("<<="==e.operator)r=c<<u;else if(">>="==e.operator)r=c>>u;else if(">>>="==e.operator)r=c>>>u;else if("&="==e.operator)r=c&u;else if("^="==e.operator)r=c^u;else{if("|="!=e.operator)throw SyntaxError("Unknown assignment expression: "+e.operator);r=c|u}r=this.createPrimitive(r)}var l=this.setValue(t.leftSide_,r);if(l)return t.doneSetter_=r,void this.pushSetter_(l,t.leftSide_,r);this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=r},a.prototype.stepBinaryExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(!t.doneLeft_)return t.doneLeft_=!0,void this.stateStack.push({node:e.left});if(!t.doneRight_)return t.doneRight_=!0,t.leftValue_=t.value,void this.stateStack.push({node:e.right});this.stateStack.pop();var n,r=t.leftValue_,i=t.value,o=this.comp(r,i);if("=="==e.operator||"!="==e.operator)n=r.isPrimitive&&i.isPrimitive?r.data==i.data:0===o,"!="==e.operator&&(n=!n);else if("==="==e.operator||"!=="==e.operator)n=r.isPrimitive&&i.isPrimitive?r.data===i.data:r===i,"!=="==e.operator&&(n=!n);else if(">"==e.operator)n=1==o;else if(">="==e.operator)n=1==o||0===o;else if("<"==e.operator)n=-1==o;else if("<="==e.operator)n=-1==o||0===o;else if("+"==e.operator)n=(a=r.isPrimitive?r.data:r.toString())+(s=i.isPrimitive?i.data:i.toString());else if("in"==e.operator)n=this.hasProperty(i,r);else if("instanceof"==e.operator)this.isa(i,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"Expecting a function in instanceof check"),n=this.isa(r,i);else{var a=r.toNumber(),s=i.toNumber();if("-"==e.operator)n=a-s;else if("*"==e.operator)n=a*s;else if("/"==e.operator)n=a/s;else if("%"==e.operator)n=a%s;else if("&"==e.operator)n=a&s;else if("|"==e.operator)n=a|s;else if("^"==e.operator)n=a^s;else if("<<"==e.operator)n=a<<s;else if(">>"==e.operator)n=a>>s;else{if(">>>"!=e.operator)throw SyntaxError("Unknown binary operator: "+e.operator);n=a>>>s}}this.stateStack[this.stateStack.length-1].value=this.createPrimitive(n)},a.prototype.stepBlockStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.n_||0;e.body[n]?(t.n_=n+1,this.stateStack.push({node:e.body[n]})):this.stateStack.pop()},a.prototype.stepBreakStatement=function(){var t=this.stateStack.pop(),e=t.node,n=null;for(e.label&&(n=e.label.name),t=this.stateStack.pop();t&&"CallExpression"!=t.node.type&&"NewExpression"!=t.node.type;){if(n?n==t.label:t.isLoop||t.isSwitch)return;t=this.stateStack.pop()}throw SyntaxError("Illegal break statement")},a.prototype.stepCallExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(!t.doneCallee_)return t.doneCallee_=!0,void this.stateStack.push({node:e.callee,components:!0});if(!t.func_){if("function"==t.value.type)t.func_=t.value;else{if(t.func_=this.getValue(t.value),t.func_.isGetter)return t.func_.isGetter=!1,this.pushGetter_(t.func_,t.value),void(t.func_=null);if(!t.func_)return;if("function"!=t.func_.type)return void this.throwException(this.TYPE_ERROR,(t.func_&&t.func_.type)+" is not a function")}"NewExpression"==t.node.type?(t.funcThis_=this.createObject(t.func_),t.isConstructor_=!0):t.value.length?t.funcThis_=t.value[0]:t.funcThis_=this.getScope().strict?this.UNDEFINED:this.global,t.arguments_=[],t.n_=0}if(!t.doneArgs_){if(0!=t.n_&&t.arguments_.push(t.value),e.arguments[t.n_])return this.stateStack.push({node:e.arguments[t.n_]}),void t.n_++;t.doneArgs_=!0}if(t.doneExec_)this.stateStack.pop(),t.isConstructor_&&"object"!==t.value.type?this.stateStack[this.stateStack.length-1].value=t.funcThis_:this.stateStack[this.stateStack.length-1].value=t.value;else if(t.doneExec_=!0,t.func_.node){for(var n=this.createScope(t.func_.node.body,t.func_.parentScope),r=0;r<t.func_.node.params.length;r++){var o=this.createPrimitive(t.func_.node.params[r].name),s=t.arguments_.length>r?t.arguments_[r]:this.UNDEFINED;this.setProperty(n,o,s)}var c=this.createObject(this.ARRAY);for(r=0;r<t.arguments_.length;r++)this.setProperty(c,this.createPrimitive(r),t.arguments_[r]);this.setProperty(n,"arguments",c);var u={node:t.func_.node.body,scope:n,thisExpression:t.funcThis_};this.stateStack.push(u),t.value=this.UNDEFINED}else if(t.func_.nativeFunc)t.value=t.func_.nativeFunc.apply(t.funcThis_,t.arguments_);else{if(t.func_.asyncFunc){var l=this,h=t.arguments_.concat((function(e){t.value=e||l.UNDEFINED,l.paused_=!1}));return t.func_.asyncFunc.apply(t.funcThis_,h),void(this.paused_=!0)}if(t.func_.eval){var p=t.arguments_[0];if(p)if(p.isPrimitive){var f=i.parse(p.toString(),a.PARSE_OPTIONS);t={node:{type:"EvalProgram_",body:f.body}},this.stripLocations_(t.node,e.start,e.end),n=this.getScope(),this.populateScope_(f,n),this.stateStack.push(t)}else t.value=p;else t.value=this.UNDEFINED}else this.throwException(this.TYPE_ERROR,"function is not a function")}},a.prototype.stepCatchClause=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(t.done_)this.stateStack.pop();else{var n;if(t.done_=!0,e.param){n=this.createSpecialScope(this.getScope());var r=this.createPrimitive(e.param.name);this.setProperty(n,r,t.throwValue)}this.stateStack.push({node:e.body,scope:n})}},a.prototype.stepConditionalExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.mode_||0;if(0==e)return t.mode_=1,void this.stateStack.push({node:t.node.test});if(1==e){t.mode_=2;var n=t.value.toBoolean();if(n&&t.node.consequent)return void this.stateStack.push({node:t.node.consequent});if(!n&&t.node.alternate)return void this.stateStack.push({node:t.node.alternate});this.value=this.UNDEFINED}this.stateStack.pop(),"ConditionalExpression"==t.node.type&&(this.stateStack[this.stateStack.length-1].value=t.value)},a.prototype.stepContinueStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=null;for(t.node.label&&(e=t.node.label.name);t&&"CallExpression"!=t.node.type&&"NewExpression"!=t.node.type;){if(t.isLoop&&(!e||e==t.label))return;this.stateStack.pop(),t=this.stateStack[this.stateStack.length-1]}throw SyntaxError("Illegal continue statement")},a.prototype.stepDoWhileStatement=function(){var t=this.stateStack[this.stateStack.length-1];"DoWhileStatement"==t.node.type&&void 0===t.test&&(t.value=this.TRUE,t.test_=!0),t.test_?t.value.toBoolean()?t.node.body&&(t.test_=!1,t.isLoop=!0,this.stateStack.push({node:t.node.body})):this.stateStack.pop():(t.test_=!0,this.stateStack.push({node:t.node.test}))},a.prototype.stepEmptyStatement=function(){this.stateStack.pop()},a.prototype.stepEvalProgram_=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.n_||0;e.body[n]?(t.n_=n+1,this.stateStack.push({node:e.body[n]})):(this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=this.value)},a.prototype.stepExpressionStatement=function(){var t=this.stateStack[this.stateStack.length-1];t.done_?(this.stateStack.pop(),this.value=t.value):(t.done_=!0,this.stateStack.push({node:t.node.expression}))},a.prototype.stepForInStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(!t.doneVariable_){t.doneVariable_=!0;var n=e.left;return"VariableDeclaration"==n.type&&(n=n.declarations[0].id),void this.stateStack.push({node:n,components:!0})}if(!t.doneObject_)return t.doneObject_=!0,t.variable_=t.value,void this.stateStack.push({node:e.right});void 0===t.iterator_&&(t.object_=t.value,t.iterator_=0);var r=null;t:do{var i=t.iterator_;for(var o in t.object_.properties)if(!t.object_.notEnumerable[o]){if(0==i){r=o;break t}i--}t.object_=t.object_.parent&&t.object_.parent.properties.prototype,t.iterator_=0}while(t.object_);if(null===r)this.stateStack.pop();else{if(!t.doneSetter_){var a=this.createPrimitive(r),s=this.setValue(t.variable_,a);if(s)return t.doneSetter_=!0,void this.pushSetter_(s,t.variable_,a)}t.doneSetter_=!1,e.body&&(t.isLoop=!0,this.stateStack.push({node:e.body})),t.iterator_++}},a.prototype.stepForStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.mode_||0;0==n?(t.mode_=1,e.init&&this.stateStack.push({node:e.init})):1==n?(t.mode_=2,e.test&&this.stateStack.push({node:e.test})):2==n?(t.mode_=3,e.test&&t.value&&!t.value.toBoolean()?this.stateStack.pop():e.body&&(t.isLoop=!0,this.stateStack.push({node:e.body}))):3==n&&(t.mode_=1,e.update&&this.stateStack.push({node:e.update}))},a.prototype.stepFunctionDeclaration=function(){this.stateStack.pop()},a.prototype.stepFunctionExpression=function(){var t=this.stateStack.pop();this.stateStack[this.stateStack.length-1].value=this.createFunction(t.node,this.getScope())},a.prototype.stepIdentifier=function(){var t=this.stateStack.pop(),e=t.node.name,n=this.createPrimitive(e),r=t.components?n:this.getValueFromScope(n);if(r&&r.isGetter){r.isGetter=!1;for(var i=this.getScope();!this.hasProperty(i,e);)i=i.parentScope;var o=r;this.pushGetter_(o,this.global)}else this.stateStack[this.stateStack.length-1].value=r},a.prototype.stepIfStatement=a.prototype.stepConditionalExpression,a.prototype.stepLabeledStatement=function(){var t=this.stateStack.pop();this.stateStack.push({node:t.node.body,label:t.node.label.name})},a.prototype.stepLiteral=function(){var t=this.stateStack.pop();this.stateStack[this.stateStack.length-1].value=this.createPrimitive(t.node.value)},a.prototype.stepLogicalExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if("&&"!=e.operator&&"||"!=e.operator)throw SyntaxError("Unknown logical operator: "+e.operator);t.doneLeft_?t.doneRight_?(this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=t.value):"&&"==e.operator&&!t.value.toBoolean()||"||"==e.operator&&t.value.toBoolean()?(this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=t.value):(t.doneRight_=!0,this.stateStack.push({node:e.right})):(t.doneLeft_=!0,this.stateStack.push({node:e.left}))},a.prototype.stepMemberExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(t.doneObject_)if(t.doneProperty_)if(this.stateStack.pop(),t.components)this.stateStack[this.stateStack.length-1].value=[t.object_,t.value];else{var n=this.getProperty(t.object_,t.value);if(!n)return this.stateStack.push({}),void this.throwException(this.TYPE_ERROR,"Cannot read property '"+t.value+"' of "+t.object_.toString());if(n.isGetter){n.isGetter=!1;var r=n;this.pushGetter_(r,t.object_)}else this.stateStack[this.stateStack.length-1].value=n}else t.doneProperty_=!0,t.object_=t.value,this.stateStack.push({node:e.property,components:!e.computed});else t.doneObject_=!0,this.stateStack.push({node:e.object})},a.prototype.stepNewExpression=a.prototype.stepCallExpression,a.prototype.stepObjectExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.valueToggle_,r=t.n_||0;if(t.object?n?t.key_=t.value:(t.properties[t.key_]||(t.properties[t.key_]={}),t.properties[t.key_][t.kind_]=t.value):(t.object=this.createObject(this.OBJECT),t.properties=Object.create(null)),e.properties[r])n?(t.n_=r+1,this.stateStack.push({node:e.properties[r].value})):(t.kind_=e.properties[r].kind,this.stateStack.push({node:e.properties[r].key,components:!0})),t.valueToggle_=!n;else{for(var i in t.properties){var o=t.properties[i];if("get"in o||"set"in o){var a={configurable:!0,enumerable:!0,get:o.get,set:o.set};this.setProperty(t.object,i,null,a)}else this.setProperty(t.object,i,o.init)}this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=t.object}},a.prototype.stepProgram=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.n_||0;e.body[n]?(t.done=!1,t.n_=n+1,this.stateStack.push({node:e.body[n]})):t.done=!0},a.prototype.stepReturnStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(e.argument&&!t.done_)t.done_=!0,this.stateStack.push({node:e.argument});else{var n=t.value||this.UNDEFINED,r=this.stateStack.length-1;for(t=this.stateStack[r];"CallExpression"!=t.node.type&&"NewExpression"!=t.node.type;){if("TryStatement"!=t.node.type&&this.stateStack.splice(r,1),--r<0)throw SyntaxError("Illegal return statement");t=this.stateStack[r]}t.value=n}},a.prototype.stepSequenceExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.n_||0;e.expressions[n]?(t.n_=n+1,this.stateStack.push({node:e.expressions[n]})):(this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=t.value)},a.prototype.stepSwitchStatement=function(){var t=this.stateStack[this.stateStack.length-1];if(!t.test_)return t.test_=!0,void this.stateStack.push({node:t.node.discriminant});t.switchValue_||(t.switchValue_=t.value,t.checked_=[]);var e=t.index_||0,n=t.node.cases[e];if(n){if(!t.done_&&!t.checked_[e]&&n.test)return t.checked_[e]=!0,void this.stateStack.push({node:n.test});if(t.done_||!n.test||0==this.comp(t.value,t.switchValue_)){t.done_=!0;var r=t.n_||0;if(n.consequent[r])return t.isSwitch=!0,this.stateStack.push({node:n.consequent[r]}),void(t.n_=r+1)}t.n_=0,t.index_=e+1}else this.stateStack.pop()},a.prototype.stepThisExpression=function(){this.stateStack.pop();for(var t=this.stateStack.length-1;t>=0;t--)if(this.stateStack[t].thisExpression)return void(this.stateStack[this.stateStack.length-1].value=this.stateStack[t].thisExpression);throw Error("No this expression found.")},a.prototype.stepThrowStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;t.done_?this.throwException(t.value):(t.done_=!0,this.stateStack.push({node:e.argument}))},a.prototype.stepTryStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;t.doneBlock_?t.throwValue&&!t.doneHandler_&&e.handler?(t.doneHandler_=!0,this.stateStack.push({node:e.handler,throwValue:t.throwValue}),t.throwValue=null):!t.doneFinalizer_&&e.finalizer?(t.doneFinalizer_=!0,this.stateStack.push({node:e.finalizer})):t.throwValue?this.executeException(t.throwValue):this.stateStack.pop():(t.doneBlock_=!0,this.stateStack.push({node:e.block}))},a.prototype.stepUnaryExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(t.done_){this.stateStack.pop();var n=t.value;if("-"==e.operator)n=-n.toNumber();else if("+"==e.operator)n=n.toNumber();else if("!"==e.operator)n=!n.toBoolean();else if("~"==e.operator)n=~n.toNumber();else if("delete"==e.operator){if(n.length)var r=n[0],i=n[1];else r=this.getScope(),i=n;if(!(n=this.deleteProperty(r,i))&&this.getScope().strict)return void this.throwException(this.TYPE_ERROR,"Cannot delete property '"+i+"' of '"+r+"'")}else if("typeof"==e.operator)n=n.type;else{if("void"!=e.operator)throw SyntaxError("Unknown unary operator: "+e.operator);n=void 0}this.stateStack[this.stateStack.length-1].value=this.createPrimitive(n)}else{t.done_=!0;var o={node:e.argument,components:"delete"==e.operator};this.stateStack.push(o)}},a.prototype.stepUpdateExpression=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(!t.doneLeft_)return t.doneLeft_=!0,void this.stateStack.push({node:e.argument,components:!0});if(t.leftSide_||(t.leftSide_=t.value),t.doneGetter_&&(t.leftValue_=t.value),!t.doneGetter_){if(t.leftValue_=this.getValue(t.leftSide_),!t.leftValue_)return;if(t.leftValue_.isGetter){t.leftValue_.isGetter=!1,t.doneGetter_=!0;var n=t.leftValue_;return void this.pushGetter_(n,t.leftSide_)}}if(t.doneSetter_)return this.stateStack.pop(),void(this.stateStack[this.stateStack.length-1].value=t.doneSetter_);var r,i=t.leftValue_.toNumber();if("++"==e.operator)r=this.createPrimitive(i+1);else{if("--"!=e.operator)throw SyntaxError("Unknown update expression: "+e.operator);r=this.createPrimitive(i-1)}var o=e.prefix?r:this.createPrimitive(i),a=this.setValue(t.leftSide_,r);if(a)return t.doneSetter_=o,void this.pushSetter_(a,t.leftSide_,r);this.stateStack.pop(),this.stateStack[this.stateStack.length-1].value=o},a.prototype.stepVariableDeclaration=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node,n=t.n_||0,r=e.declarations[n];for(t.value&&r&&(this.setValue(this.createPrimitive(r.id.name),t.value),t.value=null,r=e.declarations[++n]);r;){if(r.init)return t.n_=n,void this.stateStack.push({node:r.init});r=e.declarations[++n]}this.stateStack.pop()},a.prototype.stepWithStatement=function(){var t=this.stateStack[this.stateStack.length-1],e=t.node;if(t.doneObject_)if(t.doneBody_)this.stateStack.pop();else{t.doneBody_=!0;var n=this.createSpecialScope(this.getScope(),t.value);this.stateStack.push({node:e.body,scope:n})}else t.doneObject_=!0,this.stateStack.push({node:e.object})},a.prototype.stepWhileStatement=a.prototype.stepDoWhileStatement,"undefined"!=typeof window&&(window.Interpreter=a),a.prototype.appendCode=a.prototype.appendCode,a.prototype.createAsyncFunction=a.prototype.createAsyncFunction,a.prototype.step=a.prototype.step,a.prototype.run=a.prototype.run,t.exports=a},function(t,e,n){!function(t){"use strict";var e={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},n="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",r={5:n,6:n+" const class extends export import super"},i="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",o="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣔ-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఃా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ഁ-ഃാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ංඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ູົຼ່-ໍ໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠐-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭ᳲ-᳴᳸᳹᷀-᷵᷻-᷿‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱꤀-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿",a=new RegExp("["+i+"]"),s=new RegExp("["+i+o+"]");i=o=null;var c=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,17,26,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,26,45,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,785,52,76,44,33,24,27,35,42,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,25,391,63,32,0,449,56,264,8,2,36,18,0,50,29,881,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,881,68,12,0,67,12,65,0,32,6124,20,754,9486,1,3071,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,10591,541],u=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,1306,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,52,0,13,2,49,13,10,2,4,9,83,11,7,0,161,11,6,9,7,3,57,0,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,87,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,423,9,838,7,2,7,17,9,57,21,2,13,19882,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function l(t,e){for(var n=65536,r=0;r<e.length;r+=2){if((n+=e[r])>t)return!1;if((n+=e[r+1])>=t)return!0}}function h(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&a.test(String.fromCharCode(t)):!1!==e&&l(t,c)))}function p(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&s.test(String.fromCharCode(t)):!1!==e&&(l(t,c)||l(t,u)))))}var f=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function d(t,e){return new f(t,{beforeExpr:!0,binop:e})}var y={beforeExpr:!0},m={startsExpr:!0},g={};function v(t,e){return void 0===e&&(e={}),e.keyword=t,g[t]=new f(t,e)}var b={num:new f("num",m),regexp:new f("regexp",m),string:new f("string",m),name:new f("name",m),eof:new f("eof"),bracketL:new f("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new f("]"),braceL:new f("{",{beforeExpr:!0,startsExpr:!0}),braceR:new f("}"),parenL:new f("(",{beforeExpr:!0,startsExpr:!0}),parenR:new f(")"),comma:new f(",",y),semi:new f(";",y),colon:new f(":",y),dot:new f("."),question:new f("?",y),arrow:new f("=>",y),template:new f("template"),ellipsis:new f("...",y),backQuote:new f("`",m),dollarBraceL:new f("${",{beforeExpr:!0,startsExpr:!0}),eq:new f("=",{beforeExpr:!0,isAssign:!0}),assign:new f("_=",{beforeExpr:!0,isAssign:!0}),incDec:new f("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new f("prefix",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:d("||",1),logicalAND:d("&&",2),bitwiseOR:d("|",3),bitwiseXOR:d("^",4),bitwiseAND:d("&",5),equality:d("==/!=",6),relational:d("</>",7),bitShift:d("<</>>",8),plusMin:new f("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:d("%",10),star:d("*",10),slash:d("/",10),starstar:new f("**",{beforeExpr:!0}),_break:v("break"),_case:v("case",y),_catch:v("catch"),_continue:v("continue"),_debugger:v("debugger"),_default:v("default",y),_do:v("do",{isLoop:!0,beforeExpr:!0}),_else:v("else",y),_finally:v("finally"),_for:v("for",{isLoop:!0}),_function:v("function",m),_if:v("if"),_return:v("return",y),_switch:v("switch"),_throw:v("throw",y),_try:v("try"),_var:v("var"),_const:v("const"),_while:v("while",{isLoop:!0}),_with:v("with"),_new:v("new",{beforeExpr:!0,startsExpr:!0}),_this:v("this",m),_super:v("super",m),_class:v("class"),_extends:v("extends",y),_export:v("export"),_import:v("import"),_null:v("null",m),_true:v("true",m),_false:v("false",m),_in:v("in",{beforeExpr:!0,binop:7}),_instanceof:v("instanceof",{beforeExpr:!0,binop:7}),_typeof:v("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:v("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:v("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},_=/\r\n?|\n|\u2028|\u2029/,E=new RegExp(_.source,"g");function T(t){return 10===t||13===t||8232===t||8233===t}var S=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,k=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g;function w(t){return"[object Array]"===Object.prototype.toString.call(t)}function A(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var O=function(t,e){this.line=t,this.column=e};O.prototype.offset=function(t){return new O(this.line,this.column+t)};var C=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function I(t,e){for(var n=1,r=0;;){E.lastIndex=r;var i=E.exec(t);if(!(i&&i.index<e))return new O(n,e-r);++n,r=i.index+i[0].length}}var N={ecmaVersion:7,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1,plugins:{}},R={};function B(t){return new RegExp("^("+t.replace(/ /g,"|")+")$")}var D=function(t,n,i){this.options=t=function(t){var e={};for(var n in N)e[n]=t&&A(t,n)?t[n]:N[n];if(e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),w(e.onToken)){var r=e.onToken;e.onToken=function(t){return r.push(t)}}return w(e.onComment)&&(e.onComment=function(t,e){return function(n,r,i,o,a,s){var c={type:n?"Block":"Line",value:r,start:i,end:o};t.locations&&(c.loc=new C(this,a,s)),t.ranges&&(c.range=[i,o]),e.push(c)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=B(r[t.ecmaVersion>=6?6:5]);var o="";if(!t.allowReserved){for(var a=t.ecmaVersion;!(o=e[a]);a--);"module"==t.sourceType&&(o+=" await")}this.reservedWords=B(o);var s=(o?o+" ":"")+e.strict;this.reservedWordsStrict=B(s),this.reservedWordsStrictBind=B(s+" "+e.strictBind),this.input=String(n),this.containsEsc=!1,this.loadPlugins(t.plugins),i?(this.pos=i,this.lineStart=this.input.lastIndexOf("\n",i-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(_).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=b.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.inFunction=this.inGenerator=this.inAsync=!1,this.yieldPos=this.awaitPos=0,this.labels=[],0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2)};D.prototype.isKeyword=function(t){return this.keywords.test(t)},D.prototype.isReservedWord=function(t){return this.reservedWords.test(t)},D.prototype.extend=function(t,e){this[t]=e(this[t])},D.prototype.loadPlugins=function(t){for(var e in t){var n=R[e];if(!n)throw new Error("Plugin '"+e+"' not found");n(this,t[e])}},D.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};var P=D.prototype,x=/^(?:'((?:[^\']|\.)*)'|"((?:[^\"]|\.)*)"|;)/;P.strictDirective=function(t){for(;;){k.lastIndex=t,t+=k.exec(this.input)[0].length;var e=x.exec(this.input.slice(t));if(!e)return!1;if("use strict"==(e[1]||e[2]))return!0;t+=e[0].length}},P.eat=function(t){return this.type===t&&(this.next(),!0)},P.isContextual=function(t){return this.type===b.name&&this.value===t},P.eatContextual=function(t){return this.value===t&&this.eat(b.name)},P.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},P.canInsertSemicolon=function(){return this.type===b.eof||this.type===b.braceR||_.test(this.input.slice(this.lastTokEnd,this.start))},P.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},P.semicolon=function(){this.eat(b.semi)||this.insertSemicolon()||this.unexpected()},P.afterTrailingComma=function(t,e){if(this.type==t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},P.expect=function(t){this.eat(t)||this.unexpected()},P.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var M=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=-1};P.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}},P.checkExpressionErrors=function(t,e){var n=t?t.shorthandAssign:-1;if(!e)return n>=0;n>-1&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns")},P.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},P.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var L=D.prototype;L.parseTopLevel=function(t){var e={};for(t.body||(t.body=[]);this.type!==b.eof;){var n=this.parseStatement(!0,!0,e);t.body.push(n)}return this.next(),this.options.ecmaVersion>=6&&(t.sourceType=this.options.sourceType),this.finishNode(t,"Program")};var j={kind:"loop"},F={kind:"switch"};L.isLet=function(){if(this.type!==b.name||this.options.ecmaVersion<6||"let"!=this.value)return!1;k.lastIndex=this.pos;var t=k.exec(this.input),e=this.pos+t[0].length,n=this.input.charCodeAt(e);if(91===n||123==n)return!0;if(h(n,!0)){for(var r=e+1;p(this.input.charCodeAt(r),!0);++r);var i=this.input.slice(e,r);if(!this.isKeyword(i))return!0}return!1},L.isAsyncFunction=function(){if(this.type!==b.name||this.options.ecmaVersion<8||"async"!=this.value)return!1;k.lastIndex=this.pos;var t=k.exec(this.input),e=this.pos+t[0].length;return!(_.test(this.input.slice(this.pos,e))||"function"!==this.input.slice(e,e+8)||e+8!=this.input.length&&p(this.input.charAt(e+8)))},L.parseStatement=function(t,e,n){var r,i=this.type,o=this.startNode();switch(this.isLet()&&(i=b._var,r="let"),i){case b._break:case b._continue:return this.parseBreakContinueStatement(o,i.keyword);case b._debugger:return this.parseDebuggerStatement(o);case b._do:return this.parseDoStatement(o);case b._for:return this.parseForStatement(o);case b._function:return!t&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(o,!1);case b._class:return t||this.unexpected(),this.parseClass(o,!0);case b._if:return this.parseIfStatement(o);case b._return:return this.parseReturnStatement(o);case b._switch:return this.parseSwitchStatement(o);case b._throw:return this.parseThrowStatement(o);case b._try:return this.parseTryStatement(o);case b._const:case b._var:return r=r||this.value,t||"var"==r||this.unexpected(),this.parseVarStatement(o,r);case b._while:return this.parseWhileStatement(o);case b._with:return this.parseWithStatement(o);case b.braceL:return this.parseBlock();case b.semi:return this.parseEmptyStatement(o);case b._export:case b._import:return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),i===b._import?this.parseImport(o):this.parseExport(o,n);default:if(this.isAsyncFunction()&&t)return this.next(),this.parseFunctionStatement(o,!0);var a=this.value,s=this.parseExpression();return i===b.name&&"Identifier"===s.type&&this.eat(b.colon)?this.parseLabeledStatement(o,a,s):this.parseExpressionStatement(o,s)}},L.parseBreakContinueStatement=function(t,e){var n="break"==e;this.next(),this.eat(b.semi)||this.insertSemicolon()?t.label=null:this.type!==b.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if(null==t.label||i.name===t.label.name){if(null!=i.kind&&(n||"loop"===i.kind))break;if(t.label&&n)break}}return r===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},L.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},L.parseDoStatement=function(t){return this.next(),this.labels.push(j),t.body=this.parseStatement(!1),this.labels.pop(),this.expect(b._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(b.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},L.parseForStatement=function(t){if(this.next(),this.labels.push(j),this.expect(b.parenL),this.type===b.semi)return this.parseFor(t,null);var e=this.isLet();if(this.type===b._var||this.type===b._const||e){var n=this.startNode(),r=e?"let":this.value;return this.next(),this.parseVar(n,!0,r),this.finishNode(n,"VariableDeclaration"),!(this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==n.declarations.length||"var"!==r&&n.declarations[0].init?this.parseFor(t,n):this.parseForIn(t,n)}var i=new M,o=this.parseExpression(!0,i);return this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.toAssignable(o),this.checkLVal(o),this.checkPatternErrors(i,!0),this.parseForIn(t,o)):(this.checkExpressionErrors(i,!0),this.parseFor(t,o))},L.parseFunctionStatement=function(t,e){return this.next(),this.parseFunction(t,!0,!1,e)},L.isFunction=function(){return this.type===b._function||this.isAsyncFunction()},L.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement(!this.strict&&this.isFunction()),t.alternate=this.eat(b._else)?this.parseStatement(!this.strict&&this.isFunction()):null,this.finishNode(t,"IfStatement")},L.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(b.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},L.parseSwitchStatement=function(t){this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(b.braceL),this.labels.push(F);for(var e,n=!1;this.type!=b.braceR;)if(this.type===b._case||this.type===b._default){var r=this.type===b._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),r?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(b.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(!0));return e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},L.parseThrowStatement=function(t){return this.next(),_.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var U=[];L.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===b._catch){var e=this.startNode();this.next(),this.expect(b.parenL),e.param=this.parseBindingAtom(),this.checkLVal(e.param,!0),this.expect(b.parenR),e.body=this.parseBlock(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(b._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},L.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},L.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(j),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"WhileStatement")},L.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement(!1),this.finishNode(t,"WithStatement")},L.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},L.parseLabeledStatement=function(t,e,n){for(var r=0;r<this.labels.length;++r)this.labels[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var i=this.type.isLoop?"loop":this.type===b._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var a=this.labels[o];if(a.statementStart!=t.start)break;a.statementStart=this.start,a.kind=i}return this.labels.push({name:e,kind:i,statementStart:this.start}),t.body=this.parseStatement(!0),("ClassDeclaration"==t.body.type||"VariableDeclaration"==t.body.type&&(this.strict||"var"!=t.body.kind)||"FunctionDeclaration"==t.body.type&&(this.strict||t.body.generator))&&this.raiseRecoverable(t.body.start,"Invalid labeled declaration"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},L.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},L.parseBlock=function(){var t=this.startNode();for(t.body=[],this.expect(b.braceL);!this.eat(b.braceR);){var e=this.parseStatement(!0);t.body.push(e)}return this.finishNode(t,"BlockStatement")},L.parseFor=function(t,e){return t.init=e,this.expect(b.semi),t.test=this.type===b.semi?null:this.parseExpression(),this.expect(b.semi),t.update=this.type===b.parenR?null:this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,"ForStatement")},L.parseForIn=function(t,e){var n=this.type===b._in?"ForInStatement":"ForOfStatement";return this.next(),t.left=e,t.right=this.parseExpression(),this.expect(b.parenR),t.body=this.parseStatement(!1),this.labels.pop(),this.finishNode(t,n)},L.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var r=this.startNode();if(this.parseVarId(r),this.eat(b.eq)?r.init=this.parseMaybeAssign(e):"const"!==n||this.type===b._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"==r.id.type||e&&(this.type===b._in||this.isContextual("of"))?r.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(b.comma))break}return t},L.parseVarId=function(t){t.id=this.parseBindingAtom(),this.checkLVal(t.id,!0)},L.parseFunction=function(t,e,n,r){this.initFunction(t),this.options.ecmaVersion>=6&&!r&&(t.generator=this.eat(b.star)),this.options.ecmaVersion>=8&&(t.async=!!r),null==e&&(e=this.type==b.name),e&&(t.id=this.parseIdent());var i=this.inGenerator,o=this.inAsync,a=this.yieldPos,s=this.awaitPos,c=this.inFunction;return this.inGenerator=t.generator,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,e||this.type!==b.name||(t.id=this.parseIdent()),this.parseFunctionParams(t),this.parseFunctionBody(t,n),this.inGenerator=i,this.inAsync=o,this.yieldPos=a,this.awaitPos=s,this.inFunction=c,this.finishNode(t,e?"FunctionDeclaration":"FunctionExpression")},L.parseFunctionParams=function(t){this.expect(b.parenL),t.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8,!0),this.checkYieldAwaitInDefaultParams()},L.parseClass=function(t,e){this.next(),null==e&&(e=this.type===b.name),this.parseClassId(t,e),this.parseClassSuper(t);var n=this.startNode(),r=!1;for(n.body=[],this.expect(b.braceL);!this.eat(b.braceR);)if(!this.eat(b.semi)){var i=this.startNode(),o=this.eat(b.star),a=!1,s=this.type===b.name&&"static"===this.value;this.parsePropertyName(i),i.static=s&&this.type!==b.parenL,i.static&&(o&&this.unexpected(),o=this.eat(b.star),this.parsePropertyName(i)),this.options.ecmaVersion>=8&&!o&&!i.computed&&"Identifier"===i.key.type&&"async"===i.key.name&&this.type!==b.parenL&&!this.canInsertSemicolon()&&(a=!0,this.parsePropertyName(i)),i.kind="method";var c=!1;if(!i.computed){var u=i.key;o||a||"Identifier"!==u.type||this.type===b.parenL||"get"!==u.name&&"set"!==u.name||(c=!0,i.kind=u.name,u=this.parsePropertyName(i)),!i.static&&("Identifier"===u.type&&"constructor"===u.name||"Literal"===u.type&&"constructor"===u.value)&&(r&&this.raise(u.start,"Duplicate constructor in the same class"),c&&this.raise(u.start,"Constructor can't have get/set modifier"),o&&this.raise(u.start,"Constructor can't be a generator"),a&&this.raise(u.start,"Constructor can't be an async method"),i.kind="constructor",r=!0)}if(this.parseClassMethod(n,i,o,a),c){var l="get"===i.kind?0:1;if(i.value.params.length!==l){var h=i.value.start;"get"===i.kind?this.raiseRecoverable(h,"getter should have no params"):this.raiseRecoverable(h,"setter should have exactly one param")}else"set"===i.kind&&"RestElement"===i.value.params[0].type&&this.raiseRecoverable(i.value.params[0].start,"Setter cannot use rest params")}}return t.body=this.finishNode(n,"ClassBody"),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},L.parseClassMethod=function(t,e,n,r){e.value=this.parseMethod(n,r),t.body.push(this.finishNode(e,"MethodDefinition"))},L.parseClassId=function(t,e){t.id=this.type===b.name?this.parseIdent():e?this.unexpected():null},L.parseClassSuper=function(t){t.superClass=this.eat(b._extends)?this.parseExprSubscripts():null},L.parseExport=function(t,e){if(this.next(),this.eat(b.star))return this.expectContextual("from"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(b._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===b._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(r,null,!1,n)}else if(this.type===b._class){var i=this.startNode();t.declaration=this.parseClass(i,null)}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(!0),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id.name,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))t.source=this.type===b.string?this.parseExprAtom():this.unexpected();else{for(var o=0;o<t.specifiers.length;o++)(this.keywords.test(t.specifiers[o].local.name)||this.reservedWords.test(t.specifiers[o].local.name))&&this.unexpected(t.specifiers[o].local.start);t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},L.checkExport=function(t,e,n){t&&(Object.prototype.hasOwnProperty.call(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},L.checkPatternExport=function(t,e){var n=e.type;if("Identifier"==n)this.checkExport(t,e.name,e.start);else if("ObjectPattern"==n)for(var r=0;r<e.properties.length;++r)this.checkPatternExport(t,e.properties[r].value);else if("ArrayPattern"==n)for(var i=0;i<e.elements.length;++i){var o=e.elements[i];o&&this.checkPatternExport(t,o)}else"AssignmentPattern"==n?this.checkPatternExport(t,e.left):"ParenthesizedExpression"==n&&this.checkPatternExport(t,e.expression)},L.checkVariableExport=function(t,e){if(t)for(var n=0;n<e.length;n++)this.checkPatternExport(t,e[n].id)},L.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},L.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(b.braceL);!this.eat(b.braceR);){if(n)n=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(t,r.exported.name,r.exported.start),e.push(this.finishNode(r,"ExportSpecifier"))}return e},L.parseImport=function(t){return this.next(),this.type===b.string?(t.specifiers=U,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===b.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},L.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===b.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,!0),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(b.comma))return t}if(this.type===b.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,!0),t.push(this.finishNode(r,"ImportNamespaceSpecifier")),t}for(this.expect(b.braceL);!this.eat(b.braceR);){if(e)e=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var i=this.startNode();i.imported=this.parseIdent(!0),this.eatContextual("as")?i.local=this.parseIdent():(i.local=i.imported,this.isKeyword(i.local.name)&&this.unexpected(i.local.start),this.reservedWordsStrict.test(i.local.name)&&this.raiseRecoverable(i.local.start,"The keyword '"+i.local.name+"' is reserved")),this.checkLVal(i.local,!0),t.push(this.finishNode(i,"ImportSpecifier"))}return t};var z=D.prototype;z.toAssignable=function(t,e){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Can not use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":break;case"ObjectExpression":t.type="ObjectPattern";for(var n=0;n<t.properties.length;n++){var r=t.properties[n];"init"!==r.kind&&this.raise(r.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(r.value,e)}break;case"ArrayExpression":t.type="ArrayPattern",this.toAssignableList(t.elements,e);break;case"AssignmentExpression":if("="!==t.operator){this.raise(t.left.end,"Only '=' operator can be used for specifying default value.");break}t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);case"AssignmentPattern":break;case"ParenthesizedExpression":t.expression=this.toAssignable(t.expression,e);break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}return t},z.toAssignableList=function(t,e){var n=t.length;if(n){var r=t[n-1];if(r&&"RestElement"==r.type)--n;else if(r&&"SpreadElement"==r.type){r.type="RestElement";var i=r.argument;this.toAssignable(i,e),"Identifier"!==i.type&&"MemberExpression"!==i.type&&"ArrayPattern"!==i.type&&this.unexpected(i.start),--n}e&&r&&"RestElement"===r.type&&"Identifier"!==r.argument.type&&this.unexpected(r.argument.start)}for(var o=0;o<n;o++){var a=t[o];a&&this.toAssignable(a,e)}return t},z.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},z.parseRest=function(t){var e=this.startNode();return this.next(),e.argument=t?this.type===b.name?this.parseIdent():this.unexpected():this.type===b.name||this.type===b.bracketL?this.parseBindingAtom():this.unexpected(),this.finishNode(e,"RestElement")},z.parseBindingAtom=function(){if(this.options.ecmaVersion<6)return this.parseIdent();switch(this.type){case b.name:return this.parseIdent();case b.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(b.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case b.braceL:return this.parseObj(!0);default:this.unexpected()}},z.parseBindingList=function(t,e,n,r){for(var i=[],o=!0;!this.eat(t);)if(o?o=!1:this.expect(b.comma),e&&this.type===b.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===b.ellipsis){var a=this.parseRest(r);this.parseBindingListItem(a),i.push(a),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var s=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(s),i.push(s)}return i},z.parseBindingListItem=function(t){return t},z.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(b.eq))return n;var r=this.startNodeAt(t,e);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")},z.checkLVal=function(t,e,n){switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(e?"Binding ":"Assigning to ")+t.name+" in strict mode"),n&&(A(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0);break;case"MemberExpression":e&&this.raiseRecoverable(t.start,(e?"Binding":"Assigning to")+" member expression");break;case"ObjectPattern":for(var r=0;r<t.properties.length;r++)this.checkLVal(t.properties[r].value,e,n);break;case"ArrayPattern":for(var i=0;i<t.elements.length;i++){var o=t.elements[i];o&&this.checkLVal(o,e,n)}break;case"AssignmentPattern":this.checkLVal(t.left,e,n);break;case"RestElement":this.checkLVal(t.argument,e,n);break;case"ParenthesizedExpression":this.checkLVal(t.expression,e,n);break;default:this.raise(t.start,(e?"Binding":"Assigning to")+" rvalue")}};var V=D.prototype;V.checkPropClash=function(t,e){if(!(this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var n,r=t.key;switch(r.type){case"Identifier":n=r.name;break;case"Literal":n=String(r.value);break;default:return}var i=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===n&&"init"===i&&(e.proto&&this.raiseRecoverable(r.start,"Redefinition of __proto__ property"),e.proto=!0);else{var o=e[n="$"+n];if(o){var a="init"!==i;(!this.strict&&!a||!o[i])&&a^o.init||this.raiseRecoverable(r.start,"Redefinition of property")}else o=e[n]={init:!1,get:!1,set:!1};o[i]=!0}}},V.parseExpression=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(t,e);if(this.type===b.comma){var o=this.startNodeAt(n,r);for(o.expressions=[i];this.eat(b.comma);)o.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(o,"SequenceExpression")}return i},V.parseMaybeAssign=function(t,e,n){if(this.inGenerator&&this.isContextual("yield"))return this.parseYield();var r=!1,i=-1;e?(i=e.parenthesizedAssign,e.parenthesizedAssign=-1):(e=new M,r=!0);var o=this.start,a=this.startLoc;this.type!=b.parenL&&this.type!=b.name||(this.potentialArrowAt=this.start);var s=this.parseMaybeConditional(t,e);if(n&&(s=n.call(this,s,o,a)),this.type.isAssign){this.checkPatternErrors(e,!0),r||M.call(e);var c=this.startNodeAt(o,a);return c.operator=this.value,c.left=this.type===b.eq?this.toAssignable(s):s,e.shorthandAssign=-1,this.checkLVal(s),this.next(),c.right=this.parseMaybeAssign(t),this.finishNode(c,"AssignmentExpression")}return r&&this.checkExpressionErrors(e,!0),i>-1&&(e.parenthesizedAssign=i),s},V.parseMaybeConditional=function(t,e){var n=this.start,r=this.startLoc,i=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return i;if(this.eat(b.question)){var o=this.startNodeAt(n,r);return o.test=i,o.consequent=this.parseMaybeAssign(),this.expect(b.colon),o.alternate=this.parseMaybeAssign(t),this.finishNode(o,"ConditionalExpression")}return i},V.parseExprOps=function(t,e){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(e,!1);return this.checkExpressionErrors(e)?i:this.parseExprOp(i,n,r,-1,t)},V.parseExprOp=function(t,e,n,r,i){var o=this.type.binop;if(null!=o&&(!i||this.type!==b._in)&&o>r){var a=this.type===b.logicalOR||this.type===b.logicalAND,s=this.value;this.next();var c=this.start,u=this.startLoc,l=this.parseExprOp(this.parseMaybeUnary(null,!1),c,u,o,i),h=this.buildBinary(e,n,t,l,s,a);return this.parseExprOp(h,e,n,r,i)}return t},V.buildBinary=function(t,e,n,r,i,o){var a=this.startNodeAt(t,e);return a.left=n,a.operator=i,a.right=r,this.finishNode(a,o?"LogicalExpression":"BinaryExpression")},V.parseMaybeUnary=function(t,e){var n,r=this.start,i=this.startLoc;if(this.inAsync&&this.isContextual("await"))n=this.parseAwait(t),e=!0;else if(this.type.prefix){var o=this.startNode(),a=this.type===b.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(t,!0),a?this.checkLVal(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):e=!0,n=this.finishNode(o,a?"UpdateExpression":"UnaryExpression")}else{if(n=this.parseExprSubscripts(t),this.checkExpressionErrors(t))return n;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(r,i);s.operator=this.value,s.prefix=!1,s.argument=n,this.checkLVal(n),this.next(),n=this.finishNode(s,"UpdateExpression")}}return!e&&this.eat(b.starstar)?this.buildBinary(r,i,n,this.parseMaybeUnary(null,!1),"**",!1):n},V.parseExprSubscripts=function(t){var e=this.start,n=this.startLoc,r=this.parseExprAtom(t),i="ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(t)||i)return r;var o=this.parseSubscripts(r,e,n);return t&&"MemberExpression"===o.type&&(t.parenthesizedAssign>=o.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=o.start&&(t.parenthesizedBind=-1)),o},V.parseSubscripts=function(t,e,n,r){for(var i,o=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd==t.end&&!this.canInsertSemicolon();;)if((i=this.eat(b.bracketL))||this.eat(b.dot)){var a=this.startNodeAt(e,n);a.object=t,a.property=i?this.parseExpression():this.parseIdent(!0),a.computed=!!i,i&&this.expect(b.bracketR),t=this.finishNode(a,"MemberExpression")}else if(!r&&this.eat(b.parenL)){var s=new M,c=this.yieldPos,u=this.awaitPos;this.yieldPos=0,this.awaitPos=0;var l=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1,s);if(o&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(s,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=c,this.awaitPos=u,this.parseArrowExpression(this.startNodeAt(e,n),l,!0);this.checkExpressionErrors(s,!0),this.yieldPos=c||this.yieldPos,this.awaitPos=u||this.awaitPos;var h=this.startNodeAt(e,n);h.callee=t,h.arguments=l,t=this.finishNode(h,"CallExpression")}else{if(this.type!==b.backQuote)return t;var p=this.startNodeAt(e,n);p.tag=t,p.quasi=this.parseTemplate(),t=this.finishNode(p,"TaggedTemplateExpression")}},V.parseExprAtom=function(t){var e,n=this.potentialArrowAt==this.start;switch(this.type){case b._super:this.inFunction||this.raise(this.start,"'super' outside of function or class");case b._this:var r=this.type===b._this?"ThisExpression":"Super";return e=this.startNode(),this.next(),this.finishNode(e,r);case b.name:var i=this.start,o=this.startLoc,a=this.parseIdent(this.type!==b.name);if(this.options.ecmaVersion>=8&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(b._function))return this.parseFunction(this.startNodeAt(i,o),!1,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(b.arrow))return this.parseArrowExpression(this.startNodeAt(i,o),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===b.name)return a=this.parseIdent(),!this.canInsertSemicolon()&&this.eat(b.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,o),[a],!0)}return a;case b.regexp:var s=this.value;return(e=this.parseLiteral(s.value)).regex={pattern:s.pattern,flags:s.flags},e;case b.num:case b.string:return this.parseLiteral(this.value);case b._null:case b._true:case b._false:return(e=this.startNode()).value=this.type===b._null?null:this.type===b._true,e.raw=this.type.keyword,this.next(),this.finishNode(e,"Literal");case b.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(n);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),u;case b.bracketL:return e=this.startNode(),this.next(),e.elements=this.parseExprList(b.bracketR,!0,!0,t),this.finishNode(e,"ArrayExpression");case b.braceL:return this.parseObj(!1,t);case b._function:return e=this.startNode(),this.next(),this.parseFunction(e,!1);case b._class:return this.parseClass(this.startNode(),!1);case b._new:return this.parseNew();case b.backQuote:return this.parseTemplate();default:this.unexpected()}},V.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(e,"Literal")},V.parseParenExpression=function(){this.expect(b.parenL);var t=this.parseExpression();return this.expect(b.parenR),t},V.parseParenAndDistinguishExpression=function(t){var e,n=this.start,r=this.startLoc,i=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o,a,s=this.start,c=this.startLoc,u=[],l=!0,h=!1,p=new M,f=this.yieldPos,d=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==b.parenR;){if(l?l=!1:this.expect(b.comma),i&&this.afterTrailingComma(b.parenR,!0)){h=!0;break}if(this.type===b.ellipsis){o=this.start,u.push(this.parseParenItem(this.parseRest())),this.type===b.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}this.type!==b.parenL||a||(a=this.start),u.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var y=this.start,m=this.startLoc;if(this.expect(b.parenR),t&&!this.canInsertSemicolon()&&this.eat(b.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),a&&this.unexpected(a),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(n,r,u);u.length&&!h||this.unexpected(this.lastTokStart),o&&this.unexpected(o),this.checkExpressionErrors(p,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,u.length>1?((e=this.startNodeAt(s,c)).expressions=u,this.finishNodeAt(e,"SequenceExpression",y,m)):e=u[0]}else e=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(n,r);return g.expression=e,this.finishNode(g,"ParenthesizedExpression")}return e},V.parseParenItem=function(t){return t},V.parseParenArrowList=function(t,e,n){return this.parseArrowExpression(this.startNodeAt(t,e),n)};var H=[];V.parseNew=function(){var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(b.dot))return t.meta=e,t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is new.target"),this.inFunction||this.raiseRecoverable(t.start,"new.target can only be used in functions"),this.finishNode(t,"MetaProperty");var n=this.start,r=this.startLoc;return t.callee=this.parseSubscripts(this.parseExprAtom(),n,r,!0),this.eat(b.parenL)?t.arguments=this.parseExprList(b.parenR,this.options.ecmaVersion>=8,!1):t.arguments=H,this.finishNode(t,"NewExpression")},V.parseTemplateElement=function(){var t=this.startNode();return t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===b.backQuote,this.finishNode(t,"TemplateElement")},V.parseTemplate=function(){var t=this.startNode();this.next(),t.expressions=[];var e=this.parseTemplateElement();for(t.quasis=[e];!e.tail;)this.expect(b.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(b.braceR),t.quasis.push(e=this.parseTemplateElement());return this.next(),this.finishNode(t,"TemplateLiteral")},V.parseObj=function(t,e){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(b.braceR);){if(r)r=!1;else if(this.expect(b.comma),this.afterTrailingComma(b.braceR))break;var o,a,s,c,u=this.startNode();this.options.ecmaVersion>=6&&(u.method=!1,u.shorthand=!1,(t||e)&&(s=this.start,c=this.startLoc),t||(o=this.eat(b.star))),this.parsePropertyName(u),t||!(this.options.ecmaVersion>=8)||o||u.computed||"Identifier"!==u.key.type||"async"!==u.key.name||this.type===b.parenL||this.type===b.colon||this.canInsertSemicolon()?a=!1:(a=!0,this.parsePropertyName(u,e)),this.parsePropertyValue(u,t,o,a,s,c,e),this.checkPropClash(u,i),n.properties.push(this.finishNode(u,"Property"))}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},V.parsePropertyValue=function(t,e,n,r,i,o,a){if((n||r)&&this.type===b.colon&&this.unexpected(),this.eat(b.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===b.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,r);else if(this.options.ecmaVersion>=5&&!t.computed&&"Identifier"===t.key.type&&("get"===t.key.name||"set"===t.key.name)&&this.type!=b.comma&&this.type!=b.braceR){(n||r||e)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var s="get"===t.kind?0:1;if(t.value.params.length!==s){var c=t.value.start;"get"===t.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((this.keywords.test(t.key.name)||(this.strict?this.reservedWordsStrict:this.reservedWords).test(t.key.name)||this.inGenerator&&"yield"==t.key.name||this.inAsync&&"await"==t.key.name)&&this.raiseRecoverable(t.key.start,"'"+t.key.name+"' can not be used as shorthand property"),t.kind="init",e?t.value=this.parseMaybeDefault(i,o,t.key):this.type===b.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(i,o,t.key)):t.value=t.key,t.shorthand=!0):this.unexpected()},V.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(b.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(b.bracketR),t.key;t.computed=!1}return t.key=this.type===b.num||this.type===b.string?this.parseExprAtom():this.parseIdent(!0)},V.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=!1,t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},V.parseMethod=function(t,e){var n=this.startNode(),r=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.initFunction(n),this.options.ecmaVersion>=6&&(n.generator=t),this.options.ecmaVersion>=8&&(n.async=!!e),this.inGenerator=n.generator,this.inAsync=n.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,this.expect(b.parenL),n.params=this.parseBindingList(b.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(n,!1),this.inGenerator=r,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(n,"FunctionExpression")},V.parseArrowExpression=function(t,e,n){var r=this.inGenerator,i=this.inAsync,o=this.yieldPos,a=this.awaitPos,s=this.inFunction;return this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.inGenerator=!1,this.inAsync=t.async,this.yieldPos=0,this.awaitPos=0,this.inFunction=!0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0),this.inGenerator=r,this.inAsync=i,this.yieldPos=o,this.awaitPos=a,this.inFunction=s,this.finishNode(t,"ArrowFunctionExpression")},V.parseFunctionBody=function(t,e){var n=e&&this.type!==b.braceL,r=this.strict,i=!1;if(n)t.body=this.parseMaybeAssign(),t.expression=!0;else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);r&&!o||(i=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var a=this.labels;this.labels=[],i&&(this.strict=!0),t.body=this.parseBlock(!0),t.expression=!1,this.labels=a}r||i?(this.strict=!0,t.id&&this.checkLVal(t.id,!0),this.checkParams(t),this.strict=r):!e&&this.isSimpleParamList(t.params)||this.checkParams(t)},V.isSimpleParamList=function(t){for(var e=0;e<t.length;e++)if("Identifier"!==t[e].type)return!1;return!0},V.checkParams=function(t){for(var e={},n=0;n<t.params.length;n++)this.checkLVal(t.params[n],!0,e)},V.parseExprList=function(t,e,n,r){for(var i=[],o=!0;!this.eat(t);){if(o)o=!1;else if(this.expect(b.comma),e&&this.afterTrailingComma(t))break;var a;n&&this.type===b.comma?a=null:this.type===b.ellipsis?(a=this.parseSpread(r),r&&this.type===b.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):a=this.parseMaybeAssign(!1,r),i.push(a)}return i},V.parseIdent=function(t){var e=this.startNode();return t&&"never"==this.options.allowReserved&&(t=!1),this.type===b.name?(!t&&(this.strict?this.reservedWordsStrict:this.reservedWords).test(this.value)&&(this.options.ecmaVersion>=6||-1==this.input.slice(this.start,this.end).indexOf("\\"))&&this.raiseRecoverable(this.start,"The keyword '"+this.value+"' is reserved"),this.inGenerator&&"yield"===this.value&&this.raiseRecoverable(this.start,"Can not use 'yield' as identifier inside a generator"),this.inAsync&&"await"===this.value&&this.raiseRecoverable(this.start,"Can not use 'await' as identifier inside an async function"),e.name=this.value):t&&this.type.keyword?e.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(e,"Identifier")},V.parseYield=function(){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type==b.semi||this.canInsertSemicolon()||this.type!=b.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(b.star),t.argument=this.parseMaybeAssign()),this.finishNode(t,"YieldExpression")},V.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0),this.finishNode(t,"AwaitExpression")};var G=D.prototype;G.raise=function(t,e){var n=I(this.input,t);e+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(e);throw r.pos=t,r.loc=n,r.raisedAt=this.pos,r},G.raiseRecoverable=G.raise,G.curPosition=function(){if(this.options.locations)return new O(this.curLine,this.pos-this.lineStart)};var q=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new C(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},W=D.prototype;function K(t,e,n,r){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=r),this.options.ranges&&(t.range[1]=n),t}W.startNode=function(){return new q(this,this.start,this.startLoc)},W.startNodeAt=function(t,e){return new q(this,t,e)},W.finishNode=function(t,e){return K.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},W.finishNodeAt=function(t,e,n,r){return K.call(this,t,e,n,r)};var Y=function(t,e,n,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=r},J={b_stat:new Y("{",!1),b_expr:new Y("{",!0),b_tmpl:new Y("${",!0),p_stat:new Y("(",!1),p_expr:new Y("(",!0),q_tmpl:new Y("`",!0,!0,(function(t){return t.readTmplToken()})),f_expr:new Y("function",!0)},Q=D.prototype;Q.initialContext=function(){return[J.b_stat]},Q.braceIsBlock=function(t){if(t===b.colon){var e=this.curContext();if(e===J.b_stat||e===J.b_expr)return!e.isExpr}return t===b._return?_.test(this.input.slice(this.lastTokEnd,this.start)):t===b._else||t===b.semi||t===b.eof||t===b.parenR||(t==b.braceL?this.curContext()===J.b_stat:!this.exprAllowed)},Q.updateContext=function(t){var e,n=this.type;n.keyword&&t==b.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},b.parenR.updateContext=b.braceR.updateContext=function(){if(1!=this.context.length){var t=this.context.pop();t===J.b_stat&&this.curContext()===J.f_expr?(this.context.pop(),this.exprAllowed=!1):this.exprAllowed=t===J.b_tmpl||!t.isExpr}else this.exprAllowed=!0},b.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?J.b_stat:J.b_expr),this.exprAllowed=!0},b.dollarBraceL.updateContext=function(){this.context.push(J.b_tmpl),this.exprAllowed=!0},b.parenL.updateContext=function(t){var e=t===b._if||t===b._for||t===b._with||t===b._while;this.context.push(e?J.p_stat:J.p_expr),this.exprAllowed=!0},b.incDec.updateContext=function(){},b._function.updateContext=function(t){t.beforeExpr&&t!==b.semi&&t!==b._else&&(t!==b.colon&&t!==b.braceL||this.curContext()!==J.b_stat)&&this.context.push(J.f_expr),this.exprAllowed=!1},b.backQuote.updateContext=function(){this.curContext()===J.q_tmpl?this.context.pop():this.context.push(J.q_tmpl),this.exprAllowed=!1};var X=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new C(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Z=D.prototype,$="object"==typeof Packages&&"[object JavaPackage]"==Object.prototype.toString.call(Packages);function tt(t,e,n,r){try{return new RegExp(t,e)}catch(t){if(void 0!==n)throw t instanceof SyntaxError&&r.raise(n,"Error parsing regular expression: "+t.message),t}}Z.next=function(){this.options.onToken&&this.options.onToken(new X(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Z.getToken=function(){return this.next(),new X(this)},"undefined"!=typeof Symbol&&(Z[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===b.eof,value:e}}}}),Z.curContext=function(){return this.context[this.context.length-1]},Z.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(b.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Z.readToken=function(t){return h(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Z.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);return t<=55295||t>=57344?t:(t<<10)+this.input.charCodeAt(this.pos+1)-56613888},Z.skipBlockComment=function(){var t,e=this.options.onComment&&this.curPosition(),n=this.pos,r=this.input.indexOf("*/",this.pos+=2);if(-1===r&&this.raise(this.pos-2,"Unterminated comment"),this.pos=r+2,this.options.locations)for(E.lastIndex=n;(t=E.exec(this.input))&&t.index<this.pos;)++this.curLine,this.lineStart=t.index+t[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(n+2,r),n,this.pos,e,this.curPosition())},Z.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&10!==r&&13!==r&&8232!==r&&8233!==r;)++this.pos,r=this.input.charCodeAt(this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Z.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&S.test(String.fromCharCode(t))))break t;++this.pos}}},Z.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Z.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(b.ellipsis)):(++this.pos,this.finishToken(b.dot))},Z.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(b.assign,2):this.finishOp(b.slash,1)},Z.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,r=42===t?b.star:b.modulo;return this.options.ecmaVersion>=7&&42===e&&(++n,r=b.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(b.assign,n+1):this.finishOp(r,n)},Z.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.finishOp(124===t?b.logicalOR:b.logicalAND,2):61===e?this.finishOp(b.assign,2):this.finishOp(124===t?b.bitwiseOR:b.bitwiseAND,1)},Z.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(b.assign,2):this.finishOp(b.bitwiseXOR,1)},Z.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45==e&&62==this.input.charCodeAt(this.pos+2)&&_.test(this.input.slice(this.lastTokEnd,this.pos))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(b.incDec,2):61===e?this.finishOp(b.assign,2):this.finishOp(b.plusMin,1)},Z.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(b.assign,n+1):this.finishOp(b.bitShift,n)):33==e&&60==t&&45==this.input.charCodeAt(this.pos+2)&&45==this.input.charCodeAt(this.pos+3)?(this.inModule&&this.unexpected(),this.skipLineComment(4),this.skipSpace(),this.nextToken()):(61===e&&(n=2),this.finishOp(b.relational,n))},Z.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(b.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(b.arrow)):this.finishOp(61===t?b.eq:b.prefix,1)},Z.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(b.parenL);case 41:return++this.pos,this.finishToken(b.parenR);case 59:return++this.pos,this.finishToken(b.semi);case 44:return++this.pos,this.finishToken(b.comma);case 91:return++this.pos,this.finishToken(b.bracketL);case 93:return++this.pos,this.finishToken(b.bracketR);case 123:return++this.pos,this.finishToken(b.braceL);case 125:return++this.pos,this.finishToken(b.braceR);case 58:return++this.pos,this.finishToken(b.colon);case 63:return++this.pos,this.finishToken(b.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(b.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 126:return this.finishOp(b.prefix,1)}this.raise(this.pos,"Unexpected character '"+nt(t)+"'")},Z.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)};var et=!!tt("￿","u");function nt(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}Z.readRegexp=function(){for(var t,e,n=this,r=this.pos;;){n.pos>=n.input.length&&n.raise(r,"Unterminated regular expression");var i=n.input.charAt(n.pos);if(_.test(i)&&n.raise(r,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++n.pos}var o=this.input.slice(r,this.pos);++this.pos;var a=this.readWord1(),s=o,c="";if(a){var u=/^[gim]*$/;this.options.ecmaVersion>=6&&(u=/^[gimuy]*$/),u.test(a)||this.raise(r,"Invalid regular expression flag"),a.indexOf("u")>=0&&(et?c="u":(s=(s=s.replace(/\\u\{([0-9a-fA-F]+)\}/g,(function(t,e,i){return(e=Number("0x"+e))>1114111&&n.raise(r+i+3,"Code point out of bounds"),"x"}))).replace(/\\u([a-fA-F0-9]{4})|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"),c=c.replace("u","")))}var l=null;return $||(tt(s,c,r,this),l=tt(o,a)),this.finishToken(b.regexp,{pattern:o,flags:a,value:l})},Z.readInt=function(t,e){for(var n=this.pos,r=0,i=0,o=null==e?1/0:e;i<o;++i){var a,s=this.input.charCodeAt(this.pos);if((a=s>=97?s-97+10:s>=65?s-65+10:s>=48&&s<=57?s-48:1/0)>=t)break;++this.pos,r=r*t+a}return this.pos===n||null!=e&&this.pos-n!==e?null:r},Z.readRadixNumber=function(t){this.pos+=2;var e=this.readInt(t);return null==e&&this.raise(this.start+2,"Expected number in radix "+t),h(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(b.num,e)},Z.readNumber=function(t){var e=this.pos,n=!1,r=48===this.input.charCodeAt(this.pos);t||null!==this.readInt(10)||this.raise(e,"Invalid number"),r&&this.pos==e+1&&(r=!1);var i=this.input.charCodeAt(this.pos);46!==i||r||(++this.pos,this.readInt(10),n=!0,i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||r||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number"),n=!0),h(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var o,a=this.input.slice(e,this.pos);return n?o=parseFloat(a):r&&1!==a.length?/[89]/.test(a)||this.strict?this.raise(e,"Invalid number"):o=parseInt(a,8):o=parseInt(a,10),this.finishToken(b.num,o)},Z.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.raise(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Z.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===t)break;92===r?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):(T(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(b.string,e)},Z.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos===this.start&&this.type===b.template?36===n?(this.pos+=2,this.finishToken(b.dollarBraceL)):(++this.pos,this.finishToken(b.backQuote)):(t+=this.input.slice(e,this.pos),this.finishToken(b.template,t));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(T(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Z.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return nt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(e>=48&&e<=55){var n=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(n,8);return r>255&&(n=n.slice(0,-1),r=parseInt(n,8)),"0"!==n&&(this.strict||t)&&this.raise(this.pos-2,"Octal literal in strict mode"),this.pos+=n.length-1,String.fromCharCode(r)}return String.fromCharCode(e)}},Z.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.raise(e,"Bad character escape sequence"),n},Z.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(p(i,r))this.pos+=i<=65535?1:2;else{if(92!==i)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var o=this.pos;117!=this.input.charCodeAt(++this.pos)&&this.raise(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?h:p)(a,r)||this.raise(o,"Invalid Unicode escape"),t+=nt(a),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Z.readWord=function(){var t=this.readWord1(),e=b.name;return this.keywords.test(t)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+t),e=g[t]),this.finishToken(e,t)},t.version="4.0.11",t.parse=function(t,e){return new D(e,t).parse()},t.parseExpressionAt=function(t,e,n){var r=new D(n,t,e);return r.nextToken(),r.parseExpression()},t.tokenizer=function(t,e){return new D(e,t)},t.addLooseExports=function(e,n,r){t.parse_dammit=e,t.LooseParser=n,t.pluginsLoose=r},t.Parser=D,t.plugins=R,t.defaultOptions=N,t.Position=O,t.SourceLocation=C,t.getLineInfo=I,t.Node=q,t.TokenType=f,t.tokTypes=b,t.keywordTypes=g,t.TokContext=Y,t.tokContexts=J,t.isIdentifierChar=p,t.isIdentifierStart=h,t.Token=X,t.isNewLine=T,t.lineBreak=_,t.lineBreakG=E,Object.defineProperty(t,"__esModule",{value:!0})}(e)},function(t,e,n){"use strict";e.byteLength=function(t){return 3*t.length/4-u(t)},e.toByteArray=function(t){var e,n,r,a,s,c,l=t.length;s=u(t),c=new o(3*l/4-s),r=s>0?l-4:l;var h=0;for(e=0,n=0;e<r;e+=4,n+=3)a=i[t.charCodeAt(e)]<<18|i[t.charCodeAt(e+1)]<<12|i[t.charCodeAt(e+2)]<<6|i[t.charCodeAt(e+3)],c[h++]=a>>16&255,c[h++]=a>>8&255,c[h++]=255&a;return 2===s?(a=i[t.charCodeAt(e)]<<2|i[t.charCodeAt(e+1)]>>4,c[h++]=255&a):1===s&&(a=i[t.charCodeAt(e)]<<10|i[t.charCodeAt(e+1)]<<4|i[t.charCodeAt(e+2)]>>2,c[h++]=a>>8&255,c[h++]=255&a),c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o="",a=[],s=0,c=n-i;s<c;s+=16383)a.push(l(t,s,s+16383>c?c:s+16383));return 1===i?(e=t[n-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="="),a.push(o),a.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16)+(t[s+1]<<8)+t[s+2],a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(2),i=n(5),o=n(6);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=p(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|d(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|f(e.length);return 0===(t=s(t,n)).length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):p(t,e);if("Buffer"===e.type&&o(e.data))return p(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(l(e),t=s(t,e<0?0:0|f(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function p(t,e){var n=e.length<0?0:0|f(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function f(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function d(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return U(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return z(t).length;default:if(r)return U(t).length;e=(""+e).toLowerCase(),r=!0}}function y(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return I(this,e,n);case"base64":return w(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return R(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:v(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,r,i){var o,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var h=!0,p=0;p<c;p++)if(u(t,o+p)!==u(e,p)){h=!1;break}if(h)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return V(U(e,t.length-n),t,n,r)}function E(t,e,n,r){return V(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function T(t,e,n,r){return E(t,e,n,r)}function S(t,e,n,r){return V(z(e),t,n,r)}function k(t,e,n,r){return V(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function w(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,c,u=t[i],l=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=n)switch(h){case 1:u<128&&(l=u);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,h=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=h}return function(t){var e=t.length;if(e<=O)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=O));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return h(null,t)},c.allocUnsafeSlow=function(t){return h(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=d,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),h=0;h<s;++h)if(u[h]!==l[h]){o=u[h],a=l[h];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return E(this,t,e,n);case"latin1":case"binary":return T(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var O=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r,i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var o="",a=e;a<n;++a)o+=(r=t[a])<16?"0"+r.toString(16):r.toString(16);return o}function R(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function D(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function P(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function j(t,e,n,r,o){return o||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||B(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||B(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||B(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||B(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||B(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||B(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||D(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):x(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);D(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):P(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):P(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):x(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||D(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return j(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return j(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:U(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var F=/[^+\/0-9A-Za-z-_]/g;function U(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function z(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(F,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(e,n(7))},function(t,e,n){(function(e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}var n,r,i;try{n=Map}catch(t){n=function(){}}try{r=Set}catch(t){r=function(){}}try{i=Promise}catch(t){i=function(){}}function o(a,c,u,l,h){"object"==typeof c&&(u=c.depth,l=c.prototype,h=c.includeNonEnumerable,c=c.circular);var p=[],f=[],d=void 0!==e;return void 0===c&&(c=!0),void 0===u&&(u=1/0),function a(u,y){if(null===u)return null;if(0===y)return u;var m,g;if("object"!=typeof u)return u;if(t(u,n))m=new n;else if(t(u,r))m=new r;else if(t(u,i))m=new i((function(t,e){u.then((function(e){t(a(e,y-1))}),(function(t){e(a(t,y-1))}))}));else if(o.__isArray(u))m=[];else if(o.__isRegExp(u))m=new RegExp(u.source,s(u)),u.lastIndex&&(m.lastIndex=u.lastIndex);else if(o.__isDate(u))m=new Date(u.getTime());else{if(d&&e.isBuffer(u))return m=new e(u.length),u.copy(m),m;t(u,Error)?m=Object.create(u):void 0===l?(g=Object.getPrototypeOf(u),m=Object.create(g)):(m=Object.create(l),g=l)}if(c){var v=p.indexOf(u);if(-1!=v)return f[v];p.push(u),f.push(m)}for(var b in t(u,n)&&u.forEach((function(t,e){var n=a(e,y-1),r=a(t,y-1);m.set(n,r)})),t(u,r)&&u.forEach((function(t){var e=a(t,y-1);m.add(e)})),u){var _;g&&(_=Object.getOwnPropertyDescriptor(g,b)),Object.keys(u).indexOf(b)<0&&_&&null==_.set||(m[b]=a(u[b],y-1))}if(Object.getOwnPropertySymbols){var E=Object.getOwnPropertySymbols(u);for(b=0;b<E.length;b++){var T=E[b];(!(k=Object.getOwnPropertyDescriptor(u,T))||k.enumerable||h)&&(m[T]=a(u[T],y-1),k.enumerable||Object.defineProperty(m,T,{enumerable:!1}))}}if(h){var S=Object.getOwnPropertyNames(u);for(b=0;b<S.length;b++){var k,w=S[b];(k=Object.getOwnPropertyDescriptor(u,w))&&k.enumerable||(m[w]=a(u[w],y-1),Object.defineProperty(m,w,{enumerable:!1}))}}return m}(a,u)}function a(t){return Object.prototype.toString.call(t)}function s(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return o.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},o.__objToStr=a,o.__isDate=function(t){return"object"==typeof t&&"[object Date]"===a(t)},o.__isArray=function(t){return"object"==typeof t&&"[object Array]"===a(t)},o.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===a(t)},o.__getRegExpFlags=s,o}();"object"==typeof t&&t.exports&&(t.exports=n)}).call(e,n(3).Buffer)},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*c-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*y}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){t.exports=n(0)}])},t.exports=r()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(77),i=n(102),o=function(t,e){var n=[];return n.length=e-t.length,n.fill(0),[].concat(n,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))};e.default=function(t,e){var n=e.field,a=e.fastEmaPeriod,s=void 0===a?12:a,c=e.slowEmaPeriod,u=void 0===c?26:c,l=e.signalEmaPeriod,h=void 0===l?9:l,p=e.pipSize,f=void 0===p?2:p,d=(0,r.takeField)(t,n),y=d.length,m=o((0,i.exponentialMovingAverageArray)(d,{periods:s,pipSize:20,field:n}),y),g=o((0,i.exponentialMovingAverageArray)(d,{periods:u,pipSize:20,field:n}),y),v=o(g.map((function(t,e){return+(m[e]-t).toFixed(f)})),y),b=o((0,i.exponentialMovingAverageArray)(v.slice(u-1),{periods:h,pipSize:20,field:n}),y);return v.map((function(t,e){return[+(t-b[e]).toFixed(f),t,+b[e].toFixed(f)]})).slice(u+h-2)}},function(t,e,n){"use strict";function r(t){var e,n=t.Symbol;return"function"==typeof n?n.observable?e=n.observable:(e=n("observable"),n.observable=e):e="@@observable",e}n.d(e,"a",(function(){return r}))},function(t,e){t.exports=O},function(t,e){t.exports=C},function(t,e){t.exports=I},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){n(252),t.exports=n(443)},function(t,e,n){n(4),n(43),n(5),n(20),n(261),n(262),t.exports=n(37).Promise},function(t,e,n){t.exports=n(79)("native-function-to-string",Function.toString)},function(t,e,n){"use strict";var r=n(82),i=n(65),o=n(68),a={};n(41)(a,n(15)("iterator"),(function(){return this})),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var r=n(26),i=n(19),o=n(52);t.exports=n(23)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),s=a.length,c=0;s>c;)r.f(t,n=a[c++],e[n]);return t}},function(t,e,n){var r=n(81),i=Math.max,o=Math.min;t.exports=function(t,e){return(t=r(t))<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(42),i=n(47),o=n(111)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(16),i=n(158).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,s=r.Promise,c="process"==n(51)(a);t.exports=function(){var t,e,n,u=function(){var r,i;for(c&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(c)n=function(){a.nextTick(u)};else if(!o||r.navigator&&r.navigator.standalone)if(s&&s.resolve){var l=s.resolve(void 0);n=function(){l.then(u)}}else n=function(){i.call(r,u)};else{var h=!0,p=document.createTextNode("");new o(u).observe(p,{characterData:!0}),n=function(){p.data=h=!h}}return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){var r=n(16).navigator;t.exports=r&&r.userAgent||""},function(t,e,n){"use strict";var r=n(14),i=n(37),o=n(16),a=n(115),s=n(160);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then((function(){return n}))}:t,n?function(n){return s(e,t()).then((function(){throw n}))}:t)}})},function(t,e,n){"use strict";var r=n(14),i=n(116),o=n(159);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){"use strict";var r=n(122);n(14)({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},function(t,e,n){"use strict";var r=n(23),i=n(52),o=n(87),a=n(69),s=n(47),c=n(110),u=Object.assign;t.exports=!u||n(24)((function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach((function(t){e[t]=t})),7!=u({},t)[n]||Object.keys(u({},e)).join("")!=r}))?function(t,e){for(var n=s(t),u=arguments.length,l=1,h=o.f,p=a.f;u>l;)for(var f,d=c(arguments[l++]),y=h?i(d).concat(h(d)):i(d),m=y.length,g=0;m>g;)f=y[g++],r&&!p.call(d,f)||(n[f]=d[f]);return n}:u},function(t,e,n){"use strict";var r=n(24);t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},function(t,e,n){var r=n(267);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(22),i=n(165),o=n(15)("species");t.exports=function(t){var e;return i(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&null===(e=e[o])&&(e=void 0)),void 0===e?Array:e}},function(t,e,n){n(23)&&"g"!=/./g.flags&&n(26).f(RegExp.prototype,"flags",{configurable:!0,get:n(85)})},function(t,e,n){var r=n(22),i=n(19),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{(r=n(44)(Function.call,n(89).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var r=n(170),i=n(174);e.parse=function(t,e){return new r(e).parse(t)},e.parseFragment=function(t,e,n){return"string"==typeof t&&(n=e,e=t,t=null),new r(n).parseFragment(e,t)},e.serialize=function(t,e){return new i(t,e).serialize()},e.treeAdapters={default:n(125),htmlparser2:n(279)},e.ParserStream=n(175),e.PlainTextConversionStream=n(294),e.SerializerStream=n(295),e.SAXParser=n(296)},function(t,e,n){"use strict";var r=n(72).CODE_POINTS,i=t.exports=function(){this.html=null,this.pos=-1,this.lastGapPos=-1,this.lastCharPos=-1,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=65536};i.prototype.dropParsedChunk=function(){this.pos>this.bufferWaterline&&(this.lastCharPos-=this.pos,this.html=this.html.substring(this.pos),this.pos=0,this.lastGapPos=-1,this.gapStack=[])},i.prototype._addGap=function(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos},i.prototype._processHighRangeCodePoint=function(t){if(this.pos!==this.lastCharPos){var e=this.html.charCodeAt(this.pos+1);i=e,(n=t)>=55296&&n<=56319&&i>=56320&&i<=57343&&(this.pos++,t=function(t,e){return 1024*(t-55296)+9216+e}(t,e),this._addGap())}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,r.EOF;var n,i;return t},i.prototype.write=function(t,e){this.html?this.html+=t:this.html=t,this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1,this.lastChunkWritten=e},i.prototype.insertHtmlAtCurrentPos=function(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1,this.html.length),this.lastCharPos=this.html.length-1,this.endOfChunkHit=!1},i.prototype.advance=function(){if(this.pos++,this.pos>this.lastCharPos)return this.lastChunkWritten||(this.endOfChunkHit=!0),r.EOF;var t=this.html.charCodeAt(this.pos);return this.skipNextNewLine&&t===r.LINE_FEED?(this.skipNextNewLine=!1,this._addGap(),this.advance()):t===r.CARRIAGE_RETURN?(this.skipNextNewLine=!0,r.LINE_FEED):(this.skipNextNewLine=!1,t>=55296?this._processHighRangeCodePoint(t):t)},i.prototype.retreat=function(){this.pos===this.lastGapPos&&(this.lastGapPos=this.gapStack.pop(),this.pos--),this.pos--}},function(t,e,n){"use strict";t.exports=new Uint16Array([4,52,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,106,303,412,810,1432,1701,1796,1987,2114,2360,2420,2484,3170,3251,4140,4393,4575,4610,5106,5512,5728,6117,6274,6315,6345,6427,6516,7002,7910,8733,9323,9870,10170,10631,10893,11318,11386,11467,12773,13092,14474,14922,15448,15542,16419,17666,18166,18611,19004,19095,19298,19397,4,16,69,77,97,98,99,102,103,108,109,110,111,112,114,115,116,117,140,150,158,169,176,194,199,210,216,222,226,242,256,266,283,294,108,105,103,5,198,1,59,148,1,198,80,5,38,1,59,156,1,38,99,117,116,101,5,193,1,59,167,1,193,114,101,118,101,59,1,258,4,2,105,121,182,191,114,99,5,194,1,59,189,1,194,59,1,1040,114,59,3,55349,56580,114,97,118,101,5,192,1,59,208,1,192,112,104,97,59,1,913,97,99,114,59,1,256,100,59,1,10835,4,2,103,112,232,237,111,110,59,1,260,102,59,3,55349,56632,112,108,121,70,117,110,99,116,105,111,110,59,1,8289,105,110,103,5,197,1,59,264,1,197,4,2,99,115,272,277,114,59,3,55349,56476,105,103,110,59,1,8788,105,108,100,101,5,195,1,59,292,1,195,109,108,5,196,1,59,301,1,196,4,8,97,99,101,102,111,114,115,117,321,350,354,383,388,394,400,405,4,2,99,114,327,336,107,115,108,97,115,104,59,1,8726,4,2,118,119,342,345,59,1,10983,101,100,59,1,8966,121,59,1,1041,4,3,99,114,116,362,369,379,97,117,115,101,59,1,8757,110,111,117,108,108,105,115,59,1,8492,97,59,1,914,114,59,3,55349,56581,112,102,59,3,55349,56633,101,118,101,59,1,728,99,114,59,1,8492,109,112,101,113,59,1,8782,4,14,72,79,97,99,100,101,102,104,105,108,111,114,115,117,442,447,456,504,542,547,569,573,577,616,678,784,790,796,99,121,59,1,1063,80,89,5,169,1,59,454,1,169,4,3,99,112,121,464,470,497,117,116,101,59,1,262,4,2,59,105,476,478,1,8914,116,97,108,68,105,102,102,101,114,101,110,116,105,97,108,68,59,1,8517,108,101,121,115,59,1,8493,4,4,97,101,105,111,514,520,530,535,114,111,110,59,1,268,100,105,108,5,199,1,59,528,1,199,114,99,59,1,264,110,105,110,116,59,1,8752,111,116,59,1,266,4,2,100,110,553,560,105,108,108,97,59,1,184,116,101,114,68,111,116,59,1,183,114,59,1,8493,105,59,1,935,114,99,108,101,4,4,68,77,80,84,591,596,603,609,111,116,59,1,8857,105,110,117,115,59,1,8854,108,117,115,59,1,8853,105,109,101,115,59,1,8855,111,4,2,99,115,623,646,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8754,101,67,117,114,108,121,4,2,68,81,658,671,111,117,98,108,101,81,117,111,116,101,59,1,8221,117,111,116,101,59,1,8217,4,4,108,110,112,117,688,701,736,753,111,110,4,2,59,101,696,698,1,8759,59,1,10868,4,3,103,105,116,709,717,722,114,117,101,110,116,59,1,8801,110,116,59,1,8751,111,117,114,73,110,116,101,103,114,97,108,59,1,8750,4,2,102,114,742,745,59,1,8450,111,100,117,99,116,59,1,8720,110,116,101,114,67,108,111,99,107,119,105,115,101,67,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8755,111,115,115,59,1,10799,99,114,59,3,55349,56478,112,4,2,59,67,803,805,1,8915,97,112,59,1,8781,4,11,68,74,83,90,97,99,101,102,105,111,115,834,850,855,860,865,888,903,916,921,1011,1415,4,2,59,111,840,842,1,8517,116,114,97,104,100,59,1,10513,99,121,59,1,1026,99,121,59,1,1029,99,121,59,1,1039,4,3,103,114,115,873,879,883,103,101,114,59,1,8225,114,59,1,8609,104,118,59,1,10980,4,2,97,121,894,900,114,111,110,59,1,270,59,1,1044,108,4,2,59,116,910,912,1,8711,97,59,1,916,114,59,3,55349,56583,4,2,97,102,927,998,4,2,99,109,933,992,114,105,116,105,99,97,108,4,4,65,68,71,84,950,957,978,985,99,117,116,101,59,1,180,111,4,2,116,117,964,967,59,1,729,98,108,101,65,99,117,116,101,59,1,733,114,97,118,101,59,1,96,105,108,100,101,59,1,732,111,110,100,59,1,8900,102,101,114,101,110,116,105,97,108,68,59,1,8518,4,4,112,116,117,119,1021,1026,1048,1249,102,59,3,55349,56635,4,3,59,68,69,1034,1036,1041,1,168,111,116,59,1,8412,113,117,97,108,59,1,8784,98,108,101,4,6,67,68,76,82,85,86,1065,1082,1101,1189,1211,1236,111,110,116,111,117,114,73,110,116,101,103,114,97,108,59,1,8751,111,4,2,116,119,1089,1092,59,1,168,110,65,114,114,111,119,59,1,8659,4,2,101,111,1107,1141,102,116,4,3,65,82,84,1117,1124,1136,114,114,111,119,59,1,8656,105,103,104,116,65,114,114,111,119,59,1,8660,101,101,59,1,10980,110,103,4,2,76,82,1149,1177,101,102,116,4,2,65,82,1158,1165,114,114,111,119,59,1,10232,105,103,104,116,65,114,114,111,119,59,1,10234,105,103,104,116,65,114,114,111,119,59,1,10233,105,103,104,116,4,2,65,84,1199,1206,114,114,111,119,59,1,8658,101,101,59,1,8872,112,4,2,65,68,1218,1225,114,114,111,119,59,1,8657,111,119,110,65,114,114,111,119,59,1,8661,101,114,116,105,99,97,108,66,97,114,59,1,8741,110,4,6,65,66,76,82,84,97,1264,1292,1299,1352,1391,1408,114,114,111,119,4,3,59,66,85,1276,1278,1283,1,8595,97,114,59,1,10515,112,65,114,114,111,119,59,1,8693,114,101,118,101,59,1,785,101,102,116,4,3,82,84,86,1310,1323,1334,105,103,104,116,86,101,99,116,111,114,59,1,10576,101,101,86,101,99,116,111,114,59,1,10590,101,99,116,111,114,4,2,59,66,1345,1347,1,8637,97,114,59,1,10582,105,103,104,116,4,2,84,86,1362,1373,101,101,86,101,99,116,111,114,59,1,10591,101,99,116,111,114,4,2,59,66,1384,1386,1,8641,97,114,59,1,10583,101,101,4,2,59,65,1399,1401,1,8868,114,114,111,119,59,1,8615,114,114,111,119,59,1,8659,4,2,99,116,1421,1426,114,59,3,55349,56479,114,111,107,59,1,272,4,16,78,84,97,99,100,102,103,108,109,111,112,113,115,116,117,120,1466,1470,1478,1489,1515,1520,1525,1536,1544,1593,1609,1617,1650,1664,1668,1677,71,59,1,330,72,5,208,1,59,1476,1,208,99,117,116,101,5,201,1,59,1487,1,201,4,3,97,105,121,1497,1503,1512,114,111,110,59,1,282,114,99,5,202,1,59,1510,1,202,59,1,1069,111,116,59,1,278,114,59,3,55349,56584,114,97,118,101,5,200,1,59,1534,1,200,101,109,101,110,116,59,1,8712,4,2,97,112,1550,1555,99,114,59,1,274,116,121,4,2,83,86,1563,1576,109,97,108,108,83,113,117,97,114,101,59,1,9723,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9643,4,2,103,112,1599,1604,111,110,59,1,280,102,59,3,55349,56636,115,105,108,111,110,59,1,917,117,4,2,97,105,1624,1640,108,4,2,59,84,1631,1633,1,10869,105,108,100,101,59,1,8770,108,105,98,114,105,117,109,59,1,8652,4,2,99,105,1656,1660,114,59,1,8496,109,59,1,10867,97,59,1,919,109,108,5,203,1,59,1675,1,203,4,2,105,112,1683,1689,115,116,115,59,1,8707,111,110,101,110,116,105,97,108,69,59,1,8519,4,5,99,102,105,111,115,1713,1717,1722,1762,1791,121,59,1,1060,114,59,3,55349,56585,108,108,101,100,4,2,83,86,1732,1745,109,97,108,108,83,113,117,97,114,101,59,1,9724,101,114,121,83,109,97,108,108,83,113,117,97,114,101,59,1,9642,4,3,112,114,117,1770,1775,1781,102,59,3,55349,56637,65,108,108,59,1,8704,114,105,101,114,116,114,102,59,1,8497,99,114,59,1,8497,4,12,74,84,97,98,99,100,102,103,111,114,115,116,1822,1827,1834,1848,1855,1877,1882,1887,1890,1896,1978,1984,99,121,59,1,1027,5,62,1,59,1832,1,62,109,109,97,4,2,59,100,1843,1845,1,915,59,1,988,114,101,118,101,59,1,286,4,3,101,105,121,1863,1869,1874,100,105,108,59,1,290,114,99,59,1,284,59,1,1043,111,116,59,1,288,114,59,3,55349,56586,59,1,8921,112,102,59,3,55349,56638,101,97,116,101,114,4,6,69,70,71,76,83,84,1915,1933,1944,1953,1959,1971,113,117,97,108,4,2,59,76,1925,1927,1,8805,101,115,115,59,1,8923,117,108,108,69,113,117,97,108,59,1,8807,114,101,97,116,101,114,59,1,10914,101,115,115,59,1,8823,108,97,110,116,69,113,117,97,108,59,1,10878,105,108,100,101,59,1,8819,99,114,59,3,55349,56482,59,1,8811,4,8,65,97,99,102,105,111,115,117,2005,2012,2026,2032,2036,2049,2073,2089,82,68,99,121,59,1,1066,4,2,99,116,2018,2023,101,107,59,1,711,59,1,94,105,114,99,59,1,292,114,59,1,8460,108,98,101,114,116,83,112,97,99,101,59,1,8459,4,2,112,114,2055,2059,102,59,1,8461,105,122,111,110,116,97,108,76,105,110,101,59,1,9472,4,2,99,116,2079,2083,114,59,1,8459,114,111,107,59,1,294,109,112,4,2,68,69,2097,2107,111,119,110,72,117,109,112,59,1,8782,113,117,97,108,59,1,8783,4,14,69,74,79,97,99,100,102,103,109,110,111,115,116,117,2144,2149,2155,2160,2171,2189,2194,2198,2209,2245,2307,2329,2334,2341,99,121,59,1,1045,108,105,103,59,1,306,99,121,59,1,1025,99,117,116,101,5,205,1,59,2169,1,205,4,2,105,121,2177,2186,114,99,5,206,1,59,2184,1,206,59,1,1048,111,116,59,1,304,114,59,1,8465,114,97,118,101,5,204,1,59,2207,1,204,4,3,59,97,112,2217,2219,2238,1,8465,4,2,99,103,2225,2229,114,59,1,298,105,110,97,114,121,73,59,1,8520,108,105,101,115,59,1,8658,4,2,116,118,2251,2281,4,2,59,101,2257,2259,1,8748,4,2,103,114,2265,2271,114,97,108,59,1,8747,115,101,99,116,105,111,110,59,1,8898,105,115,105,98,108,101,4,2,67,84,2293,2300,111,109,109,97,59,1,8291,105,109,101,115,59,1,8290,4,3,103,112,116,2315,2320,2325,111,110,59,1,302,102,59,3,55349,56640,97,59,1,921,99,114,59,1,8464,105,108,100,101,59,1,296,4,2,107,109,2347,2352,99,121,59,1,1030,108,5,207,1,59,2358,1,207,4,5,99,102,111,115,117,2372,2386,2391,2397,2414,4,2,105,121,2378,2383,114,99,59,1,308,59,1,1049,114,59,3,55349,56589,112,102,59,3,55349,56641,4,2,99,101,2403,2408,114,59,3,55349,56485,114,99,121,59,1,1032,107,99,121,59,1,1028,4,7,72,74,97,99,102,111,115,2436,2441,2446,2452,2467,2472,2478,99,121,59,1,1061,99,121,59,1,1036,112,112,97,59,1,922,4,2,101,121,2458,2464,100,105,108,59,1,310,59,1,1050,114,59,3,55349,56590,112,102,59,3,55349,56642,99,114,59,3,55349,56486,4,11,74,84,97,99,101,102,108,109,111,115,116,2508,2513,2520,2562,2585,2981,2986,3004,3011,3146,3167,99,121,59,1,1033,5,60,1,59,2518,1,60,4,5,99,109,110,112,114,2532,2538,2544,2548,2558,117,116,101,59,1,313,98,100,97,59,1,923,103,59,1,10218,108,97,99,101,116,114,102,59,1,8466,114,59,1,8606,4,3,97,101,121,2570,2576,2582,114,111,110,59,1,317,100,105,108,59,1,315,59,1,1051,4,2,102,115,2591,2907,116,4,10,65,67,68,70,82,84,85,86,97,114,2614,2663,2672,2728,2735,2760,2820,2870,2888,2895,4,2,110,114,2620,2633,103,108,101,66,114,97,99,107,101,116,59,1,10216,114,111,119,4,3,59,66,82,2644,2646,2651,1,8592,97,114,59,1,8676,105,103,104,116,65,114,114,111,119,59,1,8646,101,105,108,105,110,103,59,1,8968,111,4,2,117,119,2679,2692,98,108,101,66,114,97,99,107,101,116,59,1,10214,110,4,2,84,86,2699,2710,101,101,86,101,99,116,111,114,59,1,10593,101,99,116,111,114,4,2,59,66,2721,2723,1,8643,97,114,59,1,10585,108,111,111,114,59,1,8970,105,103,104,116,4,2,65,86,2745,2752,114,114,111,119,59,1,8596,101,99,116,111,114,59,1,10574,4,2,101,114,2766,2792,101,4,3,59,65,86,2775,2777,2784,1,8867,114,114,111,119,59,1,8612,101,99,116,111,114,59,1,10586,105,97,110,103,108,101,4,3,59,66,69,2806,2808,2813,1,8882,97,114,59,1,10703,113,117,97,108,59,1,8884,112,4,3,68,84,86,2829,2841,2852,111,119,110,86,101,99,116,111,114,59,1,10577,101,101,86,101,99,116,111,114,59,1,10592,101,99,116,111,114,4,2,59,66,2863,2865,1,8639,97,114,59,1,10584,101,99,116,111,114,4,2,59,66,2881,2883,1,8636,97,114,59,1,10578,114,114,111,119,59,1,8656,105,103,104,116,97,114,114,111,119,59,1,8660,115,4,6,69,70,71,76,83,84,2922,2936,2947,2956,2962,2974,113,117,97,108,71,114,101,97,116,101,114,59,1,8922,117,108,108,69,113,117,97,108,59,1,8806,114,101,97,116,101,114,59,1,8822,101,115,115,59,1,10913,108,97,110,116,69,113,117,97,108,59,1,10877,105,108,100,101,59,1,8818,114,59,3,55349,56591,4,2,59,101,2992,2994,1,8920,102,116,97,114,114,111,119,59,1,8666,105,100,111,116,59,1,319,4,3,110,112,119,3019,3110,3115,103,4,4,76,82,108,114,3030,3058,3070,3098,101,102,116,4,2,65,82,3039,3046,114,114,111,119,59,1,10229,105,103,104,116,65,114,114,111,119,59,1,10231,105,103,104,116,65,114,114,111,119,59,1,10230,101,102,116,4,2,97,114,3079,3086,114,114,111,119,59,1,10232,105,103,104,116,97,114,114,111,119,59,1,10234,105,103,104,116,97,114,114,111,119,59,1,10233,102,59,3,55349,56643,101,114,4,2,76,82,3123,3134,101,102,116,65,114,114,111,119,59,1,8601,105,103,104,116,65,114,114,111,119,59,1,8600,4,3,99,104,116,3154,3158,3161,114,59,1,8466,59,1,8624,114,111,107,59,1,321,59,1,8810,4,8,97,99,101,102,105,111,115,117,3188,3192,3196,3222,3227,3237,3243,3248,112,59,1,10501,121,59,1,1052,4,2,100,108,3202,3213,105,117,109,83,112,97,99,101,59,1,8287,108,105,110,116,114,102,59,1,8499,114,59,3,55349,56592,110,117,115,80,108,117,115,59,1,8723,112,102,59,3,55349,56644,99,114,59,1,8499,59,1,924,4,9,74,97,99,101,102,111,115,116,117,3271,3276,3283,3306,3422,3427,4120,4126,4137,99,121,59,1,1034,99,117,116,101,59,1,323,4,3,97,101,121,3291,3297,3303,114,111,110,59,1,327,100,105,108,59,1,325,59,1,1053,4,3,103,115,119,3314,3380,3415,97,116,105,118,101,4,3,77,84,86,3327,3340,3365,101,100,105,117,109,83,112,97,99,101,59,1,8203,104,105,4,2,99,110,3348,3357,107,83,112,97,99,101,59,1,8203,83,112,97,99,101,59,1,8203,101,114,121,84,104,105,110,83,112,97,99,101,59,1,8203,116,101,100,4,2,71,76,3389,3405,114,101,97,116,101,114,71,114,101,97,116,101,114,59,1,8811,101,115,115,76,101,115,115,59,1,8810,76,105,110,101,59,1,10,114,59,3,55349,56593,4,4,66,110,112,116,3437,3444,3460,3464,114,101,97,107,59,1,8288,66,114,101,97,107,105,110,103,83,112,97,99,101,59,1,160,102,59,1,8469,4,13,59,67,68,69,71,72,76,78,80,82,83,84,86,3492,3494,3517,3536,3578,3657,3685,3784,3823,3860,3915,4066,4107,1,10988,4,2,111,117,3500,3510,110,103,114,117,101,110,116,59,1,8802,112,67,97,112,59,1,8813,111,117,98,108,101,86,101,114,116,105,99,97,108,66,97,114,59,1,8742,4,3,108,113,120,3544,3552,3571,101,109,101,110,116,59,1,8713,117,97,108,4,2,59,84,3561,3563,1,8800,105,108,100,101,59,3,8770,824,105,115,116,115,59,1,8708,114,101,97,116,101,114,4,7,59,69,70,71,76,83,84,3600,3602,3609,3621,3631,3637,3650,1,8815,113,117,97,108,59,1,8817,117,108,108,69,113,117,97,108,59,3,8807,824,114,101,97,116,101,114,59,3,8811,824,101,115,115,59,1,8825,108,97,110,116,69,113,117,97,108,59,3,10878,824,105,108,100,101,59,1,8821,117,109,112,4,2,68,69,3666,3677,111,119,110,72,117,109,112,59,3,8782,824,113,117,97,108,59,3,8783,824,101,4,2,102,115,3692,3724,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3709,3711,3717,1,8938,97,114,59,3,10703,824,113,117,97,108,59,1,8940,115,4,6,59,69,71,76,83,84,3739,3741,3748,3757,3764,3777,1,8814,113,117,97,108,59,1,8816,114,101,97,116,101,114,59,1,8824,101,115,115,59,3,8810,824,108,97,110,116,69,113,117,97,108,59,3,10877,824,105,108,100,101,59,1,8820,101,115,116,101,100,4,2,71,76,3795,3812,114,101,97,116,101,114,71,114,101,97,116,101,114,59,3,10914,824,101,115,115,76,101,115,115,59,3,10913,824,114,101,99,101,100,101,115,4,3,59,69,83,3838,3840,3848,1,8832,113,117,97,108,59,3,10927,824,108,97,110,116,69,113,117,97,108,59,1,8928,4,2,101,105,3866,3881,118,101,114,115,101,69,108,101,109,101,110,116,59,1,8716,103,104,116,84,114,105,97,110,103,108,101,4,3,59,66,69,3900,3902,3908,1,8939,97,114,59,3,10704,824,113,117,97,108,59,1,8941,4,2,113,117,3921,3973,117,97,114,101,83,117,4,2,98,112,3933,3952,115,101,116,4,2,59,69,3942,3945,3,8847,824,113,117,97,108,59,1,8930,101,114,115,101,116,4,2,59,69,3963,3966,3,8848,824,113,117,97,108,59,1,8931,4,3,98,99,112,3981,4e3,4045,115,101,116,4,2,59,69,3990,3993,3,8834,8402,113,117,97,108,59,1,8840,99,101,101,100,115,4,4,59,69,83,84,4015,4017,4025,4037,1,8833,113,117,97,108,59,3,10928,824,108,97,110,116,69,113,117,97,108,59,1,8929,105,108,100,101,59,3,8831,824,101,114,115,101,116,4,2,59,69,4056,4059,3,8835,8402,113,117,97,108,59,1,8841,105,108,100,101,4,4,59,69,70,84,4080,4082,4089,4100,1,8769,113,117,97,108,59,1,8772,117,108,108,69,113,117,97,108,59,1,8775,105,108,100,101,59,1,8777,101,114,116,105,99,97,108,66,97,114,59,1,8740,99,114,59,3,55349,56489,105,108,100,101,5,209,1,59,4135,1,209,59,1,925,4,14,69,97,99,100,102,103,109,111,112,114,115,116,117,118,4170,4176,4187,4205,4212,4217,4228,4253,4259,4292,4295,4316,4337,4346,108,105,103,59,1,338,99,117,116,101,5,211,1,59,4185,1,211,4,2,105,121,4193,4202,114,99,5,212,1,59,4200,1,212,59,1,1054,98,108,97,99,59,1,336,114,59,3,55349,56594,114,97,118,101,5,210,1,59,4226,1,210,4,3,97,101,105,4236,4241,4246,99,114,59,1,332,103,97,59,1,937,99,114,111,110,59,1,927,112,102,59,3,55349,56646,101,110,67,117,114,108,121,4,2,68,81,4272,4285,111,117,98,108,101,81,117,111,116,101,59,1,8220,117,111,116,101,59,1,8216,59,1,10836,4,2,99,108,4301,4306,114,59,3,55349,56490,97,115,104,5,216,1,59,4314,1,216,105,4,2,108,109,4323,4332,100,101,5,213,1,59,4330,1,213,101,115,59,1,10807,109,108,5,214,1,59,4344,1,214,101,114,4,2,66,80,4354,4380,4,2,97,114,4360,4364,114,59,1,8254,97,99,4,2,101,107,4372,4375,59,1,9182,101,116,59,1,9140,97,114,101,110,116,104,101,115,105,115,59,1,9180,4,9,97,99,102,104,105,108,111,114,115,4413,4422,4426,4431,4435,4438,4448,4471,4561,114,116,105,97,108,68,59,1,8706,121,59,1,1055,114,59,3,55349,56595,105,59,1,934,59,1,928,117,115,77,105,110,117,115,59,1,177,4,2,105,112,4454,4467,110,99,97,114,101,112,108,97,110,101,59,1,8460,102,59,1,8473,4,4,59,101,105,111,4481,4483,4526,4531,1,10939,99,101,100,101,115,4,4,59,69,83,84,4498,4500,4507,4519,1,8826,113,117,97,108,59,1,10927,108,97,110,116,69,113,117,97,108,59,1,8828,105,108,100,101,59,1,8830,109,101,59,1,8243,4,2,100,112,4537,4543,117,99,116,59,1,8719,111,114,116,105,111,110,4,2,59,97,4555,4557,1,8759,108,59,1,8733,4,2,99,105,4567,4572,114,59,3,55349,56491,59,1,936,4,4,85,102,111,115,4585,4594,4599,4604,79,84,5,34,1,59,4592,1,34,114,59,3,55349,56596,112,102,59,1,8474,99,114,59,3,55349,56492,4,12,66,69,97,99,101,102,104,105,111,114,115,117,4636,4642,4650,4681,4704,4763,4767,4771,5047,5069,5081,5094,97,114,114,59,1,10512,71,5,174,1,59,4648,1,174,4,3,99,110,114,4658,4664,4668,117,116,101,59,1,340,103,59,1,10219,114,4,2,59,116,4675,4677,1,8608,108,59,1,10518,4,3,97,101,121,4689,4695,4701,114,111,110,59,1,344,100,105,108,59,1,342,59,1,1056,4,2,59,118,4710,4712,1,8476,101,114,115,101,4,2,69,85,4722,4748,4,2,108,113,4728,4736,101,109,101,110,116,59,1,8715,117,105,108,105,98,114,105,117,109,59,1,8651,112,69,113,117,105,108,105,98,114,105,117,109,59,1,10607,114,59,1,8476,111,59,1,929,103,104,116,4,8,65,67,68,70,84,85,86,97,4792,4840,4849,4905,4912,4972,5022,5040,4,2,110,114,4798,4811,103,108,101,66,114,97,99,107,101,116,59,1,10217,114,111,119,4,3,59,66,76,4822,4824,4829,1,8594,97,114,59,1,8677,101,102,116,65,114,114,111,119,59,1,8644,101,105,108,105,110,103,59,1,8969,111,4,2,117,119,4856,4869,98,108,101,66,114,97,99,107,101,116,59,1,10215,110,4,2,84,86,4876,4887,101,101,86,101,99,116,111,114,59,1,10589,101,99,116,111,114,4,2,59,66,4898,4900,1,8642,97,114,59,1,10581,108,111,111,114,59,1,8971,4,2,101,114,4918,4944,101,4,3,59,65,86,4927,4929,4936,1,8866,114,114,111,119,59,1,8614,101,99,116,111,114,59,1,10587,105,97,110,103,108,101,4,3,59,66,69,4958,4960,4965,1,8883,97,114,59,1,10704,113,117,97,108,59,1,8885,112,4,3,68,84,86,4981,4993,5004,111,119,110,86,101,99,116,111,114,59,1,10575,101,101,86,101,99,116,111,114,59,1,10588,101,99,116,111,114,4,2,59,66,5015,5017,1,8638,97,114,59,1,10580,101,99,116,111,114,4,2,59,66,5033,5035,1,8640,97,114,59,1,10579,114,114,111,119,59,1,8658,4,2,112,117,5053,5057,102,59,1,8477,110,100,73,109,112,108,105,101,115,59,1,10608,105,103,104,116,97,114,114,111,119,59,1,8667,4,2,99,104,5087,5091,114,59,1,8475,59,1,8625,108,101,68,101,108,97,121,101,100,59,1,10740,4,13,72,79,97,99,102,104,105,109,111,113,115,116,117,5134,5150,5157,5164,5198,5203,5259,5265,5277,5283,5374,5380,5385,4,2,67,99,5140,5146,72,99,121,59,1,1065,121,59,1,1064,70,84,99,121,59,1,1068,99,117,116,101,59,1,346,4,5,59,97,101,105,121,5176,5178,5184,5190,5195,1,10940,114,111,110,59,1,352,100,105,108,59,1,350,114,99,59,1,348,59,1,1057,114,59,3,55349,56598,111,114,116,4,4,68,76,82,85,5216,5227,5238,5250,111,119,110,65,114,114,111,119,59,1,8595,101,102,116,65,114,114,111,119,59,1,8592,105,103,104,116,65,114,114,111,119,59,1,8594,112,65,114,114,111,119,59,1,8593,103,109,97,59,1,931,97,108,108,67,105,114,99,108,101,59,1,8728,112,102,59,3,55349,56650,4,2,114,117,5289,5293,116,59,1,8730,97,114,101,4,4,59,73,83,85,5306,5308,5322,5367,1,9633,110,116,101,114,115,101,99,116,105,111,110,59,1,8851,117,4,2,98,112,5329,5347,115,101,116,4,2,59,69,5338,5340,1,8847,113,117,97,108,59,1,8849,101,114,115,101,116,4,2,59,69,5358,5360,1,8848,113,117,97,108,59,1,8850,110,105,111,110,59,1,8852,99,114,59,3,55349,56494,97,114,59,1,8902,4,4,98,99,109,112,5395,5420,5475,5478,4,2,59,115,5401,5403,1,8912,101,116,4,2,59,69,5411,5413,1,8912,113,117,97,108,59,1,8838,4,2,99,104,5426,5468,101,101,100,115,4,4,59,69,83,84,5440,5442,5449,5461,1,8827,113,117,97,108,59,1,10928,108,97,110,116,69,113,117,97,108,59,1,8829,105,108,100,101,59,1,8831,84,104,97,116,59,1,8715,59,1,8721,4,3,59,101,115,5486,5488,5507,1,8913,114,115,101,116,4,2,59,69,5498,5500,1,8835,113,117,97,108,59,1,8839,101,116,59,1,8913,4,11,72,82,83,97,99,102,104,105,111,114,115,5536,5546,5552,5567,5579,5602,5607,5655,5695,5701,5711,79,82,78,5,222,1,59,5544,1,222,65,68,69,59,1,8482,4,2,72,99,5558,5563,99,121,59,1,1035,121,59,1,1062,4,2,98,117,5573,5576,59,1,9,59,1,932,4,3,97,101,121,5587,5593,5599,114,111,110,59,1,356,100,105,108,59,1,354,59,1,1058,114,59,3,55349,56599,4,2,101,105,5613,5631,4,2,114,116,5619,5627,101,102,111,114,101,59,1,8756,97,59,1,920,4,2,99,110,5637,5647,107,83,112,97,99,101,59,3,8287,8202,83,112,97,99,101,59,1,8201,108,100,101,4,4,59,69,70,84,5668,5670,5677,5688,1,8764,113,117,97,108,59,1,8771,117,108,108,69,113,117,97,108,59,1,8773,105,108,100,101,59,1,8776,112,102,59,3,55349,56651,105,112,108,101,68,111,116,59,1,8411,4,2,99,116,5717,5722,114,59,3,55349,56495,114,111,107,59,1,358,4,14,97,98,99,100,102,103,109,110,111,112,114,115,116,117,5758,5789,5805,5823,5830,5835,5846,5852,5921,5937,6089,6095,6101,6108,4,2,99,114,5764,5774,117,116,101,5,218,1,59,5772,1,218,114,4,2,59,111,5781,5783,1,8607,99,105,114,59,1,10569,114,4,2,99,101,5796,5800,121,59,1,1038,118,101,59,1,364,4,2,105,121,5811,5820,114,99,5,219,1,59,5818,1,219,59,1,1059,98,108,97,99,59,1,368,114,59,3,55349,56600,114,97,118,101,5,217,1,59,5844,1,217,97,99,114,59,1,362,4,2,100,105,5858,5905,101,114,4,2,66,80,5866,5892,4,2,97,114,5872,5876,114,59,1,95,97,99,4,2,101,107,5884,5887,59,1,9183,101,116,59,1,9141,97,114,101,110,116,104,101,115,105,115,59,1,9181,111,110,4,2,59,80,5913,5915,1,8899,108,117,115,59,1,8846,4,2,103,112,5927,5932,111,110,59,1,370,102,59,3,55349,56652,4,8,65,68,69,84,97,100,112,115,5955,5985,5996,6009,6026,6033,6044,6075,114,114,111,119,4,3,59,66,68,5967,5969,5974,1,8593,97,114,59,1,10514,111,119,110,65,114,114,111,119,59,1,8645,111,119,110,65,114,114,111,119,59,1,8597,113,117,105,108,105,98,114,105,117,109,59,1,10606,101,101,4,2,59,65,6017,6019,1,8869,114,114,111,119,59,1,8613,114,114,111,119,59,1,8657,111,119,110,97,114,114,111,119,59,1,8661,101,114,4,2,76,82,6052,6063,101,102,116,65,114,114,111,119,59,1,8598,105,103,104,116,65,114,114,111,119,59,1,8599,105,4,2,59,108,6082,6084,1,978,111,110,59,1,933,105,110,103,59,1,366,99,114,59,3,55349,56496,105,108,100,101,59,1,360,109,108,5,220,1,59,6115,1,220,4,9,68,98,99,100,101,102,111,115,118,6137,6143,6148,6152,6166,6250,6255,6261,6267,97,115,104,59,1,8875,97,114,59,1,10987,121,59,1,1042,97,115,104,4,2,59,108,6161,6163,1,8873,59,1,10982,4,2,101,114,6172,6175,59,1,8897,4,3,98,116,121,6183,6188,6238,97,114,59,1,8214,4,2,59,105,6194,6196,1,8214,99,97,108,4,4,66,76,83,84,6209,6214,6220,6231,97,114,59,1,8739,105,110,101,59,1,124,101,112,97,114,97,116,111,114,59,1,10072,105,108,100,101,59,1,8768,84,104,105,110,83,112,97,99,101,59,1,8202,114,59,3,55349,56601,112,102,59,3,55349,56653,99,114,59,3,55349,56497,100,97,115,104,59,1,8874,4,5,99,101,102,111,115,6286,6292,6298,6303,6309,105,114,99,59,1,372,100,103,101,59,1,8896,114,59,3,55349,56602,112,102,59,3,55349,56654,99,114,59,3,55349,56498,4,4,102,105,111,115,6325,6330,6333,6339,114,59,3,55349,56603,59,1,926,112,102,59,3,55349,56655,99,114,59,3,55349,56499,4,9,65,73,85,97,99,102,111,115,117,6365,6370,6375,6380,6391,6405,6410,6416,6422,99,121,59,1,1071,99,121,59,1,1031,99,121,59,1,1070,99,117,116,101,5,221,1,59,6389,1,221,4,2,105,121,6397,6402,114,99,59,1,374,59,1,1067,114,59,3,55349,56604,112,102,59,3,55349,56656,99,114,59,3,55349,56500,109,108,59,1,376,4,8,72,97,99,100,101,102,111,115,6445,6450,6457,6472,6477,6501,6505,6510,99,121,59,1,1046,99,117,116,101,59,1,377,4,2,97,121,6463,6469,114,111,110,59,1,381,59,1,1047,111,116,59,1,379,4,2,114,116,6483,6497,111,87,105,100,116,104,83,112,97,99,101,59,1,8203,97,59,1,918,114,59,1,8488,112,102,59,1,8484,99,114,59,3,55349,56501,4,16,97,98,99,101,102,103,108,109,110,111,112,114,115,116,117,119,6550,6561,6568,6612,6622,6634,6645,6672,6699,6854,6870,6923,6933,6963,6974,6983,99,117,116,101,5,225,1,59,6559,1,225,114,101,118,101,59,1,259,4,6,59,69,100,105,117,121,6582,6584,6588,6591,6600,6609,1,8766,59,3,8766,819,59,1,8767,114,99,5,226,1,59,6598,1,226,116,101,5,180,1,59,6607,1,180,59,1,1072,108,105,103,5,230,1,59,6620,1,230,4,2,59,114,6628,6630,1,8289,59,3,55349,56606,114,97,118,101,5,224,1,59,6643,1,224,4,2,101,112,6651,6667,4,2,102,112,6657,6663,115,121,109,59,1,8501,104,59,1,8501,104,97,59,1,945,4,2,97,112,6678,6692,4,2,99,108,6684,6688,114,59,1,257,103,59,1,10815,5,38,1,59,6697,1,38,4,2,100,103,6705,6737,4,5,59,97,100,115,118,6717,6719,6724,6727,6734,1,8743,110,100,59,1,10837,59,1,10844,108,111,112,101,59,1,10840,59,1,10842,4,7,59,101,108,109,114,115,122,6753,6755,6758,6762,6814,6835,6848,1,8736,59,1,10660,101,59,1,8736,115,100,4,2,59,97,6770,6772,1,8737,4,8,97,98,99,100,101,102,103,104,6790,6793,6796,6799,6802,6805,6808,6811,59,1,10664,59,1,10665,59,1,10666,59,1,10667,59,1,10668,59,1,10669,59,1,10670,59,1,10671,116,4,2,59,118,6821,6823,1,8735,98,4,2,59,100,6830,6832,1,8894,59,1,10653,4,2,112,116,6841,6845,104,59,1,8738,59,1,197,97,114,114,59,1,9084,4,2,103,112,6860,6865,111,110,59,1,261,102,59,3,55349,56658,4,7,59,69,97,101,105,111,112,6886,6888,6891,6897,6900,6904,6908,1,8776,59,1,10864,99,105,114,59,1,10863,59,1,8778,100,59,1,8779,115,59,1,39,114,111,120,4,2,59,101,6917,6919,1,8776,113,59,1,8778,105,110,103,5,229,1,59,6931,1,229,4,3,99,116,121,6941,6946,6949,114,59,3,55349,56502,59,1,42,109,112,4,2,59,101,6957,6959,1,8776,113,59,1,8781,105,108,100,101,5,227,1,59,6972,1,227,109,108,5,228,1,59,6981,1,228,4,2,99,105,6989,6997,111,110,105,110,116,59,1,8755,110,116,59,1,10769,4,16,78,97,98,99,100,101,102,105,107,108,110,111,112,114,115,117,7036,7041,7119,7135,7149,7155,7219,7224,7347,7354,7463,7489,7786,7793,7814,7866,111,116,59,1,10989,4,2,99,114,7047,7094,107,4,4,99,101,112,115,7058,7064,7073,7080,111,110,103,59,1,8780,112,115,105,108,111,110,59,1,1014,114,105,109,101,59,1,8245,105,109,4,2,59,101,7088,7090,1,8765,113,59,1,8909,4,2,118,119,7100,7105,101,101,59,1,8893,101,100,4,2,59,103,7113,7115,1,8965,101,59,1,8965,114,107,4,2,59,116,7127,7129,1,9141,98,114,107,59,1,9142,4,2,111,121,7141,7146,110,103,59,1,8780,59,1,1073,113,117,111,59,1,8222,4,5,99,109,112,114,116,7167,7181,7188,7193,7199,97,117,115,4,2,59,101,7176,7178,1,8757,59,1,8757,112,116,121,118,59,1,10672,115,105,59,1,1014,110,111,117,59,1,8492,4,3,97,104,119,7207,7210,7213,59,1,946,59,1,8502,101,101,110,59,1,8812,114,59,3,55349,56607,103,4,7,99,111,115,116,117,118,119,7241,7262,7288,7305,7328,7335,7340,4,3,97,105,117,7249,7253,7258,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,4,3,100,112,116,7270,7275,7281,111,116,59,1,10752,108,117,115,59,1,10753,105,109,101,115,59,1,10754,4,2,113,116,7294,7300,99,117,112,59,1,10758,97,114,59,1,9733,114,105,97,110,103,108,101,4,2,100,117,7318,7324,111,119,110,59,1,9661,112,59,1,9651,112,108,117,115,59,1,10756,101,101,59,1,8897,101,100,103,101,59,1,8896,97,114,111,119,59,1,10509,4,3,97,107,111,7362,7436,7458,4,2,99,110,7368,7432,107,4,3,108,115,116,7377,7386,7394,111,122,101,110,103,101,59,1,10731,113,117,97,114,101,59,1,9642,114,105,97,110,103,108,101,4,4,59,100,108,114,7411,7413,7419,7425,1,9652,111,119,110,59,1,9662,101,102,116,59,1,9666,105,103,104,116,59,1,9656,107,59,1,9251,4,2,49,51,7442,7454,4,2,50,52,7448,7451,59,1,9618,59,1,9617,52,59,1,9619,99,107,59,1,9608,4,2,101,111,7469,7485,4,2,59,113,7475,7478,3,61,8421,117,105,118,59,3,8801,8421,116,59,1,8976,4,4,112,116,119,120,7499,7504,7517,7523,102,59,3,55349,56659,4,2,59,116,7510,7512,1,8869,111,109,59,1,8869,116,105,101,59,1,8904,4,12,68,72,85,86,98,100,104,109,112,116,117,118,7549,7571,7597,7619,7655,7660,7682,7708,7715,7721,7728,7750,4,4,76,82,108,114,7559,7562,7565,7568,59,1,9559,59,1,9556,59,1,9558,59,1,9555,4,5,59,68,85,100,117,7583,7585,7588,7591,7594,1,9552,59,1,9574,59,1,9577,59,1,9572,59,1,9575,4,4,76,82,108,114,7607,7610,7613,7616,59,1,9565,59,1,9562,59,1,9564,59,1,9561,4,7,59,72,76,82,104,108,114,7635,7637,7640,7643,7646,7649,7652,1,9553,59,1,9580,59,1,9571,59,1,9568,59,1,9579,59,1,9570,59,1,9567,111,120,59,1,10697,4,4,76,82,108,114,7670,7673,7676,7679,59,1,9557,59,1,9554,59,1,9488,59,1,9484,4,5,59,68,85,100,117,7694,7696,7699,7702,7705,1,9472,59,1,9573,59,1,9576,59,1,9516,59,1,9524,105,110,117,115,59,1,8863,108,117,115,59,1,8862,105,109,101,115,59,1,8864,4,4,76,82,108,114,7738,7741,7744,7747,59,1,9563,59,1,9560,59,1,9496,59,1,9492,4,7,59,72,76,82,104,108,114,7766,7768,7771,7774,7777,7780,7783,1,9474,59,1,9578,59,1,9569,59,1,9566,59,1,9532,59,1,9508,59,1,9500,114,105,109,101,59,1,8245,4,2,101,118,7799,7804,118,101,59,1,728,98,97,114,5,166,1,59,7812,1,166,4,4,99,101,105,111,7824,7829,7834,7846,114,59,3,55349,56503,109,105,59,1,8271,109,4,2,59,101,7841,7843,1,8765,59,1,8909,108,4,3,59,98,104,7855,7857,7860,1,92,59,1,10693,115,117,98,59,1,10184,4,2,108,109,7872,7885,108,4,2,59,101,7879,7881,1,8226,116,59,1,8226,112,4,3,59,69,101,7894,7896,7899,1,8782,59,1,10926,4,2,59,113,7905,7907,1,8783,59,1,8783,4,15,97,99,100,101,102,104,105,108,111,114,115,116,117,119,121,7942,8021,8075,8080,8121,8126,8157,8279,8295,8430,8446,8485,8491,8707,8726,4,3,99,112,114,7950,7956,8007,117,116,101,59,1,263,4,6,59,97,98,99,100,115,7970,7972,7977,7984,7998,8003,1,8745,110,100,59,1,10820,114,99,117,112,59,1,10825,4,2,97,117,7990,7994,112,59,1,10827,112,59,1,10823,111,116,59,1,10816,59,3,8745,65024,4,2,101,111,8013,8017,116,59,1,8257,110,59,1,711,4,4,97,101,105,117,8031,8046,8056,8061,4,2,112,114,8037,8041,115,59,1,10829,111,110,59,1,269,100,105,108,5,231,1,59,8054,1,231,114,99,59,1,265,112,115,4,2,59,115,8069,8071,1,10828,109,59,1,10832,111,116,59,1,267,4,3,100,109,110,8088,8097,8104,105,108,5,184,1,59,8095,1,184,112,116,121,118,59,1,10674,116,5,162,2,59,101,8112,8114,1,162,114,100,111,116,59,1,183,114,59,3,55349,56608,4,3,99,101,105,8134,8138,8154,121,59,1,1095,99,107,4,2,59,109,8146,8148,1,10003,97,114,107,59,1,10003,59,1,967,114,4,7,59,69,99,101,102,109,115,8174,8176,8179,8258,8261,8268,8273,1,9675,59,1,10691,4,3,59,101,108,8187,8189,8193,1,710,113,59,1,8791,101,4,2,97,100,8200,8223,114,114,111,119,4,2,108,114,8210,8216,101,102,116,59,1,8634,105,103,104,116,59,1,8635,4,5,82,83,97,99,100,8235,8238,8241,8246,8252,59,1,174,59,1,9416,115,116,59,1,8859,105,114,99,59,1,8858,97,115,104,59,1,8861,59,1,8791,110,105,110,116,59,1,10768,105,100,59,1,10991,99,105,114,59,1,10690,117,98,115,4,2,59,117,8288,8290,1,9827,105,116,59,1,9827,4,4,108,109,110,112,8305,8326,8376,8400,111,110,4,2,59,101,8313,8315,1,58,4,2,59,113,8321,8323,1,8788,59,1,8788,4,2,109,112,8332,8344,97,4,2,59,116,8339,8341,1,44,59,1,64,4,3,59,102,108,8352,8354,8358,1,8705,110,59,1,8728,101,4,2,109,120,8365,8371,101,110,116,59,1,8705,101,115,59,1,8450,4,2,103,105,8382,8395,4,2,59,100,8388,8390,1,8773,111,116,59,1,10861,110,116,59,1,8750,4,3,102,114,121,8408,8412,8417,59,3,55349,56660,111,100,59,1,8720,5,169,2,59,115,8424,8426,1,169,114,59,1,8471,4,2,97,111,8436,8441,114,114,59,1,8629,115,115,59,1,10007,4,2,99,117,8452,8457,114,59,3,55349,56504,4,2,98,112,8463,8474,4,2,59,101,8469,8471,1,10959,59,1,10961,4,2,59,101,8480,8482,1,10960,59,1,10962,100,111,116,59,1,8943,4,7,100,101,108,112,114,118,119,8507,8522,8536,8550,8600,8697,8702,97,114,114,4,2,108,114,8516,8519,59,1,10552,59,1,10549,4,2,112,115,8528,8532,114,59,1,8926,99,59,1,8927,97,114,114,4,2,59,112,8545,8547,1,8630,59,1,10557,4,6,59,98,99,100,111,115,8564,8566,8573,8587,8592,8596,1,8746,114,99,97,112,59,1,10824,4,2,97,117,8579,8583,112,59,1,10822,112,59,1,10826,111,116,59,1,8845,114,59,1,10821,59,3,8746,65024,4,4,97,108,114,118,8610,8623,8663,8672,114,114,4,2,59,109,8618,8620,1,8631,59,1,10556,121,4,3,101,118,119,8632,8651,8656,113,4,2,112,115,8639,8645,114,101,99,59,1,8926,117,99,99,59,1,8927,101,101,59,1,8910,101,100,103,101,59,1,8911,101,110,5,164,1,59,8670,1,164,101,97,114,114,111,119,4,2,108,114,8684,8690,101,102,116,59,1,8630,105,103,104,116,59,1,8631,101,101,59,1,8910,101,100,59,1,8911,4,2,99,105,8713,8721,111,110,105,110,116,59,1,8754,110,116,59,1,8753,108,99,116,121,59,1,9005,4,19,65,72,97,98,99,100,101,102,104,105,106,108,111,114,115,116,117,119,122,8773,8778,8783,8821,8839,8854,8887,8914,8930,8944,9036,9041,9058,9197,9227,9258,9281,9297,9305,114,114,59,1,8659,97,114,59,1,10597,4,4,103,108,114,115,8793,8799,8805,8809,103,101,114,59,1,8224,101,116,104,59,1,8504,114,59,1,8595,104,4,2,59,118,8816,8818,1,8208,59,1,8867,4,2,107,108,8827,8834,97,114,111,119,59,1,10511,97,99,59,1,733,4,2,97,121,8845,8851,114,111,110,59,1,271,59,1,1076,4,3,59,97,111,8862,8864,8880,1,8518,4,2,103,114,8870,8876,103,101,114,59,1,8225,114,59,1,8650,116,115,101,113,59,1,10871,4,3,103,108,109,8895,8902,8907,5,176,1,59,8900,1,176,116,97,59,1,948,112,116,121,118,59,1,10673,4,2,105,114,8920,8926,115,104,116,59,1,10623,59,3,55349,56609,97,114,4,2,108,114,8938,8941,59,1,8643,59,1,8642,4,5,97,101,103,115,118,8956,8986,8989,8996,9001,109,4,3,59,111,115,8965,8967,8983,1,8900,110,100,4,2,59,115,8975,8977,1,8900,117,105,116,59,1,9830,59,1,9830,59,1,168,97,109,109,97,59,1,989,105,110,59,1,8946,4,3,59,105,111,9009,9011,9031,1,247,100,101,5,247,2,59,111,9020,9022,1,247,110,116,105,109,101,115,59,1,8903,110,120,59,1,8903,99,121,59,1,1106,99,4,2,111,114,9048,9053,114,110,59,1,8990,111,112,59,1,8973,4,5,108,112,116,117,119,9070,9076,9081,9130,9144,108,97,114,59,1,36,102,59,3,55349,56661,4,5,59,101,109,112,115,9093,9095,9109,9116,9122,1,729,113,4,2,59,100,9102,9104,1,8784,111,116,59,1,8785,105,110,117,115,59,1,8760,108,117,115,59,1,8724,113,117,97,114,101,59,1,8865,98,108,101,98,97,114,119,101,100,103,101,59,1,8966,110,4,3,97,100,104,9153,9160,9172,114,114,111,119,59,1,8595,111,119,110,97,114,114,111,119,115,59,1,8650,97,114,112,111,111,110,4,2,108,114,9184,9190,101,102,116,59,1,8643,105,103,104,116,59,1,8642,4,2,98,99,9203,9211,107,97,114,111,119,59,1,10512,4,2,111,114,9217,9222,114,110,59,1,8991,111,112,59,1,8972,4,3,99,111,116,9235,9248,9252,4,2,114,121,9241,9245,59,3,55349,56505,59,1,1109,108,59,1,10742,114,111,107,59,1,273,4,2,100,114,9264,9269,111,116,59,1,8945,105,4,2,59,102,9276,9278,1,9663,59,1,9662,4,2,97,104,9287,9292,114,114,59,1,8693,97,114,59,1,10607,97,110,103,108,101,59,1,10662,4,2,99,105,9311,9315,121,59,1,1119,103,114,97,114,114,59,1,10239,4,18,68,97,99,100,101,102,103,108,109,110,111,112,113,114,115,116,117,120,9361,9376,9398,9439,9444,9447,9462,9495,9531,9585,9598,9614,9659,9755,9771,9792,9808,9826,4,2,68,111,9367,9372,111,116,59,1,10871,116,59,1,8785,4,2,99,115,9382,9392,117,116,101,5,233,1,59,9390,1,233,116,101,114,59,1,10862,4,4,97,105,111,121,9408,9414,9430,9436,114,111,110,59,1,283,114,4,2,59,99,9421,9423,1,8790,5,234,1,59,9428,1,234,108,111,110,59,1,8789,59,1,1101,111,116,59,1,279,59,1,8519,4,2,68,114,9453,9458,111,116,59,1,8786,59,3,55349,56610,4,3,59,114,115,9470,9472,9482,1,10906,97,118,101,5,232,1,59,9480,1,232,4,2,59,100,9488,9490,1,10902,111,116,59,1,10904,4,4,59,105,108,115,9505,9507,9515,9518,1,10905,110,116,101,114,115,59,1,9191,59,1,8467,4,2,59,100,9524,9526,1,10901,111,116,59,1,10903,4,3,97,112,115,9539,9544,9564,99,114,59,1,275,116,121,4,3,59,115,118,9554,9556,9561,1,8709,101,116,59,1,8709,59,1,8709,112,4,2,49,59,9571,9583,4,2,51,52,9577,9580,59,1,8196,59,1,8197,1,8195,4,2,103,115,9591,9594,59,1,331,112,59,1,8194,4,2,103,112,9604,9609,111,110,59,1,281,102,59,3,55349,56662,4,3,97,108,115,9622,9635,9640,114,4,2,59,115,9629,9631,1,8917,108,59,1,10723,117,115,59,1,10865,105,4,3,59,108,118,9649,9651,9656,1,949,111,110,59,1,949,59,1,1013,4,4,99,115,117,118,9669,9686,9716,9747,4,2,105,111,9675,9680,114,99,59,1,8790,108,111,110,59,1,8789,4,2,105,108,9692,9696,109,59,1,8770,97,110,116,4,2,103,108,9705,9710,116,114,59,1,10902,101,115,115,59,1,10901,4,3,97,101,105,9724,9729,9734,108,115,59,1,61,115,116,59,1,8799,118,4,2,59,68,9741,9743,1,8801,68,59,1,10872,112,97,114,115,108,59,1,10725,4,2,68,97,9761,9766,111,116,59,1,8787,114,114,59,1,10609,4,3,99,100,105,9779,9783,9788,114,59,1,8495,111,116,59,1,8784,109,59,1,8770,4,2,97,104,9798,9801,59,1,951,5,240,1,59,9806,1,240,4,2,109,114,9814,9822,108,5,235,1,59,9820,1,235,111,59,1,8364,4,3,99,105,112,9834,9838,9843,108,59,1,33,115,116,59,1,8707,4,2,101,111,9849,9859,99,116,97,116,105,111,110,59,1,8496,110,101,110,116,105,97,108,101,59,1,8519,4,12,97,99,101,102,105,106,108,110,111,112,114,115,9896,9910,9914,9921,9954,9960,9967,9989,9994,10027,10036,10164,108,108,105,110,103,100,111,116,115,101,113,59,1,8786,121,59,1,1092,109,97,108,101,59,1,9792,4,3,105,108,114,9929,9935,9950,108,105,103,59,1,64259,4,2,105,108,9941,9945,103,59,1,64256,105,103,59,1,64260,59,3,55349,56611,108,105,103,59,1,64257,108,105,103,59,3,102,106,4,3,97,108,116,9975,9979,9984,116,59,1,9837,105,103,59,1,64258,110,115,59,1,9649,111,102,59,1,402,4,2,112,114,1e4,10005,102,59,3,55349,56663,4,2,97,107,10011,10016,108,108,59,1,8704,4,2,59,118,10022,10024,1,8916,59,1,10969,97,114,116,105,110,116,59,1,10765,4,2,97,111,10042,10159,4,2,99,115,10048,10155,4,6,49,50,51,52,53,55,10062,10102,10114,10135,10139,10151,4,6,50,51,52,53,54,56,10076,10083,10086,10093,10096,10099,5,189,1,59,10081,1,189,59,1,8531,5,188,1,59,10091,1,188,59,1,8533,59,1,8537,59,1,8539,4,2,51,53,10108,10111,59,1,8532,59,1,8534,4,3,52,53,56,10122,10129,10132,5,190,1,59,10127,1,190,59,1,8535,59,1,8540,53,59,1,8536,4,2,54,56,10145,10148,59,1,8538,59,1,8541,56,59,1,8542,108,59,1,8260,119,110,59,1,8994,99,114,59,3,55349,56507,4,17,69,97,98,99,100,101,102,103,105,106,108,110,111,114,115,116,118,10206,10217,10247,10254,10268,10273,10358,10363,10374,10380,10385,10406,10458,10464,10470,10497,10610,4,2,59,108,10212,10214,1,8807,59,1,10892,4,3,99,109,112,10225,10231,10244,117,116,101,59,1,501,109,97,4,2,59,100,10239,10241,1,947,59,1,989,59,1,10886,114,101,118,101,59,1,287,4,2,105,121,10260,10265,114,99,59,1,285,59,1,1075,111,116,59,1,289,4,4,59,108,113,115,10283,10285,10288,10308,1,8805,59,1,8923,4,3,59,113,115,10296,10298,10301,1,8805,59,1,8807,108,97,110,116,59,1,10878,4,4,59,99,100,108,10318,10320,10324,10345,1,10878,99,59,1,10921,111,116,4,2,59,111,10332,10334,1,10880,4,2,59,108,10340,10342,1,10882,59,1,10884,4,2,59,101,10351,10354,3,8923,65024,115,59,1,10900,114,59,3,55349,56612,4,2,59,103,10369,10371,1,8811,59,1,8921,109,101,108,59,1,8503,99,121,59,1,1107,4,4,59,69,97,106,10395,10397,10400,10403,1,8823,59,1,10898,59,1,10917,59,1,10916,4,4,69,97,101,115,10416,10419,10434,10453,59,1,8809,112,4,2,59,112,10426,10428,1,10890,114,111,120,59,1,10890,4,2,59,113,10440,10442,1,10888,4,2,59,113,10448,10450,1,10888,59,1,8809,105,109,59,1,8935,112,102,59,3,55349,56664,97,118,101,59,1,96,4,2,99,105,10476,10480,114,59,1,8458,109,4,3,59,101,108,10489,10491,10494,1,8819,59,1,10894,59,1,10896,5,62,6,59,99,100,108,113,114,10512,10514,10527,10532,10538,10545,1,62,4,2,99,105,10520,10523,59,1,10919,114,59,1,10874,111,116,59,1,8919,80,97,114,59,1,10645,117,101,115,116,59,1,10876,4,5,97,100,101,108,115,10557,10574,10579,10599,10605,4,2,112,114,10563,10570,112,114,111,120,59,1,10886,114,59,1,10616,111,116,59,1,8919,113,4,2,108,113,10586,10592,101,115,115,59,1,8923,108,101,115,115,59,1,10892,101,115,115,59,1,8823,105,109,59,1,8819,4,2,101,110,10616,10626,114,116,110,101,113,113,59,3,8809,65024,69,59,3,8809,65024,4,10,65,97,98,99,101,102,107,111,115,121,10653,10658,10713,10718,10724,10760,10765,10786,10850,10875,114,114,59,1,8660,4,4,105,108,109,114,10668,10674,10678,10684,114,115,112,59,1,8202,102,59,1,189,105,108,116,59,1,8459,4,2,100,114,10690,10695,99,121,59,1,1098,4,3,59,99,119,10703,10705,10710,1,8596,105,114,59,1,10568,59,1,8621,97,114,59,1,8463,105,114,99,59,1,293,4,3,97,108,114,10732,10748,10754,114,116,115,4,2,59,117,10741,10743,1,9829,105,116,59,1,9829,108,105,112,59,1,8230,99,111,110,59,1,8889,114,59,3,55349,56613,115,4,2,101,119,10772,10779,97,114,111,119,59,1,10533,97,114,111,119,59,1,10534,4,5,97,109,111,112,114,10798,10803,10809,10839,10844,114,114,59,1,8703,116,104,116,59,1,8763,107,4,2,108,114,10816,10827,101,102,116,97,114,114,111,119,59,1,8617,105,103,104,116,97,114,114,111,119,59,1,8618,102,59,3,55349,56665,98,97,114,59,1,8213,4,3,99,108,116,10858,10863,10869,114,59,3,55349,56509,97,115,104,59,1,8463,114,111,107,59,1,295,4,2,98,112,10881,10887,117,108,108,59,1,8259,104,101,110,59,1,8208,4,15,97,99,101,102,103,105,106,109,110,111,112,113,115,116,117,10925,10936,10958,10977,10990,11001,11039,11045,11101,11192,11220,11226,11237,11285,11299,99,117,116,101,5,237,1,59,10934,1,237,4,3,59,105,121,10944,10946,10955,1,8291,114,99,5,238,1,59,10953,1,238,59,1,1080,4,2,99,120,10964,10968,121,59,1,1077,99,108,5,161,1,59,10975,1,161,4,2,102,114,10983,10986,59,1,8660,59,3,55349,56614,114,97,118,101,5,236,1,59,10999,1,236,4,4,59,105,110,111,11011,11013,11028,11034,1,8520,4,2,105,110,11019,11024,110,116,59,1,10764,116,59,1,8749,102,105,110,59,1,10716,116,97,59,1,8489,108,105,103,59,1,307,4,3,97,111,112,11053,11092,11096,4,3,99,103,116,11061,11065,11088,114,59,1,299,4,3,101,108,112,11073,11076,11082,59,1,8465,105,110,101,59,1,8464,97,114,116,59,1,8465,104,59,1,305,102,59,1,8887,101,100,59,1,437,4,5,59,99,102,111,116,11113,11115,11121,11136,11142,1,8712,97,114,101,59,1,8453,105,110,4,2,59,116,11129,11131,1,8734,105,101,59,1,10717,100,111,116,59,1,305,4,5,59,99,101,108,112,11154,11156,11161,11179,11186,1,8747,97,108,59,1,8890,4,2,103,114,11167,11173,101,114,115,59,1,8484,99,97,108,59,1,8890,97,114,104,107,59,1,10775,114,111,100,59,1,10812,4,4,99,103,112,116,11202,11206,11211,11216,121,59,1,1105,111,110,59,1,303,102,59,3,55349,56666,97,59,1,953,114,111,100,59,1,10812,117,101,115,116,5,191,1,59,11235,1,191,4,2,99,105,11243,11248,114,59,3,55349,56510,110,4,5,59,69,100,115,118,11261,11263,11266,11271,11282,1,8712,59,1,8953,111,116,59,1,8949,4,2,59,118,11277,11279,1,8948,59,1,8947,59,1,8712,4,2,59,105,11291,11293,1,8290,108,100,101,59,1,297,4,2,107,109,11305,11310,99,121,59,1,1110,108,5,239,1,59,11316,1,239,4,6,99,102,109,111,115,117,11332,11346,11351,11357,11363,11380,4,2,105,121,11338,11343,114,99,59,1,309,59,1,1081,114,59,3,55349,56615,97,116,104,59,1,567,112,102,59,3,55349,56667,4,2,99,101,11369,11374,114,59,3,55349,56511,114,99,121,59,1,1112,107,99,121,59,1,1108,4,8,97,99,102,103,104,106,111,115,11404,11418,11433,11438,11445,11450,11455,11461,112,112,97,4,2,59,118,11413,11415,1,954,59,1,1008,4,2,101,121,11424,11430,100,105,108,59,1,311,59,1,1082,114,59,3,55349,56616,114,101,101,110,59,1,312,99,121,59,1,1093,99,121,59,1,1116,112,102,59,3,55349,56668,99,114,59,3,55349,56512,4,23,65,66,69,72,97,98,99,100,101,102,103,104,106,108,109,110,111,112,114,115,116,117,118,11515,11538,11544,11555,11560,11721,11780,11818,11868,12136,12160,12171,12203,12208,12246,12275,12327,12509,12523,12569,12641,12732,12752,4,3,97,114,116,11523,11528,11532,114,114,59,1,8666,114,59,1,8656,97,105,108,59,1,10523,97,114,114,59,1,10510,4,2,59,103,11550,11552,1,8806,59,1,10891,97,114,59,1,10594,4,9,99,101,103,109,110,112,113,114,116,11580,11586,11594,11600,11606,11624,11627,11636,11694,117,116,101,59,1,314,109,112,116,121,118,59,1,10676,114,97,110,59,1,8466,98,100,97,59,1,955,103,4,3,59,100,108,11615,11617,11620,1,10216,59,1,10641,101,59,1,10216,59,1,10885,117,111,5,171,1,59,11634,1,171,114,4,8,59,98,102,104,108,112,115,116,11655,11657,11669,11673,11677,11681,11685,11690,1,8592,4,2,59,102,11663,11665,1,8676,115,59,1,10527,115,59,1,10525,107,59,1,8617,112,59,1,8619,108,59,1,10553,105,109,59,1,10611,108,59,1,8610,4,3,59,97,101,11702,11704,11709,1,10923,105,108,59,1,10521,4,2,59,115,11715,11717,1,10925,59,3,10925,65024,4,3,97,98,114,11729,11734,11739,114,114,59,1,10508,114,107,59,1,10098,4,2,97,107,11745,11758,99,4,2,101,107,11752,11755,59,1,123,59,1,91,4,2,101,115,11764,11767,59,1,10635,108,4,2,100,117,11774,11777,59,1,10639,59,1,10637,4,4,97,101,117,121,11790,11796,11811,11815,114,111,110,59,1,318,4,2,100,105,11802,11807,105,108,59,1,316,108,59,1,8968,98,59,1,123,59,1,1083,4,4,99,113,114,115,11828,11832,11845,11864,97,59,1,10550,117,111,4,2,59,114,11840,11842,1,8220,59,1,8222,4,2,100,117,11851,11857,104,97,114,59,1,10599,115,104,97,114,59,1,10571,104,59,1,8626,4,5,59,102,103,113,115,11880,11882,12008,12011,12031,1,8804,116,4,5,97,104,108,114,116,11895,11913,11935,11947,11996,114,114,111,119,4,2,59,116,11905,11907,1,8592,97,105,108,59,1,8610,97,114,112,111,111,110,4,2,100,117,11925,11931,111,119,110,59,1,8637,112,59,1,8636,101,102,116,97,114,114,111,119,115,59,1,8647,105,103,104,116,4,3,97,104,115,11959,11974,11984,114,114,111,119,4,2,59,115,11969,11971,1,8596,59,1,8646,97,114,112,111,111,110,115,59,1,8651,113,117,105,103,97,114,114,111,119,59,1,8621,104,114,101,101,116,105,109,101,115,59,1,8907,59,1,8922,4,3,59,113,115,12019,12021,12024,1,8804,59,1,8806,108,97,110,116,59,1,10877,4,5,59,99,100,103,115,12043,12045,12049,12070,12083,1,10877,99,59,1,10920,111,116,4,2,59,111,12057,12059,1,10879,4,2,59,114,12065,12067,1,10881,59,1,10883,4,2,59,101,12076,12079,3,8922,65024,115,59,1,10899,4,5,97,100,101,103,115,12095,12103,12108,12126,12131,112,112,114,111,120,59,1,10885,111,116,59,1,8918,113,4,2,103,113,12115,12120,116,114,59,1,8922,103,116,114,59,1,10891,116,114,59,1,8822,105,109,59,1,8818,4,3,105,108,114,12144,12150,12156,115,104,116,59,1,10620,111,111,114,59,1,8970,59,3,55349,56617,4,2,59,69,12166,12168,1,8822,59,1,10897,4,2,97,98,12177,12198,114,4,2,100,117,12184,12187,59,1,8637,4,2,59,108,12193,12195,1,8636,59,1,10602,108,107,59,1,9604,99,121,59,1,1113,4,5,59,97,99,104,116,12220,12222,12227,12235,12241,1,8810,114,114,59,1,8647,111,114,110,101,114,59,1,8990,97,114,100,59,1,10603,114,105,59,1,9722,4,2,105,111,12252,12258,100,111,116,59,1,320,117,115,116,4,2,59,97,12267,12269,1,9136,99,104,101,59,1,9136,4,4,69,97,101,115,12285,12288,12303,12322,59,1,8808,112,4,2,59,112,12295,12297,1,10889,114,111,120,59,1,10889,4,2,59,113,12309,12311,1,10887,4,2,59,113,12317,12319,1,10887,59,1,8808,105,109,59,1,8934,4,8,97,98,110,111,112,116,119,122,12345,12359,12364,12421,12446,12467,12474,12490,4,2,110,114,12351,12355,103,59,1,10220,114,59,1,8701,114,107,59,1,10214,103,4,3,108,109,114,12373,12401,12409,101,102,116,4,2,97,114,12382,12389,114,114,111,119,59,1,10229,105,103,104,116,97,114,114,111,119,59,1,10231,97,112,115,116,111,59,1,10236,105,103,104,116,97,114,114,111,119,59,1,10230,112,97,114,114,111,119,4,2,108,114,12433,12439,101,102,116,59,1,8619,105,103,104,116,59,1,8620,4,3,97,102,108,12454,12458,12462,114,59,1,10629,59,3,55349,56669,117,115,59,1,10797,105,109,101,115,59,1,10804,4,2,97,98,12480,12485,115,116,59,1,8727,97,114,59,1,95,4,3,59,101,102,12498,12500,12506,1,9674,110,103,101,59,1,9674,59,1,10731,97,114,4,2,59,108,12517,12519,1,40,116,59,1,10643,4,5,97,99,104,109,116,12535,12540,12548,12561,12564,114,114,59,1,8646,111,114,110,101,114,59,1,8991,97,114,4,2,59,100,12556,12558,1,8651,59,1,10605,59,1,8206,114,105,59,1,8895,4,6,97,99,104,105,113,116,12583,12589,12594,12597,12614,12635,113,117,111,59,1,8249,114,59,3,55349,56513,59,1,8624,109,4,3,59,101,103,12606,12608,12611,1,8818,59,1,10893,59,1,10895,4,2,98,117,12620,12623,59,1,91,111,4,2,59,114,12630,12632,1,8216,59,1,8218,114,111,107,59,1,322,5,60,8,59,99,100,104,105,108,113,114,12660,12662,12675,12680,12686,12692,12698,12705,1,60,4,2,99,105,12668,12671,59,1,10918,114,59,1,10873,111,116,59,1,8918,114,101,101,59,1,8907,109,101,115,59,1,8905,97,114,114,59,1,10614,117,101,115,116,59,1,10875,4,2,80,105,12711,12716,97,114,59,1,10646,4,3,59,101,102,12724,12726,12729,1,9667,59,1,8884,59,1,9666,114,4,2,100,117,12739,12746,115,104,97,114,59,1,10570,104,97,114,59,1,10598,4,2,101,110,12758,12768,114,116,110,101,113,113,59,3,8808,65024,69,59,3,8808,65024,4,14,68,97,99,100,101,102,104,105,108,110,111,112,115,117,12803,12809,12893,12908,12914,12928,12933,12937,13011,13025,13032,13049,13052,13069,68,111,116,59,1,8762,4,4,99,108,112,114,12819,12827,12849,12887,114,5,175,1,59,12825,1,175,4,2,101,116,12833,12836,59,1,9794,4,2,59,101,12842,12844,1,10016,115,101,59,1,10016,4,2,59,115,12855,12857,1,8614,116,111,4,4,59,100,108,117,12869,12871,12877,12883,1,8614,111,119,110,59,1,8615,101,102,116,59,1,8612,112,59,1,8613,107,101,114,59,1,9646,4,2,111,121,12899,12905,109,109,97,59,1,10793,59,1,1084,97,115,104,59,1,8212,97,115,117,114,101,100,97,110,103,108,101,59,1,8737,114,59,3,55349,56618,111,59,1,8487,4,3,99,100,110,12945,12954,12985,114,111,5,181,1,59,12952,1,181,4,4,59,97,99,100,12964,12966,12971,12976,1,8739,115,116,59,1,42,105,114,59,1,10992,111,116,5,183,1,59,12983,1,183,117,115,4,3,59,98,100,12995,12997,13e3,1,8722,59,1,8863,4,2,59,117,13006,13008,1,8760,59,1,10794,4,2,99,100,13017,13021,112,59,1,10971,114,59,1,8230,112,108,117,115,59,1,8723,4,2,100,112,13038,13044,101,108,115,59,1,8871,102,59,3,55349,56670,59,1,8723,4,2,99,116,13058,13063,114,59,3,55349,56514,112,111,115,59,1,8766,4,3,59,108,109,13077,13079,13087,1,956,116,105,109,97,112,59,1,8888,97,112,59,1,8888,4,24,71,76,82,86,97,98,99,100,101,102,103,104,105,106,108,109,111,112,114,115,116,117,118,119,13142,13165,13217,13229,13247,13330,13359,13414,13420,13508,13513,13579,13602,13626,13631,13762,13767,13855,13936,13995,14214,14285,14312,14432,4,2,103,116,13148,13152,59,3,8921,824,4,2,59,118,13158,13161,3,8811,8402,59,3,8811,824,4,3,101,108,116,13173,13200,13204,102,116,4,2,97,114,13181,13188,114,114,111,119,59,1,8653,105,103,104,116,97,114,114,111,119,59,1,8654,59,3,8920,824,4,2,59,118,13210,13213,3,8810,8402,59,3,8810,824,105,103,104,116,97,114,114,111,119,59,1,8655,4,2,68,100,13235,13241,97,115,104,59,1,8879,97,115,104,59,1,8878,4,5,98,99,110,112,116,13259,13264,13270,13275,13308,108,97,59,1,8711,117,116,101,59,1,324,103,59,3,8736,8402,4,5,59,69,105,111,112,13287,13289,13293,13298,13302,1,8777,59,3,10864,824,100,59,3,8779,824,115,59,1,329,114,111,120,59,1,8777,117,114,4,2,59,97,13316,13318,1,9838,108,4,2,59,115,13325,13327,1,9838,59,1,8469,4,2,115,117,13336,13344,112,5,160,1,59,13342,1,160,109,112,4,2,59,101,13352,13355,3,8782,824,59,3,8783,824,4,5,97,101,111,117,121,13371,13385,13391,13407,13411,4,2,112,114,13377,13380,59,1,10819,111,110,59,1,328,100,105,108,59,1,326,110,103,4,2,59,100,13399,13401,1,8775,111,116,59,3,10861,824,112,59,1,10818,59,1,1085,97,115,104,59,1,8211,4,7,59,65,97,100,113,115,120,13436,13438,13443,13466,13472,13478,13494,1,8800,114,114,59,1,8663,114,4,2,104,114,13450,13454,107,59,1,10532,4,2,59,111,13460,13462,1,8599,119,59,1,8599,111,116,59,3,8784,824,117,105,118,59,1,8802,4,2,101,105,13484,13489,97,114,59,1,10536,109,59,3,8770,824,105,115,116,4,2,59,115,13503,13505,1,8708,59,1,8708,114,59,3,55349,56619,4,4,69,101,115,116,13523,13527,13563,13568,59,3,8807,824,4,3,59,113,115,13535,13537,13559,1,8817,4,3,59,113,115,13545,13547,13551,1,8817,59,3,8807,824,108,97,110,116,59,3,10878,824,59,3,10878,824,105,109,59,1,8821,4,2,59,114,13574,13576,1,8815,59,1,8815,4,3,65,97,112,13587,13592,13597,114,114,59,1,8654,114,114,59,1,8622,97,114,59,1,10994,4,3,59,115,118,13610,13612,13623,1,8715,4,2,59,100,13618,13620,1,8956,59,1,8954,59,1,8715,99,121,59,1,1114,4,7,65,69,97,100,101,115,116,13647,13652,13656,13661,13665,13737,13742,114,114,59,1,8653,59,3,8806,824,114,114,59,1,8602,114,59,1,8229,4,4,59,102,113,115,13675,13677,13703,13725,1,8816,116,4,2,97,114,13684,13691,114,114,111,119,59,1,8602,105,103,104,116,97,114,114,111,119,59,1,8622,4,3,59,113,115,13711,13713,13717,1,8816,59,3,8806,824,108,97,110,116,59,3,10877,824,4,2,59,115,13731,13734,3,10877,824,59,1,8814,105,109,59,1,8820,4,2,59,114,13748,13750,1,8814,105,4,2,59,101,13757,13759,1,8938,59,1,8940,105,100,59,1,8740,4,2,112,116,13773,13778,102,59,3,55349,56671,5,172,3,59,105,110,13787,13789,13829,1,172,110,4,4,59,69,100,118,13800,13802,13806,13812,1,8713,59,3,8953,824,111,116,59,3,8949,824,4,3,97,98,99,13820,13823,13826,59,1,8713,59,1,8951,59,1,8950,105,4,2,59,118,13836,13838,1,8716,4,3,97,98,99,13846,13849,13852,59,1,8716,59,1,8958,59,1,8957,4,3,97,111,114,13863,13892,13899,114,4,4,59,97,115,116,13874,13876,13883,13888,1,8742,108,108,101,108,59,1,8742,108,59,3,11005,8421,59,3,8706,824,108,105,110,116,59,1,10772,4,3,59,99,101,13907,13909,13914,1,8832,117,101,59,1,8928,4,2,59,99,13920,13923,3,10927,824,4,2,59,101,13929,13931,1,8832,113,59,3,10927,824,4,4,65,97,105,116,13946,13951,13971,13982,114,114,59,1,8655,114,114,4,3,59,99,119,13961,13963,13967,1,8603,59,3,10547,824,59,3,8605,824,103,104,116,97,114,114,111,119,59,1,8603,114,105,4,2,59,101,13990,13992,1,8939,59,1,8941,4,7,99,104,105,109,112,113,117,14011,14036,14060,14080,14085,14090,14106,4,4,59,99,101,114,14021,14023,14028,14032,1,8833,117,101,59,1,8929,59,3,10928,824,59,3,55349,56515,111,114,116,4,2,109,112,14045,14050,105,100,59,1,8740,97,114,97,108,108,101,108,59,1,8742,109,4,2,59,101,14067,14069,1,8769,4,2,59,113,14075,14077,1,8772,59,1,8772,105,100,59,1,8740,97,114,59,1,8742,115,117,4,2,98,112,14098,14102,101,59,1,8930,101,59,1,8931,4,3,98,99,112,14114,14157,14171,4,4,59,69,101,115,14124,14126,14130,14133,1,8836,59,3,10949,824,59,1,8840,101,116,4,2,59,101,14141,14144,3,8834,8402,113,4,2,59,113,14151,14153,1,8840,59,3,10949,824,99,4,2,59,101,14164,14166,1,8833,113,59,3,10928,824,4,4,59,69,101,115,14181,14183,14187,14190,1,8837,59,3,10950,824,59,1,8841,101,116,4,2,59,101,14198,14201,3,8835,8402,113,4,2,59,113,14208,14210,1,8841,59,3,10950,824,4,4,103,105,108,114,14224,14228,14238,14242,108,59,1,8825,108,100,101,5,241,1,59,14236,1,241,103,59,1,8824,105,97,110,103,108,101,4,2,108,114,14254,14269,101,102,116,4,2,59,101,14263,14265,1,8938,113,59,1,8940,105,103,104,116,4,2,59,101,14279,14281,1,8939,113,59,1,8941,4,2,59,109,14291,14293,1,957,4,3,59,101,115,14301,14303,14308,1,35,114,111,59,1,8470,112,59,1,8199,4,9,68,72,97,100,103,105,108,114,115,14332,14338,14344,14349,14355,14369,14376,14408,14426,97,115,104,59,1,8877,97,114,114,59,1,10500,112,59,3,8781,8402,97,115,104,59,1,8876,4,2,101,116,14361,14365,59,3,8805,8402,59,3,62,8402,110,102,105,110,59,1,10718,4,3,65,101,116,14384,14389,14393,114,114,59,1,10498,59,3,8804,8402,4,2,59,114,14399,14402,3,60,8402,105,101,59,3,8884,8402,4,2,65,116,14414,14419,114,114,59,1,10499,114,105,101,59,3,8885,8402,105,109,59,3,8764,8402,4,3,65,97,110,14440,14445,14468,114,114,59,1,8662,114,4,2,104,114,14452,14456,107,59,1,10531,4,2,59,111,14462,14464,1,8598,119,59,1,8598,101,97,114,59,1,10535,4,18,83,97,99,100,101,102,103,104,105,108,109,111,112,114,115,116,117,118,14512,14515,14535,14560,14597,14603,14618,14643,14657,14662,14701,14741,14747,14769,14851,14877,14907,14916,59,1,9416,4,2,99,115,14521,14531,117,116,101,5,243,1,59,14529,1,243,116,59,1,8859,4,2,105,121,14541,14557,114,4,2,59,99,14548,14550,1,8858,5,244,1,59,14555,1,244,59,1,1086,4,5,97,98,105,111,115,14572,14577,14583,14587,14591,115,104,59,1,8861,108,97,99,59,1,337,118,59,1,10808,116,59,1,8857,111,108,100,59,1,10684,108,105,103,59,1,339,4,2,99,114,14609,14614,105,114,59,1,10687,59,3,55349,56620,4,3,111,114,116,14626,14630,14640,110,59,1,731,97,118,101,5,242,1,59,14638,1,242,59,1,10689,4,2,98,109,14649,14654,97,114,59,1,10677,59,1,937,110,116,59,1,8750,4,4,97,99,105,116,14672,14677,14693,14698,114,114,59,1,8634,4,2,105,114,14683,14687,114,59,1,10686,111,115,115,59,1,10683,110,101,59,1,8254,59,1,10688,4,3,97,101,105,14709,14714,14719,99,114,59,1,333,103,97,59,1,969,4,3,99,100,110,14727,14733,14736,114,111,110,59,1,959,59,1,10678,117,115,59,1,8854,112,102,59,3,55349,56672,4,3,97,101,108,14755,14759,14764,114,59,1,10679,114,112,59,1,10681,117,115,59,1,8853,4,7,59,97,100,105,111,115,118,14785,14787,14792,14831,14837,14841,14848,1,8744,114,114,59,1,8635,4,4,59,101,102,109,14802,14804,14817,14824,1,10845,114,4,2,59,111,14811,14813,1,8500,102,59,1,8500,5,170,1,59,14822,1,170,5,186,1,59,14829,1,186,103,111,102,59,1,8886,114,59,1,10838,108,111,112,101,59,1,10839,59,1,10843,4,3,99,108,111,14859,14863,14873,114,59,1,8500,97,115,104,5,248,1,59,14871,1,248,108,59,1,8856,105,4,2,108,109,14884,14893,100,101,5,245,1,59,14891,1,245,101,115,4,2,59,97,14901,14903,1,8855,115,59,1,10806,109,108,5,246,1,59,14914,1,246,98,97,114,59,1,9021,4,12,97,99,101,102,104,105,108,109,111,114,115,117,14948,14992,14996,15033,15038,15068,15090,15189,15192,15222,15427,15441,114,4,4,59,97,115,116,14959,14961,14976,14989,1,8741,5,182,2,59,108,14968,14970,1,182,108,101,108,59,1,8741,4,2,105,108,14982,14986,109,59,1,10995,59,1,11005,59,1,8706,121,59,1,1087,114,4,5,99,105,109,112,116,15009,15014,15019,15024,15027,110,116,59,1,37,111,100,59,1,46,105,108,59,1,8240,59,1,8869,101,110,107,59,1,8241,114,59,3,55349,56621,4,3,105,109,111,15046,15057,15063,4,2,59,118,15052,15054,1,966,59,1,981,109,97,116,59,1,8499,110,101,59,1,9742,4,3,59,116,118,15076,15078,15087,1,960,99,104,102,111,114,107,59,1,8916,59,1,982,4,2,97,117,15096,15119,110,4,2,99,107,15103,15115,107,4,2,59,104,15110,15112,1,8463,59,1,8462,118,59,1,8463,115,4,9,59,97,98,99,100,101,109,115,116,15140,15142,15148,15151,15156,15168,15171,15179,15184,1,43,99,105,114,59,1,10787,59,1,8862,105,114,59,1,10786,4,2,111,117,15162,15165,59,1,8724,59,1,10789,59,1,10866,110,5,177,1,59,15177,1,177,105,109,59,1,10790,119,111,59,1,10791,59,1,177,4,3,105,112,117,15200,15208,15213,110,116,105,110,116,59,1,10773,102,59,3,55349,56673,110,100,5,163,1,59,15220,1,163,4,10,59,69,97,99,101,105,110,111,115,117,15244,15246,15249,15253,15258,15334,15347,15367,15416,15421,1,8826,59,1,10931,112,59,1,10935,117,101,59,1,8828,4,2,59,99,15264,15266,1,10927,4,6,59,97,99,101,110,115,15280,15282,15290,15299,15303,15329,1,8826,112,112,114,111,120,59,1,10935,117,114,108,121,101,113,59,1,8828,113,59,1,10927,4,3,97,101,115,15311,15319,15324,112,112,114,111,120,59,1,10937,113,113,59,1,10933,105,109,59,1,8936,105,109,59,1,8830,109,101,4,2,59,115,15342,15344,1,8242,59,1,8473,4,3,69,97,115,15355,15358,15362,59,1,10933,112,59,1,10937,105,109,59,1,8936,4,3,100,102,112,15375,15378,15404,59,1,8719,4,3,97,108,115,15386,15392,15398,108,97,114,59,1,9006,105,110,101,59,1,8978,117,114,102,59,1,8979,4,2,59,116,15410,15412,1,8733,111,59,1,8733,105,109,59,1,8830,114,101,108,59,1,8880,4,2,99,105,15433,15438,114,59,3,55349,56517,59,1,968,110,99,115,112,59,1,8200,4,6,102,105,111,112,115,117,15462,15467,15472,15478,15485,15491,114,59,3,55349,56622,110,116,59,1,10764,112,102,59,3,55349,56674,114,105,109,101,59,1,8279,99,114,59,3,55349,56518,4,3,97,101,111,15499,15520,15534,116,4,2,101,105,15506,15515,114,110,105,111,110,115,59,1,8461,110,116,59,1,10774,115,116,4,2,59,101,15528,15530,1,63,113,59,1,8799,116,5,34,1,59,15540,1,34,4,21,65,66,72,97,98,99,100,101,102,104,105,108,109,110,111,112,114,115,116,117,120,15586,15609,15615,15620,15796,15855,15893,15931,15977,16001,16039,16183,16204,16222,16228,16285,16312,16318,16363,16408,16416,4,3,97,114,116,15594,15599,15603,114,114,59,1,8667,114,59,1,8658,97,105,108,59,1,10524,97,114,114,59,1,10511,97,114,59,1,10596,4,7,99,100,101,110,113,114,116,15636,15651,15656,15664,15687,15696,15770,4,2,101,117,15642,15646,59,3,8765,817,116,101,59,1,341,105,99,59,1,8730,109,112,116,121,118,59,1,10675,103,4,4,59,100,101,108,15675,15677,15680,15683,1,10217,59,1,10642,59,1,10661,101,59,1,10217,117,111,5,187,1,59,15694,1,187,114,4,11,59,97,98,99,102,104,108,112,115,116,119,15721,15723,15727,15739,15742,15746,15750,15754,15758,15763,15767,1,8594,112,59,1,10613,4,2,59,102,15733,15735,1,8677,115,59,1,10528,59,1,10547,115,59,1,10526,107,59,1,8618,112,59,1,8620,108,59,1,10565,105,109,59,1,10612,108,59,1,8611,59,1,8605,4,2,97,105,15776,15781,105,108,59,1,10522,111,4,2,59,110,15788,15790,1,8758,97,108,115,59,1,8474,4,3,97,98,114,15804,15809,15814,114,114,59,1,10509,114,107,59,1,10099,4,2,97,107,15820,15833,99,4,2,101,107,15827,15830,59,1,125,59,1,93,4,2,101,115,15839,15842,59,1,10636,108,4,2,100,117,15849,15852,59,1,10638,59,1,10640,4,4,97,101,117,121,15865,15871,15886,15890,114,111,110,59,1,345,4,2,100,105,15877,15882,105,108,59,1,343,108,59,1,8969,98,59,1,125,59,1,1088,4,4,99,108,113,115,15903,15907,15914,15927,97,59,1,10551,100,104,97,114,59,1,10601,117,111,4,2,59,114,15922,15924,1,8221,59,1,8221,104,59,1,8627,4,3,97,99,103,15939,15966,15970,108,4,4,59,105,112,115,15950,15952,15957,15963,1,8476,110,101,59,1,8475,97,114,116,59,1,8476,59,1,8477,116,59,1,9645,5,174,1,59,15975,1,174,4,3,105,108,114,15985,15991,15997,115,104,116,59,1,10621,111,111,114,59,1,8971,59,3,55349,56623,4,2,97,111,16007,16028,114,4,2,100,117,16014,16017,59,1,8641,4,2,59,108,16023,16025,1,8640,59,1,10604,4,2,59,118,16034,16036,1,961,59,1,1009,4,3,103,110,115,16047,16167,16171,104,116,4,6,97,104,108,114,115,116,16063,16081,16103,16130,16143,16155,114,114,111,119,4,2,59,116,16073,16075,1,8594,97,105,108,59,1,8611,97,114,112,111,111,110,4,2,100,117,16093,16099,111,119,110,59,1,8641,112,59,1,8640,101,102,116,4,2,97,104,16112,16120,114,114,111,119,115,59,1,8644,97,114,112,111,111,110,115,59,1,8652,105,103,104,116,97,114,114,111,119,115,59,1,8649,113,117,105,103,97,114,114,111,119,59,1,8605,104,114,101,101,116,105,109,101,115,59,1,8908,103,59,1,730,105,110,103,100,111,116,115,101,113,59,1,8787,4,3,97,104,109,16191,16196,16201,114,114,59,1,8644,97,114,59,1,8652,59,1,8207,111,117,115,116,4,2,59,97,16214,16216,1,9137,99,104,101,59,1,9137,109,105,100,59,1,10990,4,4,97,98,112,116,16238,16252,16257,16278,4,2,110,114,16244,16248,103,59,1,10221,114,59,1,8702,114,107,59,1,10215,4,3,97,102,108,16265,16269,16273,114,59,1,10630,59,3,55349,56675,117,115,59,1,10798,105,109,101,115,59,1,10805,4,2,97,112,16291,16304,114,4,2,59,103,16298,16300,1,41,116,59,1,10644,111,108,105,110,116,59,1,10770,97,114,114,59,1,8649,4,4,97,99,104,113,16328,16334,16339,16342,113,117,111,59,1,8250,114,59,3,55349,56519,59,1,8625,4,2,98,117,16348,16351,59,1,93,111,4,2,59,114,16358,16360,1,8217,59,1,8217,4,3,104,105,114,16371,16377,16383,114,101,101,59,1,8908,109,101,115,59,1,8906,105,4,4,59,101,102,108,16394,16396,16399,16402,1,9657,59,1,8885,59,1,9656,116,114,105,59,1,10702,108,117,104,97,114,59,1,10600,59,1,8478,4,19,97,98,99,100,101,102,104,105,108,109,111,112,113,114,115,116,117,119,122,16459,16466,16472,16572,16590,16672,16687,16746,16844,16850,16924,16963,16988,17115,17121,17154,17206,17614,17656,99,117,116,101,59,1,347,113,117,111,59,1,8218,4,10,59,69,97,99,101,105,110,112,115,121,16494,16496,16499,16513,16518,16531,16536,16556,16564,16569,1,8827,59,1,10932,4,2,112,114,16505,16508,59,1,10936,111,110,59,1,353,117,101,59,1,8829,4,2,59,100,16524,16526,1,10928,105,108,59,1,351,114,99,59,1,349,4,3,69,97,115,16544,16547,16551,59,1,10934,112,59,1,10938,105,109,59,1,8937,111,108,105,110,116,59,1,10771,105,109,59,1,8831,59,1,1089,111,116,4,3,59,98,101,16582,16584,16587,1,8901,59,1,8865,59,1,10854,4,7,65,97,99,109,115,116,120,16606,16611,16634,16642,16646,16652,16668,114,114,59,1,8664,114,4,2,104,114,16618,16622,107,59,1,10533,4,2,59,111,16628,16630,1,8600,119,59,1,8600,116,5,167,1,59,16640,1,167,105,59,1,59,119,97,114,59,1,10537,109,4,2,105,110,16659,16665,110,117,115,59,1,8726,59,1,8726,116,59,1,10038,114,4,2,59,111,16679,16682,3,55349,56624,119,110,59,1,8994,4,4,97,99,111,121,16697,16702,16716,16739,114,112,59,1,9839,4,2,104,121,16708,16713,99,121,59,1,1097,59,1,1096,114,116,4,2,109,112,16724,16729,105,100,59,1,8739,97,114,97,108,108,101,108,59,1,8741,5,173,1,59,16744,1,173,4,2,103,109,16752,16770,109,97,4,3,59,102,118,16762,16764,16767,1,963,59,1,962,59,1,962,4,8,59,100,101,103,108,110,112,114,16788,16790,16795,16806,16817,16828,16832,16838,1,8764,111,116,59,1,10858,4,2,59,113,16801,16803,1,8771,59,1,8771,4,2,59,69,16812,16814,1,10910,59,1,10912,4,2,59,69,16823,16825,1,10909,59,1,10911,101,59,1,8774,108,117,115,59,1,10788,97,114,114,59,1,10610,97,114,114,59,1,8592,4,4,97,101,105,116,16860,16883,16891,16904,4,2,108,115,16866,16878,108,115,101,116,109,105,110,117,115,59,1,8726,104,112,59,1,10803,112,97,114,115,108,59,1,10724,4,2,100,108,16897,16900,59,1,8739,101,59,1,8995,4,2,59,101,16910,16912,1,10922,4,2,59,115,16918,16920,1,10924,59,3,10924,65024,4,3,102,108,112,16932,16938,16958,116,99,121,59,1,1100,4,2,59,98,16944,16946,1,47,4,2,59,97,16952,16954,1,10692,114,59,1,9023,102,59,3,55349,56676,97,4,2,100,114,16970,16985,101,115,4,2,59,117,16978,16980,1,9824,105,116,59,1,9824,59,1,8741,4,3,99,115,117,16996,17028,17089,4,2,97,117,17002,17015,112,4,2,59,115,17009,17011,1,8851,59,3,8851,65024,112,4,2,59,115,17022,17024,1,8852,59,3,8852,65024,117,4,2,98,112,17035,17062,4,3,59,101,115,17043,17045,17048,1,8847,59,1,8849,101,116,4,2,59,101,17056,17058,1,8847,113,59,1,8849,4,3,59,101,115,17070,17072,17075,1,8848,59,1,8850,101,116,4,2,59,101,17083,17085,1,8848,113,59,1,8850,4,3,59,97,102,17097,17099,17112,1,9633,114,4,2,101,102,17106,17109,59,1,9633,59,1,9642,59,1,9642,97,114,114,59,1,8594,4,4,99,101,109,116,17131,17136,17142,17148,114,59,3,55349,56520,116,109,110,59,1,8726,105,108,101,59,1,8995,97,114,102,59,1,8902,4,2,97,114,17160,17172,114,4,2,59,102,17167,17169,1,9734,59,1,9733,4,2,97,110,17178,17202,105,103,104,116,4,2,101,112,17188,17197,112,115,105,108,111,110,59,1,1013,104,105,59,1,981,115,59,1,175,4,5,98,99,109,110,112,17218,17351,17420,17423,17427,4,9,59,69,100,101,109,110,112,114,115,17238,17240,17243,17248,17261,17267,17279,17285,17291,1,8834,59,1,10949,111,116,59,1,10941,4,2,59,100,17254,17256,1,8838,111,116,59,1,10947,117,108,116,59,1,10945,4,2,69,101,17273,17276,59,1,10955,59,1,8842,108,117,115,59,1,10943,97,114,114,59,1,10617,4,3,101,105,117,17299,17335,17339,116,4,3,59,101,110,17308,17310,17322,1,8834,113,4,2,59,113,17317,17319,1,8838,59,1,10949,101,113,4,2,59,113,17330,17332,1,8842,59,1,10955,109,59,1,10951,4,2,98,112,17345,17348,59,1,10965,59,1,10963,99,4,6,59,97,99,101,110,115,17366,17368,17376,17385,17389,17415,1,8827,112,112,114,111,120,59,1,10936,117,114,108,121,101,113,59,1,8829,113,59,1,10928,4,3,97,101,115,17397,17405,17410,112,112,114,111,120,59,1,10938,113,113,59,1,10934,105,109,59,1,8937,105,109,59,1,8831,59,1,8721,103,59,1,9834,4,13,49,50,51,59,69,100,101,104,108,109,110,112,115,17455,17462,17469,17476,17478,17481,17496,17509,17524,17530,17536,17548,17554,5,185,1,59,17460,1,185,5,178,1,59,17467,1,178,5,179,1,59,17474,1,179,1,8835,59,1,10950,4,2,111,115,17487,17491,116,59,1,10942,117,98,59,1,10968,4,2,59,100,17502,17504,1,8839,111,116,59,1,10948,115,4,2,111,117,17516,17520,108,59,1,10185,98,59,1,10967,97,114,114,59,1,10619,117,108,116,59,1,10946,4,2,69,101,17542,17545,59,1,10956,59,1,8843,108,117,115,59,1,10944,4,3,101,105,117,17562,17598,17602,116,4,3,59,101,110,17571,17573,17585,1,8835,113,4,2,59,113,17580,17582,1,8839,59,1,10950,101,113,4,2,59,113,17593,17595,1,8843,59,1,10956,109,59,1,10952,4,2,98,112,17608,17611,59,1,10964,59,1,10966,4,3,65,97,110,17622,17627,17650,114,114,59,1,8665,114,4,2,104,114,17634,17638,107,59,1,10534,4,2,59,111,17644,17646,1,8601,119,59,1,8601,119,97,114,59,1,10538,108,105,103,5,223,1,59,17664,1,223,4,13,97,98,99,100,101,102,104,105,111,112,114,115,119,17694,17709,17714,17737,17742,17749,17754,17860,17905,17957,17964,18090,18122,4,2,114,117,17700,17706,103,101,116,59,1,8982,59,1,964,114,107,59,1,9140,4,3,97,101,121,17722,17728,17734,114,111,110,59,1,357,100,105,108,59,1,355,59,1,1090,111,116,59,1,8411,108,114,101,99,59,1,8981,114,59,3,55349,56625,4,4,101,105,107,111,17764,17805,17836,17851,4,2,114,116,17770,17786,101,4,2,52,102,17777,17780,59,1,8756,111,114,101,59,1,8756,97,4,3,59,115,118,17795,17797,17802,1,952,121,109,59,1,977,59,1,977,4,2,99,110,17811,17831,107,4,2,97,115,17818,17826,112,112,114,111,120,59,1,8776,105,109,59,1,8764,115,112,59,1,8201,4,2,97,115,17842,17846,112,59,1,8776,105,109,59,1,8764,114,110,5,254,1,59,17858,1,254,4,3,108,109,110,17868,17873,17901,100,101,59,1,732,101,115,5,215,3,59,98,100,17884,17886,17898,1,215,4,2,59,97,17892,17894,1,8864,114,59,1,10801,59,1,10800,116,59,1,8749,4,3,101,112,115,17913,17917,17953,97,59,1,10536,4,4,59,98,99,102,17927,17929,17934,17939,1,8868,111,116,59,1,9014,105,114,59,1,10993,4,2,59,111,17945,17948,3,55349,56677,114,107,59,1,10970,97,59,1,10537,114,105,109,101,59,1,8244,4,3,97,105,112,17972,17977,18082,100,101,59,1,8482,4,7,97,100,101,109,112,115,116,17993,18051,18056,18059,18066,18072,18076,110,103,108,101,4,5,59,100,108,113,114,18009,18011,18017,18032,18035,1,9653,111,119,110,59,1,9663,101,102,116,4,2,59,101,18026,18028,1,9667,113,59,1,8884,59,1,8796,105,103,104,116,4,2,59,101,18045,18047,1,9657,113,59,1,8885,111,116,59,1,9708,59,1,8796,105,110,117,115,59,1,10810,108,117,115,59,1,10809,98,59,1,10701,105,109,101,59,1,10811,101,122,105,117,109,59,1,9186,4,3,99,104,116,18098,18111,18116,4,2,114,121,18104,18108,59,3,55349,56521,59,1,1094,99,121,59,1,1115,114,111,107,59,1,359,4,2,105,111,18128,18133,120,116,59,1,8812,104,101,97,100,4,2,108,114,18143,18154,101,102,116,97,114,114,111,119,59,1,8606,105,103,104,116,97,114,114,111,119,59,1,8608,4,18,65,72,97,98,99,100,102,103,104,108,109,111,112,114,115,116,117,119,18204,18209,18214,18234,18250,18268,18292,18308,18319,18343,18379,18397,18413,18504,18547,18553,18584,18603,114,114,59,1,8657,97,114,59,1,10595,4,2,99,114,18220,18230,117,116,101,5,250,1,59,18228,1,250,114,59,1,8593,114,4,2,99,101,18241,18245,121,59,1,1118,118,101,59,1,365,4,2,105,121,18256,18265,114,99,5,251,1,59,18263,1,251,59,1,1091,4,3,97,98,104,18276,18281,18287,114,114,59,1,8645,108,97,99,59,1,369,97,114,59,1,10606,4,2,105,114,18298,18304,115,104,116,59,1,10622,59,3,55349,56626,114,97,118,101,5,249,1,59,18317,1,249,4,2,97,98,18325,18338,114,4,2,108,114,18332,18335,59,1,8639,59,1,8638,108,107,59,1,9600,4,2,99,116,18349,18374,4,2,111,114,18355,18369,114,110,4,2,59,101,18363,18365,1,8988,114,59,1,8988,111,112,59,1,8975,114,105,59,1,9720,4,2,97,108,18385,18390,99,114,59,1,363,5,168,1,59,18395,1,168,4,2,103,112,18403,18408,111,110,59,1,371,102,59,3,55349,56678,4,6,97,100,104,108,115,117,18427,18434,18445,18470,18475,18494,114,114,111,119,59,1,8593,111,119,110,97,114,114,111,119,59,1,8597,97,114,112,111,111,110,4,2,108,114,18457,18463,101,102,116,59,1,8639,105,103,104,116,59,1,8638,117,115,59,1,8846,105,4,3,59,104,108,18484,18486,18489,1,965,59,1,978,111,110,59,1,965,112,97,114,114,111,119,115,59,1,8648,4,3,99,105,116,18512,18537,18542,4,2,111,114,18518,18532,114,110,4,2,59,101,18526,18528,1,8989,114,59,1,8989,111,112,59,1,8974,110,103,59,1,367,114,105,59,1,9721,99,114,59,3,55349,56522,4,3,100,105,114,18561,18566,18572,111,116,59,1,8944,108,100,101,59,1,361,105,4,2,59,102,18579,18581,1,9653,59,1,9652,4,2,97,109,18590,18595,114,114,59,1,8648,108,5,252,1,59,18601,1,252,97,110,103,108,101,59,1,10663,4,15,65,66,68,97,99,100,101,102,108,110,111,112,114,115,122,18643,18648,18661,18667,18847,18851,18857,18904,18909,18915,18931,18937,18943,18949,18996,114,114,59,1,8661,97,114,4,2,59,118,18656,18658,1,10984,59,1,10985,97,115,104,59,1,8872,4,2,110,114,18673,18679,103,114,116,59,1,10652,4,7,101,107,110,112,114,115,116,18695,18704,18711,18720,18742,18754,18810,112,115,105,108,111,110,59,1,1013,97,112,112,97,59,1,1008,111,116,104,105,110,103,59,1,8709,4,3,104,105,114,18728,18732,18735,105,59,1,981,59,1,982,111,112,116,111,59,1,8733,4,2,59,104,18748,18750,1,8597,111,59,1,1009,4,2,105,117,18760,18766,103,109,97,59,1,962,4,2,98,112,18772,18791,115,101,116,110,101,113,4,2,59,113,18784,18787,3,8842,65024,59,3,10955,65024,115,101,116,110,101,113,4,2,59,113,18803,18806,3,8843,65024,59,3,10956,65024,4,2,104,114,18816,18822,101,116,97,59,1,977,105,97,110,103,108,101,4,2,108,114,18834,18840,101,102,116,59,1,8882,105,103,104,116,59,1,8883,121,59,1,1074,97,115,104,59,1,8866,4,3,101,108,114,18865,18884,18890,4,3,59,98,101,18873,18875,18880,1,8744,97,114,59,1,8891,113,59,1,8794,108,105,112,59,1,8942,4,2,98,116,18896,18901,97,114,59,1,124,59,1,124,114,59,3,55349,56627,116,114,105,59,1,8882,115,117,4,2,98,112,18923,18927,59,3,8834,8402,59,3,8835,8402,112,102,59,3,55349,56679,114,111,112,59,1,8733,116,114,105,59,1,8883,4,2,99,117,18955,18960,114,59,3,55349,56523,4,2,98,112,18966,18981,110,4,2,69,101,18973,18977,59,3,10955,65024,59,3,8842,65024,110,4,2,69,101,18988,18992,59,3,10956,65024,59,3,8843,65024,105,103,122,97,103,59,1,10650,4,7,99,101,102,111,112,114,115,19020,19026,19061,19066,19072,19075,19089,105,114,99,59,1,373,4,2,100,105,19032,19055,4,2,98,103,19038,19043,97,114,59,1,10847,101,4,2,59,113,19050,19052,1,8743,59,1,8793,101,114,112,59,1,8472,114,59,3,55349,56628,112,102,59,3,55349,56680,59,1,8472,4,2,59,101,19081,19083,1,8768,97,116,104,59,1,8768,99,114,59,3,55349,56524,4,14,99,100,102,104,105,108,109,110,111,114,115,117,118,119,19125,19146,19152,19157,19173,19176,19192,19197,19202,19236,19252,19269,19286,19291,4,3,97,105,117,19133,19137,19142,112,59,1,8898,114,99,59,1,9711,112,59,1,8899,116,114,105,59,1,9661,114,59,3,55349,56629,4,2,65,97,19163,19168,114,114,59,1,10234,114,114,59,1,10231,59,1,958,4,2,65,97,19182,19187,114,114,59,1,10232,114,114,59,1,10229,97,112,59,1,10236,105,115,59,1,8955,4,3,100,112,116,19210,19215,19230,111,116,59,1,10752,4,2,102,108,19221,19225,59,3,55349,56681,117,115,59,1,10753,105,109,101,59,1,10754,4,2,65,97,19242,19247,114,114,59,1,10233,114,114,59,1,10230,4,2,99,113,19258,19263,114,59,3,55349,56525,99,117,112,59,1,10758,4,2,112,116,19275,19281,108,117,115,59,1,10756,114,105,59,1,9651,101,101,59,1,8897,101,100,103,101,59,1,8896,4,8,97,99,101,102,105,111,115,117,19316,19335,19349,19357,19362,19367,19373,19379,99,4,2,117,121,19323,19332,116,101,5,253,1,59,19330,1,253,59,1,1103,4,2,105,121,19341,19346,114,99,59,1,375,59,1,1099,110,5,165,1,59,19355,1,165,114,59,3,55349,56630,99,121,59,1,1111,112,102,59,3,55349,56682,99,114,59,3,55349,56526,4,2,99,109,19385,19389,121,59,1,1102,108,5,255,1,59,19395,1,255,4,10,97,99,100,101,102,104,105,111,115,119,19419,19426,19441,19446,19462,19467,19472,19480,19486,19492,99,117,116,101,59,1,378,4,2,97,121,19432,19438,114,111,110,59,1,382,59,1,1079,111,116,59,1,380,4,2,101,116,19452,19458,116,114,102,59,1,8488,97,59,1,950,114,59,3,55349,56631,99,121,59,1,1078,103,114,97,114,114,59,1,8669,112,102,59,3,55349,56683,99,114,59,3,55349,56527,4,2,106,110,19498,19501,59,1,8205,106,59,1,8204])},function(t,e,n){"use strict";var r=n(35),i=r.TAG_NAMES,o=r.NAMESPACES;function a(t){switch(t.length){case 1:return t===i.P;case 2:return t===i.RB||t===i.RP||t===i.RT||t===i.DD||t===i.DT||t===i.LI;case 3:return t===i.RTC;case 6:return t===i.OPTION;case 8:return t===i.OPTGROUP||t===i.MENUITEM}return!1}function s(t,e){switch(t.length){case 2:if(t===i.TD||t===i.TH)return e===o.HTML;if(t===i.MI||t===i.MO||t===i.MN||t===i.MS)return e===o.MATHML;break;case 4:if(t===i.HTML)return e===o.HTML;if(t===i.DESC)return e===o.SVG;break;case 5:if(t===i.TABLE)return e===o.HTML;if(t===i.MTEXT)return e===o.MATHML;if(t===i.TITLE)return e===o.SVG;break;case 6:return(t===i.APPLET||t===i.OBJECT)&&e===o.HTML;case 7:return(t===i.CAPTION||t===i.MARQUEE)&&e===o.HTML;case 8:return t===i.TEMPLATE&&e===o.HTML;case 13:return t===i.FOREIGN_OBJECT&&e===o.SVG;case 14:return t===i.ANNOTATION_XML&&e===o.MATHML}return!1}var c=t.exports=function(t,e){this.stackTop=-1,this.items=[],this.current=t,this.currentTagName=null,this.currentTmplContent=null,this.tmplCount=0,this.treeAdapter=e};c.prototype._indexOf=function(t){for(var e=-1,n=this.stackTop;n>=0;n--)if(this.items[n]===t){e=n;break}return e},c.prototype._isInTemplate=function(){return this.currentTagName===i.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===o.HTML},c.prototype._updateCurrentElement=function(){this.current=this.items[this.stackTop],this.currentTagName=this.current&&this.treeAdapter.getTagName(this.current),this.currentTmplContent=this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):null},c.prototype.push=function(t){this.items[++this.stackTop]=t,this._updateCurrentElement(),this._isInTemplate()&&this.tmplCount++},c.prototype.pop=function(){this.stackTop--,this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this._updateCurrentElement()},c.prototype.replace=function(t,e){var n=this._indexOf(t);this.items[n]=e,n===this.stackTop&&this._updateCurrentElement()},c.prototype.insertAfter=function(t,e){var n=this._indexOf(t)+1;this.items.splice(n,0,e),n===++this.stackTop&&this._updateCurrentElement()},c.prototype.popUntilTagNamePopped=function(t){for(;this.stackTop>-1;){var e=this.currentTagName,n=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),e===t&&n===o.HTML)break}},c.prototype.popUntilElementPopped=function(t){for(;this.stackTop>-1;){var e=this.current;if(this.pop(),e===t)break}},c.prototype.popUntilNumberedHeaderPopped=function(){for(;this.stackTop>-1;){var t=this.currentTagName,e=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===i.H1||t===i.H2||t===i.H3||t===i.H4||t===i.H5||t===i.H6&&e===o.HTML)break}},c.prototype.popUntilTableCellPopped=function(){for(;this.stackTop>-1;){var t=this.currentTagName,e=this.treeAdapter.getNamespaceURI(this.current);if(this.pop(),t===i.TD||t===i.TH&&e===o.HTML)break}},c.prototype.popAllUpToHtmlElement=function(){this.stackTop=0,this._updateCurrentElement()},c.prototype.clearBackToTableContext=function(){for(;this.currentTagName!==i.TABLE&&this.currentTagName!==i.TEMPLATE&&this.currentTagName!==i.HTML||this.treeAdapter.getNamespaceURI(this.current)!==o.HTML;)this.pop()},c.prototype.clearBackToTableBodyContext=function(){for(;this.currentTagName!==i.TBODY&&this.currentTagName!==i.TFOOT&&this.currentTagName!==i.THEAD&&this.currentTagName!==i.TEMPLATE&&this.currentTagName!==i.HTML||this.treeAdapter.getNamespaceURI(this.current)!==o.HTML;)this.pop()},c.prototype.clearBackToTableRowContext=function(){for(;this.currentTagName!==i.TR&&this.currentTagName!==i.TEMPLATE&&this.currentTagName!==i.HTML||this.treeAdapter.getNamespaceURI(this.current)!==o.HTML;)this.pop()},c.prototype.remove=function(t){for(var e=this.stackTop;e>=0;e--)if(this.items[e]===t){this.items.splice(e,1),this.stackTop--,this._updateCurrentElement();break}},c.prototype.tryPeekProperlyNestedBodyElement=function(){var t=this.items[1];return t&&this.treeAdapter.getTagName(t)===i.BODY?t:null},c.prototype.contains=function(t){return this._indexOf(t)>-1},c.prototype.getCommonAncestor=function(t){var e=this._indexOf(t);return--e>=0?this.items[e]:null},c.prototype.isRootHtmlElementCurrent=function(){return 0===this.stackTop&&this.currentTagName===i.HTML},c.prototype.hasInScope=function(t){for(var e=this.stackTop;e>=0;e--){var n=this.treeAdapter.getTagName(this.items[e]),r=this.treeAdapter.getNamespaceURI(this.items[e]);if(n===t&&r===o.HTML)return!0;if(s(n,r))return!1}return!0},c.prototype.hasNumberedHeaderInScope=function(){for(var t=this.stackTop;t>=0;t--){var e=this.treeAdapter.getTagName(this.items[t]),n=this.treeAdapter.getNamespaceURI(this.items[t]);if((e===i.H1||e===i.H2||e===i.H3||e===i.H4||e===i.H5||e===i.H6)&&n===o.HTML)return!0;if(s(e,n))return!1}return!0},c.prototype.hasInListItemScope=function(t){for(var e=this.stackTop;e>=0;e--){var n=this.treeAdapter.getTagName(this.items[e]),r=this.treeAdapter.getNamespaceURI(this.items[e]);if(n===t&&r===o.HTML)return!0;if((n===i.UL||n===i.OL)&&r===o.HTML||s(n,r))return!1}return!0},c.prototype.hasInButtonScope=function(t){for(var e=this.stackTop;e>=0;e--){var n=this.treeAdapter.getTagName(this.items[e]),r=this.treeAdapter.getNamespaceURI(this.items[e]);if(n===t&&r===o.HTML)return!0;if(n===i.BUTTON&&r===o.HTML||s(n,r))return!1}return!0},c.prototype.hasInTableScope=function(t){for(var e=this.stackTop;e>=0;e--){var n=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===o.HTML){if(n===t)return!0;if(n===i.TABLE||n===i.TEMPLATE||n===i.HTML)return!1}}return!0},c.prototype.hasTableBodyContextInTableScope=function(){for(var t=this.stackTop;t>=0;t--){var e=this.treeAdapter.getTagName(this.items[t]);if(this.treeAdapter.getNamespaceURI(this.items[t])===o.HTML){if(e===i.TBODY||e===i.THEAD||e===i.TFOOT)return!0;if(e===i.TABLE||e===i.HTML)return!1}}return!0},c.prototype.hasInSelectScope=function(t){for(var e=this.stackTop;e>=0;e--){var n=this.treeAdapter.getTagName(this.items[e]);if(this.treeAdapter.getNamespaceURI(this.items[e])===o.HTML){if(n===t)return!0;if(n!==i.OPTION&&n!==i.OPTGROUP)return!1}}return!0},c.prototype.generateImpliedEndTags=function(){for(;a(this.currentTagName);)this.pop()},c.prototype.generateImpliedEndTagsWithExclusion=function(t){for(;a(this.currentTagName)&&this.currentTagName!==t;)this.pop()}},function(t,e,n){"use strict";var r=t.exports=function(t){this.length=0,this.entries=[],this.treeAdapter=t,this.bookmark=null};r.MARKER_ENTRY="MARKER_ENTRY",r.ELEMENT_ENTRY="ELEMENT_ENTRY",r.prototype._getNoahArkConditionCandidates=function(t){var e=[];if(this.length>=3)for(var n=this.treeAdapter.getAttrList(t).length,i=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t),a=this.length-1;a>=0;a--){var s=this.entries[a];if(s.type===r.MARKER_ENTRY)break;var c=s.element,u=this.treeAdapter.getAttrList(c);this.treeAdapter.getTagName(c)===i&&this.treeAdapter.getNamespaceURI(c)===o&&u.length===n&&e.push({idx:a,attrs:u})}return e.length<3?[]:e},r.prototype._ensureNoahArkCondition=function(t){var e=this._getNoahArkConditionCandidates(t),n=e.length;if(n){for(var r=this.treeAdapter.getAttrList(t),i=r.length,o=Object.create(null),a=0;a<i;a++){var s=r[a];o[s.name]=s.value}for(a=0;a<i;a++)for(var c=0;c<n;c++){var u=e[c].attrs[a];if(o[u.name]!==u.value&&(e.splice(c,1),n--),e.length<3)return}for(a=n-1;a>=2;a--)this.entries.splice(e[a].idx,1),this.length--}},r.prototype.insertMarker=function(){this.entries.push({type:r.MARKER_ENTRY}),this.length++},r.prototype.pushElement=function(t,e){this._ensureNoahArkCondition(t),this.entries.push({type:r.ELEMENT_ENTRY,element:t,token:e}),this.length++},r.prototype.insertElementAfterBookmark=function(t,e){for(var n=this.length-1;n>=0&&this.entries[n]!==this.bookmark;n--);this.entries.splice(n+1,0,{type:r.ELEMENT_ENTRY,element:t,token:e}),this.length++},r.prototype.removeEntry=function(t){for(var e=this.length-1;e>=0;e--)if(this.entries[e]===t){this.entries.splice(e,1),this.length--;break}},r.prototype.clearToLastMarker=function(){for(;this.length;){var t=this.entries.pop();if(this.length--,t.type===r.MARKER_ENTRY)break}},r.prototype.getElementEntryInScopeWithTagName=function(t){for(var e=this.length-1;e>=0;e--){var n=this.entries[e];if(n.type===r.MARKER_ENTRY)return null;if(this.treeAdapter.getTagName(n.element)===t)return n}return null},r.prototype.getElementEntry=function(t){for(var e=this.length-1;e>=0;e--){var n=this.entries[e];if(n.type===r.ELEMENT_ENTRY&&n.element===t)return n}return null}},function(t,e,n){"use strict";var r=n(92),i=n(60),o=n(171),a=n(172),s=n(278),c=n(35),u=n(39).inherits,l=c.TAG_NAMES,h=t.exports=function(t){r.call(this,t),this.parser=t,this.posTracker=null,this.lastStartTagToken=null,this.lastFosterParentingLocation=null,this.currentToken=null};u(h,r),h.prototype._setStartLocation=function(t){this.lastStartTagToken?(t.__location=Object.create(this.lastStartTagToken.location),t.__location.startTag=this.lastStartTagToken.location):t.__location=null},h.prototype._setEndLocation=function(t,e){var n=t.__location;if(n)if(e.location){var r=e.location,o=this.parser.treeAdapter.getTagName(t);e.type===i.END_TAG_TOKEN&&o===e.tagName?(n.endTag=Object.create(r),n.endOffset=r.endOffset):n.endOffset=r.startOffset}else e.type===i.EOF_TOKEN&&(n.endOffset=this.posTracker.offset)},h.prototype._getOverriddenMethods=function(t,e){return{_bootstrap:function(n,r){e._bootstrap.call(this,n,r),t.lastStartTagToken=null,t.lastFosterParentingLocation=null,t.currentToken=null,t.posTracker=new a(this.tokenizer.preprocessor),new o(this.tokenizer),new s(this.openElements,{onItemPop:function(e){t._setEndLocation(e,t.currentToken)}})},_runParsingLoop:function(n){e._runParsingLoop.call(this,n);for(var r=this.openElements.stackTop;r>=0;r--)t._setEndLocation(this.openElements.items[r],t.currentToken)},_processTokenInForeignContent:function(n){t.currentToken=n,e._processTokenInForeignContent.call(this,n)},_processToken:function(n){if(t.currentToken=n,e._processToken.call(this,n),n.type===i.END_TAG_TOKEN&&(n.tagName===l.HTML||n.tagName===l.BODY&&this.openElements.hasInScope(l.BODY)))for(var r=this.openElements.stackTop;r>=0;r--){var o=this.openElements.items[r];if(this.treeAdapter.getTagName(o)===n.tagName){t._setEndLocation(o,n);break}}},_setDocumentType:function(t){e._setDocumentType.call(this,t);for(var n=this.treeAdapter.getChildNodes(this.document),r=n.length,i=0;i<r;i++){var o=n[i];if(this.treeAdapter.isDocumentTypeNode(o)){o.__location=t.location;break}}},_attachElementToTree:function(n){t._setStartLocation(n),t.lastStartTagToken=null,e._attachElementToTree.call(this,n)},_appendElement:function(n,r){t.lastStartTagToken=n,e._appendElement.call(this,n,r)},_insertElement:function(n,r){t.lastStartTagToken=n,e._insertElement.call(this,n,r)},_insertTemplate:function(n){t.lastStartTagToken=n,e._insertTemplate.call(this,n),this.treeAdapter.getTemplateContent(this.openElements.current).__location=null},_insertFakeRootElement:function(){e._insertFakeRootElement.call(this),this.openElements.current.__location=null},_appendCommentNode:function(t,n){e._appendCommentNode.call(this,t,n);var r=this.treeAdapter.getChildNodes(n);r[r.length-1].__location=t.location},_findFosterParentingLocation:function(){return t.lastFosterParentingLocation=e._findFosterParentingLocation.call(this),t.lastFosterParentingLocation},_insertCharacters:function(n){e._insertCharacters.call(this,n);var r=this._shouldFosterParentOnInsertion(),i=r&&t.lastFosterParentingLocation.parent||this.openElements.currentTmplContent||this.openElements.current,o=this.treeAdapter.getChildNodes(i),a=r&&t.lastFosterParentingLocation.beforeElement?o.indexOf(t.lastFosterParentingLocation.beforeElement)-1:o.length-1,s=o[a];s.__location?s.__location.endOffset=n.location.endOffset:s.__location=n.location}}}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},function(t,e,n){"use strict";var r=n(92),i=n(39).inherits,o=t.exports=function(t,e){r.call(this,t),this.onItemPop=e.onItemPop};i(o,r),o.prototype._getOverriddenMethods=function(t,e){return{pop:function(){t.onItemPop(this.current),e.pop.call(this)},popAllUpToHtmlElement:function(){for(var n=this.stackTop;n>0;n--)t.onItemPop(this.items[n]);e.popAllUpToHtmlElement.call(this)},remove:function(n){t.onItemPop(this.current),e.remove.call(this,n)}}}},function(t,e,n){"use strict";var r=n(127),i=n(35).DOCUMENT_MODE,o={element:1,text:3,cdata:4,comment:8},a={tagName:"name",childNodes:"children",parentNode:"parent",previousSibling:"prev",nextSibling:"next",nodeValue:"data"},s=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])};s.prototype={get firstChild(){var t=this.children;return t&&t[0]||null},get lastChild(){var t=this.children;return t&&t[t.length-1]||null},get nodeType(){return o[this.type]||o.element}},Object.keys(a).forEach((function(t){var e=a[t];Object.defineProperty(s.prototype,t,{get:function(){return this[e]||null},set:function(t){return this[e]=t,t}})})),e.createDocument=function(){return new s({type:"root",name:"root",parent:null,prev:null,next:null,children:[],"x-mode":i.NO_QUIRKS})},e.createDocumentFragment=function(){return new s({type:"root",name:"root",parent:null,prev:null,next:null,children:[]})},e.createElement=function(t,e,n){for(var r=Object.create(null),i=Object.create(null),o=Object.create(null),a=0;a<n.length;a++){var c=n[a].name;r[c]=n[a].value,i[c]=n[a].namespace,o[c]=n[a].prefix}return new s({type:"script"===t||"style"===t?t:"tag",name:t,namespace:e,attribs:r,"x-attribsNamespace":i,"x-attribsPrefix":o,children:[],parent:null,prev:null,next:null})},e.createCommentNode=function(t){return new s({type:"comment",data:t,parent:null,prev:null,next:null})};var c=function(t){return new s({type:"text",data:t,parent:null,prev:null,next:null})},u=e.appendChild=function(t,e){var n=t.children[t.children.length-1];n&&(n.next=e,e.prev=n),t.children.push(e),e.parent=t},l=e.insertBefore=function(t,e,n){var r=t.children.indexOf(n),i=n.prev;i&&(i.next=e,e.prev=i),n.prev=e,e.next=n,t.children.splice(r,0,e),e.parent=t};e.setTemplateContent=function(t,e){u(t,e)},e.getTemplateContent=function(t){return t.children[0]},e.setDocumentType=function(t,e,n,i){for(var o=r.serializeContent(e,n,i),a=null,c=0;c<t.children.length;c++)if("directive"===t.children[c].type&&"!doctype"===t.children[c].name){a=t.children[c];break}a?(a.data=o,a["x-name"]=e,a["x-publicId"]=n,a["x-systemId"]=i):u(t,new s({type:"directive",name:"!doctype",data:o,"x-name":e,"x-publicId":n,"x-systemId":i}))},e.setDocumentMode=function(t,e){t["x-mode"]=e},e.getDocumentMode=function(t){return t["x-mode"]},e.detachNode=function(t){if(t.parent){var e=t.parent.children.indexOf(t),n=t.prev,r=t.next;t.prev=null,t.next=null,n&&(n.next=r),r&&(r.prev=n),t.parent.children.splice(e,1),t.parent=null}},e.insertText=function(t,e){var n=t.children[t.children.length-1];n&&"text"===n.type?n.data+=e:u(t,c(e))},e.insertTextBefore=function(t,e,n){var r=t.children[t.children.indexOf(n)-1];r&&"text"===r.type?r.data+=e:l(t,c(e),n)},e.adoptAttributes=function(t,e){for(var n=0;n<e.length;n++){var r=e[n].name;void 0===t.attribs[r]&&(t.attribs[r]=e[n].value,t["x-attribsNamespace"][r]=e[n].namespace,t["x-attribsPrefix"][r]=e[n].prefix)}},e.getFirstChild=function(t){return t.children[0]},e.getChildNodes=function(t){return t.children},e.getParentNode=function(t){return t.parent},e.getAttrList=function(t){var e=[];for(var n in t.attribs)e.push({name:n,value:t.attribs[n],namespace:t["x-attribsNamespace"][n],prefix:t["x-attribsPrefix"][n]});return e},e.getTagName=function(t){return t.name},e.getNamespaceURI=function(t){return t.namespace},e.getTextNodeContent=function(t){return t.data},e.getCommentNodeContent=function(t){return t.data},e.getDocumentTypeNodeName=function(t){return t["x-name"]},e.getDocumentTypeNodePublicId=function(t){return t["x-publicId"]},e.getDocumentTypeNodeSystemId=function(t){return t["x-systemId"]},e.isTextNode=function(t){return"text"===t.type},e.isCommentNode=function(t){return"comment"===t.type},e.isDocumentTypeNode=function(t){return"directive"===t.type&&"!doctype"===t.name},e.isElementNode=function(t){return!!t.attribs}},function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){var e,n,r=u(t),a=r[0],s=r[1],c=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),l=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=i[t.charCodeAt(n)]<<18|i[t.charCodeAt(n+1)]<<12|i[t.charCodeAt(n+2)]<<6|i[t.charCodeAt(n+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;return 2===s&&(e=i[t.charCodeAt(n)]<<2|i[t.charCodeAt(n+1)]>>4,c[l++]=255&e),1===s&&(e=i[t.charCodeAt(n)]<<10|i[t.charCodeAt(n+1)]<<4|i[t.charCodeAt(n+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e),c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,h=n?i-1:0,p=n?-1:1,f=t[e+h];for(h+=p,o=f&(1<<-l)-1,f>>=-l,l+=s;l>0;o=256*o+t[e+h],h+=p,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+h],h+=p,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(f?-1:1);a+=Math.pow(2,r),o-=u}return(f?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,h=l>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:o-1,d=r?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+h>=1?p/c:p*Math.pow(2,1-h))*c>=2&&(a++,c/=2),a+h>=l?(s=0,a=l):a+h>=1?(s=(e*c-1)*Math.pow(2,i),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;t[n+f]=255&s,f+=d,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+f]=255&a,f+=d,a/=256,u-=8);t[n+f-d]|=128*y}},function(t,e){},function(t,e,n){"use strict";var r=n(130).Buffer,i=n(284);t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var e,n,i=r.allocUnsafe(t>>>0),o=this.head,a=0;o;)e=i,n=a,o.data.copy(e,n),a+=o.data.length,o=o.next;return i},t}(),i&&i.inspect&&i.inspect.custom&&(t.exports.prototype[i.inspect.custom]=function(){var t=i.inspect({length:this.length});return this.constructor.name+" "+t})},function(t,e){},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},n(286),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(30))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,a,s,c=1,u={},l=!1,h=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&d(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(a+e,"*")}):t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(d,0,t)},p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return u[c]=i,r(c),c++},p.clearImmediate=f}function f(t){delete u[t]}function d(t){if(l)setTimeout(d,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{f(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(30),n(53))},function(t,e,n){(function(e){function n(t){try{if(!e.localStorage)return!1}catch(t){return!1}var n=e.localStorage[t];return null!=n&&"true"===String(n).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var r=!1;return function(){if(!r){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}}}).call(this,n(30))},function(t,e,n){var r=n(131),i=r.Buffer;function o(t,e){for(var n in t)e[n]=t[n]}function a(t,e,n){return i(t,e,n)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=r:(o(r,e),e.Buffer=a),a.prototype=Object.create(i.prototype),o(i,a),a.from=function(t,e,n){if("number"==typeof t)throw new TypeError("Argument must not be a number");return i(t,e,n)},a.alloc=function(t,e,n){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=i(t);return void 0!==e?"string"==typeof n?r.fill(e,n):r.fill(e):r.fill(0),r},a.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return i(t)},a.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},function(t,e,n){"use strict";t.exports=o;var r=n(181),i=n(73);function o(t){if(!(this instanceof o))return new o(t);r.call(this,t)}i.inherits=n(61),i.inherits(o,r),o.prototype._transform=function(t,e,n){n(null,t)}},function(t,e,n){t.exports=n(132)},function(t,e,n){t.exports=n(55)},function(t,e,n){t.exports=n(129).Transform},function(t,e,n){t.exports=n(129).PassThrough},function(t,e,n){"use strict";var r=n(175),i=n(39).inherits,o=n(35).TAG_NAMES;i(t.exports=function(t){r.call(this,t),this.parser._insertFakeElement(o.HTML),this.parser._insertFakeElement(o.HEAD),this.parser.openElements.pop(),this.parser._insertFakeElement(o.BODY),this.parser._insertFakeElement(o.PRE),this.parser.treeAdapter.insertText(this.parser.openElements.current,"\n"),this.parser.switchToPlaintextParsing()},r)},function(t,e,n){"use strict";var r=n(93).Readable,i=n(39).inherits,o=n(174),a=t.exports=function(t,e){r.call(this),this.serializer=new o(t,e),Object.defineProperty(this.serializer,"html",{get:function(){return""},set:this.push.bind(this)})};i(a,r),a.prototype._read=function(){this.serializer.serialize(),this.push(null)}},function(t,e,n){"use strict";var r=n(93).Transform,i=n(297),o=n(39).inherits,a=n(60),s=n(171),c=n(298),u=n(126),l={locationInfo:!1},h=t.exports=function(t){r.call(this),this.options=u(l,t),this.tokenizer=new a(t),this.options.locationInfo&&new s(this.tokenizer),this.parserFeedbackSimulator=new c(this.tokenizer),this.pendingText=null,this.currentTokenLocation=void 0,this.lastChunkWritten=!1,this.stopped=!1,this.pipe(new i)};o(h,r),h.prototype._transform=function(t,e,n){this.stopped||(this.tokenizer.write(t.toString("utf8"),this.lastChunkWritten),this._runParsingLoop()),this.push(t),n()},h.prototype._flush=function(t){t()},h.prototype.end=function(t,e,n){this.lastChunkWritten=!0,r.prototype.end.call(this,t,e,n)},h.prototype.stop=function(){this.stopped=!0},h.prototype._runParsingLoop=function(){do{var t=this.parserFeedbackSimulator.getNextToken();if(t.type===a.HIBERNATION_TOKEN)break;t.type===a.CHARACTER_TOKEN||t.type===a.WHITESPACE_CHARACTER_TOKEN||t.type===a.NULL_CHARACTER_TOKEN?(this.options.locationInfo&&(null===this.pendingText?this.currentTokenLocation=t.location:this.currentTokenLocation.endOffset=t.location.endOffset),this.pendingText=(this.pendingText||"")+t.chars):(this._emitPendingText(),this._handleToken(t))}while(!this.stopped&&t.type!==a.EOF_TOKEN)},h.prototype._handleToken=function(t){this.options.locationInfo&&(this.currentTokenLocation=t.location),t.type===a.START_TAG_TOKEN?this.emit("startTag",t.tagName,t.attrs,t.selfClosing,this.currentTokenLocation):t.type===a.END_TAG_TOKEN?this.emit("endTag",t.tagName,this.currentTokenLocation):t.type===a.COMMENT_TOKEN?this.emit("comment",t.data,this.currentTokenLocation):t.type===a.DOCTYPE_TOKEN&&this.emit("doctype",t.name,t.publicId,t.systemId,this.currentTokenLocation)},h.prototype._emitPendingText=function(){null!==this.pendingText&&(this.emit("text",this.pendingText,this.currentTokenLocation),this.pendingText=null)}},function(t,e,n){"use strict";var r=n(93).Writable,i=n(39),o=t.exports=function(){r.call(this)};i.inherits(o,r),o.prototype._write=function(t,e,n){n()}},function(t,e,n){"use strict";var r=n(60),i=n(173),o=n(72),a=n(35),s=a.TAG_NAMES,c=a.NAMESPACES,u=t.exports=function(t){this.tokenizer=t,this.namespaceStack=[],this.namespaceStackTop=-1,this._enterNamespace(c.HTML)};u.prototype.getNextToken=function(){var t=this.tokenizer.getNextToken();if(t.type===r.START_TAG_TOKEN)this._handleStartTagToken(t);else if(t.type===r.END_TAG_TOKEN)this._handleEndTagToken(t);else if(t.type===r.NULL_CHARACTER_TOKEN&&this.inForeignContent)t.type=r.CHARACTER_TOKEN,t.chars=o.REPLACEMENT_CHARACTER;else if(this.skipNextNewLine&&(t.type!==r.HIBERNATION_TOKEN&&(this.skipNextNewLine=!1),t.type===r.WHITESPACE_CHARACTER_TOKEN&&"\n"===t.chars[0])){if(1===t.chars.length)return this.getNextToken();t.chars=t.chars.substr(1)}return t},u.prototype._enterNamespace=function(t){this.namespaceStackTop++,this.namespaceStack.push(t),this.inForeignContent=t!==c.HTML,this.currentNamespace=t,this.tokenizer.allowCDATA=this.inForeignContent},u.prototype._leaveCurrentNamespace=function(){this.namespaceStackTop--,this.namespaceStack.pop(),this.currentNamespace=this.namespaceStack[this.namespaceStackTop],this.inForeignContent=this.currentNamespace!==c.HTML,this.tokenizer.allowCDATA=this.inForeignContent},u.prototype._ensureTokenizerMode=function(t){t===s.TEXTAREA||t===s.TITLE?this.tokenizer.state=r.MODE.RCDATA:t===s.PLAINTEXT?this.tokenizer.state=r.MODE.PLAINTEXT:t===s.SCRIPT?this.tokenizer.state=r.MODE.SCRIPT_DATA:t!==s.STYLE&&t!==s.IFRAME&&t!==s.XMP&&t!==s.NOEMBED&&t!==s.NOFRAMES&&t!==s.NOSCRIPT||(this.tokenizer.state=r.MODE.RAWTEXT)},u.prototype._handleStartTagToken=function(t){var e=t.tagName;if(e===s.SVG?this._enterNamespace(c.SVG):e===s.MATH&&this._enterNamespace(c.MATHML),this.inForeignContent){if(i.causesExit(t))return void this._leaveCurrentNamespace();var n=this.currentNamespace;n===c.MATHML?i.adjustTokenMathMLAttrs(t):n===c.SVG&&(i.adjustTokenSVGTagName(t),i.adjustTokenSVGAttrs(t)),i.adjustTokenXMLAttrs(t),e=t.tagName,!t.selfClosing&&i.isIntegrationPoint(e,n,t.attrs)&&this._enterNamespace(c.HTML)}else e===s.PRE||e===s.TEXTAREA||e===s.LISTING?this.skipNextNewLine=!0:e===s.IMAGE&&(t.tagName=s.IMG),this._ensureTokenizerMode(e)},u.prototype._handleEndTagToken=function(t){var e=t.tagName;if(this.inForeignContent)(e===s.SVG&&this.currentNamespace===c.SVG||e===s.MATH&&this.currentNamespace===c.MATHML)&&this._leaveCurrentNamespace();else{var n=this.namespaceStack[this.namespaceStackTop-1];n===c.SVG&&i.SVG_TAG_NAMES_ADJUSTMENT_MAP[e]&&(e=i.SVG_TAG_NAMES_ADJUSTMENT_MAP[e]),i.isIntegrationPoint(e,n,t.attrs)&&this._leaveCurrentNamespace()}this.currentNamespace===c.SVG&&i.adjustTokenSVGTagName(t)}},function(t,e,n){"use strict";var r={for:"htmlFor",class:"className",accept:"accept",acceptcharset:"acceptCharset",accesskey:"accessKey",action:"action",allowfullscreen:"allowFullScreen",allowtransparency:"allowTransparency",alt:"alt",async:"async",autocomplete:"autoComplete",autofocus:"autoFocus",autoplay:"autoPlay",capture:"capture",cellpadding:"cellPadding",cellspacing:"cellSpacing",challenge:"challenge",charset:"charSet",checked:"checked",cite:"cite",classid:"classID",classname:"className",colspan:"colSpan",cols:"cols",content:"content",contenteditable:"contentEditable",contextmenu:"contextMenu",controls:"controls",coords:"coords",crossorigin:"crossOrigin",data:"data",datetime:"dateTime",default:"default",defer:"defer",dir:"dir",disabled:"disabled",download:"download",draggable:"draggable",enctype:"encType",form:"form",formaction:"formAction",formenctype:"formEncType",formmethod:"formMethod",formnovalidate:"formNoValidate",formtarget:"formTarget",frameborder:"frameBorder",headers:"headers",height:"height",hidden:"hidden",high:"high",href:"href",hreflang:"hrefLang",htmlfor:"htmlFor",httpequiv:"httpEquiv",icon:"icon",id:"id",inputmode:"inputMode",integrity:"integrity",is:"is",keyparams:"keyParams",keytype:"keyType",kind:"kind",label:"label",lang:"lang",list:"list",loop:"loop",low:"low",manifest:"manifest",marginheight:"marginHeight",marginwidth:"marginWidth",max:"max",maxlength:"maxLength",media:"media",mediagroup:"mediaGroup",method:"method",min:"min",minlength:"minLength",multiple:"multiple",muted:"muted",name:"name",novalidate:"noValidate",nonce:"nonce",open:"open",optimum:"optimum",pattern:"pattern",placeholder:"placeholder",poster:"poster",preload:"preload",profile:"profile",radiogroup:"radioGroup",readonly:"readOnly",rel:"rel",required:"required",reversed:"reversed",role:"role",rowspan:"rowSpan",rows:"rows",sandbox:"sandbox",scope:"scope",scoped:"scoped",scrolling:"scrolling",seamless:"seamless",selected:"selected",shape:"shape",size:"size",sizes:"sizes",span:"span",spellcheck:"spellCheck",src:"src",srcdoc:"srcDoc",srclang:"srcLang",srcset:"srcSet",start:"start",step:"step",style:"style",summary:"summary",tabindex:"tabIndex",target:"target",title:"title",type:"type",usemap:"useMap",value:"value",width:"width",wmode:"wmode",wrap:"wrap",accentheight:"accentHeight",accumulate:"accumulate",additive:"additive",alignmentbaseline:"alignmentBaseline",allowreorder:"allowReorder",alphabetic:"alphabetic",amplitude:"amplitude",arabicform:"arabicForm",ascent:"ascent",attributename:"attributeName",attributetype:"attributeType",autoreverse:"autoReverse",azimuth:"azimuth",basefrequency:"baseFrequency",baseprofile:"baseProfile",baselineshift:"baselineShift",bbox:"bbox",begin:"begin",bias:"bias",by:"by",calcmode:"calcMode",capheight:"capHeight",clip:"clip",clippath:"clipPath",clippathunits:"clipPathUnits",cliprule:"clipRule",colorinterpolation:"colorInterpolation",colorinterpolationfilters:"colorInterpolationFilters",colorprofile:"colorProfile",colorrendering:"colorRendering",contentscripttype:"contentScriptType",contentstyletype:"contentStyleType",cursor:"cursor",cx:"cx",cy:"cy",d:"d",decelerate:"decelerate",descent:"descent",diffuseconstant:"diffuseConstant",direction:"direction",display:"display",divisor:"divisor",dominantbaseline:"dominantBaseline",dur:"dur",dx:"dx",dy:"dy",edgemode:"edgeMode",elevation:"elevation",enablebackground:"enableBackground",end:"end",exponent:"exponent",externalresourcesrequired:"externalResourcesRequired",fill:"fill",fillopacity:"fillOpacity",fillrule:"fillRule",filter:"filter",filterres:"filterRes",filterunits:"filterUnits",floodcolor:"floodColor",floodopacity:"floodOpacity",focusable:"focusable",fontfamily:"fontFamily",fontsize:"fontSize",fontsizeadjust:"fontSizeAdjust",fontstretch:"fontStretch",fontstyle:"fontStyle",fontvariant:"fontVariant",fontweight:"fontWeight",format:"format",from:"from",fx:"fx",fy:"fy",g1:"g1",g2:"g2",glyphname:"glyphName",glyphorientationhorizontal:"glyphOrientationHorizontal",glyphorientationvertical:"glyphOrientationVertical",glyphref:"glyphRef",gradienttransform:"gradientTransform",gradientunits:"gradientUnits",hanging:"hanging",horizadvx:"horizAdvX",horizoriginx:"horizOriginX",ideographic:"ideographic",imagerendering:"imageRendering",in:"in",in2:"in2",intercept:"intercept",k:"k",k1:"k1",k2:"k2",k3:"k3",k4:"k4",kernelmatrix:"kernelMatrix",kernelunitlength:"kernelUnitLength",kerning:"kerning",keypoints:"keyPoints",keysplines:"keySplines",keytimes:"keyTimes",lengthadjust:"lengthAdjust",letterspacing:"letterSpacing",lightingcolor:"lightingColor",limitingconeangle:"limitingConeAngle",local:"local",markerend:"markerEnd",markerheight:"markerHeight",markermid:"markerMid",markerstart:"markerStart",markerunits:"markerUnits",markerwidth:"markerWidth",mask:"mask",maskcontentunits:"maskContentUnits",maskunits:"maskUnits",mathematical:"mathematical",mode:"mode",numoctaves:"numOctaves",offset:"offset",opacity:"opacity",operator:"operator",order:"order",orient:"orient",orientation:"orientation",origin:"origin",overflow:"overflow",overlineposition:"overlinePosition",overlinethickness:"overlineThickness",paintorder:"paintOrder",panose1:"panose1",pathlength:"pathLength",patterncontentunits:"patternContentUnits",patterntransform:"patternTransform",patternunits:"patternUnits",pointerevents:"pointerEvents",points:"points",pointsatx:"pointsAtX",pointsaty:"pointsAtY",pointsatz:"pointsAtZ",preservealpha:"preserveAlpha",preserveaspectratio:"preserveAspectRatio",primitiveunits:"primitiveUnits",r:"r",radius:"radius",refx:"refX",refy:"refY",renderingintent:"renderingIntent",repeatcount:"repeatCount",repeatdur:"repeatDur",requiredextensions:"requiredExtensions",requiredfeatures:"requiredFeatures",restart:"restart",result:"result",rotate:"rotate",rx:"rx",ry:"ry",scale:"scale",seed:"seed",shaperendering:"shapeRendering",slope:"slope",spacing:"spacing",specularconstant:"specularConstant",specularexponent:"specularExponent",speed:"speed",spreadmethod:"spreadMethod",startoffset:"startOffset",stddeviation:"stdDeviation",stemh:"stemh",stemv:"stemv",stitchtiles:"stitchTiles",stopcolor:"stopColor",stopopacity:"stopOpacity",strikethroughposition:"strikethroughPosition",strikethroughthickness:"strikethroughThickness",string:"string",stroke:"stroke",strokedasharray:"strokeDasharray",strokedashoffset:"strokeDashoffset",strokelinecap:"strokeLinecap",strokelinejoin:"strokeLinejoin",strokemiterlimit:"strokeMiterlimit",strokeopacity:"strokeOpacity",strokewidth:"strokeWidth",surfacescale:"surfaceScale",systemlanguage:"systemLanguage",tablevalues:"tableValues",targetx:"targetX",targety:"targetY",textanchor:"textAnchor",textdecoration:"textDecoration",textlength:"textLength",textrendering:"textRendering",to:"to",transform:"transform",u1:"u1",u2:"u2",underlineposition:"underlinePosition",underlinethickness:"underlineThickness",unicode:"unicode",unicodebidi:"unicodeBidi",unicoderange:"unicodeRange",unitsperem:"unitsPerEm",valphabetic:"vAlphabetic",vhanging:"vHanging",videographic:"vIdeographic",vmathematical:"vMathematical",values:"values",vectoreffect:"vectorEffect",version:"version",vertadvy:"vertAdvY",vertoriginx:"vertOriginX",vertoriginy:"vertOriginY",viewbox:"viewBox",viewtarget:"viewTarget",visibility:"visibility",widths:"widths",wordspacing:"wordSpacing",writingmode:"writingMode",x:"x",x1:"x1",x2:"x2",xchannelselector:"xChannelSelector",xheight:"xHeight",xlinkactuate:"xlinkActuate",xlinkarcrole:"xlinkArcrole",xlinkhref:"xlinkHref",xlinkrole:"xlinkRole",xlinkshow:"xlinkShow",xlinktitle:"xlinkTitle",xlinktype:"xlinkType",xmlns:"xmlns",xmlnsxlink:"xmlnsXlink",xmlbase:"xmlBase",xmllang:"xmlLang",xmlspace:"xmlSpace",y:"y",y1:"y1",y2:"y2",ychannelselector:"yChannelSelector",z:"z",zoomandpan:"zoomAndPan",onabort:"onAbort",onanimationend:"onAnimationEnd",onanimationiteration:"onAnimationIteration",onanimationstart:"onAnimationStart",onblur:"onBlur",oncanplay:"onCanPlay",oncanplaythrough:"onCanPlayThrough",onchange:"onChange",onclick:"onClick",oncompositionend:"onCompositionEnd",oncompositionstart:"onCompositionStart",oncompositionupdate:"onCompositionUpdate",oncontextmenu:"onContextMenu",oncopy:"onCopy",oncut:"onCut",ondoubleclick:"onDoubleClick",ondrag:"onDrag",ondragend:"onDragEnd",ondragenter:"onDragEnter",ondragexit:"onDragExit",ondragleave:"onDragLeave",ondragover:"onDragOver",ondragstart:"onDragStart",ondrop:"onDrop",ondurationchange:"onDurationChange",onemptied:"onEmptied",onencrypted:"onEncrypted",onended:"onEnded",onerror:"onError",onfocus:"onFocus",oninput:"onInput",onkeydown:"onKeyDown",onkeypress:"onKeyPress",onkeyup:"onKeyUp",onload:"onLoad",onloadeddata:"onLoadedData",onloadedmetadata:"onLoadedMetadata",onloadstart:"onLoadStart",onmousedown:"onMouseDown",onmouseenter:"onMouseEnter",onmouseleave:"onMouseLeave",onmousemove:"onMouseMove",onmouseout:"onMouseOut",onmouseover:"onMouseOver",onmouseup:"onMouseUp",onpaste:"onPaste",onpause:"onPause",onplay:"onPlay",onplaying:"onPlaying",onprogress:"onProgress",onratechange:"onRateChange",onscroll:"onScroll",onseeked:"onSeeked",onseeking:"onSeeking",onselect:"onSelect",onstalled:"onStalled",onsubmit:"onSubmit",onsuspend:"onSuspend",ontimeupdate:"onTimeUpdate",ontouchcancel:"onTouchCancel",ontouchend:"onTouchEnd",ontouchmove:"onTouchMove",ontouchstart:"onTouchStart",ontransitionend:"onTransitionEnd",onvolumechange:"onVolumeChange",onwaiting:"onWaiting",onwheel:"onWheel"},i=/[-:]/g,o=function(t){if(/^(data-|aria-)/.test(t))return t;var e=t.replace(i,"").toLowerCase();return r[e]||t};t.exports=o,t.exports.convert=o},function(t,e){t.exports=function(t){return t.split(";").reduce((function(t,e){return"base64,"===e.slice(0,7)?t[t.length-1]+=";"+e:t.push(e),t}),[]).reduce((function(t,e){var n=e.split(":"),r=n[0].trim();if(r){var i=n.slice(1).join(":").trim();t[function(t){var e=function(t){for(var e="",n=!1,r=0;r<t.length;r++){var i=t[r];"-"!==i?(n&&(i=i.toUpperCase(),n=!1),e+=i):n=!0}return e}(t);return 0===t.indexOf("-ms-")&&(e=e[0].toLowerCase()+e.slice(1)),e}(r)]=i}return t}),{})}},function(t,e,n){var r=n(14),i=n(57),o=n(24),a=n(302),s="["+a+"]",c=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),l=function(t,e,n){var i={},s=o((function(){return!!a[t]()||"​"!="​"[t]()})),c=i[t]=s?e(h):a[t];n&&(i[n]=c),r(r.P+r.F*s,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=l},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e){Blockly.BlockSvg.MIN_BLOCK_X_WITH_STATEMENT=100*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.START_HAT_PATH="m 0,"+Blockly.BlockSvg.CORNER_RADIUS+" A "+Blockly.BlockSvg.CORNER_RADIUS+", "+Blockly.BlockSvg.CORNER_RADIUS+" 0 0,1 "+Blockly.BlockSvg.CORNER_RADIUS+",0",Blockly.BlockSvg.EXTRA_STATEMENT_ROW_Y=10*Blockly.BlockSvg.GRID_UNIT,Blockly.BlockSvg.EDITABLE_FIELD_PADDING=16,Blockly.BlockSvg.prototype.computeOutputPadding_=function(t){if(this.getOutputShape()&&this.outputConnection&&(!this.isShadow()||Blockly.scratchBlocksUtils.isShadowArgumentReporter(this))&&!(t.length>1)){var e=t[0],n=this.getOutputShape();e.paddingStart=0,e.paddingEnd=0;var r,i=e[0];if(i.fieldRow[0])r=0;else{var o=i.connection;if(!o)return;if(r=o.targetConnection?o.targetConnection.getSourceBlock().getOutputShape():o.getOutputShape(),n===Blockly.OUTPUT_SHAPE_HEXAGONAL&&r!==Blockly.OUTPUT_SHAPE_HEXAGONAL){var a=i.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;e.paddingStart+=a/2}}e.paddingStart+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[n][r];var s=e[e.length-1];if(s.connection){var c=s.connection;if(r=c.targetConnection?c.targetConnection.getSourceBlock().getOutputShape():c.getOutputShape(),n===Blockly.OUTPUT_SHAPE_HEXAGONAL&&r!==Blockly.OUTPUT_SHAPE_HEXAGONAL){var u=s.renderHeight-Blockly.BlockSvg.MIN_BLOCK_Y_REPORTER;e.paddingEnd+=u/2}}else r=0;e.paddingEnd+=Blockly.BlockSvg.SHAPE_IN_SHAPE_PADDING[n][r]}}},function(t,e){Blockly.Colours.RootBlock={colour:"#F2F3F5",colourSecondary:"#F2F3F5",colourTertiary:"#F2F3F5"},Blockly.Colours.Base={colour:"#507ED5",colourSecondary:"#4665A0",colourTertiary:"#4665A0"},Blockly.Colours.Special1={colour:"#D27954",colourSecondary:"#9E6248",colourTertiary:"#9E6248"},Blockly.Colours.Special2={colour:"#5DA5A3",colourSecondary:"#4F7F7E",colourTertiary:"#4F7F7E"},Blockly.Colours.Special3={colour:"#CB5555",colourSecondary:"#994949",colourTertiary:"#994949"}},function(t,e){Blockly.Connection.prototype.getOutputShape=function(){return Blockly.OUTPUT_SHAPE_ROUND}},function(t,e){Blockly.Css.CONTENT=[".blocklySvg {","outline: none;","overflow: hidden;","position: absolute;","display: block;","}",".blocklyRelativeWrapper {","position: relative;","width: 100%;","height: 100%;","}",".blocklyWidgetDiv {","display: none;","position: absolute;","z-index: 99999;","}",".injectionDiv {","height: 100%;","position: relative;","overflow: hidden;","touch-action: none","}",".blocklyNonSelectable {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","-ms-user-select: none;","}",".blocklyWidgetDiv.fieldTextInput {","overflow: hidden;","border: 1px solid;","box-sizing: border-box;","transform-origin: 0 0;","-ms-transform-origin: 0 0;","-moz-transform-origin: 0 0;","-webkit-transform-origin: 0 0;","}",".blocklyWidgetDiv.fieldTextInput.removableTextInput {","overflow: visible;","}",".blocklyTextDropDownArrow {","position: absolute;","}",".blocklyTextRemoveIcon {","position: absolute;","width: 24px;","height: 24px;","top: -40px;","left: 50%;","margin-left: -12px;","cursor: pointer;","}",".blocklyNonSelectable {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","-ms-user-select: none;","}",".blocklyWsDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","}",".blocklyWsDragSurface.blocklyOverflowVisible {","overflow: visible;","}",".blocklyBlockDragSurface {","display: none;","position: absolute;","top: 0;","left: 0;","right: 0;","bottom: 0;","overflow: visible !important;","z-index: 50;","}",".blocklyTooltipDiv {","background-color: #ffffc7;","border: 1px solid #ddc;","box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);","color: #000;","display: none;","font-size: 9pt;","opacity: 0.9;","padding: 2px;","position: absolute;","z-index: 100000;","}",".blocklyDropDownDiv {","position: fixed;","left: 0;","top: 0;","z-index: 1000;","display: none;","border: 1px solid;","border-radius: 4px;","box-shadow: 0px 0px 8px 1px "+Blockly.Colours.dropDownShadow+";","padding: 4px;","-webkit-user-select: none;","min-height: 15px","}",".blocklyDropDownContent {","max-height: 300px;","overflow: auto;","}",".blocklyDropDownArrow {","position: absolute;","left: 0;","top: 0;","width: 16px;","height: 16px;","z-index: -1;","background-color: inherit;","border-color: inherit;","}",".blocklyDropDownButton {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","border-radius: 4px;","outline: none;","border: 1px solid;","transition: box-shadow .1s;","cursor: pointer;","}",".blocklyDropDownButtonHover {","box-shadow: 0px 0px 0px 4px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton:active {","box-shadow: 0px 0px 0px 6px "+Blockly.Colours.fieldShadow+";","}",".blocklyDropDownButton > img {","width: 80%;","height: 80%;","margin-top: 5%","}",".blocklyDropDownPlaceholder {","display: inline-block;","float: left;","padding: 0;","margin: 4px;","}",".blocklyNumPadButton {","display: inline-block;","float: left;","padding: 0;","width: 48px;","height: 48px;","margin: 4px;","border-radius: 4px;","background: $colour_numPadBackground;","color: $colour_numPadText;","outline: none;","border: 1px solid $colour_numPadBorder;","cursor: pointer;","font-weight: 600;","font-size: 12pt;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".blocklyNumPadButton > img {","margin-top: 10%;","width: 80%;","height: 80%;","}",".blocklyNumPadButton:active {","background: $colour_numPadActiveBackground;","-webkit-tap-highlight-color: rgba(0,0,0,0);","}",".arrowTop {","border-top: 1px solid;","border-left: 1px solid;","border-top-left-radius: 4px;","border-color: inherit;","}",".arrowBottom {","border-bottom: 1px solid;","border-right: 1px solid;","border-bottom-right-radius: 4px;","border-color: inherit;","}",".valueReportBox {","min-width: 50px;","max-width: 300px;","max-height: 200px;","overflow: auto;","word-wrap: break-word;","text-align: center;","font-size: .8em;","}",".blocklyResizeSE {","cursor: se-resize;","fill: #aaa;","}",".blocklyResizeSW {","cursor: sw-resize;","fill: #aaa;","}",".blocklyResizeLine {","stroke: #888;","stroke-width: 1;","}",".blocklyHighlightedConnectionPath {","fill: none;","stroke: #fc3;","stroke-width: 4px;","}",".blocklyPath {","stroke-width: 1px;","}",".blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",".blocklySelected>.blocklyPathLight {","display: none;","}",".blocklyDraggable {",'cursor: url("<<<PATH>>>/handopen.cur"), auto;',"cursor: grab;","cursor: -webkit-grab;","cursor: -moz-grab;","}",".blocklyDragging {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyDraggable:active {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyBlockDragSurface .blocklyDraggable {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","cursor: -moz-grabbing;","}",".blocklyDragging.blocklyDraggingDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyDragging.blocklyDraggingMouseThrough {","pointer-events: none;","}",".blocklyToolboxDelete {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyToolboxGrab {",'cursor: url("<<<PATH>>>/handclosed.cur"), auto;',"cursor: grabbing;","cursor: -webkit-grabbing;","}",".blocklyDragging>.blocklyPath,",".blocklyDragging>.blocklyPathLight {","fill-opacity: 1.0;","stroke-opacity: 1.0;","}",".blocklyDragging>.blocklyPath {","}",".blocklyDisabled>.blocklyPath {","fill-opacity: .5;","stroke-opacity: .5;","}",".blocklyInsertionMarker>.blocklyPath {","stroke: none;","}",".blocklyText {","fill: #fff;","font-family: inherit;","font-size: 12pt;","}",".blocklyTextTruncated {","font-size: 11pt;","}",".blocklyNonEditableText>text {","pointer-events: none;","}",".blocklyNonEditableText>text,",".blocklyEditableText>text {","}",".blocklyEditableText>.blocklyEditableLabel {","fill: #fff;","}",".blocklyDropdownText {","fill: #fff !important;","}",".blocklyBubbleText {","fill: $colour_text;","}",".blocklyFlyout {","position: absolute;","z-index: 20;","}",".blocklyFlyoutButton {","fill: none;","pointer-events: all;","}",".blocklyFlyoutButtonBackground {","stroke: #c6c6c6;","}",".blocklyFlyoutButton .blocklyText {","fill: $colour_text;","}",".blocklyFlyoutButtonShadow {","fill: transparent;","}",".blocklyFlyoutButton:hover {","fill: white;","cursor: pointer;","}",".blocklyFlyoutLabel {","cursor: default;","}",".blocklyFlyoutLabelBackground {","opacity: 0;","}",".blocklyFlyoutLabelText {","font-size: 14pt;","fill: #575E75;","font-weight: bold;","}",".blocklySvg text, .blocklyBlockDragSurface text, .blocklyFlyout text, .blocklyToolboxDiv text {","user-select: none;","-moz-user-select: none;","-webkit-user-select: none;","cursor: inherit;","}",".blocklyHidden {","display: none;","}",".blocklyFieldDropdown:not(.blocklyHidden) {","display: block;","}",".blocklyIconGroup {","cursor: default;","}",".blocklyIconGroup:not(:hover),",".blocklyIconGroupReadonly {","opacity: .6;","}",".blocklyIconShape {","fill: #00f;","stroke: #fff;","stroke-width: 1px;","}",".blocklyIconSymbol {","fill: #fff;","}",".blocklyMinimalBody {","margin: 0;","padding: 0;","}",".blocklyCommentForeignObject {","position: relative;","z-index: 0;","}",".blocklyCommentRect {","fill: #E7DE8E;","stroke: #bcA903;","stroke-width: 1px","}",".blocklyCommentTarget {","fill: transparent;","stroke: #bcA903;","}",".blocklyCommentTargetFocused {","fill: none;","}",".blocklyCommentHandleTarget {","fill: none;","}",".blocklyCommentHandleTargetFocused {","fill: transparent;","}",".blocklyFocused>.blocklyCommentRect {","fill: #B9B272;","stroke: #B9B272;","}",".blocklySelected>.blocklyCommentTarget {","stroke: #fc3;","stroke-width: 3px;","}",".blocklyCommentTextarea {","background-color: #fef49c;","border: 0;","outline: 0;","margin: 0;","padding: 3px;","resize: none;","display: block;","overflow: hidden;","}",".blocklyCommentDeleteIcon {","cursor: pointer;","fill: #000;","display: none","}",".blocklySelected > .blocklyCommentDeleteIcon {","display: block","}",".blocklyDeleteIconShape {","fill: #000;","stroke: #000;","stroke-width: 1px;","}",".blocklyDeleteIconShape.blocklyDeleteIconHighlighted {","stroke: #fc3;","}",".scratchCommentForeignObject {","position: relative;","}",".scratchCommentBody {","background-color: #fef49c;","border-radius: 4px;","}",".scratchCommentRect {","fill: #fef49c;","}",".scratchCommentTarget {","fill: transparent;","}",".scratchWorkspaceCommentBorder {","stroke: #bcA903;","stroke-width: 1px;","}",".scratchCommentTargetFocused {","fill: none;","}",".scratchCommentTopBar {","fill: #000000;","fill-opacity: 0.1","}",".scratchCommentText {","font-size: 12pt;","font-weight: 400;","}",".scratchCommentTextarea {","background-color: #fef49c;","border: 0;","outline: 0;","padding: 0;","resize: none;","overflow: hidden;","}",".scratchCommentResizeSE {","cursor: se-resize;","fill: transparent;","}",".scratchCommentResizeSW {","cursor: sw-resize;","fill: transparent;","}",".blocklyHtmlInput {","border: none;","font-size: 12pt;","height: 100%;","margin: 0;","outline: none;","box-sizing: border-box;","width: 100%;","text-align: center;","color: $colour_text;","font-weight: 500;","}",".blocklyMainBackground {","stroke-width: 0;","}",".blocklyMutatorBackground {","fill: #fff;","stroke: #ddd;","stroke-width: 1;","}",".blocklyFlyoutBackground {","fill: $colour_flyout;","fill-opacity: .8;","}",".blocklyMainWorkspaceScrollbar {","z-index: 20;","}",".blocklyFlyoutScrollbar {","z-index: 30;","}",".blocklyScrollbarHorizontal, .blocklyScrollbarVertical {","position: absolute;","outline: none;","}",".blocklyScrollbarBackground {","opacity: 0;","}",".blocklyScrollbarHandle {","fill: $colour_scrollbar;","}",".blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyScrollbarHandle:hover {","fill: $colour_scrollbarHover;","}",".blocklyZoom>image {","opacity: 1;","}",".blocklyFlyout .blocklyScrollbarHandle {","fill: #bbb;","}",".blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,",".blocklyFlyout .blocklyScrollbarHandle:hover {","fill: #aaa;","}",".blocklyInvalidInput {","background: #faa;","}",".blocklyAngleCircle {","stroke: "+Blockly.Colours.motion.tertiary+";","stroke-width: 1;","fill: "+Blockly.Colours.motion.secondary+";","}",".blocklyAngleCenterPoint {","stroke: #fff;","stroke-width: 1;","fill: #fff;","}",".blocklyAngleDragHandle {","stroke: #fff;","stroke-width: 5;","stroke-opacity: 0.25;","fill: #fff;","cursor: pointer;","}",".blocklyAngleDragArrow {","pointer-events: none","}",".blocklyAngleMarks {","stroke: #fff;","stroke-width: 1;","stroke-opacity: 0.5;","}",".blocklyAngleGauge {","fill: #fff;","fill-opacity: 0.20;","}",".blocklyAngleLine {","stroke: #fff;","stroke-width: 1;","stroke-linecap: round;","pointer-events: none;","}",".blocklyContextMenu {","border-radius: 4px;","max-height: 100%;","}",".blocklyDropdownMenu {","padding: 0 !important;","}",".blocklyDropDownNumPad {","background-color: $colour_numPadBackground;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","}",".blocklyToolboxDiv {","background-color: $colour_toolbox;","color: $colour_toolboxText;","overflow-x: visible;","overflow-y: auto;","position: absolute;","z-index: 40;","-webkit-tap-highlight-color: transparent;","}",".blocklyTreeRoot {","padding: 4px 0;","}",".blocklyTreeRoot:focus {","outline: none;","}",".blocklyTreeRow {","height: 22px;","line-height: 22px;","margin-bottom: 3px;","padding-right: 8px;","white-space: nowrap;","}",".blocklyHorizontalTree {","float: left;","margin: 1px 5px 8px 0;","}",".blocklyHorizontalTreeRtl {","float: right;","margin: 1px 0 8px 5px;","}",'.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {',"margin-left: 8px;","}",".blocklyTreeRow:not(.blocklyTreeSelected):hover {","background-color: #e4e4e4;","}",".blocklyTreeSeparator {","border-bottom: solid #e5e5e5 1px;","height: 0;","margin: 5px 0;","}",".blocklyTreeSeparatorHorizontal {","border-right: solid #e5e5e5 1px;","width: 0;","padding: 5px 0;","margin: 0 5px;","}",".blocklyTreeIcon {","background-image: url(<<<PATH>>>/sprites.png);","height: 16px;","vertical-align: middle;","width: 16px;","}",".blocklyTreeIconClosedLtr {","background-position: -32px -1px;","}",".blocklyTreeIconClosedRtl {","background-position: 0px -1px;","}",".blocklyTreeIconOpen {","background-position: -16px -1px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedLtr {","background-position: -32px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconClosedRtl {","background-position: 0px -17px;","}",".blocklyTreeSelected>.blocklyTreeIconOpen {","background-position: -16px -17px;","}",".blocklyTreeIconNone,",".blocklyTreeSelected>.blocklyTreeIconNone {","background-position: -48px -1px;","}",".blocklyTreeLabel {","cursor: default;","font-size: 16px;","padding: 0 3px;","vertical-align: middle;","}",".blocklyToolboxDelete .blocklyTreeLabel {",'cursor: url("<<<PATH>>>/handdelete.cur"), auto;',"}",".blocklyTreeSelected .blocklyTreeLabel {","color: #fff;","}",".blocklyDropDownDiv .goog-slider-horizontal {","margin: 8px;","height: 22px;","width: 150px;","position: relative;","outline: none;","border-radius: 11px;","margin-bottom: 20px;","}",".blocklyDropDownDiv .goog-slider-horizontal .goog-slider-thumb {","width: 26px;","height: 26px;","top: -1px;","position: absolute;","background-color: white;","border-radius: 100%;","-webkit-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","-moz-box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","box-shadow: 0 0 0 4px rgba(0, 0, 0, 0.15);","}",".scratchEyedropper {","background: none;","outline: none;","border: none;","width: 100%;","text-align: center;","border-top: 1px solid #ddd;","padding-top: 5px;","cursor: pointer;","}",".scratchColourPickerLabel {","font-size: 0.65rem;","color: $colour_toolboxText;","margin: 8px;","}",".scratchColourPickerLabelText {","font-weight: bold;","}",".scratchColourPickerReadout {","margin-left: 10px;","}",".scratchMatrixButtonDiv {","width: 50%;","text-align: center;","float: left;","}",".scratchNotePickerKeyLabel {","font-size: 0.75rem;","fill: $colour_text;","pointer-events: none;","}",".blocklyWidgetDiv .goog-menu {","background: #fff;","border-color: #ccc #666 #666 #ccc;","border-style: solid;","border-width: 1px;","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"margin: 0;","outline: none;","padding: 4px 0;","position: absolute;","overflow-y: auto;","overflow-x: hidden;","z-index: 20000;","}",".blocklyDropDownDiv .goog-menu {","cursor: default;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"outline: none;","z-index: 20000;","}",".blocklyWidgetDiv .goog-menuitem {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"list-style: none;","margin: 0;","padding: 4px 7em 4px 28px;","white-space: nowrap;","}",".blocklyDropDownDiv .goog-menuitem {","color: #fff;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"font-weight: bold;","list-style: none;","margin: 0;","min-height: 24px;","padding: 4px 7em 4px 28px;","white-space: nowrap;","}",".blocklyWidgetDiv .goog-menuitem.goog-menuitem-rtl, ",".blocklyDropDownDiv .goog-menuitem.goog-menuitem-rtl {","padding-left: 7em;","padding-right: 28px;","}",".blocklyWidgetDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyWidgetDiv .goog-menu-noicon .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-nocheckbox .goog-menuitem,",".blocklyDropDownDiv .goog-menu-noicon .goog-menuitem { ","padding-left: 12px;","}",".blocklyWidgetDiv .goog-menu-noaccel .goog-menuitem, ",".blocklyDropDownDiv .goog-menu-noaccel .goog-menuitem {","padding-right: 20px;","}",".blocklyWidgetDiv .goog-menuitem-content ",".blocklyDropDownDiv .goog-menuitem-content {","color: #000;",'font: normal 13px "Helvetica Neue", Helvetica, sans-serif;',"}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-content, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-accel,",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-content {","color: #ccc !important;","}",".blocklyWidgetDiv .goog-menuitem-disabled .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-disabled .goog-menuitem-icon {","opacity: 0.3;","-moz-opacity: 0.3;","filter: alpha(opacity=30);","}",".blocklyWidgetDiv .goog-menuitem-highlight,",".blocklyWidgetDiv .goog-menuitem-hover {","background-color: #d6e9f8;","border-color: #d6e9f8;","border-style: dotted;","border-width: 1px 0;","padding-bottom: 3px;","padding-top: 3px;","}",".blocklyDropDownDiv .goog-menuitem-highlight,",".blocklyDropDownDiv .goog-menuitem-hover {","background-color: rgba(0, 0, 0, 0.2);","}",".blocklyWidgetDiv .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-icon, ",".blocklyDropDownDiv .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-icon {","background-repeat: no-repeat;","height: 16px;","left: 6px;","position: absolute;","right: auto;","vertical-align: middle;","width: 16px;","}",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-option-selected .goog-menuitem-icon,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-option-selected .goog-menuitem-icon {","background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px !important;","position: static;","float: left;","margin-left: -24px;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-icon,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-checkbox,",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-icon {","float: right;","margin-right: -24px;","}",".blocklyWidgetDiv .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-accel {","color: #999;","direction: ltr;","left: auto;","padding: 0 6px;","position: absolute;","right: 0;","text-align: right;","}",".blocklyWidgetDiv .goog-menuitem-rtl .goog-menuitem-accel, ",".blocklyDropDownDiv .goog-menuitem-rtl .goog-menuitem-accel {","left: 0;","right: auto;","text-align: left;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-hint, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-hint {","text-decoration: underline;","}",".blocklyWidgetDiv .goog-menuitem-mnemonic-separator, ",".blocklyDropDownDiv .goog-menuitem-mnemonic-separator {","color: #999;","font-size: 12px;","padding-left: 4px;","}",".blocklyWidgetDiv .goog-menuseparator, ",".blocklyDropDownDiv .goog-menuseparator {","border-top: 1px solid #ccc;","margin: 4px 0;","padding: 0;","}",".blocklyFlyoutCheckbox {","fill: white;","stroke: #c8c8c8;","}",".blocklyFlyoutCheckbox.checked {","fill: "+Blockly.Colours.motion.primary+";","stroke: "+Blockly.Colours.motion.tertiary+";","}",".blocklyFlyoutCheckboxPath {","stroke: white;","stroke-width: 3;","stroke-linecap: round;","stroke-linejoin: round;","}",".scratchCategoryMenu {","width: 60px;","background: $colour_toolbox;","color: $colour_toolboxText;","font-size: .7rem;","user-select: none;","-webkit-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","}",".scratchCategoryMenuHorizontal {","width: 100%;","height: 50px;","background: $colour_toolbox;","color: $colour_toolboxText;","font-size: .7em;","user-select: none;","-webkit-user-select: none;","-moz-user-select: none;","-ms-user-select: none;","}",".scratchCategoryMenuHorizontal .scratchCategoryMenuRow {","float: left;","margin: 3px;","}",".scratchCategoryMenuRow {","}",".scratchCategoryMenuItem {","padding: 0.375rem 0px;","cursor: pointer;","text-align: center;","}",".scratchCategoryMenuHorizontal .scratchCategoryMenuItem {","padding: 6px 5px;","}",".scratchCategoryMenuItem.categorySelected {","background: $colour_toolboxSelected;","}",".scratchCategoryItemBubble {","width: 1.25rem;","height: 1.25rem;","border: 1px solid;","border-radius: 100%;","margin: 0 auto 0.125rem;","}",".scratchCategoryItemIcon {","width: 1.25rem;","height: 1.25rem;","margin: 0 auto 0.125rem;","background-size: 100%;","}",".scratchCategoryMenuItem:hover {","color: $colour_toolboxHover !important;","}",""]},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e){Blockly.Flyout.prototype.createBlock=function(t,e){Blockly.Events.disable();var n=this.targetWorkspace_.getAllVariables();this.targetWorkspace_.setResizesEnabled(!1);var r=null;try{r=this.placeNewBlock_(t,e),Blockly.hideChaff()}finally{Blockly.Events.enable()}var i=Blockly.Variables.getAddedVariables(this.targetWorkspace_,n);if(Blockly.Events.isEnabled()){Blockly.Events.setGroup(!0),Blockly.Events.fire(new Blockly.Events.Create(r));for(var o=0;o<i.length;o++){var a=i[o];Blockly.Events.fire(new Blockly.Events.VarCreate(a))}}return this.autoClose&&this.hide(),Blockly.derivWorkspace.toolbox_.clearSelection(),r.isInFlyout=!1,r},Blockly.Flyout.prototype.placeNewBlock_=function(t,e){var n=this.targetWorkspace_;if(!e.getSvgRoot())throw new Error("oldBlock is not rendered.");var r=Blockly.Xml.blockToDom(e);n.setResizesEnabled(!1);var i=Blockly.Xml.domToBlock(r,n);if(!i.getSvgRoot())throw new Error("block is not rendered.");var o=n.getOriginOffsetInPixels(),a=new goog.math.Coordinate(t.clientX,t.clientY-56-48),s=goog.math.Coordinate.difference(a,o).scale(1/n.scale);return i.moveBy(s.x,s.y),i}},function(t,e){Blockly.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return!(this.targetBlock_.disabled||this.flyout_.isScrollable()&&!this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_)||(this.startWorkspace_=this.flyout_.targetWorkspace_,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Blockly.Events.getGroup()||Blockly.Events.setGroup(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.mostRecentEvent_,this.targetBlock_),this.targetBlock_.select(),0))}},function(t,e){Blockly.Icon.prototype.renderIcon=function(t){if(this.collapseHidden&&this.block_.isCollapsed())return this.iconGroup_.setAttribute("display","none"),t;this.iconGroup_.setAttribute("display","block");var e=t,n=this.SIZE;return this.block_.RTL&&(e-=n),this.iconGroup_.setAttribute("transform","localize("+e+",9)"),this.computeIconLocation(),this.block_.RTL?e-=Blockly.BlockSvg.SEP_SPACE_X:e+=n+Blockly.BlockSvg.SEP_SPACE_X,e}},function(t,e,n){var r=n(70),i=n(87),o=n(19),a=n(16).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(16),i=n(37),o=n(63),a=n(183),s=n(26).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},function(t,e,n){var r=n(52),i=n(87),o=n(69);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,s=n(t),c=o.f,u=0;s.length>u;)c.call(t,a=s[u++])&&e.push(a);return e}},function(t,e,n){var r=n(45),i=n(70).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?function(t){try{return i(t)}catch(t){return a.slice()}}(t):i(r(t))}},function(t,e){Blockly.Trashcan.prototype.MARGIN_BOTTOM_=76,Blockly.Trashcan.prototype.MARGIN_SIDE_=40,Blockly.Trashcan.prototype.click=function(){}},function(t,e){Blockly.VariableMap.prototype.createVariable=function(t,e,n,r,i){var o=this.getVariable(t,e);if(o)return o;if(n&&(o=this.getVariableById(n)))return o;var a=n||Blockly.utils.genUid(),s=e||"";return o=new Blockly.VariableModel(this.workspace,t,s,a,r,i),this.variableMap_[s]?this.variableMap_[s].push(o):this.variableMap_[s]=[o],o}},function(t,e){Blockly.WorkspaceAudio.prototype.preload=function(){}},function(t,e){Blockly.Xml.NODE_BLOCK="BLOCK",Blockly.Xml.NODE_BUTTON="BUTTON",Blockly.Xml.NODE_LABEL="LABEL",Blockly.Xml.NODE_SHADOW="SHADOW"},function(t,e){Blockly.FieldTextInput.prototype.init=function(){if(!this.fieldGroup_){var t=!this.sourceBlock_.isShadow();t&&(this.className_+=" blocklyEditableLabel"),Blockly.FieldTextInput.superClass_.init.call(this),t&&(this.box_=Blockly.utils.createSvgElement("rect",{rx:4*Blockly.BlockSvg.CORNER_RADIUS,ry:4*Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,fill:this.sourceBlock_.getColourTertiary()}),this.fieldGroup_.insertBefore(this.box_,this.textElement_))}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.length===e.length&&!t.some((function(t,n){return t!==e[n]}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.max.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.min.apply(Math,function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&(0===t.length?void 0:t[t.length-1])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(t){return t},i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=function(t,e){var i=n(t),o=r(e);return i>o?1:i<o?-1:0},a=t.slice(0),s=e.slice(0),c=[];a.length>0||s.length>0;){var u=a[0],l=s[0];if(!u){c=c.concat(s);break}if(!l){c=c.concat(a);break}var h=c.length>0&&c[c.length-1],p=void 0;switch(o(u,l)){case 0:i&&s.shift(),p=a.shift();break;case 1:p=s.shift();break;case-1:p=a.shift()}if(i&&h&&n(h)===r(p))break;c.push(p)}return c}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Array.from(Array(t).keys())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.reduce((function(t,n){var r=n[e],i=t.findIndex((function(t){return t.some((function(t){return t[e]===r}))}));return i>-1?t[i].push(n):t.push([n]),t}),[])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(133))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t,e,"barrier2")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(133))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t,e,"barrier")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(185))&&r.__esModule?r:{default:r};e.default=function(t,e){return t.barrier?(0,i.default)(t,e):+t.entry_spot||e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(95))&&r.__esModule?r:{default:r},o=function(t,e){var n=Object.keys(t),r={};return n.forEach((function(n){var i=t[n].find((function(t){return!!t.barrier}));i&&(r[n]=[{name:e,defaultValue:i.barrier}])})),r};e.default=function(t,e){var n,r,a,s=(0,i.default)(t,"expiry_type");switch(e){case"CALL":return o(s,"Higher than");case"PUT":return o(s,"Lower than");case"ONETOUCH":case"NOTOUCH":return o(s,"Touch spot");case"EXPIRYMISS":case"EXPIRYRANGE":case"RANGE":case"UPORDOWN":return n=s,r=Object.keys(n),a={},r.forEach((function(t){var e=n[t];a[t]=[{name:"High barrier",defaultValue:e[0].high_barrier},{name:"Low barrier",defaultValue:e[0].low_barrier}]})),a;case"DIGITMATCH":case"DIGITDIFF":case"DIGITOVER":case"DIGITUNDER":return function(t){var e=Object.keys(t),n={};return e.forEach((function(e){var r=t[e];n[e]=[{name:"Digit",values:r[0].last_digit_range,defaultValue:r[0].last_digit_range[0]}]})),n}(s);case"DIGITODD":case"DIGITEVEN":case"ASIANU":case"ASIAND":case"SPREADU":case"SPREADD":default:return}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(134))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t.barrier2,t.entry_spot,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.floor(t.getTime()/1e3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.toISOString().replace(/T/," ").replace(/\..+/,"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.toISOString().slice(11,19)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(96)),i=o(n(75));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,i.default)((0,r.default)(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(96))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(t).toUTCString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(186))&&r.__esModule?r:{default:r};e.default=function(t){return(0,i.default)(new Date(1e3*t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(96))&&r.__esModule?r:{default:r};e.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return(0,i.default)(t).toISOString().slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date(1e3*t).toISOString().slice(11,19)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new Date;return e.setMonth(e.getMonth()-t),Math.floor(e.getTime()/1e3)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return!isNaN(t.getTime())}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(76))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(-29)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(76))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(-6)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=new Date;return e.setDate(e.getDate()+t),e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(75))&&r.__esModule?r:{default:r};e.default=function(){var t=new Date;return t.setFullYear((new Date).getFullYear()+1),(0,i.default)(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=Math.floor(t/60/60/24),n=Math.floor(t%86400/3600),r=Math.floor(t%3600/60),i=Math.floor(t%60);return(e>0?e+" day(s)":"")+(n>0?n+" hour(s)":"")+(r>0?r+" minute(s)":"")+(i>0?i+" second(s)":"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(137)),i=o(n(188));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n){return(0,r.default)(e,t)?(0,r.default)(n,t)&&(0,i.default)(n,e):!((0,r.default)(n,e)&&(0,i.default)(n,t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.split(":");if(2!==e.length)throw new Error("Time string format incorrect, expecting HH:mm, actual: "+t);return 3600*+e[0]+60*+e[1]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(76))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(0)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(75))&&r.__esModule?r:{default:r};e.default=function(){return(0,i.default)(new Date)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return(new Date).toISOString().slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return new Date((new Date).setMonth((new Date).getMonth()+t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(75)),i=o(n(138));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(){return(0,r.default)(new Date(1e3*(0,i.default)()))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(138))&&r.__esModule?r:{default:r};e.default=function(){return new Date(1e3*(0,i.default)()).toISOString().slice(0,10)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.split(e).map((function(t){switch(t.length){case 0:return"01";case 1:return"0"+("0"===t?"1":t);default:return t}})).join(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.split(e).map((function(t){switch(t.length){case 0:return"00";case 1:return"0"+t;default:return t}})).join(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.split(":");return!(e.length<2||e.length>3)&&-1===e.map((function(t,e){switch(e){case 0:return parseInt(t,0)<24;case 1:default:return parseInt(t,0)<=59}})).indexOf(!1)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(136))&&r.__esModule?r:{default:r};e.default=function(t,e){return e-((0,i.default)()-t)%e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{t:"Ticks",s:"Seconds",m:"Minutes",h:"Hours",d:"Days"}[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(139))&&r.__esModule?r:{default:r};e.default=function(t,e){var n=t.filter((function(t){return t.contract_type===e})).filter((function(t){return!t.forward_starting_options}));if(0!==n.length)return(0,i.default)(n,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=s(n(184)),o=s(n(95)),a=s(n(139));function s(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){var n=t.filter((function(t){return!!t.forward_starting_options&&t.contract_type===e}));if(0!==n.length){var s=n[0].forward_starting_options,c=(0,o.default)(s||[],"date"),u=[];Object.keys(c).sort((function(t,e){return+t-+e})).forEach((function(t){var e=c[t].map((function(t){return{open:new Date(1e3*t.open),close:new Date(1e3*t.close)}})),n=(0,i.default)(e);u.push(r({date:new Date(1e3*t)},n))}));var l=(0,a.default)(n,e);return{range:u,options:l}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(192)),i=o(n(97));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,r.default)(e)||(0,i.default)(t,e)<120}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n){var r=n.find((function(t){return t.unit===e}));return!!r&&t<=r.max&&t>=r.min}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(193))&&r.__esModule?r:{default:r};e.default=function(t,e){return t.reduce((function(t,n){return t[(0,i.default)(n.quote,e)]++,t}),[0,0,0,0,0,0,0,0,0,0]).map((function(e){return t.length&&e/t.length*100}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.pow(10,-t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){var e=t.toString();return e.includes(".")?e.split(".")[1].length:0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t>0?"+"+t:t.toString()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return isNaN(t)?"0.01":"0."+Array(t).join("0")+1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return Math.abs(Math.log10(t))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(+t).toFixed(2)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return Object.keys(t).reduce((function(n,r){return e(t[r])&&(n[r]=t[r]),n}),{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function t(e,n){if("object"!==(void 0===e?"undefined":r(e))||null==e)return!1;var i=Object.keys(e).map((function(t){return e[t]}));return i.map((function(t,e){return n(t,e)})).indexOf(!0)>-1||i.map((function(e){return t(e,n)})).indexOf(!0)>-1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=e.toPlainJS=function(t){return t&&(void 0===t.toJS?t:t.toJS())};e.default=function(t){return t&&Object.keys(t).reduce((function(e,n){return e[n]=r(t[n]),e}),{})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.length===e.length&&t.every((function(t,n){return t===e[n]}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){var n=t.length,r=e.length;if(n!==r)return!1;if(0===n)return!0;var i=t[n-1],o=e[r-1];return i.epoch===o.epoch&&i.close===o.close}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){return t.length===e.length&&(0===t.length||t[t.length-1].epoch===e[e.length-1].epoch)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(194)),i=o(n(140));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,i.default)(t,e,r.default)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(195)),i=o(n(140));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,i.default)(t,e,r.default)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&(0===t.length?void 0:+t[t.length-1].close)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&t.length>0?t[t.length-1].quote:void 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.times.map((function(e,n){return{epoch:+e,quote:+t.prices[n]}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return[1e3*+(t.open_time||t.epoch),+t.open,+t.high,+t.low,+t.close]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.map((function(t){return{quote:+t.open,epoch:+t.epoch}}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return[1e3*+t.epoch,+t.quote]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t&&+t.ask_price}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(136))&&r.__esModule?r:{default:r};e.default=function(t){var e=(0,i.default)();if(t.tick_count)return{start:+t.date_start-5,end:+t.exit_tick_time+5||e};var n=+t.date_start,r=+t.exit_tick_time||+t.date_expiry;if(r<=n){var o=new RangeError("Contract ends time is earlier than start time");throw o.name="ContractEndsBeforeStart",o}var a=.05*(r-n),s=a?n-a:n,c=r?r+a:e;return{end:Math.round(c),start:Math.round(s)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{callput:"Up/Down",risefall:"Rise/Fall",higherlower:"Higher/Lower",asian:"Asians",digits:"Digits",endsinout:"Ends In/Out",staysinout:"Stays In/Out",touchnotouch:"Touch/No Touch",spreads:"Spreads"}[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{contract_id:"Contract ID",purchase_time:"Purchase Time",ask_price:"Ask Price",bid_price:"Bid Price",date_start:"Start Time",date_expiry:"Expiry Time",date_settlement:"Settlement Time",expiry_time:"Expiry Time",current_spot:"Current Spot",current_spot_time:"Current Spot Time",entry_spot:"Entry Spot",entry_tick_time:"Entry Spot Time",sell_price:"Sell Price",payout:"Potential Payout",buy_price:"Purchase Price",barrier:"Barrier",low_barrier:"Low Barrier",high_barrier:"High Barrier",sell_time:"Sell Time",exit_tick_time:"Exit Spot Time",exit_tick:"Exit Spot",sell_spot_time:"DO NOT USE",entry_tick:"DO NOT USE",sell_spot:"DO NOT USE"}[t]}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return{amountPerPoint:t[0].amount_per_point,stopType:t[0].stop_type,stopLoss:t[0].stop_loss,stopProfit:t[0].stop_profit}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(97))&&r.__esModule?r:{default:r};e.default=function(t,e){return(0,i.default)(t,e)<86400}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(95))&&r.__esModule?r:{default:r};e.default=function(t){var e=t.map((function(t){return{amount_per_point:t.amount_per_point,barrier:t.barrier,barriers:t.barriers,contract_category:t.contract_category,contract_category_display:t.contract_category_display,contract_display:t.contract_display,contract_type:t.contract_type,expiry_type:t.expiry_type,forward_starting_options:t.forward_starting_options,high_barrier:t.high_barrier,last_digit_range:t.last_digit_range,low_barrier:t.low_barrier,min_contract_duration:t.min_contract_duration,max_contract_duration:t.max_contract_duration,stop_type:t.stop_type,stop_loss:t.stop_loss,stop_profit:t.stop_profit}})),n=(0,i.default)(e,"contract_category");return Object.keys(n).forEach((function(t){var e=n[t],r=(0,i.default)(e,"contract_type");n[t]=r})),n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(196)),i=o(n(197));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,r.default)(t)+((0,i.default)(t)?" "+e:"")}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(98))&&r.__esModule?r:{default:r};e.default=function(t){var e=i.default.find((function(e){return e.text===t}));if(!e)throw new Error("Unknown trade type text");return e.value}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){},i=function(t){return t||"undefined"!=typeof window&&window.ga||r};e.trackUserId=function(t,e){return i(e)("set","userId",t)},e.trackRoute=function(t,e){return i(e)("send","pageview",t)},e.trackEvent=function(t,e,n,r){return i(r)("send",{hitType:"event",eventCategory:t,eventAction:e,eventLabel:n})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return"rgba(42, 48, 82, "+t+")"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return(t<0?"number-negative":t>0&&"number-positive")||""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return t.split(")").length>1?t.split(")")[1]:t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=0;e.default=function(){return r++}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){return"undefined"!=typeof window&&(e=!1,t=navigator.userAgent||navigator.vendor||window.opera,(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0),e||!!window.cordova);var t,e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return/\S+@\S+\.\S+/.test(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return/^[ -~]{6,25}$/.test(t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){document.addEventListener("fullscreenchange",(function(){return t(document.fullscreen)})),document.addEventListener("webkitfullscreenchange",(function(){return t(document.webkitIsFullScreen)})),document.addEventListener("mozfullscreenchange",(function(){return t(document.mozFullScreen)})),document.addEventListener("MSFullscreenChange",(function(){return t(document.msFullscreenElement)}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){document.removeEventListener("fullscreenchange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),document.removeEventListener("MSFullscreenChange",t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof alert?alert:function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof alert?alert:function(){}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){"undefined"!=typeof window&&setTimeout((function(){return window.dispatchEvent(new Event("resize"))}),100)}},function(t,e,n){"use strict";var r=n(14),i=n(46),o=n(161),a="".startsWith;r(r.P+r.F*n(162)("startsWith"),"String",{startsWith:function(t){var e=o(this,t,"startsWith"),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return a?a.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){var r=n(14);r(r.S,"Number",{isInteger:n(411)})},function(t,e,n){var r=n(22),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){var r=n(14),i=n(16).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){"use strict";var r=n(414),i=n(198);t.exports=n(415)("Map",(function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(t){var e=r.getEntry(i(this,"Map"),t);return e&&e.v},set:function(t,e){return r.def(i(this,"Map"),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(26).f,i=n(82),o=n(117),a=n(44),s=n(113),c=n(114),u=n(109),l=n(154),h=n(118),p=n(23),f=n(91).fastKey,d=n(198),y=p?"_s":"size",m=function(t,e){var n,r=f(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,u){var l=t((function(t,r){s(t,l,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[y]=0,null!=r&&c(r,n,t[u],t)}));return o(l.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var n=d(this,e),r=m(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[y]--}return!!r},forEach:function(t){d(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!m(d(this,e),t)}}),p&&r(l.prototype,"size",{get:function(){return d(this,e)[y]}}),l},def:function(t,e,n){var r,i,o=m(t,e);return o?o.v=n:(t._l=o={i:i=f(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[y]++,"F"!==i&&(t._i[i]=o)),t},getEntry:m,setStrong:function(t,e,n){u(t,e,(function(t,n){this._t=d(t,e),this._k=n,this._l=void 0}),(function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?l(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,l(1))}),n?"entries":"values",!n,!0),h(e)}}},function(t,e,n){"use strict";var r=n(16),i=n(14),o=n(34),a=n(117),s=n(91),c=n(114),u=n(113),l=n(22),h=n(24),p=n(119),f=n(68),d=n(124);t.exports=function(t,e,n,y,m,g){var v=r[t],b=v,_=m?"set":"add",E=b&&b.prototype,T={},S=function(t){var e=E[t];o(E,t,"delete"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof b&&(g||E.forEach&&!h((function(){(new b).entries().next()})))){var k=new b,w=k[_](g?{}:-0,1)!=k,A=h((function(){k.has(1)})),O=p((function(t){new b(t)})),C=!g&&h((function(){for(var t=new b,e=5;e--;)t[_](e,e);return!t.has(-0)}));O||((b=e((function(e,n){u(e,b,t);var r=d(new v,e,b);return null!=n&&c(n,m,r[_],r),r}))).prototype=E,E.constructor=b),(A||C)&&(S("delete"),S("has"),m&&S("get")),(C||w)&&S(_),g&&E.clear&&delete E.clear}else b=y.getConstructor(e,t,m,_),a(b.prototype,n),s.NEED=!0;return f(b,t),T[t]=b,i(i.G+i.W+i.F*(b!=v),T),g||y.setStrong(b,t,m),b}},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e,n){"use strict";var r=n(418);function i(){}function o(){}o.resetWarningCache=i,t.exports=function(){function t(t,e,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(t,e,n){},function(t,e){t.exports=N},function(t,e){t.exports=R},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){t.exports=B},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e){t.exports=D},function(t,e,n){},function(t,e,n){"use strict";(function(t){var e=n(7),r=n.n(e);(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},i="undefined"!=typeof window&&window===this?this:void 0!==t&&null!=t?t:this;function o(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function a(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:o(t)}}!function(t,e){if(e){var r=i;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in r||(r[a]={}),r=r[a]}(e=e(o=r[t=t[t.length-1]]))!=o&&null!=e&&n(r,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function r(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var o=i.setTimeout;n.prototype.c=function(t){o(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.o(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.u(t):this.h(t)}},e.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.v(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.o=function(t){var e=this.f();t.Ja(e.resolve,e.reject)},e.prototype.v=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ja(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ja=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=r,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var i=a(t),o=i.next();!o.done;o=i.next())r(o.value).Ja(e,n)}))},e.all=function(t){var n=a(t),i=n.next();return i.done?r([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,r(i.value).Ja(o(a.length-1),e),i=n.next()}while(!i.done)}))},e}));var s=s||{},c=this||self;function u(t){return"string"==typeof t}function l(t){return"boolean"==typeof t}var h=/^[\w+\/_-]+[=]{0,2}$/,p=null;function f(){}function d(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function y(t){return null===t}function m(t){return"array"==d(t)}function g(t){var e=d(t);return"array"==e||"object"==e&&"number"==typeof t.length}function v(t){return"function"==d(t)}function b(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var _="closure_uid_"+(1e9*Math.random()>>>0),E=0;function T(t,e,n){return t.call.apply(t.bind,arguments)}function S(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function k(t,e,n){return(k=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?T:S).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var A=Date.now||function(){return+new Date};function O(t,e){function n(){}n.prototype=e.prototype,t.qb=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.fd=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function C(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function I(t){if(Error.captureStackTrace)Error.captureStackTrace(this,I);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function N(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");I.call(this,n+t[r])}function R(t,e){throw new N("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function B(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function D(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function P(){this.b=this.a=null}O(I,Error),I.prototype.name="CustomError",O(N,I),N.prototype.name="AssertionError",B.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var x=new B((function(){return new L}),(function(t){t.reset()}));function M(){var t=Ht,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function L(){this.next=this.b=this.a=null}function j(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||c).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(b(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;R("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}P.prototype.add=function(t,e){var n=x.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},L.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},L.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(u(t))return u(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=u(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i=u(t)?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},V=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=F(t,e)}function G(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function q(t,e){!function(t,e){for(var n=u(t)?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function W(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Y(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function J(t){for(var e in t)return!1;return!0}function Q(t){var e,n={};for(e in t)n[e]=t[e];return n}var X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Z(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<X.length;o++)n=X[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function $(t,e){this.a=t===nt&&e||"",this.b=et}function tt(t){return t instanceof $&&t.constructor===$&&t.b===et?t.a:(R("expected object of type Const, got '"+t+"'"),"type_error:Const")}$.prototype.qa=!0,$.prototype.pa=function(){return this.a},$.prototype.toString=function(){return"Const{"+this.a+"}"};var et={},nt={},rt=new $(nt,"");function it(){this.a="",this.b=ut}function ot(t){return t instanceof it&&t.constructor===it&&t.b===ut?t.a:(R("expected object of type TrustedResourceUrl, got '"+t+"' of type "+d(t)),"type_error:TrustedResourceUrl")}function at(t,e){var n=tt(t);if(!ct.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return lt(t=n.replace(st,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof $?tt(t):encodeURIComponent(String(t))})))}it.prototype.qa=!0,it.prototype.pa=function(){return this.a.toString()},it.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var st=/%{(\w+)}/g,ct=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^\/\\]|[^:\/\\%]+\/|[^:\/\\%]*[?#]|about:blank#)/i,ut={};function lt(t){var e=new it;return e.a=t,e}var ht=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},pt=/&/g,ft=/</g,dt=/>/g,yt=/"/g,mt=/'/g,gt=/\x00/g,vt=/[\x00&<>"']/;function bt(t,e){return-1!=t.indexOf(e)}function _t(t,e){return t<e?-1:t>e?1:0}function Et(){this.a="",this.b=At}function Tt(t){return t instanceof Et&&t.constructor===Et&&t.b===At?t.a:(R("expected object of type SafeUrl, got '"+t+"' of type "+d(t)),"type_error:SafeUrl")}Et.prototype.qa=!0,Et.prototype.pa=function(){return this.a.toString()},Et.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var St=/^(?:(?:https?|mailto|ftp):|[^:\/?#]*(?:[\/?#]|$))/i;function kt(t){return t instanceof Et?t:(t="object"==typeof t&&t.qa?t.pa():String(t),St.test(t)||(t="about:invalid#zClosurez"),Ot(t))}var wt,At={};function Ot(t){var e=new Et;return e.a=t,e}Ot("about:blank");t:{var Ct=c.navigator;if(Ct){var It=Ct.userAgent;if(It){wt=It;break t}}wt=""}function Nt(t){return bt(wt,t)}function Rt(){this.a="",this.b=Dt}function Bt(t){return t instanceof Rt&&t.constructor===Rt&&t.b===Dt?t.a:(R("expected object of type SafeHtml, got '"+t+"' of type "+d(t)),"type_error:SafeHtml")}Rt.prototype.qa=!0,Rt.prototype.pa=function(){return this.a.toString()},Rt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function Pt(t){var e=new Rt;return e.a=t,e}Pt("<!DOCTYPE html>");var xt,Mt,Lt=Pt("");function jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ft(t){return vt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(pt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(ft,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(dt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(yt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(mt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(gt,"&#0;"))),t}function Ut(t){c.setTimeout((function(){throw t}),0)}function zt(t,e){Mt||function(){if(c.Promise&&c.Promise.resolve){var t=c.Promise.resolve(void 0);Mt=function(){t.then(Gt)}}else Mt=function(){var t=Gt;!v(c.setImmediate)||c.Window&&c.Window.prototype&&!Nt("Edge")&&c.Window.prototype.setImmediate==c.setImmediate?(xt||(xt=function(){var t=c.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Nt("Presto")&&(t=function(){var t=document.createElement("IFRAME");t.style.display="none",function(t){var e=lt(tt(rt));j(t,"HTMLIFrameElement"),t.src=ot(e).toString()}(t),document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.write(Bt(Lt)),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=k((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!Nt("Trident")&&!Nt("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).yb;n.yb=null,t()}},function(t){r.next={yb:t},r=r.next,e.port2.postMessage(0)}}return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(t){var e=document.createElement("SCRIPT");e.onreadystatechange=function(){e.onreadystatechange=null,e.parentNode.removeChild(e),e=null,t(),t=null},document.documentElement.appendChild(e)}:function(t){c.setTimeout(t,0)}}()),xt(t)):c.setImmediate(t)}}(),Vt||(Mt(),Vt=!0),Ht.add(t,e)}Pt("<br>");var Vt=!1,Ht=new P;function Gt(){for(var t;t=M();){try{t.a.call(t.b)}catch(t){Ut(t)}D(x,t)}Vt=!1}function qt(t,e){if(this.a=Wt,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=f)try{var n=this;t.call(e,(function(t){ie(n,Kt,t)}),(function(t){if(!(t instanceof he))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}ie(n,Yt,t)}))}catch(t){ie(this,Yt,t)}}var Wt=0,Kt=2,Yt=3;function Jt(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Jt.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qt=new B((function(){return new Jt}),(function(t){t.reset()}));function Xt(t,e,n){var r=Qt.get();return r.g=t,r.b=e,r.f=n,r}function Zt(t){if(t instanceof qt)return t;var e=new qt(f);return ie(e,Kt,t),e}function $t(t){return new qt((function(e,n){n(t)}))}function te(t,e,n){oe(t,e,n,null)||zt(w(e,t))}function ee(t){return new qt((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Gb:!0,value:o}:{Gb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)te(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function ne(t,e){t.b||t.a!=Kt&&t.a!=Yt||ae(t),t.f?t.f.next=e:t.b=e,t.f=e}function re(t,e,n,r){var i=Xt(null,null,null);return i.a=new qt((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof he?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,ne(t,i),i.a}function ie(t,e,n){t.a==Wt&&(t===n&&(e=Yt,n=new TypeError("Promise cannot resolve to itself")),t.a=1,oe(n,t.Oc,t.Pc,t)||(t.i=n,t.a=e,t.c=null,ae(t),e!=Yt||n instanceof he||function(t,e){t.g=!0,zt((function(){t.g&&le.call(null,e)}))}(t,n)))}function oe(t,e,n,r){if(t instanceof qt)return ne(t,Xt(e||f,n||null,r)),!0;if(C(t))return t.then(e,n,r),!0;if(b(t))try{var i=t.then;if(v(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function ae(t){t.h||(t.h=!0,zt(t.Zb,t))}function se(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function ce(t,e,n,r){if(n==Yt&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ue(e,n,r);else try{e.c?e.g.call(e.f):ue(e,n,r)}catch(t){le.call(null,t)}D(Qt,e)}function ue(t,e,n){e==Kt?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}qt.prototype.then=function(t,e,n){return re(this,v(t)?t:null,v(e)?e:null,n)},qt.prototype.$goog_Thenable=!0,(e=qt.prototype).ka=function(t,e){return(t=Xt(t,t,e)).c=!0,ne(this,t),this},e.s=function(t,e){return re(this,null,t,e)},e.cancel=function(t){this.a==Wt&&zt((function(){!function t(e,n){if(e.a==Wt)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==Wt&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):se(r),ce(r,o,Yt,n)))}e.c=null}else ie(e,Yt,n)}(this,new he(t))}),this)},e.Oc=function(t){this.a=Wt,ie(this,Kt,t)},e.Pc=function(t){this.a=Wt,ie(this,Yt,t)},e.Zb=function(){for(var t;t=se(this);)ce(this,t,this.a,this.i);this.h=!1};var le=Ut;function he(t){I.call(this,t)}function pe(){0!=fe&&(de[this[_]||(this[_]=++E)]=this),this.ta=this.ta,this.la=this.la}O(he,I),he.prototype.name="cancel";var fe=0,de={};function ye(t){if(!t.ta&&(t.ta=!0,t.xa(),0!=fe)){var e=t[_]||(t[_]=++E);if(0!=fe&&t.la&&0<t.la.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete de[e]}}function me(t){return me[" "](t),t}pe.prototype.ta=!1,pe.prototype.xa=function(){if(this.la)for(;this.la.length;)this.la.shift()()},me[" "]=f;var ge,ve,be=Nt("Opera"),_e=Nt("Trident")||Nt("MSIE"),Ee=Nt("Edge"),Te=Ee||_e,Se=Nt("Gecko")&&!(bt(wt.toLowerCase(),"webkit")&&!Nt("Edge"))&&!(Nt("Trident")||Nt("MSIE"))&&!Nt("Edge"),ke=bt(wt.toLowerCase(),"webkit")&&!Nt("Edge");function we(){var t=c.document;return t?t.documentMode:void 0}t:{var Ae="",Oe=(ve=wt,Se?/rv:([^\);]+)(\)|;)/.exec(ve):Ee?/Edge\/([\d\.]+)/.exec(ve):_e?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ve):ke?/WebKit\/(\S+)/.exec(ve):be?/(?:Version)[ \/]?(\S+)/.exec(ve):void 0);if(Oe&&(Ae=Oe?Oe[1]:""),_e){var Ce=we();if(null!=Ce&&Ce>parseFloat(Ae)){ge=String(Ce);break t}}ge=Ae}var Ie,Ne={};function Re(t){return function(t,e){var n=Ne;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=ht(String(ge)).split("."),r=ht(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=_t(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||_t(0==a[2].length,0==s[2].length)||_t(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}Ie=c.document&&_e?we():void 0;var Be=Object.freeze||function(t){return t},De=!_e||9<=Number(Ie),Pe=_e&&!Re("9"),xe=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{c.addEventListener("test",f,e),c.removeEventListener("test",f,e)}catch(t){}return t}();function Me(t,e){this.type=t,this.b=this.target=e,this.Mb=!0}function Le(t,e){if(Me.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Se){t:{try{me(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=u(t.pointerType)?t.pointerType:je[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Me.prototype.preventDefault=function(){this.Mb=!1},O(Le,Me);var je=Be({2:"touch",3:"pen",4:"mouse"});Le.prototype.preventDefault=function(){Le.qb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Pe)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Le.prototype.f=function(){return this.a};var Fe="closure_listenable_"+(1e6*Math.random()|0),Ue=0;function ze(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Na=i,this.key=++Ue,this.ra=this.Ia=!1}function Ve(t){t.ra=!0,t.listener=null,t.proxy=null,t.src=null,t.Na=null}function He(t){this.src=t,this.a={},this.b=0}function Ge(t,e){var n=e.type;n in t.a&&G(t.a[n],e)&&(Ve(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ra&&o.listener==e&&o.capture==!!n&&o.Na==r)return i}return-1}He.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=qe(t,e,r,i);return-1<a?(e=t[a],n||(e.Ia=!1)):((e=new ze(e,this.src,o,!!r,i)).Ia=n,t.push(e)),e};var We="closure_lm_"+(1e6*Math.random()|0),Ke={};function Ye(t,e,n,r,i){if(r&&r.once)Qe(t,e,n,r,i);else if(m(e))for(var o=0;o<e.length;o++)Ye(t,e[o],n,r,i);else n=an(n),t&&t[Fe]?cn(t,e,n,b(r)?!!r.capture:!!r,i):Je(t,e,n,!1,r,i)}function Je(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=b(i)?!!i.capture:!!i,s=rn(t);if(s||(t[We]=s=new He(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=nn,e=De?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($e(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Qe(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);else n=an(n),t&&t[Fe]?un(t,e,n,b(r)?!!r.capture:!!r,i):Je(t,e,n,!0,r,i)}function Xe(t,e,n,r,i){if(m(e))for(var o=0;o<e.length;o++)Xe(t,e[o],n,r,i);else r=b(r)?!!r.capture:!!r,n=an(n),t&&t[Fe]?(t=t.u,(e=String(e).toString())in t.a&&-1<(n=qe(o=t.a[e],n,r,i))&&(Ve(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=rn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=qe(e,n,r,i)),(n=-1<t?e[t]:null)&&Ze(n))}function Ze(t){if("number"!=typeof t&&t&&!t.ra){var e=t.src;if(e&&e[Fe])Ge(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($e(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=rn(e))?(Ge(n,t),0==n.b&&(n.src=null,e[We]=null)):Ve(t)}}}function $e(t){return t in Ke?Ke[t]:Ke[t]="on"+t}function tn(t,e,n,r){var i=!0;if((t=rn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ra&&(o=en(o,r),i=i&&!1!==o)}return i}function en(t,e){var n=t.listener,r=t.Na||t.src;return t.Ia&&Ze(t),n.call(r,e)}function nn(t,e){if(t.ra)return!0;if(!De){if(!e)t:{e=["window","event"];for(var n=c,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Le(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=tn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=tn(r[i],t,!1,e),n=n&&o}return n}return en(t,new Le(e,this))}function rn(t){return(t=t[We])instanceof He?t:null}var on="__closure_events_fn_"+(1e9*Math.random()>>>0);function an(t){return v(t)?t:(t[on]||(t[on]=function(e){return t.handleEvent(e)}),t[on])}function sn(){pe.call(this),this.u=new He(this),this.Sb=this,this.Wa=null}function cn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function un(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function ln(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ra&&a.capture==n){var s=a.listener,c=a.Na||a.src;a.Ia&&Ge(t.u,a),i=!1!==s.call(c,r)&&i}}return i&&0!=r.Mb}function hn(t,e,n){if(v(t))n&&(t=k(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=k(t.handleEvent,t)}return 2147483647<Number(e)?-1:c.setTimeout(t,e||0)}function pn(t){var e=null;return new qt((function(n,r){-1==(e=hn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).s((function(t){throw c.clearTimeout(e),t}))}function fn(t){if(t.U&&"function"==typeof t.U)return t.U();if(u(t))return t.split("");if(g(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function dn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.U||"function"!=typeof t.U){if(g(t)||u(t)){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function yn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof yn)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function mn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];gn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)gn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function gn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}O(sn,pe),sn.prototype[Fe]=!0,sn.prototype.addEventListener=function(t,e,n,r){Ye(this,t,e,n,r)},sn.prototype.removeEventListener=function(t,e,n,r){Xe(this,t,e,n,r)},sn.prototype.dispatchEvent=function(t){var e,n=this.Wa;if(n)for(e=[];n;n=n.Wa)e.push(n);n=this.Sb;var r=t.type||t;if(u(t))t=new Me(t,n);else if(t instanceof Me)t.target=t.target||n;else{var i=t;Z(t=new Me(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=ln(a,r,!0,t)&&i}if(i=ln(a=t.b=n,r,!0,t)&&i,i=ln(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=ln(a=t.b=e[o],r,!1,t)&&i;return i},sn.prototype.xa=function(){if(sn.qb.xa.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ve(n[r]);delete e.a[t],e.b--}}this.Wa=null},(e=yn.prototype).U=function(){mn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.X=function(){return mn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return gn(this.b,t)?this.b[t]:e},e.set=function(t,e){gn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var vn=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function bn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof bn?(this.h=void 0!==e?e:t.h,_n(this,t.f),this.i=t.i,this.b=t.b,En(this,t.l),this.c=t.c,Tn(this,zn(t.a)),this.g=t.g):t&&(n=String(t).match(vn))?(this.h=!!e,_n(this,n[1]||"",!0),this.i=On(n[2]||""),this.b=On(n[3]||"",!0),En(this,n[4]),this.c=On(n[5]||"",!0),Tn(this,n[6]||"",!0),this.g=On(n[7]||"")):(this.h=!!e,this.a=new xn(null,this.h))}function _n(t,e,n){t.f=n?On(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function En(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.l=e}else t.l=null}function Tn(t,e,n){e instanceof xn?(t.a=e,function(t,e){e&&!t.f&&(Mn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(jn(this,e),Un(this,n,t))}),t)),t.f=e}(t.a,t.h)):(n||(e=Cn(e,Dn)),t.a=new xn(e,t.h))}function Sn(t,e,n){t.a.set(e,n)}function kn(t,e){return t.a.get(e)}function wn(t){return t instanceof bn?new bn(t):new bn(t,void 0)}function An(t,e){var n=new bn(null,void 0);return _n(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function On(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Cn(t,e,n){return u(t)?(t=encodeURI(t).replace(e,In),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function In(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}bn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Cn(e,Nn,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.i)&&t.push(Cn(e,Nn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Cn(n,"/"==n.charAt(0)?Bn:Rn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Cn(n,Pn)),t.join("")},bn.prototype.resolve=function(t){var e=new bn(this),n=!!t.f;n?_n(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)En(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(bt(i,"./")||bt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?Tn(e,zn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Nn=/[#\/\?@]/g,Rn=/[#\?:]/g,Bn=/[#\?]/g,Dn=/[#\?@]/g,Pn=/#/g;function xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Mn(t){t.a||(t.a=new yn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Ln(t){var e=dn(t);if(void 0===e)throw Error("Keys are undefined");var n=new xn(null,void 0);t=fn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];m(o)?Un(n,i,o):n.add(i,o)}return n}function jn(t,e){Mn(t),e=Vn(t,e),gn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,gn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&mn(t)))}function Fn(t,e){return Mn(t),e=Vn(t,e),gn(t.a.b,e)}function Un(t,e,n){jn(t,e),0<n.length&&(t.c=null,t.a.set(Vn(t,e),K(n)),t.b+=n.length)}function zn(t){var e=new xn;return e.c=t.c,t.a&&(e.a=new yn(t.a),e.b=t.b),e}function Vn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(e=xn.prototype).add=function(t,e){Mn(this),this.c=null,t=Vn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Mn(this),this.a.forEach((function(n,r){U(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.X=function(){Mn(this);for(var t=this.a.U(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.U=function(t){Mn(this);var e=[];if(u(t))Fn(this,t)&&(e=W(e,this.a.get(Vn(this,t))));else{t=this.a.U();for(var n=0;n<t.length;n++)e=W(e,t[n])}return e},e.set=function(t,e){return Mn(this),this.c=null,Fn(this,t=Vn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.U(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var Hn=!_e||9<=Number(Ie);function Gn(t){var e=document;return u(t)?e.getElementById(t):t}function qn(t,e){Y(e,(function(e,n){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:Wn.hasOwnProperty(n)?t.setAttribute(Wn[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var Wn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function Kn(t){if(t&&"number"==typeof t.length){if(b(t))return"function"==typeof t.item||"string"==typeof t.item;if(v(t))return"function"==typeof t.item}return!1}function Yn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(m(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),Zn(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Zn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Jn,t,e),e.join("")}function Jn(){}var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Zn(t,e){e.push('"',t.replace(Xn,(function(t){var e=Qn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Qn[t]=e),e})),'"')}function $n(){var t=vr();return _e&&!!Ie&&11==Ie||/Edge\/\d+/.test(t)}function tr(){return c.window&&c.window.location.href||self&&self.location&&self.location.href||""}function er(t,e){e=e||c.window;var n="about:blank";t&&(n=Tt(kt(t)).toString()),e.location.href=n}function nr(t){return!!((t=(t||vr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function rr(t){t=t||c.window;try{t.close()}catch(t){}}function ir(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=vr().toLowerCase(),r&&(e.target=r,bt(n,"crios/")&&(e.target="_blank")),yr(vr())==fr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Et?n:kt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((Nt("iPhone")&&!Nt("iPod")&&!Nt("iPad")||Nt("iPad")||Nt("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(j(a=r.document.createElement("A"),"HTMLAnchorElement"),e instanceof Et||e instanceof Et||(e="object"==typeof e&&e.qa?e.pa():String(e),St.test(e)||(e="about:invalid#zClosurez"),e=Ot(e)),a.href=Tt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=r.open("",n,a),t=Tt(e).toString(),a&&(Te&&bt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t=Pt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ft(t)+'">'),a.document.write(Bt(t)),a.document.close())):(a=r.open(Tt(e).toString(),n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var or=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ar=/^[^@]+@[^@]+$/;function sr(){var t=null;return new qt((function(e){"complete"==c.document.readyState?e():(t=function(){e()},Qe(window,"load",t))})).s((function(e){throw Xe(window,"load",t),e}))}function cr(t){return t=t||vr(),!("file:"!==Sr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ur(){var t=c.window;try{return!(!t||t==t.top)}catch(t){return!1}}function lr(){return void 0!==c.WorkerGlobalScope&&"function"==typeof c.importScripts}function hr(){return r.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.a.INTERNAL.hasOwnProperty("node")?"Node":lr()?"Worker":"Browser"}function pr(){var t=hr();return"ReactNative"===t||"Node"===t}var fr="Firefox",dr="Chrome";function yr(t){var e=t.toLowerCase();return bt(e,"opera/")||bt(e,"opr/")||bt(e,"opios/")?"Opera":bt(e,"iemobile")?"IEMobile":bt(e,"msie")||bt(e,"trident/")?"IE":bt(e,"edge/")?"Edge":bt(e,"firefox/")?fr:bt(e,"silk/")?"Silk":bt(e,"blackberry")?"Blackberry":bt(e,"webos")?"Webos":!bt(e,"safari/")||bt(e,"chrome/")||bt(e,"crios/")||bt(e,"android")?!bt(e,"chrome/")&&!bt(e,"crios/")||bt(e,"edge/")?bt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":dr:"Safari"}var mr={Vc:"FirebaseCore-web",Xc:"FirebaseUI-web"};function gr(t,e){e=e||[];var n,r=[],i={};for(n in mr)i[mr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=hr())?r=yr(i=vr()):"Worker"===r&&(r=yr(i=vr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function vr(){return c.navigator&&c.navigator.userAgent||""}function br(t,e){t=t.split("."),e=e||c;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function _r(){try{var t=c.localStorage,e=Cr();if(t)return t.setItem(e,"1"),t.removeItem(e),!$n()||!!c.indexedDB}catch(t){return lr()&&!!c.indexedDB}return!1}function Er(){return(Tr()||"chrome-extension:"===Sr()||cr())&&!pr()&&_r()&&!lr()}function Tr(){return"http:"===Sr()||"https:"===Sr()}function Sr(){return c.location&&c.location.protocol||null}function kr(t){return!nr(t=t||vr())&&yr(t)!=fr}function wr(t){return void 0===t?null:Yn(t)}function Ar(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Or(t){if(null!==t)return JSON.parse(t)}function Cr(t){return t||Math.floor(1e9*Math.random()).toString()}function Ir(t){return"Safari"!=yr(t=t||vr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var t=c.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Rr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=vr(),e=hr(),this.b=nr(t)||"ReactNative"===e}function Br(){var t=c.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Pr(){return!(!br("fireauth.oauthhelper",c)&&!br("fireauth.iframe",c))}Rr.prototype.get=function(){var t=c.navigator;return!t||"boolean"!=typeof t.onLine||!Tr()&&"chrome-extension:"!==Sr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Mr={};function Lr(t){Mr[t]||(Mr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var jr={};Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(jr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==jr.abcd}catch(ve){xr=!1}function Fr(t,e,n){xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Ur(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Fr(t,n,e[n])}function zr(t){var e={};return Ur(e,t),e}function Vr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Fr(e,n,Vr(t[n]));return e}function Hr(t){var e={},n=t[qr],r=t[Wr];if(!(t=t[Kr])||t!=Gr&&!n)throw Error("Invalid provider user info!");e[Jr]=r||null,e[Yr]=n||null,Fr(this,Xr,t),Fr(this,Qr,Vr(e))}var Gr="EMAIL_SIGNIN",qr="email",Wr="newEmail",Kr="requestType",Yr="email",Jr="fromEmail",Qr="data",Xr="operation";function Zr(t,e){this.code=ti+t,this.message=e||ei[t]||""}function $r(t){var e=t&&t.code;return e?new Zr(e.substring(ti.length),t.message):null}O(Zr,Error),Zr.prototype.A=function(){return{code:this.code,message:this.message}},Zr.prototype.toJSON=function(){return this.A()};var ti="auth/",ei={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The OIDC ID token requires a valid unhashed nonce.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"User did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ni(t){var e=kn(t=wn(t),ri)||null,n=kn(t,ii)||null,r=kn(t,si)||null;if(r=r&&ui[r]||null,!e||!n||!r)throw new Zr("argument-error",ri+", "+ii+"and "+si+" are required in a valid action code URL.");Ur(this,{apiKey:e,operation:r,code:n,continueUrl:kn(t,oi)||null,languageCode:kn(t,ai)||null,tenantId:kn(t,ci)||null})}var ri="apiKey",ii="oobCode",oi="continueUrl",ai="languageCode",si="mode",ci="tenantId",ui={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Gr,verifyEmail:"VERIFY_EMAIL"};function li(t){try{return new ni(t)}catch(t){return null}}function hi(t){var e=t[mi];if(void 0===e)throw new Zr("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new Zr("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[pi];if(n&&"object"==typeof n){e=n[bi];var r=n[gi];if(n=n[vi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new Zr("argument-error",gi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Zr("argument-error",vi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new Zr("argument-error",bi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Zr("missing-android-pkg-name")}}else if(void 0!==n)throw new Zr("argument-error",pi+" property must be a non null object when specified.");if(this.f=null,(e=t[yi])&&"object"==typeof e){if("string"==typeof(e=e[_i])&&e.length)this.f=e;else if(void 0!==e)throw new Zr("argument-error",_i+" property must be a non empty string when specified.")}else if(void 0!==e)throw new Zr("argument-error",yi+" property must be a non null object when specified.");if(void 0!==(e=t[di])&&"boolean"!=typeof e)throw new Zr("argument-error",di+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[fi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new Zr("argument-error",fi+" property must be a non empty string when specified.");this.i=t||null}var pi="android",fi="dynamicLinkDomain",di="handleCodeInApp",yi="iOS",mi="url",gi="installApp",vi="minimumVersion",bi="packageName",_i="bundleId";function Ei(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ti=null,Si=null;function ki(t){this.f=t.sub,A(),this.a=t.provider_id||t.firebase&&t.firebase.sign_in_provider||null,this.c=t.firebase&&t.firebase.tenant||null,this.b=!!t.is_anonymous||"anonymous"==this.a}function wi(t){return(t=Ai(t))&&t.sub&&t.iss&&t.aud&&t.exp?new ki(t):null}function Ai(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(function(t){var e="";return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Si[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ti){Ti={},Si={};for(var t=0;65>t;t++)Ti[t]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(t),Si[Ti[t]]=t,62<=t&&(Si["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(t)]=t)}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e+=String.fromCharCode(t)})),e}(t))}catch(t){}return null}ki.prototype.R=function(){return this.c},ki.prototype.g=function(){return this.b};var Oi,Ci={ad:{bb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},cd:{bb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},dd:{bb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ii(t){for(var e in Ci)if(Ci[e].id===t)return{firebaseEndpoint:(t=Ci[e]).bb,secureTokenEndpoint:t.ib};return null}Oi=Ii("__EID__")?"__EID__":void 0;var Ni="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Ri=["client_id","response_type","scope","redirect_uri","state"],Bi={Wc:{Oa:"locale",Da:500,Ca:600,Pa:"facebook.com",hb:Ri},Yc:{Oa:null,Da:500,Ca:620,Pa:"github.com",hb:Ri},Zc:{Oa:"hl",Da:515,Ca:680,Pa:"google.com",hb:Ri},ed:{Oa:"lang",Da:485,Ca:705,Pa:"twitter.com",hb:Ni}};function Di(t){for(var e in Bi)if(Bi[e].Pa==t)return Bi[e];return null}function Pi(t){var e={};e["facebook.com"]=Fi,e["google.com"]=zi,e["github.com"]=Ui,e["twitter.com"]=Vi;var n=t&&t[Mi];try{if(n)return e[n]?new e[n](t):new ji(t);if(void 0!==t[xi])return new Li(t)}catch(t){}return null}var xi="idToken",Mi="providerId";function Li(t){var e=t[Mi];if(!e&&t[xi]){var n=wi(t[xi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Fr(this,"providerId",e),Fr(this,"isNewUser",n)}function ji(t){Li.call(this,t),Fr(this,"profile",Vr((t=Or(t.rawUserInfo||"{}"))||{}))}function Fi(t){if(ji.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ui(t){if(ji.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",this.profile&&this.profile.login||null)}function zi(t){if(ji.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Vi(t){if(ji.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",t.screenName||null)}function Hi(t){var e=wn(t),n=kn(e,"link"),r=kn(wn(n),"link");return e=kn(e,"deep_link_id"),kn(wn(e),"link")||e||r||n||t}function Gi(){}function qi(t,e){return t.then((function(t){if(t[Ba]){var n=wi(t[Ba]);if(!n||e!=n.f)throw new Zr("user-mismatch");return t}throw new Zr("user-mismatch")})).s((function(t){throw t&&t.code&&t.code==ti+"user-not-found"?new Zr("user-mismatch"):t}))}function Wi(t,e){if(!e)throw new Zr("internal-error","failed to construct a credential");this.a=e,Fr(this,"providerId",t),Fr(this,"signInMethod",t)}function Ki(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function Yi(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Wi(t.providerId,t.pendingToken)}catch(t){}return null}function Ji(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Fr(this,"idToken",e.idToken),e.accessToken&&Fr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Fr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new Zr("internal-error","failed to construct a credential");Fr(this,"accessToken",e.oauthToken),Fr(this,"secret",e.oauthTokenSecret)}Fr(this,"providerId",t),Fr(this,"signInMethod",n)}function Qi(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Ln(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function Xi(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new Ji(t.providerId,e,t.signInMethod)}catch(t){}}return null}function Zi(t,e){this.Fc=e||[],Ur(this,{providerId:t,isOAuthProvider:!0}),this.zb={},this.cb=(Di(t)||{}).Oa||null,this.ab=null}function $i(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new Zr("argument-error",'SAML provider IDs must be prefixed with "saml."');Zi.call(this,t,[])}function to(t){Zi.call(this,t,Ri),this.a=[]}function eo(){to.call(this,"facebook.com")}function no(t){if(!t)throw new Zr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new eo).credential({accessToken:e})}function ro(){to.call(this,"github.com")}function io(t){if(!t)throw new Zr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return b(t)&&(e=t.accessToken),(new ro).credential({accessToken:e})}function oo(){to.call(this,"google.com"),this.wa("profile")}function ao(t,e){var n=t;return b(t)&&(n=t.idToken,e=t.accessToken),(new oo).credential({idToken:n,accessToken:e})}function so(){Zi.call(this,"twitter.com",Ni)}function co(t,e){var n=t;if(b(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new Zr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Ji("twitter.com",n,"twitter.com")}function uo(t,e,n){this.a=t,this.c=e,Fr(this,"providerId","password"),Fr(this,"signInMethod",n===ho.EMAIL_LINK_SIGN_IN_METHOD?ho.EMAIL_LINK_SIGN_IN_METHOD:ho.EMAIL_PASSWORD_SIGN_IN_METHOD)}function lo(t){return t&&t.email&&t.password?new uo(t.email,t.password,t.signInMethod):null}function ho(){Ur(this,{providerId:"password",isOAuthProvider:!1})}function po(t,e){if(!(e=fo(e)))throw new Zr("argument-error","Invalid email link!");return new uo(t,e.code,ho.EMAIL_LINK_SIGN_IN_METHOD)}function fo(t){return(t=li(t=Hi(t)))&&t.operation===Gr?t:null}function yo(t){if(!(t.Ua&&t.Ta||t.Fa&&t.ba))throw new Zr("internal-error");this.a=t,Fr(this,"providerId","phone"),Fr(this,"signInMethod","phone")}function mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new yo(e)}return null}function go(t){return t.a.Fa&&t.a.ba?{temporaryProof:t.a.Fa,phoneNumber:t.a.ba}:{sessionInfo:t.a.Ua,code:t.a.Ta}}function vo(t){try{this.a=t||r.a.auth()}catch(t){throw new Zr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ur(this,{providerId:"phone",isOAuthProvider:!1})}function bo(t,e){if(!t)throw new Zr("missing-verification-id");if(!e)throw new Zr("missing-verification-code");return new yo({Ua:t,Ta:e})}function _o(t){if(t.temporaryProof&&t.phoneNumber)return new yo({Fa:t.temporaryProof,ba:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return ao(o,n);case"facebook.com":return no(n);case"github.com":return io(n);case"twitter.com":return co(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new Wi(e,a):new Ji(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new to(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Eo(t){if(!t.isOAuthProvider)throw new Zr("invalid-oauth-provider")}function To(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Zr("invalid-auth-event");if(this.g&&this.a)throw new Zr("invalid-auth-event");if(this.g&&!this.f)throw new Zr("invalid-auth-event")}function So(t){return(t=t||{}).type?new To(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&$r(t.error),t.postBody,t.tenantId):null}function ko(){this.b=null,this.a=[]}O(ji,Li),O(Fi,ji),O(Ui,ji),O(zi,ji),O(Vi,ji),Wi.prototype.na=function(t){return Qa(t,Ki(this))},Wi.prototype.b=function(t,e){var n=Ki(this);return n.idToken=e,Xa(t,n)},Wi.prototype.f=function(t,e){return qi(Za(t,Ki(this)),e)},Wi.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Ji.prototype.na=function(t){return Qa(t,Qi(this))},Ji.prototype.b=function(t,e){var n=Qi(this);return n.idToken=e,Xa(t,n)},Ji.prototype.f=function(t,e){return qi(Za(t,Qi(this)),e)},Ji.prototype.A=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},Zi.prototype.Ea=function(t){return this.zb=Q(t),this},O($i,Zi),O(to,Zi),to.prototype.wa=function(t){return H(this.a,t)||this.a.push(t),this},to.prototype.Hb=function(){return K(this.a)},to.prototype.credential=function(t,e){var n;if(!(n=b(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new Zr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Ji(this.providerId,n,this.providerId)},O(eo,to),Fr(eo,"PROVIDER_ID","facebook.com"),Fr(eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),O(ro,to),Fr(ro,"PROVIDER_ID","github.com"),Fr(ro,"GITHUB_SIGN_IN_METHOD","github.com"),O(oo,to),Fr(oo,"PROVIDER_ID","google.com"),Fr(oo,"GOOGLE_SIGN_IN_METHOD","google.com"),O(so,Zi),Fr(so,"PROVIDER_ID","twitter.com"),Fr(so,"TWITTER_SIGN_IN_METHOD","twitter.com"),uo.prototype.na=function(t){return this.signInMethod==ho.EMAIL_LINK_SIGN_IN_METHOD?Os(t,as,{email:this.a,oobCode:this.c}):Os(t,Ss,{email:this.a,password:this.c})},uo.prototype.b=function(t,e){return this.signInMethod==ho.EMAIL_LINK_SIGN_IN_METHOD?Os(t,ss,{idToken:e,email:this.a,oobCode:this.c}):Os(t,gs,{idToken:e,email:this.a,password:this.c})},uo.prototype.f=function(t,e){return qi(this.na(t),e)},uo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Ur(ho,{PROVIDER_ID:"password"}),Ur(ho,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ur(ho,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),yo.prototype.na=function(t){return t.Va(go(this))},yo.prototype.b=function(t,e){var n=go(this);return n.idToken=e,Os(t,ws,n)},yo.prototype.f=function(t,e){var n=go(this);return n.operation="REAUTH",qi(t=Os(t,As,n),e)},yo.prototype.A=function(){var t={providerId:"phone"};return this.a.Ua&&(t.verificationId=this.a.Ua),this.a.Ta&&(t.verificationCode=this.a.Ta),this.a.Fa&&(t.temporaryProof=this.a.Fa),this.a.ba&&(t.phoneNumber=this.a.ba),t},vo.prototype.Va=function(t,e){var n=this.a.b;return Zt(e.verify()).then((function(r){if(!u(r))throw new Zr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":return function(t,e){return Os(t,ys,e)}(n,{phoneNumber:t,recaptchaToken:r}).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new Zr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Ur(vo,{PROVIDER_ID:"phone"}),Ur(vo,{PHONE_SIGN_IN_METHOD:"phone"}),To.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},To.prototype.R=function(){return this.h},To.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var wo,Ao=null;function Oo(t){var e="unauthorized-domain",n=void 0,r=wn(t);t=r.b,"chrome-extension"==(r=r.f)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",Zr.call(this,e,n)}function Co(t,e,n){Zr.call(this,t,n),(t=e||{}).Ab&&Fr(this,"email",t.Ab),t.ba&&Fr(this,"phoneNumber",t.ba),t.credential&&Fr(this,"credential",t.credential),t.Qb&&Fr(this,"tenantId",t.Qb)}function Io(t){if(t.code){var e=t.code||"";0==e.indexOf(ti)&&(e=e.substring(ti.length));var n={credential:_o(t),Qb:t.tenantId};if(t.email)n.Ab=t.email;else if(t.phoneNumber)n.ba=t.phoneNumber;else if(!n.credential)return new Zr(e,t.message||void 0);return new Co(e,n,t.message)}return null}function No(){}function Ro(t){return t.c||(t.c=t.b())}function Bo(){}function Do(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Po(){}function xo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=k(this.fc,this),this.a.onerror=k(this.Ib,this),this.a.onprogress=k(this.gc,this),this.a.ontimeout=k(this.kc,this)}function Mo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Lo(t,e,n){this.reset(t,e,n,void 0,void 0)}function jo(t){this.f=t,this.b=this.c=this.a=null}function Fo(t,e){this.name=t,this.value=e}O(Oo,Zr),O(Co,Zr),Co.prototype.A=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.A();return e&&Z(t,e),t},Co.prototype.toJSON=function(){return this.A()},No.prototype.c=null,O(Bo,No),Bo.prototype.a=function(){var t=Do(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bo.prototype.b=function(){var t={};return Do(this)&&(t[0]=!0,t[1]=!0),t},wo=new Bo,O(Po,No),Po.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new xo;throw Error("Unsupported browser")},Po.prototype.b=function(){return{}},(e=xo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Mo(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Mo(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Mo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Lo.prototype.a=null,Lo.prototype.reset=function(t,e,n,r,i){r||A(),delete this.a},Fo.prototype.toString=function(){return this.name};var Uo=new Fo("SEVERE",1e3),zo=new Fo("WARNING",900),Vo=new Fo("CONFIG",700),Ho=new Fo("FINE",500);jo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(R("Root logger has no level set."),null)}(this).value)for(v(e)&&(e=e()),t=new Lo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Go={},qo=null;function Wo(t){var e;if(qo||(qo=new jo(""),Go[""]=qo,qo.c=Vo),!(e=Go[t])){e=new jo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=Wo(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,Go[t]=e}return e}function Ko(t,e){t&&t.log(Ho,e,void 0)}function Yo(t){this.f=t}function Jo(t){sn.call(this),this.o=t,this.readyState=Qo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Wo("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}O(Yo,No),Yo.prototype.a=function(){return new Jo(this.f)},Yo.prototype.b=function(t){return function(){return t}}({}),O(Jo,sn);var Qo=0;function Xo(t){t.c.read().then(t.ec.bind(t)).catch(t.Ma.bind(t))}function Zo(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,$o(t)}function $o(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ta(t){sn.call(this),this.headers=new yn,this.B=t||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=ea,this.v=this.P=!1}(e=Jo.prototype).open=function(t,e){if(this.readyState!=Qo)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,$o(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.jc.bind(this),this.Ma.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Zo(this,!1)),this.readyState=Qo},e.jc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,$o(this)),this.a&&(this.readyState=3,$o(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.hc.bind(this),this.Ma.bind(this)):void 0!==c.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,Xo(this)):t.text().then(this.ic.bind(this),this.Ma.bind(this)))))},e.ec=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?Zo(this,!0):$o(this),3==this.readyState&&Xo(this)}},e.ic=function(t){this.a&&(this.response=this.responseText=t,Zo(this,!0))},e.hc=function(t){this.a&&(this.response=t,Zo(this,!0))},e.Ma=function(t){var e=this.h;e&&e.log(zo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&Zo(this,!0)},e.setRequestHeader=function(t,e){this.i.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(zo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(zo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},O(ta,sn);var ea="";ta.prototype.b=Wo("goog.net.XhrIo");var na=/^https?$/i,ra=["POST","PUT"];function ia(t){return"content-type"==t.toLowerCase()}function oa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,aa(t),ca(t)}function aa(t){t.I||(t.I=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function sa(t){if(t.c&&void 0!==s)if(t.w[1]&&4==la(t)&&2==ha(t))Ko(t.b,pa(t,"Local request error detected and ignored"));else if(t.i&&4==la(t))hn(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==la(t)){Ko(t.b,pa(t,"Request complete")),t.c=!1;try{var e,n=ha(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(vn)[1]||null;if(!o&&c.self&&c.self.location){var a=c.self.location.protocol;o=a.substr(0,a.length-1)}i=!na.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var u=2<la(t)?t.a.statusText:""}catch(e){Ko(t.b,"Can not get status: "+e.message),u=""}t.h=u+" ["+ha(t)+"]",aa(t)}}finally{ca(t)}}}function ca(t,e){if(t.a){ua(t);var n=t.a,r=t.w[0]?f:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(Uo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function ua(t){t.a&&t.v&&(t.a.ontimeout=null),t.o&&(c.clearTimeout(t.o),t.o=null)}function la(t){return t.a?t.a.readyState:0}function ha(t){try{return 2<la(t)?t.a.status:-1}catch(t){return-1}}function pa(t,e){return e+" ["+t.O+" "+t.l+" "+ha(t)+"]"}function fa(t){var e=ka;this.g=[],this.v=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function da(t,e,n){t.a=!0,t.c=n,t.f=!e,va(t)}function ya(t){if(t.a){if(!t.u)throw new ba(t);t.u=!1}}function ma(t,e,n,r){t.g.push([e,n,r]),t.a&&va(t)}function ga(t){return V(t.g,(function(t){return v(t[1])}))}function va(t){if(t.h&&t.a&&ga(t)){var e=t.h,n=Ta[e];n&&(c.clearTimeout(n.a),delete Ta[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.o,e);void 0!==s&&(t.f=t.f&&(s==e||s instanceof Error),t.c=e=s),(C(e)||"function"==typeof c.Promise&&e instanceof c.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,ga(t)||(n=!0)}}t.c=e,r&&(s=k(t.m,t,!0),r=k(t.m,t,!1),e instanceof fa?(ma(e,s,r),e.w=!0):e.then(s,r)),n&&(e=new Ea(e),Ta[e.a]=e,t.h=e.a)}function ba(){I.call(this)}function _a(){I.call(this)}function Ea(t){this.a=c.setTimeout(k(this.c,this),0),this.b=t}(e=ta.prototype).Ga=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Ko(this.b,pa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Ko(this.b,pa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ca(this))},e.xa=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ca(this,!0)),ta.qb.xa.call(this)},e.Lb=function(){this.ta||(this.J||this.i||this.f?sa(this):this.yc())},e.yc=function(){sa(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ea:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(Uo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return Ko(this.b,"Can not get response: "+t.message),null}},fa.prototype.cancel=function(t){if(this.a)this.c instanceof fa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(t=new _a(this),ya(this),da(this,!1,t))}},fa.prototype.m=function(t,e){this.i=!1,da(this,t,e)},fa.prototype.then=function(t,e,n){var r,i,o=new qt((function(t,e){r=t,i=e}));return ma(this,r,(function(t){t instanceof _a?o.cancel():i(t)})),o.then(t,e,n)},fa.prototype.$goog_Thenable=!0,O(ba,I),ba.prototype.message="Deferred has already fired",ba.prototype.name="AlreadyCalledError",O(_a,I),_a.prototype.message="Deferred was canceled",_a.prototype.name="CanceledError",Ea.prototype.c=function(){throw delete Ta[this.a],this.b};var Ta={};function Sa(t){var e={},n=e.document||document,r=ot(t).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ga:void 0},a=new fa(o),s=null,u=null!=e.timeout?e.timeout:5e3;return 0<u&&(s=window.setTimeout((function(){wa(i,!0);var t=new Ca(Oa,"Timeout reached for loading script "+r);ya(a),da(a,!1,t)}),u),o.Ga=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(wa(i,e.gd||!1,s),ya(a),da(a,!0,null))},i.onerror=function(){wa(i,!0,s);var t=new Ca(Aa,"Error while loading script "+r);ya(a),da(a,!1,t)},Z(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),qn(i,o),function(t,e){j(t,"HTMLScriptElement"),t.src=ot(e),null===p&&(p=(e=(e=c.document).querySelector&&e.querySelector("script[nonce]"))&&(e=e.nonce||e.getAttribute("nonce"))&&h.test(e)?e:""),(e=p)&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function ka(){if(this&&this.Nb){var t=this.Nb;t&&"SCRIPT"==t.tagName&&wa(t,!0,this.Ga)}}function wa(t,e,n){null!=n&&c.clearTimeout(n),t.onload=f,t.onerror=f,t.onreadystatechange=f,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var Aa=0,Oa=1;function Ca(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),I.call(this,n),this.code=t}function Ia(t){this.f=t}function Na(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=t.secureTokenTimeout||Da,this.g=Q(t.secureTokenHeaders||Pa),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.firebaseTimeout||xa,this.a=Q(t.firebaseHeaders||Ma),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==hr(),!(n=c.XMLHttpRequest||n&&r.a.INTERNAL.node&&r.a.INTERNAL.node.XMLHttpRequest)&&!lr())throw new Zr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,lr()?this.f=new Yo(self):pr()?this.f=new Ia(n):this.f=new Po,this.b=null}O(Ca,I),O(Ia,No),Ia.prototype.a=function(){return new this.f},Ia.prototype.b=function(){return{}};var Ra,Ba="idToken",Da=new Rr(3e4,6e4),Pa={"Content-Type":"application/x-www-form-urlencoded"},xa=new Rr(3e4,6e4),Ma={"Content-Type":"application/json"};function La(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ja(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Fa(t,e,n,r,i,o,a){(function(){var t=vr();return!((t=yr(t)!=dr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||_e&&Ie&&!(9<Ie))})()||lr()?t=k(t.o,t):(Ra||(Ra=new qt((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(c[za]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){ma(t,null,e,void 0)}(Sa(at(Ua,{onload:za})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=k(t.m,t)),t(e,n,r,i,o,a)}Na.prototype.R=function(){return this.b},Na.prototype.o=function(t,e,n,r,i,o){if(lr()&&(void 0===c.fetch||void 0===c.Headers||void 0===c.Request))throw new Zr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ta(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout((function(){a.dispatchEvent("timeout")}),o)}cn(a,"complete",(function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Ko(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),un(a,"ready",(function(){s&&clearTimeout(s),ye(this)})),un(a,"timeout",(function(){s&&clearTimeout(s),ye(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():wo.a(),t.w=t.B?Ro(t.B):Ro(wo),t.a.onreadystatechange=k(t.Lb,t);try{Ko(t.b,pa(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(e){return Ko(t.b,pa(t,"Error opening Xhr: "+e.message)),void oa(t,e)}e=r||"";var o=new yn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(g(t)||u(t))U(t,e,void 0);else for(var n=dn(t),r=fn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ia,n=t.length,r=u(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:u(t)?t.charAt(e):t[e]}(o.X()),r=c.FormData&&e instanceof c.FormData,!H(ra,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{ua(t),0<t.g&&(t.v=function(t){return _e&&Re(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),Ko(t.b,pa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=k(t.Ga,t)):t.o=hn(t.Ga,t.g,t)),Ko(t.b,pa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Ko(t.b,pa(t,"Send error: "+e.message)),oa(t,e)}}(a,t,n,r,i)};var Ua=new $(nt,"https://apis.google.com/js/client.js?onload=%{onload}"),za="__fcb"+Math.floor(1e6*Math.random()).toString();function Va(t){if(!u(t=t.email)||!ar.test(t))throw new Zr("invalid-email")}function Ha(t){"email"in t&&Va(t)}function Ga(t){if(!t[Ba])throw new Zr("internal-error")}function qa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new Zr("internal-error")}else{if(!t.sessionInfo)throw new Zr("missing-verification-id");if(!t.code)throw new Zr("missing-verification-code")}}Na.prototype.m=function(t,e,n,r,i){var o=this;Ra.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).s((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Na.prototype.ob=function(){return Os(this,vs,{})},Na.prototype.rb=function(t,e){return Os(this,ms,{idToken:t,email:e})},Na.prototype.sb=function(t,e){return Os(this,gs,{idToken:t,password:e})};var Wa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ka(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new Zr("internal-error")}function Ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Fn(t=new xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function Ja(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Io(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Io(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Io(t)):t.errorMessage&&(e=Cs(t.errorMessage)),e)throw e;if(!t[Ba])throw new Zr("internal-error")}function Qa(t,e){return e.returnIdpCredential=!0,Os(t,bs,e)}function Xa(t,e){return e.returnIdpCredential=!0,Os(t,Es,e)}function Za(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Os(t,_s,e)}function $a(t){if(!t.oobCode)throw new Zr("invalid-action-code")}(e=Na.prototype).tb=function(t,e){var n={idToken:t},r=[];return Y(Wa,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Os(this,ms,n)},e.kb=function(t,e){return Z(t={requestType:"PASSWORD_RESET",email:t},e),Os(this,hs,t)},e.lb=function(t,e){return Z(t={requestType:"EMAIL_SIGNIN",email:t},e),Os(this,us,t)},e.jb=function(t,e){return Z(t={requestType:"VERIFY_EMAIL",idToken:t},e),Os(this,ls,t)},e.Va=function(t){return Os(this,ks,t)},e.$a=function(t,e){return Os(this,ds,{oobCode:t,newPassword:e})},e.Ka=function(t){return Os(this,es,{oobCode:t})},e.Xa=function(t){return Os(this,ts,{oobCode:t})};var ts={endpoint:"setAccountInfo",D:$a,fa:"email",F:!0},es={endpoint:"resetPassword",D:$a,K:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e)throw new Zr("internal-error")},F:!0},ns={endpoint:"signupNewUser",D:function(t){if(Va(t),!t.password)throw new Zr("weak-password")},K:Ga,T:!0,F:!0},rs={endpoint:"createAuthUri",F:!0},is={endpoint:"deleteAccount",V:["idToken"]},os={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(t){if(!m(t.deleteProvider))throw new Zr("internal-error")}},as={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Va,K:Ga,T:!0,F:!0},ss={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Va,K:Ga,T:!0},cs={endpoint:"getAccountInfo"},us={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new Zr("internal-error");Va(t)},fa:"email",F:!0},ls={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new Zr("internal-error")},fa:"email",F:!0},hs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(t){if("PASSWORD_RESET"!=t.requestType)throw new Zr("internal-error");Va(t)},fa:"email",F:!0},ps={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},fs={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(t){if(!t.recaptchaSiteKey)throw new Zr("internal-error")}},ds={endpoint:"resetPassword",D:$a,fa:"email",F:!0},ys={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},ms={endpoint:"setAccountInfo",V:["idToken"],D:Ha,T:!0},gs={endpoint:"setAccountInfo",V:["idToken"],D:function(t){if(Ha(t),!t.password)throw new Zr("weak-password")},K:Ga,T:!0},vs={endpoint:"signupNewUser",K:Ga,T:!0,F:!0},bs={endpoint:"verifyAssertion",D:Ka,Qa:Ya,K:Ja,T:!0,F:!0},_s={endpoint:"verifyAssertion",D:Ka,Qa:Ya,K:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new Zr("user-not-found");if(t.errorMessage)throw Cs(t.errorMessage);if(!t[Ba])throw new Zr("internal-error")},T:!0,F:!0},Es={endpoint:"verifyAssertion",D:function(t){if(Ka(t),!t.idToken)throw new Zr("internal-error")},Qa:Ya,K:Ja,T:!0},Ts={endpoint:"verifyCustomToken",D:function(t){if(!t.token)throw new Zr("invalid-custom-token")},K:Ga,T:!0,F:!0},Ss={endpoint:"verifyPassword",D:function(t){if(Va(t),!t.password)throw new Zr("wrong-password")},K:Ga,T:!0,F:!0},ks={endpoint:"verifyPhoneNumber",D:qa,K:Ga,F:!0},ws={endpoint:"verifyPhoneNumber",D:function(t){if(!t.idToken)throw new Zr("internal-error");qa(t)},K:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Io(t);Ga(t)}},As={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:qa,K:Ga,F:!0};function Os(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.V))return $t(new Zr("internal-error"));var r,i=e.Kb||"POST";return Zt(n).then(e.D).then((function(){return e.T&&(n.returnSecureToken=!0),e.F&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o){var a=wn(t.h+e);Sn(a,"key",t.c),o&&Sn(a,"cb",A().toString());var s="GET"==n;if(s)for(var c in r)r.hasOwnProperty(c)&&Sn(a,c,r[c]);return new qt((function(e,o){Fa(t,a.toString(),(function(t){t?t.error?o(Is(t,i||{})):e(t):o(new Zr("network-request-failed"))}),n,s?void 0:Yn(Ar(r)),t.a,t.i.get())}))}(t,e.endpoint,i,n,e.Yb,e.wb||!1)})).then((function(t){return r=t,e.Qa?e.Qa(n,r):r})).then(e.K).then((function(){if(!e.fa)return r;if(!(e.fa in r))throw new Zr("internal-error");return r[e.fa]}))}function Cs(t){return Is({error:{errors:[{message:t}],code:400,message:t}})}function Is(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Zr(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",Z(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*(.*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new Zr(r[i],e);return!e&&t&&(e=wr(t)),new Zr("internal-error",e)}function Ns(t){this.b=t,this.a=null,this.fb=function(t){return(Ps||(Ps=new qt((function(t,e){function n(){Nr(),br("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Nr(),e(Error("Network Error"))},timeout:Bs.get()})}if(br("gapi.iframes.Iframe"))t();else if(br("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();c[r]=function(){br("gapi.load")?n():e(Error("Network Error"))},Zt(Sa(r=at(Rs,{onload:r}))).s((function(){e(Error("Network Error"))}))}})).s((function(t){throw Ps=null,t})))).then((function(){return new qt((function(e,n){br("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),Ds.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var Rs=new $(nt,"https://apis.google.com/js/api.js?onload=%{onload}"),Bs=new Rr(3e4,6e4),Ds=new Rr(5e3,15e3),Ps=null;function xs(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=An(this.i,"/__/auth/iframe"),Sn(this.a,"apiKey",this.g),Sn(this.a,"appName",this.h),this.b=null,this.c=[]}function Ms(t,e,n,r,i){this.o=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Ls(t){try{return r.a.app(t).auth().Aa()}catch(t){return[]}}function js(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Fs(t){var e=tr();return function(t){return Os(t,ps,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=wn(e),r=n.f;n=n.b;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=wn(o).b==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:or.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Oo(tr())}))}function Us(t){return t.l?t.l:(t.l=sr().then((function(){if(!t.o){var e=t.c,n=t.h,r=Ls(t.b),i=new xs(t.u,t.f,t.b);i.f=e,i.b=n,i.c=K(r||[]),t.o=i.toString()}t.i=new Ns(t.o),function(t){if(!t.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.fb.then((function(){t.a.register("authEvent",e,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.i,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=So(e.authEvent),n=0;n<t.g.length;n++)r=t.g[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Zt(n)}return n.status="ERROR",Zt(n)}))}(t)})),t.l)}function zs(t){return t.m||(t.v=t.c?gr(t.c,Ls(t.b)):null,t.m=new Na(t.f,Ii(t.h),t.v)),t.m}function Vs(t,e,n,r,i,o,a,s,c,u,l){return(t=new Ms(t,e,n,r,i)).l=o,t.g=a,t.i=s,t.b=Q(c||null),t.f=u,t.nb(l).toString()}function Hs(t){if(this.a=t||r.a.INTERNAL.reactNative&&r.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Zr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Gs(t){this.b=t,this.a={},this.f=k(this.c,this)}xs.prototype.toString=function(){return this.f?Sn(this.a,"v",this.f):jn(this.a.a,"v"),this.b?Sn(this.a,"eid",this.b):jn(this.a.a,"eid"),this.c.length?Sn(this.a,"fw",this.c.join(",")):jn(this.a.a,"fw"),this.a.toString()},Ms.prototype.nb=function(t){return this.h=t,this},Ms.prototype.toString=function(){var t=An(this.o,"/__/auth/handler");if(Sn(t,"apiKey",this.m),Sn(t,"appName",this.c),Sn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=r.a.app(this.c).auth().ha()}catch(t){n=null}for(var i in e.ab=n,Sn(t,"providerId",this.a.providerId),n=Ar((e=this.a).zb))n[i]=n[i].toString();i=e.Fc,n=Q(n);for(var o=0;o<i.length;o++){var a=i[o];a in n&&delete n[a]}e.cb&&e.ab&&!n[e.cb]&&(n[e.cb]=e.ab),J(n)||Sn(t,"customParameters",wr(n))}if("function"==typeof this.a.Hb&&(e=this.a.Hb()).length&&Sn(t,"scopes",e.join(",")),this.l?Sn(t,"redirectUrl",this.l):jn(t.a,"redirectUrl"),this.g?Sn(t,"eventId",this.g):jn(t.a,"eventId"),this.i?Sn(t,"v",this.i):jn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!kn(t,s)&&Sn(t,s,this.b[s]);return this.h?Sn(t,"tid",this.h):jn(t.a,"tid"),this.f?Sn(t,"eid",this.f):jn(t.a,"eid"),(s=Ls(this.c)).length&&Sn(t,"fw",s.join(",")),t.toString()},(e=js.prototype).Fb=function(t,e,n){var r=new Zr("popup-closed-by-user"),i=new Zr("web-storage-unsupported"),o=this,a=!1;return this.ia().then((function(){(function(t){var e={type:"webStorageSupport"};return Us(t).then((function(){return function(t,e){return t.fb.then((function(){return new qt((function(n){t.a.send(e.type,e,n,br("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.i,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&rr(t),e(i),a=!0)}))})).s((function(){})).then((function(){if(!a)return function(t){return new qt((function(e){return function n(){pn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return pn(n).then((function(){e(r)}))}))},e.Ob=function(){var t=vr();return!kr(t)&&!Ir(t)},e.Jb=function(){return!1},e.Db=function(t,e,n,r,i,o,a,s){if(!t)return $t(new Zr("popup-blocked"));if(a&&!kr())return this.ia().s((function(e){rr(t),i(e)})),r(),Zt();this.a||(this.a=Fs(zs(this)));var c=this;return this.a.then((function(){var e=c.ia().s((function(e){throw rr(t),i(e),e}));return r(),e})).then((function(){Eo(n),a||er(Vs(c.u,c.f,c.b,e,n,null,o,c.c,void 0,c.h,s),t)})).s((function(t){throw"auth/network-request-failed"==t.code&&(c.a=null),t}))},e.Eb=function(t,e,n,r){this.a||(this.a=Fs(zs(this)));var i=this;return this.a.then((function(){Eo(e),er(Vs(i.u,i.f,i.b,t,e,tr(),n,i.c,void 0,i.h,r))})).s((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.ia=function(){var t=this;return Us(this).then((function(){return t.i.fb})).s((function(){throw t.a=null,new Zr("network-request-failed")}))},e.Rb=function(){return!0},e.ya=function(t){this.g.push(t)},e.La=function(t){q(this.g,(function(e){return e==t}))},(e=Hs.prototype).get=function(t){return Zt(this.a.getItem(t)).then((function(t){return t&&Or(t)}))},e.set=function(t,e){return Zt(this.a.setItem(t,wr(e)))},e.S=function(t){return Zt(this.a.removeItem(t))},e.$=function(){},e.ea=function(){};var qs,Ws=[];function Ks(t,e,n){J(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Ys(t){this.a=t}function Js(t){this.c=t,this.b=!1,this.a=[]}function Qs(t,e,n,r){var i,o,a,s,c=n||{},u=null;if(t.b)return $t(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new qt((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),u={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(u),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:c},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Xs(t,u),e})).s((function(e){throw Xs(t,u),e}))}function Xs(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),q(t.a,(function(t){return t==e}))}}function Zs(){if(!tc())throw new Zr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=c.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t=this;lr()&&self?(this.l=function(){var t=lr()?self:null;if(U(Ws,(function(n){n.b==t&&(e=n)})),!e){var e=new Gs(t);Ws.push(e)}return e}(),Ks(this.l,"keyChanged",(function(e,n){return oc(t).then((function(e){return 0<e.length&&U(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Ks(this.l,"ping",(function(){return Zt(["keyChanged"])}))):function(){var t=c.navigator;return t&&t.serviceWorker?Zt().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).s((function(){return null})):Zt(null)}().then((function(e){(t.h=e)&&(t.g=new Js(new Ys(e)),Qs(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.o=!0)})).s((function(){})))}))}function $s(t){return t.m||(t.m=function t(e){return new qt((function(n,r){var i=e.u.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(t){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){r(t)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new qt((function(e,n){var r=t.u.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).s((function(t){r(t)}))}}))}(t)),t.m}function tc(){try{return!!c.indexedDB}catch(t){return!1}}function ec(t){return t.objectStore("firebaseLocalStorage")}function nc(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function rc(t){return new qt((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function ic(t,e){return t.g&&t.h&&function(){var t=c.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Qs(t.g,"keyChanged",{key:e},t.o).then((function(){})).s((function(){})):Zt()}function oc(t){return $s(t).then((function(t){var e=ec(nc(t,!1));return e.getAll?rc(e.getAll()):new qt((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function ac(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function sc(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Zt().then((function(){if(tc()){var t=Cr(),r="__sak"+t;return qs||(qs=new Zs),(n=qs).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.S(r)})).then((function(){return n})).s((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.$((function(t){U(e.a,(function(e){e(t)}))})),t}))}function cc(){this.a={},this.type="inMemory"}function uc(){if(!function(){var t="Node"==hr();if(!(t=lc()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==hr())throw new Zr("internal-error","The LocalStorage compatibility library was not found.");throw new Zr("web-storage-unsupported")}this.a=lc()||r.a.INTERNAL.node.localStorage,this.type="localStorage"}function lc(){try{var t=c.localStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function hc(){this.type="nullStorage"}function pc(){if(!function(){var t="Node"==hr();if(!(t=fc()||t&&r.a.INTERNAL.node&&r.a.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==hr())throw new Zr("internal-error","The SessionStorage compatibility library was not found.");throw new Zr("web-storage-unsupported")}this.a=fc()||r.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function fc(){try{var t=c.sessionStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function dc(){var t={};t.Browser=gc,t.Node=vc,t.ReactNative=bc,t.Worker=_c,this.a=t[hr()]}Gs.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];U(r,(function(e){i.push(Zt().then((function(){return e(t.origin,t.data.data)})))})),ee(i).then((function(r){var i=[];U(r,(function(t){i.push({fulfilled:t.Gb,value:t.value,reason:t.reason?t.reason.message:void 0})})),U(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Ys.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Js.prototype.close=function(){for(;0<this.a.length;)Xs(this,this.a[0]);this.b=!0},(e=Zs.prototype).set=function(t,e){var n,r=!1,i=this;return $s(this).then((function(e){return rc((e=ec(nc(n=e,!0))).get(t))})).then((function(o){var a=ec(nc(n,!0));return o?(o.value=e,rc(a.put(o))):(i.b++,r=!0,(o={}).fbase_key=t,o.value=e,rc(a.add(o)))})).then((function(){return i.c[t]=e,ic(i,t)})).ka((function(){r&&i.b--}))},e.get=function(t){return $s(this).then((function(e){return rc(ec(nc(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.S=function(t){var e=!1,n=this;return $s(this).then((function(r){return e=!0,n.b++,rc(ec(nc(r,!0)).delete(t))})).then((function(){return delete n.c[t],ic(n,t)})).ka((function(){e&&n.b--}))},e.$=function(t){0==this.a.length&&function(t){ac(t),function e(){t.f=setTimeout((function(){t.i=oc(t).then((function(e){0<e.length&&U(t.a,(function(t){t(e)}))})).then((function(){e()})).s((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},e.ea=function(t){q(this.a,(function(e){return e==t})),0==this.a.length&&ac(this)},(e=sc.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.S=function(t){return this.b.then((function(e){return e.S(t)}))},e.$=function(t){this.a.push(t)},e.ea=function(t){q(this.a,(function(e){return e==t}))},(e=cc.prototype).get=function(t){return Zt(this.a[t])},e.set=function(t,e){return this.a[t]=e,Zt()},e.S=function(t){return delete this.a[t],Zt()},e.$=function(){},e.ea=function(){},(e=uc.prototype).get=function(t){var e=this;return Zt().then((function(){return Or(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return Zt().then((function(){var r=wr(e);null===r?n.S(t):n.a.setItem(t,r)}))},e.S=function(t){var e=this;return Zt().then((function(){e.a.removeItem(t)}))},e.$=function(t){c.window&&Ye(c.window,"storage",t)},e.ea=function(t){c.window&&Xe(c.window,"storage",t)},(e=hc.prototype).get=function(){return Zt(null)},e.set=function(){return Zt()},e.S=function(){return Zt()},e.$=function(){},e.ea=function(){},(e=pc.prototype).get=function(t){var e=this;return Zt().then((function(){return Or(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return Zt().then((function(){var r=wr(e);null===r?n.S(t):n.a.setItem(t,r)}))},e.S=function(t){var e=this;return Zt().then((function(){e.a.removeItem(t)}))},e.$=function(){},e.ea=function(){};var yc,mc,gc={C:uc,Sa:pc},vc={C:uc,Sa:pc},bc={C:Hs,Sa:hc},_c={C:uc,Sa:hc},Ec={$c:"local",NONE:"none",bd:"session"};function Tc(){var t=!(Ir(vr())||!ur()),e=kr(),n=_r();this.m=t,this.h=e,this.l=n,this.a={},yc||(yc=new dc),t=yc;try{this.g=!$n()&&Pr()||!c.indexedDB?new t.a.C:new sc(lr()?new cc:new t.a.C)}catch(t){this.g=new cc,this.h=!0}try{this.i=new t.a.Sa}catch(t){this.i=new cc}this.u=new cc,this.f=k(this.Pb,this),this.b={}}function Sc(){return mc||(mc=new Tc),mc}function kc(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function wc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ac(t,e,n){return n=wc(e,n),"local"==e.C&&(t.b[n]=null),kc(t,e.C).S(n)}function Oc(t){t.c&&(clearInterval(t.c),t.c=null)}function Cc(t){this.a=t,this.b=Sc()}(e=Tc.prototype).get=function(t,e){return kc(this,t.C).get(wc(t,e))},e.set=function(t,e,n){var r=wc(t,n),i=this,o=kc(this,t.C);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.C&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=wc(t,e),this.l&&(this.b[t]=c.localStorage.getItem(t)),J(this.a)&&(kc(this,"local").$(this.f),this.h||($n()||!Pr())&&c.indexedDB||!this.l||function(t){Oc(t),t.c=setInterval((function(){for(var e in t.a){var n=c.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Le({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Pb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=wc(t,e),this.a[t]&&(q(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),J(this.a)&&(kc(this,"local").ea(this.f),Oc(this))},e.Pb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=c.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.Za(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?kc(this,"local").ea(this.f):Oc(this),this.m)if(n=c.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?c.localStorage.setItem(e,r):c.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===c.localStorage.getItem(e)||(o.b[e]=c.localStorage.getItem(e),o.Za(e))},_e&&Ie&&10==Ie&&c.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,k(this.Za,this))},e.Za=function(t){this.a[t]&&U(this.a[t],(function(t){t()}))};var Ic,Nc={name:"authEvent",C:"local"};function Rc(){this.a=Sc()}function Bc(t,e){this.b=Dc,this.f=c.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=c.Int32Array?new Int32Array(64):Array(64),void 0!==Ic||(Ic=c.Int32Array?new Int32Array(Uc):Uc),this.reset()}O(Bc,(function(){this.b=-1}));for(var Dc=64,Pc=Dc-1,xc=[],Mc=0;Mc<Pc;Mc++)xc[Mc]=0;var Lc=W(128,xc);function jc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],c=0|t.a[3],u=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var p=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((u>>>6|u<<26)^(u>>>11|u<<21)^(u>>>25|u<<7))|0)+((a=(a=u&l^~u&h)+(0|Ic[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=u,u=c+a|0,c=s,s=i,i=r,r=a+p|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+c|0,t.a[4]=t.a[4]+u|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function Fc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if(u(e))for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(jc(t),i=0);else{if(!g(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(jc(t),i=0)}}t.c=i,t.g+=n}Bc.prototype.reset=function(){this.g=this.c=0,this.a=c.Int32Array?new Int32Array(this.h):K(this.h)};var Uc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function zc(){Bc.call(this,8,Vc)}O(zc,Bc);var Vc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Hc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.o=i||null,this.h=e+":"+n,this.v=new Rc,this.g=new Cc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Gc(t){return new Zr("invalid-cordova-configuration",t)}function qc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Wc(t){return t.f||(t.f=t.ia().then((function(){return new qt((function(e){t.ya((function n(r){return e(r),t.La(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Kc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=Hi(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Or(kn(o=wn(i),"firebaseError")||null))?$r(o):null)?new To(r.c,r.b,null,null,o,null,r.R()):new To(r.c,r.b,i,r.f,null,null,r.R())),i=o||n}qc(t,i)}))}var n=new To("unknown",null,null,null,new Zr("no-auth-event")),r=!1,i=pn(500).then((function(){return Kc(t).then((function(){r||qc(t,n)}))})),o=c.handleOpenURL;c.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(br("BuildInfo.packageName",c).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ao||(Ao=new ko),function(t){var e=Ao;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=br("universalLinks.subscribe",c))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Kc(t){var e=null;return function(t){return t.b.get(Nc,t.a).then((function(t){return So(t)}))}(t.g).then((function(n){return e=n,Ac((n=t.g).b,Nc,n.a)})).then((function(){return e}))}function Yc(t){this.a=t,this.b=Sc()}(e=Hc.prototype).ia=function(){return this.Ba?this.Ba:this.Ba=(cr(void 0)?sr().then((function(){return new qt((function(t,e){var n=c.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):$t(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof br("universalLinks.subscribe",c))throw Gc("cordova-universal-links-plugin-fix is not installed");if(void 0===br("BuildInfo.packageName",c))throw Gc("cordova-plugin-buildinfo is not installed");if("function"!=typeof br("cordova.plugins.browsertab.openUrl",c))throw Gc("cordova-plugin-browsertab is not installed");if("function"!=typeof br("cordova.InAppBrowser.open",c))throw Gc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new Zr("cordova-not-ready")}))},e.Fb=function(t,e){return e(new Zr("operation-not-supported-in-this-environment")),Zt()},e.Db=function(){return $t(new Zr("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(t,e,n,r){if(this.c)return $t(new Zr("redirect-operation-pending"));var i=this,o=c.document,a=null,s=null,u=null,l=null;return this.c=Zt().then((function(){return Eo(e),Wc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new To(e,r,null,o,new Zr("no-auth-event"),null,i),s=br("BuildInfo.packageName",c);if("string"!=typeof s)throw new Zr("invalid-cordova-configuration");var u=br("BuildInfo.displayName",c),l={};if(vr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=s;else{if(!vr().toLowerCase().match(/android/))return $t(new Zr("operation-not-supported-in-this-environment"));l.apn=s}u&&(l.appDisplayName=u),o=function(t){var e=new zc;Fc(e,t),t=[];var n=8*e.g;56>e.c?Fc(e,Lc,56-e.c):Fc(e,Lc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(jc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=Vs(t.u,t.i,t.l,e,n,null,r,t.m,l,t.o,i);return t.ia().then((function(){var e=t.h;return t.v.a.set(Nc,a.A(),e)})).then((function(){var e=br("cordova.plugins.browsertab.isAvailable",c);if("function"!=typeof e)throw new Zr("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=br("cordova.plugins.browsertab.openUrl",c)))throw new Zr("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=br("cordova.InAppBrowser.open",c)))throw new Zr("invalid-cordova-configuration");e=vr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new qt((function(t,e){s=function(){var e=br("cordova.plugins.browsertab.close",c);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.ya(s),u=function(){a||(a=pn(2e3).then((function(){e(new Zr("redirect-cancelled-by-user"))})))},l=function(){Br()&&u()},o.addEventListener("resume",u,!1),vr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).s((function(t){return Kc(i).then((function(){throw t}))}))})).ka((function(){u&&o.removeEventListener("resume",u,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),s&&i.La(s),i.c=null}))},e.ya=function(t){this.b.push(t),Wc(this).s((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new To("unknown",null,null,null,new Zr("no-auth-event")),t(e))}))},e.La=function(t){q(this.b,(function(e){return e==t}))};var Jc={name:"pendingRedirect",C:"session"};function Qc(t){return Ac(t.b,Jc,t.a)}function Xc(t,e,n){this.i={},this.v=0,this.B=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=k(this.o,this),this.b=new hu,this.w=new mu,this.g=new Yc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=Zc(this.B,this.u,this.m,Oi)}function Zc(t,e,n,i){var o=r.a.SDK_VERSION||null;return cr()?new Hc(t,e,n,o,i):new js(t,e,n,o,i)}function $c(t){t.f||(t.f=!0,t.a.ya(t.l));var e=t.a;return t.a.ia().s((function(n){throw t.a==e&&t.reset(),n}))}function tu(t){t.a.Ob()&&$c(t).s((function(e){var n=new To("unknown",null,null,null,new Zr("operation-not-supported-in-this-environment"));au(e)&&t.o(n)})),t.a.Jb()||pu(t.b)}function eu(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Jc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Qc(t.g).then((function(){$c(t).s((function(e){var n=new To("unknown",null,null,null,new Zr("operation-not-supported-in-this-environment"));au(e)&&t.o(n)}))})):tu(t)})).s((function(){tu(t)}))}function nu(t,e){q(t.h,(function(t){return t==e}))}Xc.prototype.reset=function(){this.f=!1,this.a.La(this.l),this.a=Zc(this.B,this.u,this.m),this.i={}},Xc.prototype.o=function(t){if(!t)throw new Zr("invalid-auth-event");if(6e5<=A()-this.v&&(this.i={},this.v=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.v=A())),e=!0;break}}return pu(this.b),e};var ru=new Rr(2e3,1e4),iu=new Rr(3e4,6e4);function ou(t,e,n,r,i,o,a){return t.a.Db(e,n,r,(function(){t.f||(t.f=!0,t.a.ya(t.l))}),(function(){t.reset()}),i,o,a)}function au(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function su(t,e,n,r,i){var o;return function(t){return t.b.set(Jc,"pending",t.a)}(t.g).then((function(){return t.a.Eb(e,n,r,i).s((function(e){if(au(e))throw new Zr("operation-not-supported-in-this-environment");return o=e,Qc(t.g).then((function(){throw o}))})).then((function(){return t.a.Rb()?new qt((function(){})):Qc(t.g).then((function(){return t.oa()})).then((function(){})).s((function(){}))}))}))}function cu(t,e,n,r,i){return t.a.Fb(r,(function(t){e.ja(n,null,t,i)}),ru.get())}Xc.prototype.oa=function(){return this.b.oa()};var uu={};function lu(t,e,n){var r=e+":"+n;return uu[r]||(uu[r]=new Xc(t,e,n)),uu[r]}function hu(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function pu(t){t.g||(t.g=!0,yu(t,!1,null,null))}function fu(t){t.g&&!t.i&&yu(t,!1,null,null)}function du(t,e){if(t.b=function(){return Zt(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function yu(t,e,n,r){e?r?function(t,e){if(t.b=function(){return $t(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):du(t,n):du(t,{user:null}),t.f=[],t.c=[]}function mu(){}function gu(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(t){this.vb=t},enumerable:!1})}function vu(t,e){this.a=e,Fr(this,"verificationId",t)}function bu(t,e,n,r){return new vo(t).Va(e,n).then((function(t){return new vu(t,r)}))}function _u(t){var e=Ai(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new Zr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ur(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,claims:e})}function Eu(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Tu(t){this.f=t,this.b=this.a=null,this.c=0}function Su(t,e){var n=e[Ba],r=e.refreshToken;e=ku(e.expiresIn),t.b=n,t.c=e,t.a=r}function ku(t){return A()+1e3*parseInt(t,10)}function wu(t,e){this.a=t||null,this.b=e||null,Ur(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function Au(t,e,n,r,i,o){Ur(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Ou(t,e){for(var n in Me.call(this,t),e)this[n]=e[n]}function Cu(t,e,n){this.I=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null,t=r.a.SDK_VERSION?gr(r.a.SDK_VERSION):null,this.a=new Na(this.l,Ii(Oi),t),this.b=new Tu(this.a),xu(this,e[Ba]),Su(this.b,e),Fr(this,"refreshToken",this.b.a),ju(this,n||{}),sn.call(this),this.J=!1,this.o&&Er()&&(this.i=lu(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new Eu((function(){return t.G(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.b.c-A()-3e5;return 0<e?e:0}))}(this),this.W=k(this.Ha,this);var i=this;this.ga=null,this.va=function(t){i.sa(t.g)},this.Z=null,this.P=[],this.ua=function(t){Nu(i,t.c)},this.Y=null}function Iu(t,e){t.Z&&Xe(t.Z,"languageCodeChanged",t.va),(t.Z=e)&&Ye(e,"languageCodeChanged",t.va)}function Nu(t,e){t.P=e,ja(t.a,r.a.SDK_VERSION?gr(r.a.SDK_VERSION,t.P):null)}function Ru(t,e){t.Y&&Xe(t.Y,"frameworkChanged",t.ua),(t.Y=e)&&Ye(e,"frameworkChanged",t.ua)}function Bu(t){try{return r.a.app(t.m).auth()}catch(e){throw new Zr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Du(t){t.B||t.w.b||(t.w.start(),Xe(t,"tokenChanged",t.W),Ye(t,"tokenChanged",t.W))}function Pu(t){Xe(t,"tokenChanged",t.W),t.w.stop()}function xu(t,e){t.ma=e,Fr(t,"_lat",e)}function Mu(t){for(var e=[],n=0;n<t.O.length;n++)e.push(t.O[n](t));return ee(e).then((function(){return t}))}function Lu(t){t.i&&!t.J&&(t.J=!0,eu(t.i,t))}function ju(t,e){Ur(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new wu(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Fu(){}function Uu(t){return Zt().then((function(){if(t.B)throw new Zr("app-deleted")}))}function zu(t){return z(t.providerData,(function(t){return t.providerId}))}function Vu(t,e){e&&(Hu(t,e.providerId),t.providerData.push(e))}function Hu(t,e){q(t.providerData,(function(t){return t.providerId==e}))}function Gu(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Fr(t,e,n)}function qu(t,e){t!=e&&(Ur(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Fr(t,"metadata",function(t){return new wu(t.a,t.b)}(e.metadata)):Fr(t,"metadata",new wu),U(e.providerData,(function(e){Vu(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.b,e.b),Fr(t,"refreshToken",t.b.a))}function Wu(t){return t.G().then((function(e){var n=t.isAnonymous;return function(t,e){return Os(t.a,cs,{idToken:e}).then(k(t.zc,t))}(t,e).then((function(){return n||Gu(t,"isAnonymous",!1),e}))}))}function Ku(t,e){e[Ba]&&t.ma!=e[Ba]&&(Su(t.b,e),t.dispatchEvent(new Ou("tokenChanged")),xu(t,e[Ba]),Gu(t,"refreshToken",t.b.a))}function Yu(t,e){return Wu(t).then((function(){if(H(zu(t),e))return Mu(t).then((function(){throw new Zr("provider-already-linked")}))}))}function Ju(t,e,n){return zr({user:t,credential:_o(e),additionalUserInfo:e=Pi(e),operationType:n})}function Qu(t,e){return Ku(t,e),t.reload().then((function(){return t}))}function Xu(t,e,n,i,o){if(!Er())return $t(new Zr("operation-not-supported-in-this-environment"));if(t.h&&!o)return $t(t.h);var a=Di(n.providerId),s=Cr(t.uid+":::"),c=null;(!kr()||ur())&&t.o&&n.isOAuthProvider&&(c=Vs(t.o,t.l,t.m,e,n,null,s,r.a.SDK_VERSION||null,null,null,t.tenantId));var u=ir(c,a&&a.Da,a&&a.Ca);return i=i().then((function(){if($u(t),!o)return t.G().then((function(){}))})).then((function(){return ou(t.i,u,e,n,s,!!c,t.tenantId)})).then((function(){return new qt((function(n,r){t.ja(e,null,new Zr("cancelled-popup-request"),t.g||null),t.f=n,t.v=r,t.g=s,t.c=cu(t.i,t,e,u,s)}))})).then((function(t){return u&&rr(u),t?zr(t):null})).s((function(t){throw u&&rr(u),t})),tl(t,i,o)}function Zu(t,e,n,r,i){if(!Er())return $t(new Zr("operation-not-supported-in-this-environment"));if(t.h&&!i)return $t(t.h);var o=null,a=Cr(t.uid+":::");return r=r().then((function(){if($u(t),!i)return t.G().then((function(){}))})).then((function(){return t.ca=a,Mu(t)})).then((function(e){return t.da&&(e=(e=t.da).b.set(rl,t.A(),e.a)),e})).then((function(){return su(t.i,e,n,a,t.tenantId)})).s((function(e){if(o=e,t.da)return il(t.da);throw o})).then((function(){if(o)throw o})),tl(t,r,i)}function $u(t){if(!t.i||!t.J){if(t.i&&!t.J)throw new Zr("internal-error");throw new Zr("auth-domain-config-required")}}function tl(t,e,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),$t(t.h)):e.s((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Ou("userInvalidated")),t.h=e),e}))}(t,e,n);return t.I.push(r),r.ka((function(){G(t.I,r)})),r}function el(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!(t.stsTokenManager&&t.stsTokenManager.accessToken&&t.stsTokenManager.expirationTime))return null;n[Ba]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null,n.expiresIn=(t.stsTokenManager.expirationTime-A())/1e3;var r=new Cu(e,n,t);return t.providerData&&U(t.providerData,(function(t){t&&Vu(r,zr(t))})),t.redirectEventId&&(r.ca=t.redirectEventId),r}function nl(t){this.a=t,this.b=Sc()}hu.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},hu.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(yu(this,!0,null,t.a),Zt()):e.za(n,r)?function(t,e,n){n=n.za(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.R(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){yu(t,s,e,null)})).s((function(e){yu(t,s,null,e)}))}(this,t,e):$t(new Zr("invalid-auth-event")):(yu(this,!1,null,null),Zt())}else $t(new Zr("invalid-auth-event"))},hu.prototype.oa=function(){var t=this;return new qt((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new Zr("timeout");t.a&&t.a.cancel(),t.a=pn(iu.get()).then((function(){t.b||(t.g=!0,yu(t,!0,null,e))}))}(t))}))},mu.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.ja(t.c,null,t.a,t.b),Zt()):e.za(n,r)?function(t,e){var n=t.b,r=t.c;e.za(r,n)(t.g,t.f,t.R(),t.i).then((function(t){e.ja(r,t,null,n)})).s((function(t){e.ja(r,null,t,n)}))}(t,e):$t(new Zr("invalid-auth-event"))}else $t(new Zr("invalid-auth-event"))},vu.prototype.confirm=function(t){return t=bo(this.verificationId,t),this.a(t)},Eu.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=pn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=c.document,e=null;return Br()||!t?Zt():new qt((function(n){e=function(){Br()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).s((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).s((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},Eu.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Tu.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Tu.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?$t(new Zr("user-token-expired")):t||!this.b||A()>this.c-3e4?this.a?function(t,e){return function(t,e){return new qt((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?Fa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Is(t)):t.access_token&&t.refresh_token?n(t):r(new Zr("internal-error")):r(new Zr("network-request-failed"))}),"POST",Ln(e).toString(),t.g,t.u.get()):r(new Zr("internal-error"))}))}(t.f,e).then((function(e){return t.b=e.access_token,t.c=ku(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}})).s((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Zt(null):Zt({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},wu.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},O(Ou,Me),O(Cu,sn),Cu.prototype.sa=function(t){this.ga=t,La(this.a,t)},Cu.prototype.ha=function(){return this.ga},Cu.prototype.Aa=function(){return K(this.P)},Cu.prototype.Ha=function(){this.w.b&&(this.w.stop(),this.w.start())},Fr(Cu.prototype,"providerId","firebase"),(e=Cu.prototype).reload=function(){var t=this;return tl(this,Uu(this).then((function(){return Wu(t).then((function(){return Mu(t)})).then(Fu)})))},e.dc=function(t){return this.G(t).then((function(t){return new _u(t)}))},e.G=function(t){var e=this;return tl(this,Uu(this).then((function(){return e.b.getToken(t)})).then((function(t){if(!t)throw new Zr("internal-error");return t.accessToken!=e.ma&&(xu(e,t.accessToken),e.dispatchEvent(new Ou("tokenChanged"))),Gu(e,"refreshToken",t.refreshToken),t.accessToken})))},e.zc=function(t){if(!(t=t.users)||!t.length)throw new Zr("internal-error");ju(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new Au(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Vu(this,e[n]);Gu(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(t){return Lr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.gb(t)},e.gb=function(t){var e=this,n=null;return tl(this,t.f(this.a,this.uid).then((function(t){return Ku(e,t),n=Ju(e,t,"reauthenticate"),e.h=null,e.reload()})).then((function(){return n})),!0)},e.rc=function(t){return Lr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.eb(t)},e.eb=function(t){var e=this,n=null;return tl(this,Yu(this,t.providerId).then((function(){return e.G()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Ju(e,t,"link"),Qu(e,t)})).then((function(){return n})))},e.sc=function(t,e){var n=this;return tl(this,Yu(this,"phone").then((function(){return bu(Bu(n),t,e,k(n.eb,n))})))},e.Bc=function(t,e){var n=this;return tl(this,Zt().then((function(){return bu(Bu(n),t,e,k(n.gb,n))})),!0)},e.rb=function(t){var e=this;return tl(this,this.G().then((function(n){return e.a.rb(n,t)})).then((function(t){return Ku(e,t),e.reload()})))},e.Sc=function(t){var e=this;return tl(this,this.G().then((function(n){return t.b(e.a,n)})).then((function(t){return Ku(e,t),e.reload()})))},e.sb=function(t){var e=this;return tl(this,this.G().then((function(n){return e.a.sb(n,t)})).then((function(t){return Ku(e,t),e.reload()})))},e.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Uu(this);var e=this;return tl(this,this.G().then((function(n){return e.a.tb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Ku(e,t),Gu(e,"displayName",t.displayName||null),Gu(e,"photoURL",t.photoUrl||null),U(e.providerData,(function(t){"password"===t.providerId&&(Fr(t,"displayName",e.displayName),Fr(t,"photoURL",e.photoURL))})),Mu(e)})).then(Fu))},e.Qc=function(t){var e=this;return tl(this,Wu(this).then((function(n){return H(zu(e),t)?function(t,e,n){return Os(t,os,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return U(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),U(zu(e),(function(t){n[t]||Hu(e,t)})),n[vo.PROVIDER_ID]||Fr(e,"phoneNumber",null),Mu(e)})):Mu(e).then((function(){throw new Zr("no-such-provider")}))})))},e.delete=function(){var t=this;return tl(this,this.G().then((function(e){return Os(t.a,is,{idToken:e})})).then((function(){t.dispatchEvent(new Ou("userDeleted"))}))).then((function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Iu(t,null),Ru(t,null),t.I=[],t.B=!0,Pu(t),Fr(t,"refreshToken",null),t.i&&nu(t.i,t)}))},e.xb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ca||null)==e||"reauthViaRedirect"==t&&(this.ca||null)==e)},e.ja=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?k(this.Bb,this):"reauthViaPopup"==t&&e==(this.g||null)?k(this.Cb,this):"linkViaRedirect"==t&&(this.ca||null)==e?k(this.Bb,this):"reauthViaRedirect"==t&&(this.ca||null)==e?k(this.Cb,this):null},e.tc=function(t){var e=this;return Xu(this,"linkViaPopup",t,(function(){return Yu(e,t.providerId).then((function(){return Mu(e)}))}),!1)},e.Cc=function(t){return Xu(this,"reauthViaPopup",t,(function(){return Zt()}),!0)},e.uc=function(t){var e=this;return Zu(this,"linkViaRedirect",t,(function(){return Yu(e,t.providerId)}),!1)},e.Dc=function(t){return Zu(this,"reauthViaRedirect",t,(function(){return Zt()}),!0)},e.Bb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,this.G().then((function(n){return Xa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Ju(i,t,"link"),Qu(i,t)})).then((function(){return o})))},e.Cb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return tl(this,Zt().then((function(){return qi(Za(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Ju(i,t,"reauthenticate"),Ku(i,t),i.h=null,i.reload()})).then((function(){return o})),!0)},e.jb=function(t){var e=this,n=null;return tl(this,this.G().then((function(e){return n=e,void 0===t||J(t)?{}:Ei(new hi(t))})).then((function(t){return e.a.jb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.toJSON=function(){return this.A()},e.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&Z(t,this.metadata.A()),U(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),t};var rl={name:"redirectUser",C:"session"};function il(t){return Ac(t.b,rl,t.a)}function ol(t){this.a=t,this.b=Sc(),this.c=null,this.f=function(t){var e=cl("local"),n=cl("session"),r=cl("none");return function(t,e,n){var r=wc(e,n),i=kc(t,e.C);return t.get(e,n).then((function(o){var a=null;try{a=Or(c.localStorage.getItem(r))}catch(t){}if(a&&!o)return c.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&c.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(sl,t.a).then((function(t){return t?cl(t):e}))}))}))})).then((function(e){return t.c=e,al(t,e.C)})).s((function(){t.c||(t.c=e)}))}(this),this.b.addListener(cl("local"),this.a,k(this.g,this))}function al(t,e){var n,r=[];for(n in Ec)Ec[n]!==e&&r.push(Ac(t.b,cl(Ec[n]),t.a));return r.push(Ac(t.b,sl,t.a)),function(t){return new qt((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)te(t[s],w(o,s),a);else e(i)}))}(r)}ol.prototype.g=function(){var t=this,e=cl("local");pl(this,(function(){return Zt().then((function(){return t.c&&"local"!=t.c.C?t.b.get(e,t.a):null})).then((function(n){if(n)return al(t,"local").then((function(){t.c=e}))}))}))};var sl={name:"persistence",C:"session"};function cl(t){return{name:"authUser",C:t}}function ul(t,e){return pl(t,(function(){return t.b.set(t.c,e.A(),t.a)}))}function ll(t){return pl(t,(function(){return Ac(t.b,t.c,t.a)}))}function hl(t,e){return pl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}))}function pl(t,e){return t.f=t.f.then(e,e),t.f}function fl(t){if(this.l=!1,Fr(this,"settings",new gu),Fr(this,"app",t),!El(this).options||!El(this).options.apiKey)throw new Zr("invalid-api-key");t=r.a.SDK_VERSION?gr(r.a.SDK_VERSION):null,this.b=new Na(El(this).options&&El(this).options.apiKey,Ii(Oi),t),this.O=[],this.m=[],this.J=[],this.Ub=r.a.INTERNAL.createSubscribe(k(this.oc,this)),this.W=void 0,this.Vb=r.a.INTERNAL.createSubscribe(k(this.pc,this)),bl(this,null),this.h=new ol(El(this).options.apiKey+":"+El(this).name),this.w=new nl(El(this).options.apiKey+":"+El(this).name),this.Y=wl(this,function(t){var e=El(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(rl,t.a).then((function(t){return t&&e&&(t.authDomain=e),el(t||{})}))}(t.w,El(t).options.authDomain).then((function(e){return(t.B=e)&&(e.da=t.w),il(t.w)}));return wl(t,e)}(t).then((function(){return hl(t.h,e)})).then((function(e){return e?(e.da=t.w,t.B&&(t.B.ca||null)==(e.ca||null)?e:e.reload().then((function(){return ul(t.h,e).then((function(){return e}))})).s((function(n){return"auth/network-request-failed"==n.code?e:ll(t.h)}))):null})).then((function(e){bl(t,e||null)}));return wl(t,n)}(this)),this.i=wl(this,function(t){return t.Y.then((function(){return gl(t)})).s((function(){})).then((function(){if(!t.l)return t.ma()})).s((function(){})).then((function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(cl("local"),e.a,t.ma)}}))}(this)),this.ga=!1,this.ma=k(this.Nc,this),this.ub=k(this.aa,this),this.ua=k(this.bc,this),this.va=k(this.mc,this),this.Ha=k(this.nc,this),this.a=null,function(t){var e=El(t).options.authDomain,n=El(t).options.apiKey;e&&Er()&&(t.Tb=t.Y.then((function(){if(!t.l){if(t.a=lu(e,n,El(t).name),eu(t.a,t),Tl(t)&&Lu(Tl(t)),t.B){Lu(t.B);var r=t.B;r.sa(t.ha()),Iu(r,t),Nu(r=t.B,t.I),Ru(r,t),t.B=null}return t.a}})))}(this),this.INTERNAL={},this.INTERNAL.delete=k(this.delete,this),this.INTERNAL.logFramework=k(this.vc,this),this.o=0,sn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.ha()},set:function(t){this.sa(t)},enumerable:!1}),t.Z=null,Object.defineProperty(t,"ti",{get:function(){return this.R()},set:function(t){this.nb(t)},enumerable:!1}),t.P=null}(this),this.I=[]}function dl(t){Me.call(this,"languageCodeChanged"),this.g=t}function yl(t){Me.call(this,"frameworkChanged"),this.c=t}function ml(t){return t.Tb||$t(new Zr("auth-domain-config-required"))}function gl(t){if(!Er())return $t(new Zr("operation-not-supported-in-this-environment"));var e=ml(t).then((function(){return t.a.oa()})).then((function(t){return t?zr(t):null}));return wl(t,e)}function vl(t,e){var n={};return n.apiKey=El(t).options.apiKey,n.authDomain=El(t).options.authDomain,n.appName=El(t).name,t.Y.then((function(){return function(t,e,n,r){var i=new Cu(t,e);return n&&(i.da=n),r&&Nu(i,r),i.reload().then((function(){return i}))}(n,e,t.w,t.Aa())})).then((function(e){return Tl(t)&&e.uid==Tl(t).uid?(qu(Tl(t),e),t.aa(e)):(bl(t,e),Lu(e),t.aa(e))})).then((function(){kl(t)}))}function bl(t,e){Tl(t)&&(function(t,e){q(t.O,(function(t){return t==e}))}(Tl(t),t.ub),Xe(Tl(t),"tokenChanged",t.ua),Xe(Tl(t),"userDeleted",t.va),Xe(Tl(t),"userInvalidated",t.Ha),Pu(Tl(t))),e&&(e.O.push(t.ub),Ye(e,"tokenChanged",t.ua),Ye(e,"userDeleted",t.va),Ye(e,"userInvalidated",t.Ha),0<t.o&&Du(e)),Fr(t,"currentUser",e),e&&(e.sa(t.ha()),Iu(e,t),Nu(e,t.I),Ru(e,t))}function _l(t,e){var n=null,r=null;return wl(t,e.then((function(e){return n=_o(e),r=Pi(e),vl(t,e)})).then((function(){return zr({user:Tl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function El(t){return t.app}function Tl(t){return t.currentUser}function Sl(t){return Tl(t)&&Tl(t)._lat||null}function kl(t){if(t.ga){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](Sl(t));if(t.W!==t.getUid()&&t.J.length)for(t.W=t.getUid(),e=0;e<t.J.length;e++)t.J[e]&&t.J[e](Sl(t))}}function wl(t,e){return t.O.push(e),e.ka((function(){G(t.O,e)})),e}function Al(){}function Ol(){this.a={},this.b=1e12}ol.prototype.mb=function(t){var e=null,n=this;return function(t){var e=new Zr("invalid-persistence-type"),n=new Zr("unsupported-persistence-type");t:{for(r in Ec)if(Ec[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(hr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!_r()&&"none"!==t)throw n}}(t),pl(this,(function(){return t!=n.c.C?n.b.get(n.c,n.a).then((function(r){return e=r,al(n,t)})).then((function(){if(n.c=cl(t),e)return n.b.set(n.c,e,n.a)})):Zt()}))},O(fl,sn),O(dl,Me),O(yl,Me),(e=fl.prototype).mb=function(t){return wl(this,t=this.h.mb(t))},e.sa=function(t){this.Z===t||this.l||(this.Z=t,La(this.b,this.Z),this.dispatchEvent(new dl(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var t=c.navigator;this.sa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.vc=function(t){this.I.push(t),ja(this.b,r.a.SDK_VERSION?gr(r.a.SDK_VERSION,this.I):null),this.dispatchEvent(new yl(this.I))},e.Aa=function(){return K(this.I)},e.nb=function(t){this.P===t||this.l||(this.P=t,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:El(this).options.apiKey,authDomain:El(this).options.authDomain,appName:El(this).name,currentUser:Tl(this)&&Tl(this).A()}},e.xb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},e.ja=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.v?this.v(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.za=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?k(this.ac,this):null},e.ac=function(t,e,n,r){var i=this;t={requestUri:t,postBody:r,sessionId:e,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=Qa(i.b,t).then((function(t){return o=_o(t),a=Pi(t),t}));return wl(this,t=i.Y.then((function(){return s})).then((function(t){return vl(i,t)})).then((function(){return zr({user:Tl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})})))},e.Lc=function(t){if(!Er())return $t(new Zr("operation-not-supported-in-this-environment"));var e=this,n=Di(t.providerId),i=Cr(),o=null;(!kr()||ur())&&El(this).options.authDomain&&t.isOAuthProvider&&(o=Vs(El(this).options.authDomain,El(this).options.apiKey,El(this).name,"signInViaPopup",t,null,i,r.a.SDK_VERSION||null,null,null,this.R()));var a=ir(o,n&&n.Da,n&&n.Ca);return wl(this,n=ml(this).then((function(n){return ou(n,a,"signInViaPopup",t,i,!!o,e.R())})).then((function(){return new qt((function(t,n){e.ja("signInViaPopup",null,new Zr("cancelled-popup-request"),e.g),e.f=t,e.v=n,e.g=i,e.c=cu(e.a,e,"signInViaPopup",a,i)}))})).then((function(t){return a&&rr(a),t?zr(t):null})).s((function(t){throw a&&rr(a),t})))},e.Mc=function(t){if(!Er())return $t(new Zr("operation-not-supported-in-this-environment"));var e=this;return wl(this,ml(this).then((function(){return function(t){return pl(t,(function(){return t.b.set(sl,t.c.C,t.a)}))}(e.h)})).then((function(){return su(e.a,"signInViaRedirect",t,void 0,e.R())})))},e.oa=function(){var t=this;return gl(this).then((function(e){return t.a&&fu(t.a.b),e})).s((function(e){throw t.a&&fu(t.a.b),e}))},e.Rc=function(t){if(!t)return $t(new Zr("null-user"));if(this.P!=t.tenantId)return $t(new Zr("tenant-id-mismatch"));var e=this,n={};n.apiKey=El(this).options.apiKey,n.authDomain=El(this).options.authDomain,n.appName=El(this).name;var r=function(t,e,n,r){e=e||{apiKey:t.l,authDomain:t.o,appName:t.m};var i=t.b,o={};return o[Ba]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-A())/1e3,e=new Cu(e,o),n&&(e.da=n),r&&Nu(e,r),qu(e,t),e}(t,n,e.w,e.Aa());return wl(this,this.i.then((function(){if(El(e).options.apiKey!=t.l)return r.reload()})).then((function(){return Tl(e)&&t.uid==Tl(e).uid?(qu(Tl(e),t),e.aa(t)):(bl(e,r),Lu(r),e.aa(r))})).then((function(){kl(e)})))},e.pb=function(){var t=this;return wl(this,this.i.then((function(){return t.a&&fu(t.a.b),Tl(t)?(bl(t,null),ll(t.h).then((function(){kl(t)}))):Zt()})))},e.Nc=function(){var t=this;return hl(this.h,El(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=Tl(t)&&e){n=Tl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return qu(Tl(t),e),Tl(t).G();(Tl(t)||e)&&(bl(t,e),e&&(Lu(e),e.da=t.w),t.a&&eu(t.a,t),kl(t))}}))},e.aa=function(t){return ul(this.h,t)},e.bc=function(){kl(this),this.aa(Tl(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(Tl(e))}))},e.pc=function(t){var e=this;!function(t,e){t.J.push(e),wl(t,t.i.then((function(){!t.l&&H(t.J,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(Sl(t)))})))}(this,(function(){t.next(Tl(e))}))},e.xc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){v(t)?t(Tl(r)):v(t.next)&&t.next(Tl(r))})),this.Ub(t,e,n)},e.wc=function(t,e,n){var r=this;return this.ga&&Promise.resolve().then((function(){r.W=r.getUid(),v(t)?t(Tl(r)):v(t.next)&&t.next(Tl(r))})),this.Vb(t,e,n)},e.cc=function(t){var e=this;return wl(this,this.i.then((function(){return Tl(e)?Tl(e).G(t).then((function(t){return{accessToken:t}})):null})))},e.Hc=function(t){var e=this;return this.i.then((function(){return _l(e,Os(e.b,Ts,{token:t}))})).then((function(t){var n=t.user;return Gu(n,"isAnonymous",!1),e.aa(n),t}))},e.Ic=function(t,e){var n=this;return this.i.then((function(){return _l(n,Os(n.b,Ss,{email:t,password:e}))}))},e.Xb=function(t,e){var n=this;return this.i.then((function(){return _l(n,Os(n.b,ns,{email:t,password:e}))}))},e.Ra=function(t){var e=this;return this.i.then((function(){return _l(e,t.na(e.b))}))},e.Gc=function(t){return Lr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ra(t)},e.ob=function(){var t=this;return this.i.then((function(){var e=Tl(t);if(e&&e.isAnonymous){var n=zr({providerId:null,isNewUser:!1});return zr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return _l(t,t.b.ob()).then((function(e){var n=e.user;return Gu(n,"isAnonymous",!0),t.aa(n),e}))}))},e.getUid=function(){return Tl(this)&&Tl(this).uid||null},e.Wb=function(t){this.addAuthTokenListener(t),this.o++,0<this.o&&Tl(this)&&Du(Tl(this))},e.Ec=function(t){var e=this;U(this.m,(function(n){n==t&&e.o--})),0>this.o&&(this.o=0),0==this.o&&Tl(this)&&Pu(Tl(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.m.push(t),wl(this,this.i.then((function(){e.l||H(e.m,t)&&t(Sl(e))})))},e.removeAuthTokenListener=function(t){q(this.m,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.O.length;t++)this.O[t].cancel("app-deleted");return this.O=[],this.h&&(t=this.h).b.removeListener(cl("local"),t.a,this.ma),this.a&&(nu(this.a,this),fu(this.a.b)),Promise.resolve()},e.$b=function(t){return wl(this,function(t,e){return Os(t,rs,{identifier:e,continueUri:Tr()?tr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.b,t))},e.qc=function(t){return!!fo(t)},e.lb=function(t,e){var n=this;return wl(this,Zt().then((function(){var t=new hi(e);if(!t.c)throw new Zr("argument-error",di+" must be true when sending sign in link to email");return Ei(t)})).then((function(e){return n.b.lb(t,e)})).then((function(){})))},e.Uc=function(t){return this.Ka(t).then((function(t){return t.data.email}))},e.$a=function(t,e){return wl(this,this.b.$a(t,e).then((function(){})))},e.Ka=function(t){return wl(this,this.b.Ka(t).then((function(t){return new Hr(t)})))},e.Xa=function(t){return wl(this,this.b.Xa(t).then((function(){})))},e.kb=function(t,e){var n=this;return wl(this,Zt().then((function(){return void 0===e||J(e)?{}:Ei(new hi(e))})).then((function(e){return n.b.kb(t,e)})).then((function(){})))},e.Kc=function(t,e){return wl(this,bu(this,t,e,k(this.Ra,this)))},e.Jc=function(t,e){var n=this;return wl(this,Zt().then((function(){var r=e||tr(),i=po(t,r);if(!(r=fo(r)))throw new Zr("argument-error","Invalid email link!");if(r.tenantId!==n.R())throw new Zr("tenant-id-mismatch");return n.Ra(i)})))},Al.prototype.render=function(){},Al.prototype.reset=function(){},Al.prototype.getResponse=function(){},Al.prototype.execute=function(){};var Cl=null;function Il(t,e){return(e=Nl(e))&&t.a[e]||null}function Nl(t){return(t=void 0===t?1e12:t)?t.toString():null}function Rl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=Gn(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Ye(this.f,"click",this.i)}function Bl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Dl(){}Ol.prototype.render=function(t,e){return this.a[this.b.toString()]=new Rl(t,e),this.b++},Ol.prototype.reset=function(t){var e=Il(this,t);t=Nl(t),e&&t&&(e.delete(),delete this.a[t])},Ol.prototype.getResponse=function(t){return(t=Il(this,t))?t.getResponse():null},Ol.prototype.execute=function(t){(t=Il(this,t))&&t.execute()},Rl.prototype.getResponse=function(){return Bl(this),this.b},Rl.prototype.execute=function(){Bl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Rl.prototype.delete=function(){Bl(this),this.g=!0,clearTimeout(this.a),this.a=null,Xe(this.f,"click",this.i)},Dl.prototype.g=function(){return Cl||(Cl=new Ol),Zt(Cl)},Dl.prototype.c=function(){};var Pl=null;function xl(){this.b=c.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Ml=new $(nt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Ll=new Rr(3e4,6e4);xl.prototype.g=function(t){var e=this;return new qt((function(n,r){var i=setTimeout((function(){r(new Zr("network-request-failed"))}),Ll.get());!c.grecaptcha||t!==e.f&&!e.b?(c[e.a]=function(){if(c.grecaptcha){e.f=t;var o=c.grecaptcha.render;c.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(c.grecaptcha)}else clearTimeout(i),r(new Zr("internal-error"));delete c[e.a]},Zt(Sa(at(Ml,{onload:e.a,hl:t||""}))).s((function(){clearTimeout(i),r(new Zr("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(c.grecaptcha))}))},xl.prototype.c=function(){this.b--};var jl=null;function Fl(t,e,n,r,i,o,a){if(Fr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=e,this.g=null,a?(Pl||(Pl=new Dl),a=Pl):(jl||(jl=new xl),a=jl),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vl])throw new Zr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Hl],!c.document)throw new Zr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!Gn(e)||!this.i&&Gn(e).hasChildNodes())throw new Zr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Na(t,o||null,i||null),this.v=r||function(){return null};var s=this;this.l=[];var u=this.a[Ul];this.a[Ul]=function(t){if(Gl(s,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=br(u,c);"function"==typeof e&&e(t)}};var l=this.a[zl];this.a[zl]=function(){if(Gl(s,null),"function"==typeof l)l();else if("string"==typeof l){var t=br(l,c);"function"==typeof t&&t()}}}var Ul="callback",zl="expired-callback",Vl="sitekey",Hl="size";function Gl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function ql(t,e){return t.h.push(e),e.ka((function(){G(t.h,e)})),e}function Wl(t){if(t.B)throw new Zr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kl(t,e,n){var i=!1;try{this.b=n||r.a.app()}catch(t){throw new Zr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Zr("invalid-api-key");n=this.b.options.apiKey;var o=this,a=null;try{a=this.b.auth().Aa()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}a=r.a.SDK_VERSION?gr(r.a.SDK_VERSION,a):null,Fl.call(this,n,t,e,(function(){try{var t=o.b.auth().ha()}catch(e){t=null}return t}),a,Ii(Oi),i)}function Yl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new Zr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].N(n[i])&&!o){if(e=e[i],0>i||i>=Jl.length)throw new Zr("internal-error","Argument validator received an unsupported number of arguments.");n=Jl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.M+".";break t}r=null}}if(r)throw new Zr("argument-error",t+" failed: "+r)}(e=Fl.prototype).Ba=function(){var t=this;return this.f?this.f:this.f=ql(this,Zt().then((function(){if(Tr()&&!lr())return sr();throw new Zr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.v())})).then((function(e){return t.g=e,Os(t.o,fs,{})})).then((function(e){t.a[Vl]=e.recaptchaSiteKey})).s((function(e){throw t.f=null,e})))},e.render=function(){Wl(this);var t=this;return ql(this,this.Ba().then((function(){if(null===t.c){var e=t.u;if(!t.i){var n=Gn(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Hn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Ft(a.name),'"'),a.type){o.push(' type="',Ft(a.type),'"');var s={};Z(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(u(a)?o.className=a:m(a)?o.className=a.join(" "):qn(o,a)),2<r.length&&function(t,e,n){function r(n){n&&e.appendChild(u(n)?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];!g(o)||b(o)&&0<o.nodeType?r(o):U(Kn(o)?K(o):o,r)}}(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Wl(this);var t=this;return ql(this,this.render().then((function(e){return new qt((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){q(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){Wl(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Wl(this),this.B=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=Gn(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},O(Kl,Fl);var Jl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Ql(t,e){return{name:t||"",M:"a valid string",optional:!!e,N:u}}function Xl(t,e){return{name:t||"",M:"a boolean",optional:!!e,N:l}}function Zl(t,e){return{name:t||"",M:"a valid object",optional:!!e,N:b}}function $l(t,e){return{name:t||"",M:"a function",optional:!!e,N:v}}function th(t,e){return{name:t||"",M:"null",optional:!!e,N:y}}function eh(t){return{name:t?t+"Credential":"credential",M:t?"a valid "+t+" credential":"a valid credential",optional:!1,N:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.na||!n)}}}function nh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(t){return!!(t&&u(t.type)&&v(t.verify))}}}function rh(t,e,n,r){return{name:n||"",M:t.M+" or "+e.M,optional:!!r,N:function(n){return t.N(n)||e.N(n)}}}function ih(t,e){for(var n in e){var r=e[n].name;t[r]=sh(r,t[n],e[n].j)}}function oh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Yl(t,[n],[r],!0),this[e]=r}),r,n,e[n].Ya),enumerable:!0})}}function ah(t,e,n,r){t[e]=sh(e,n,r)}function sh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Yl(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ih(fl.prototype,{Xa:{name:"applyActionCode",j:[Ql("code")]},Ka:{name:"checkActionCode",j:[Ql("code")]},$a:{name:"confirmPasswordReset",j:[Ql("code"),Ql("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[Ql("email"),Ql("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[Ql("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[Ql("emailLink")]},wc:{name:"onAuthStateChanged",j:[rh(Zl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[rh(Zl(),$l(),"nextOrObserver"),$l("opt_error",!0),$l("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[Ql("email"),rh(Zl("opt_actionCodeSettings",!0),th(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[Ql("email"),Zl("actionCodeSettings")]},mb:{name:"setPersistence",j:[Ql("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[eh()]},ob:{name:"signInAnonymously",j:[]},Ra:{name:"signInWithCredential",j:[eh()]},Hc:{name:"signInWithCustomToken",j:[Ql("token")]},Ic:{name:"signInWithEmailAndPassword",j:[Ql("email"),Ql("password")]},Jc:{name:"signInWithEmailLink",j:[Ql("email"),Ql("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[Ql("phoneNumber"),nh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[rh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(t){return!!(t&&t instanceof Cu)}},th(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Ql(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[Ql("code")]}}),oh(fl.prototype,{lc:{name:"languageCode",Ya:rh(Ql(),th(),"languageCode")},ti:{name:"tenantId",Ya:rh(Ql(),th(),"tenantId")}}),fl.Persistence=Ec,fl.Persistence.LOCAL="local",fl.Persistence.SESSION="session",fl.Persistence.NONE="none",ih(Cu.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[Xl("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[Xl("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[eh()]},eb:{name:"linkWithCredential",j:[eh()]},sc:{name:"linkWithPhoneNumber",j:[Ql("phoneNumber"),nh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[eh()]},gb:{name:"reauthenticateWithCredential",j:[eh()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[Ql("phoneNumber"),nh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[rh(Zl("opt_actionCodeSettings",!0),th(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Ql(null,!0)]},Qc:{name:"unlink",j:[Ql("provider")]},rb:{name:"updateEmail",j:[Ql("email")]},sb:{name:"updatePassword",j:[Ql("password")]},Sc:{name:"updatePhoneNumber",j:[eh("phone")]},tb:{name:"updateProfile",j:[Zl("profile")]}}),ih(Ol.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ih(Al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ih(qt.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),oh(gu.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Ya:Xl("appVerificationDisabledForTesting")}}),ih(vu.prototype,{confirm:{name:"confirm",j:[Ql("verificationCode")]}}),ah(Gi,"fromJSON",(function(t){t=u(t)?JSON.parse(t):t;for(var e,n=[Xi,lo,mo,Yi],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[rh(Ql(),Zl(),"json")]),ah(ho,"credential",(function(t,e){return new uo(t,e)}),[Ql("email"),Ql("password")]),ih(uo.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),ih(eo.prototype,{wa:{name:"addScope",j:[Ql("scope")]},Ea:{name:"setCustomParameters",j:[Zl("customOAuthParameters")]}}),ah(eo,"credential",no,[rh(Ql(),Zl(),"token")]),ah(ho,"credentialWithLink",po,[Ql("email"),Ql("emailLink")]),ih(ro.prototype,{wa:{name:"addScope",j:[Ql("scope")]},Ea:{name:"setCustomParameters",j:[Zl("customOAuthParameters")]}}),ah(ro,"credential",io,[rh(Ql(),Zl(),"token")]),ih(oo.prototype,{wa:{name:"addScope",j:[Ql("scope")]},Ea:{name:"setCustomParameters",j:[Zl("customOAuthParameters")]}}),ah(oo,"credential",ao,[rh(Ql(),rh(Zl(),th()),"idToken"),rh(Ql(),th(),"accessToken",!0)]),ih(so.prototype,{Ea:{name:"setCustomParameters",j:[Zl("customOAuthParameters")]}}),ah(so,"credential",co,[rh(Ql(),Zl(),"token"),Ql("secret",!0)]),ih(to.prototype,{wa:{name:"addScope",j:[Ql("scope")]},credential:{name:"credential",j:[rh(Ql(),rh(Zl(),th()),"optionsOrIdToken"),rh(Ql(),th(),"accessToken",!0)]},Ea:{name:"setCustomParameters",j:[Zl("customOAuthParameters")]}}),ih(Ji.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),ih(Wi.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),ah(vo,"credential",bo,[Ql("verificationId"),Ql("verificationCode")]),ih(vo.prototype,{Va:{name:"verifyPhoneNumber",j:[Ql("phoneNumber"),nh()]}}),ih(yo.prototype,{A:{name:"toJSON",j:[Ql(null,!0)]}}),ih(Zr.prototype,{toJSON:{name:"toJSON",j:[Ql(null,!0)]}}),ih(Co.prototype,{toJSON:{name:"toJSON",j:[Ql(null,!0)]}}),ih(Oo.prototype,{toJSON:{name:"toJSON",j:[Ql(null,!0)]}}),ih(Kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),ah(ni,"parseLink",li,[Ql("link")]),function(){if(void 0===r.a||!r.a.INTERNAL||!r.a.INTERNAL.registerService)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Gr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:fl,AuthCredential:Gi,Error:Zr};ah(t,"EmailAuthProvider",ho,[]),ah(t,"FacebookAuthProvider",eo,[]),ah(t,"GithubAuthProvider",ro,[]),ah(t,"GoogleAuthProvider",oo,[]),ah(t,"TwitterAuthProvider",so,[]),ah(t,"OAuthProvider",to,[Ql("providerId")]),ah(t,"SAMLAuthProvider",$i,[Ql("providerId")]),ah(t,"PhoneAuthProvider",vo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(t){return!!(t&&t instanceof fl)}}]),ah(t,"RecaptchaVerifier",Kl,[rh(Ql(),{name:"",M:"an HTML element",optional:!1,N:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Zl("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(t){return!!(t&&t instanceof r.a.app.App)}}]),ah(t,"ActionCodeURL",ni,[]),r.a.INTERNAL.registerService("auth",(function(t,e){return e({INTERNAL:{getUid:k((t=new fl(t)).getUid,t),getToken:k(t.cc,t),addAuthTokenListener:k(t.Wb,t),removeAuthTokenListener:k(t.Ec,t)}}),t}),t,(function(t,e){if("create"===t)try{e.auth()}catch(t){}})),r.a.INTERNAL.extendNamespace({User:Cu})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}).call(this,n(30))},function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r,i,o=(r=n(7))&&"object"==typeof r&&"default"in r?r.default:r,a=n(143),s=n(204),c=n(203),u=n(441),l=o.SDK_VERSION,h=new s.Logger("@firebase/firestore");function p(){return h.logLevel===s.LogLevel.DEBUG?i.DEBUG:h.logLevel===s.LogLevel.SILENT?i.SILENT:i.ERROR}function f(t){switch(t){case i.DEBUG:h.logLevel=s.LogLevel.DEBUG;break;case i.ERROR:h.logLevel=s.LogLevel.ERROR;break;case i.SILENT:h.logLevel=s.LogLevel.SILENT;break;default:h.error("Firestore ("+l+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(h.logLevel<=s.LogLevel.DEBUG){var i=n.map(m);h.debug.apply(h,a.__spreadArrays(["Firestore ("+l+") ["+t+"]: "+e],i))}}function y(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(h.logLevel<=s.LogLevel.ERROR){var r=e.map(m);h.error.apply(h,a.__spreadArrays(["Firestore ("+l+"): "+t],r))}}function m(t){if("string"==typeof t)return t;var e=b.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g(t){var e="FIRESTORE ("+l+") INTERNAL ASSERTION FAILED: "+t;throw y(e),new Error(e)}function v(t,e){t||g(e)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.DEBUG=0]="DEBUG",t[t.ERROR=1]="ERROR",t[t.SILENT=2]="SILENT"}(i||(i={}));var b=function(){function t(){}return t.setPlatform=function(e){t.platform&&g("Platform already defined"),t.platform=e},t.getPlatform=function(){return t.platform||g("Platform not set"),t.platform},t}();function _(){return b.getPlatform().emptyByteString}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var E={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},T=function(t){function e(e,n){var r=t.call(this,n)||this;return r.code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return a.__extends(e,t),e}(Error);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new T(E.INVALID_ARGUMENT,t)}for(var r in n.prototype=t.prototype,t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function w(t,e){return void 0!==t?t:e}function A(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function O(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function C(t){for(var e in v(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I(t,e){if(0!==e.length)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+W(e.length,"argument")+".")}function N(t,e,n){if(e.length!==n)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function R(t,e,n){if(e.length<n)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires at least "+W(n,"argument")+", but was called with "+W(e.length,"argument")+".")}function B(t,e,n,r){if(e.length<n||e.length>r)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+W(e.length,"argument")+".")}function D(t,e,n,r){F(t,e,q(n)+" argument",r)}function P(t,e,n,r){void 0!==r&&D(t,e,n,r)}function x(t,e,n,r){F(t,e,n+" option",r)}function M(t,e,n,r){void 0!==r&&x(t,e,n,r)}function L(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var c=s[a];if(c===r)return;o.push(z(c))}var u=z(r);throw new T(E.INVALID_ARGUMENT,"Invalid value "+u+" provided to function "+t+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(t,0,n,r,i)}function j(t,e,n,r){if(!e.some((function(t){return t===r})))throw new T(E.INVALID_ARGUMENT,"Invalid value "+z(r)+" provided to function "+t+"() for its "+q(n)+" argument. Acceptable values: "+e.join(", "))}function F(t,e,n,r){if(!("object"===e?U(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=z(r);throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function U(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function z(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":g("Unknown wrong type: "+typeof t)}function V(t,e,n){if(void 0===n)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+q(e)+" argument, but it was undefined.")}function H(t,e,n){O(e,(function(e,r){if(n.indexOf(e)<0)throw new T(E.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+t+"(). Available options: "+n.join(", "))}))}function G(t,e,n,r){var i=z(r);return new T(E.INVALID_ARGUMENT,"Function "+t+"() requires its "+q(n)+" argument to be a "+e+", but it was: "+i)}function q(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function W(t,e){return t+" "+e+(1===t?"":"s")}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var K=function(){function t(){}return t.newId=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return v(20===e.length,"Invalid auto ID: "+e),e},t}();function Y(t,e){return t<e?-1:t>e?1:0}function J(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function Q(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(){if("undefined"==typeof Uint8Array)throw new T(E.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function Z(){if(!b.getPlatform().base64Available)throw new T(E.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var $,tt=function(){function t(t){Z(),this._binaryString=t}return t.fromBase64String=function(e){N("Blob.fromBase64String",arguments,1),D("Blob.fromBase64String","string",1,e),Z();try{var n=b.getPlatform().atob(e);return new t(n)}catch(t){throw new T(E.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},t.fromUint8Array=function(e){if(N("Blob.fromUint8Array",arguments,1),X(),!(e instanceof Uint8Array))throw G("Blob.fromUint8Array","Uint8Array",1,e);var n=Array.prototype.map.call(e,(function(t){return String.fromCharCode(t)})).join("");return new t(n)},t.prototype.toBase64=function(){return N("Blob.toBase64",arguments,0),Z(),b.getPlatform().btoa(this._binaryString)},t.prototype.toUint8Array=function(){N("Blob.toUint8Array",arguments,0),X();for(var t=new Uint8Array(this._binaryString.length),e=0;e<this._binaryString.length;e++)t[e]=this._binaryString.charCodeAt(e);return t},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._binaryString===t._binaryString},t.prototype._compareTo=function(t){return Y(this._binaryString,t._binaryString)},t}(),et=S(tt,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),nt=function(t,e,n,r,i){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i},rt="(default)",it=function(){function t(t,e){this.projectId=t,this.database=e||rt}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return this.database===rt},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t.prototype.compareTo=function(t){return Y(this.projectId,t.projectId)||Y(this.database,t.database)},t}(),ot=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.setPreviousValue(t)},this.writeNewSequenceNumber=function(t){return e.writeSequenceNumber(t)})}return t.prototype.setPreviousValue=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(t),t},t.INVALID=-1,t}(),at=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&g("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&g("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,v(this.length>=t,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return v(t<this.length,"Index out of range"),this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),st=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(t){if(t.indexOf("//")>=0)throw new T(E.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new e(t.split("/").filter((function(t){return t.length>0})))},e.EMPTY_PATH=new e([]),e}(at),ct=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ut=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ct.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new T(E.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new T(E.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var c=t[i+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new T(E.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new T(E.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.EMPTY_PATH=new e([]),e}(at),lt=function(){function t(e){this.path=e,v(t.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}return t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===st.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return st.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new st(e.slice()))},t.fromPathString=function(e){return new t(st.fromString(e))},t.EMPTY=new t(new st([])),t}(),ht=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))};!function(t){t.All="all",t.ListenStreamIdle="listen_stream_idle",t.ListenStreamConnectionBackoff="listen_stream_connection_backoff",t.WriteStreamIdle="write_stream_idle",t.WriteStreamConnectionBackoff="write_stream_connection_backoff",t.OnlineStateTimeout="online_state_timeout",t.ClientMetadataRefresh="client_metadata_refresh",t.LruGarbageCollection="lru_garbage_collection",t.RetryTransaction="retry_transaction"}($||($={}));var pt=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ht,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(E.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}(),ft=function(){function t(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenAfterShutdown=function(t){this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueEvenAfterShutdown=function(t){return this.verifyNotFailed(),this.enqueueInternal(t)},t.prototype.enqueueAndInitiateShutdown=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}}))}))},t.prototype.enqueue=function(t){return this.verifyNotFailed(),this._isShuttingDown?new Promise((function(t){})):this.enqueueInternal(t)},t.prototype.enqueueInternal=function(t){var e=this,n=this.tail.then((function(){return e.operationInProgress=!0,t().catch((function(t){e.failure=t,e.operationInProgress=!1;var n=t.stack||t.message||"";throw y("INTERNAL UNHANDLED ERROR: ",n),n.indexOf("Firestore Test Simulated Error")<0&&setTimeout((function(){throw t}),0),t})).then((function(t){return e.operationInProgress=!1,t}))}));return this.tail=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.verifyNotFailed(),v(e>=0,"Attempted to schedule an operation with a negative delay of "+e),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);var i=pt.createAndSchedule(this,t,e,n,(function(t){return r.removeDelayedOperation(t)}));return this.delayedOperations.push(i),i},t.prototype.verifyNotFailed=function(){this.failure&&g("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},t.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},t.prototype.drain=function(){return this.enqueueEvenAfterShutdown((function(){return Promise.resolve()}))},t.prototype.containsDelayedOperation=function(t){for(var e=0,n=this.delayedOperations;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.runDelayedOperationsEarly=function(t){var e=this;return this.drain().then((function(){v(t===$.All||e.containsDelayedOperation(t),"Attempted to drain to missing operation "+t),e.delayedOperations.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.delayedOperations;n<r.length;n++){var i=r[n];if(i.skipDelay(),t!==$.All&&i.timerId===t)break}return e.drain()}))},t.prototype.skipDelaysForTimerId=function(t){this.timerIdsToSkip.push(t)},t.prototype.removeDelayedOperation=function(t){var e=this.delayedOperations.indexOf(t);v(e>=0,"Delayed operation not found."),this.delayedOperations.splice(e,1)},t}(),dt="",yt="",mt="",gt="";function vt(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=_t(e)),e=bt(t.get(n),e);return _t(e)}function bt(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+=dt+mt;break;case dt:n+=dt+gt;break;default:n+=o}}return n}function _t(t){return t+dt+yt}function Et(t){var e=t.length;if(v(e>=2,"Invalid path "+t),2===e)return v(t.charAt(0)===dt&&t.charAt(1)===yt,"Non-empty path "+t+" had length 2"),st.EMPTY_PATH;for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf(dt,o);switch((a<0||a>n)&&g('Invalid encoded resource path: "'+t+'"'),t.charAt(a+1)){case yt:var s=t.substring(o,a),c=void 0;0===i.length?c=s:(c=i+=s,i=""),r.push(c);break;case mt:i+=t.substring(o,a),i+="\0";break;case gt:i+=t.substring(o,a+1);break;default:g('Invalid encoded resource path: "'+t+'"')}o=a+2}return new st(r)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tt=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new T(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new T(E.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new T(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new T(E.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Y(this.nanoseconds,t.nanoseconds):Y(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t}(),St=function(){function t(t){this.timestamp=t}return t.fromMicroseconds=function(e){var n=Math.floor(e/1e6);return new t(new Tt(n,e%1e6*1e3))},t.fromTimestamp=function(e){return new t(e)},t.forDeletedDoc=function(){return t.MIN},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t.MIN=new t(new Tt(0,0)),t}(),kt=function(){function t(t,e){this.comparator=t,this.root=e||At.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,At.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,At.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new wt(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new wt(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new wt(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new wt(this.root,t,this.comparator,!0)},t}(),wt=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){v(this.nodeStack.length>0,"getNext() called on iterator when hasNext() is false.");var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),At=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw g("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw g("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check();if(t!==this.right.check())throw g("Black depths differ");return t+(this.isRed()?0:1)},t.EMPTY=null,t.RED=!0,t.BLACK=!1,t}(),Ot=function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw g("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw g("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw g("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw g("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw g("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new At(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */At.EMPTY=new Ot;
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ct=function(){function t(t){this.comparator=t,this.data=new kt(this.comparator)}return t.fromMapKeys=function(e){var n=new t(e.comparator);return e.forEach((function(t){n=n.add(t)})),n},t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new It(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new It(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),It=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Nt=new kt(lt.comparator);function Rt(){return Nt}function Bt(){return Rt()}var Dt=new kt(lt.comparator);function Pt(){return Dt}var xt=new kt(lt.comparator);function Mt(){return xt}var Lt=new Ct(lt.comparator);function jt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Lt,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ft=new Ct(Y);function Ut(){return Ft}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r,v(r.length>0,"Cannot create an empty mutation batch")}return t.prototype.applyToRemoteDocument=function(t,e,n){e&&v(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var a=r[i];e=o.applyToRemoteDocument(e,a)}}return e},t.prototype.applyToLocalView=function(t,e){e&&v(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=s.applyToLocalView(e,e,this.localWriteTime));for(var i=e,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(t)&&(e=s.applyToLocalView(e,i,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach((function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))})),n},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),jt())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&J(this.mutations,t.mutations)&&J(this.baseMutations,t.baseMutations)},t}(),Vt=function(){function t(t,e,n,r,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.streamToken=r,this.docVersions=i}return t.from=function(e,n,r,i){v(e.mutations.length===r.length,"Mutations sent "+e.mutations.length+" must equal results received "+r.length);for(var o=Mt(),a=e.mutations,s=0;s<a.length;s++)o=o.insert(a[s].key,r[s].version);return new t(e,n,r,i,o)},t}(),Ht=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&g("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Gt="SimpleDb",qt=function(){function e(t){this.db=t,12.2===e.getIOSVersion(c.getUA())&&y("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return e.openOrCreate=function(t,n,r){return v(e.isAvailable(),"IndexedDB not supported in current environment."),d(Gt,"Opening database:",t),new Ht((function(i,o){var a=window.indexedDB.open(t,n);a.onsuccess=function(t){var n=t.target.result;i(new e(n))},a.onblocked=function(){o(new T(E.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=function(t){var e=t.target.error;"VersionError"===e.name?o(new T(E.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o(e)},a.onupgradeneeded=function(e){d(Gt,'Database "'+t+'" requires upgrade from version:',e.oldVersion);var n=e.target.result;r.createOrUpgrade(n,a.transaction,e.oldVersion,tn).next((function(){d(Gt,"Database upgrade to version "+tn+" complete")}))}})).toPromise()},e.delete=function(t){return d(Gt,"Removing database:",t),Jt(window.indexedDB.deleteDatabase(t)).toPromise()},e.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(e.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var t=c.getUA(),n=e.getIOSVersion(t),r=0<n&&n<10,i=e.getAndroidVersion(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)},e.isMockPersistence=function(){return void 0!==t&&"YES"===t.env.USE_MOCK_PERSISTENCE},e.getStore=function(t,e){return t.store(e)},e.getIOSVersion=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},e.getAndroidVersion=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},e.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},e.prototype.runTransaction=function(t,e,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o,s,c,u;return a.__generator(this,(function(l){switch(l.label){case 0:r=t.startsWith("readonly"),i=t.endsWith("idempotent"),o=0,s=function(){var t,s,u,l;return a.__generator(this,(function(a){switch(a.label){case 0:++o,t=Kt.open(c.db,r?"readonly":"readwrite",e),a.label=1;case 1:return a.trys.push([1,3,,4]),(s=n(t).catch((function(e){return t.abort(e),Ht.reject(e)})).toPromise()).catch((function(){})),[4,t.completionPromise];case 2:return a.sent(),[2,{value:s}];case 3:return u=a.sent(),l=i&&"FirebaseError"!==u.name&&o<3,d(Gt,"Transaction failed with error: %s. Retrying: %s.",u.message,l),l?[3,4]:[2,{value:Promise.reject(u)}];case 4:return[2]}}))},c=this,l.label=1;case 1:return[5,s()];case 2:return"object"==typeof(u=l.sent())?[2,u.value]:[3,1];case 3:return[2]}}))}))},e.prototype.close=function(){this.db.close()},e}(),Wt=function(){function t(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.dbCursor=t},enumerable:!0,configurable:!0}),t.prototype.done=function(){this.shouldStop=!0},t.prototype.skip=function(t){this.nextKey=t},t.prototype.delete=function(){return Jt(this.dbCursor.delete())},t}(),Kt=function(){function t(t){var e=this;this.transaction=t,this.aborted=!1,this.completionDeferred=new ht,this.transaction.oncomplete=function(){e.completionDeferred.resolve()},this.transaction.onabort=function(){t.error?e.completionDeferred.reject(t.error):e.completionDeferred.resolve()},this.transaction.onerror=function(t){var n=Xt(t.target.error);e.completionDeferred.reject(n)}}return t.open=function(e,n,r){return new t(e.transaction(r,n))},Object.defineProperty(t.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),t.prototype.abort=function(t){t&&this.completionDeferred.reject(t),this.aborted||(d(Gt,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return v(!!e,"Object store not part of transaction: "+t),new Yt(e)},t}(),Yt=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(d(Gt,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(d(Gt,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Jt(n)},t.prototype.add=function(t){return d(Gt,"ADD",this.store.name,t,t),Jt(this.store.add(t))},t.prototype.get=function(t){var e=this;return Jt(this.store.get(t)).next((function(n){return void 0===n&&(n=null),d(Gt,"GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return d(Gt,"DELETE",this.store.name,t),Jt(this.store.delete(t))},t.prototype.count=function(){return d(Gt,"COUNT",this.store.name),Jt(this.store.count())},t.prototype.loadAll=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.iterateCursor(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.deleteAll=function(t,e){d(Gt,"DELETE ALL",this.store.name);var n=this.options(t,e);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,(function(t,e,n){return n.delete()}))},t.prototype.iterate=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.iterateCursor(r,e)},t.prototype.iterateSerial=function(t){var e=this.cursor({});return new Ht((function(n,r){e.onerror=function(t){var e=Xt(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.iterateCursor=function(t,e){var n=[];return new Ht((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Wt(i),a=e(i.primaryKey,i.value,o);if(a instanceof Ht){var s=a.catch((function(t){return o.done(),Ht.reject(t)}));n.push(s)}o.isDone?r():null===o.skipToKey?i.continue():i.continue(o.skipToKey)}else r()}})).next((function(){return Ht.waitFor(n)}))},t.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(v(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Jt(t){return new Ht((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Xt(t.target.error);n(e)}}))}var Qt=!1;function Xt(t){var e=qt.getIOSVersion(c.getUA());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new T("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Qt||(Qt=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt=function(){function t(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}return t.forUser=function(e,n,r,i){return v(""!==e.uid,"UserID must not be an empty string."),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ne(t).iterate({index:an.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next((function(e){return e.lastStreamToken=ee(n),ie(t).put(e)}))},t.prototype.getLastStreamToken=function(t){return this.getMutationQueueMetadata(t).next((function(t){return t.lastStreamToken}))},t.prototype.setLastStreamToken=function(t,e){return this.getMutationQueueMetadata(t).next((function(n){return n.lastStreamToken=ee(e),ie(t).put(n)}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=re(t),a=ne(t);return a.add({}).next((function(s){v("number"==typeof s,"Auto-generated key is not a number");for(var c=new zt(s,e,n,r),u=i.serializer.toDbMutationBatch(i.userId,c),l=[],h=new Ct((function(t,e){return Y(t.canonicalString(),e.canonicalString())})),p=0,f=r;p<f.length;p++){var d=f[p],y=sn.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(u)),l.push(o.put(y,sn.PLACEHOLDER))}return h.forEach((function(e){l.push(i.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.documentKeysByBatchId[s]=c.keys()})),Ht.waitFor(l).next((function(){return c}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ne(t).get(e).next((function(t){return t?(v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.fromDbMutationBatch(t)):null}))},t.prototype.lookupMutationKeys=function(t,e){var n=this;return this.documentKeysByBatchId[e]?Ht.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.documentKeysByBatchId[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ne(t).iterate({index:an.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(v(e.batchId>=r,"Should have found mutation after "+r),o=n.serializer.fromDbMutationBatch(e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ne(t).iterate({index:an.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ne(t).loadAll(an.userMutationsIndex,n).next((function(t){return t.map((function(t){return e.serializer.fromDbMutationBatch(t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=sn.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return re(t).iterate({range:i},(function(r,i,a){var s=r[0],c=r[1],u=r[2],l=Et(c);if(s===n.userId&&e.path.isEqual(l))return ne(t).get(u).next((function(t){if(!t)throw g("Dangling document-mutation reference found: "+r+" which points to "+u);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+u),o.push(n.serializer.fromDbMutationBatch(t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ct(Y),i=[];return e.forEach((function(e){var o=sn.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=re(t).iterate({range:a},(function(t,i,o){var a=t[0],s=t[1],c=t[2],u=Et(s);a===n.userId&&e.path.isEqual(u)?r=r.add(c):o.done()}));i.push(s)})),Ht.waitFor(i).next((function(){return n.lookupMutationBatches(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this;v(!e.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var r=e.path,i=r.length+1,o=sn.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new Ct(Y);return re(t).iterate({range:a},(function(t,e,o){var a=t[0],c=t[1],u=t[2],l=Et(c);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.lookupMutationBatches(t,s)}))},t.prototype.lookupMutationBatches=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ne(t).get(e).next((function(t){if(null===t)throw g("Dangling document-mutation reference found, which points to "+e);v(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.fromDbMutationBatch(t))})))})),Ht.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return te(t.simpleDbTransaction,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.removeCachedMutationKeys(e.batchId)})),Ht.forEach(r,(function(e){return n.referenceDelegate.removeMutationReference(t,e)}))}))},t.prototype.removeCachedMutationKeys=function(t){delete this.documentKeysByBatchId[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Ht.resolve();var r=IDBKeyRange.lowerBound(sn.prefixForUser(e.userId)),i=[];return re(t).iterate({range:r},(function(t,n,r){if(t[0]===e.userId){var o=Et(t[1]);i.push(o)}else r.done()})).next((function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map((function(t){return t.canonicalString()})))}))}))},t.prototype.containsKey=function(t,e){return $t(t,this.userId,e)},t.prototype.getMutationQueueMetadata=function(t){var e=this;return ie(t).get(this.userId).next((function(t){return t||new on(e.userId,-1,"")}))},t}();function $t(t,e,n){var r=sn.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return re(t).iterate({range:o,keysOnly:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function te(t,e,n){var r=t.store(an.store),i=t.store(sn.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,c=r.iterate({range:a},(function(t,e,n){return s++,n.delete()}));o.push(c.next((function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)})));for(var u=[],l=0,h=n.mutations;l<h.length;l++){var p=h[l],f=sn.key(e,p.key.path,n.batchId);o.push(i.delete(f)),u.push(p.key)}return Ht.waitFor(o).next((function(){return u}))}function ee(t){return t instanceof Uint8Array?(v(qt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),t.toString()):t}function ne(t){return jn.getStore(t,an.store)}function re(t){return jn.getStore(t,sn.store)}function ie(t){return jn.getStore(t,on.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe,ae=1;!function(t){t[t.QueryCache=0]="QueryCache",t[t.SyncEngine=1]="SyncEngine"}(oe||(oe={}));var se=function(){function t(t,e){this.generatorId=t,v((t&ae)===t,"Generator ID "+t+" contains more than "+ae+" reserved bits"),this.seek(void 0!==e?e:this.generatorId)}return t.prototype.next=function(){var t=this.nextId;return this.nextId+=1<<ae,t},t.prototype.after=function(t){return this.seek(t+(1<<ae)),this.next()},t.prototype.seek=function(t){v((t&ae)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=t},t.forQueryCache=function(){return new t(oe.QueryCache,2)},t.forSyncEngine=function(){return new t(oe.SyncEngine)},t}(),ce=function(){function t(t,e){this.referenceDelegate=t,this.serializer=e,this.targetIdGenerator=se.forQueryCache()}return t.prototype.allocateTargetId=function(t){var e=this;return this.retrieveMetadata(t).next((function(n){return n.highestTargetId=e.targetIdGenerator.after(n.highestTargetId),e.saveMetadata(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.retrieveMetadata(t).next((function(t){return St.fromTimestamp(new Tt(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return he(t.simpleDbTransaction)},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.retrieveMetadata(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.saveMetadata(t,i)}))},t.prototype.addQueryData=function(t,e){var n=this;return this.saveQueryData(t,e).next((function(){return n.retrieveMetadata(t).next((function(r){return r.targetCount+=1,n.updateMetadataFromQueryData(e,r),n.saveMetadata(t,r)}))}))},t.prototype.updateQueryData=function(t,e){return this.saveQueryData(t,e)},t.prototype.removeQueryData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return ue(t).delete(e.targetId)})).next((function(){return n.retrieveMetadata(t)})).next((function(e){return v(e.targetCount>0,"Removing from an empty query cache"),e.targetCount-=1,n.saveMetadata(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return ue(t).iterate((function(a,s){var c=r.serializer.fromDbTarget(s);c.sequenceNumber<=e&&null===n.get(c.targetId)&&(i++,o.push(r.removeQueryData(t,c)))})).next((function(){return Ht.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){var n=this;return ue(t).iterate((function(t,r){var i=n.serializer.fromDbTarget(r);e(i)}))},t.prototype.retrieveMetadata=function(t){return le(t.simpleDbTransaction)},t.prototype.saveMetadata=function(t,e){return(n=t,jn.getStore(n,dn.store)).put(dn.key,e);var n},t.prototype.saveQueryData=function(t,e){return ue(t).put(this.serializer.toDbTarget(e))},t.prototype.updateMetadataFromQueryData=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getQueryCount=function(t){return this.retrieveMetadata(t).next((function(t){return t.targetCount}))},t.prototype.getQueryData=function(t,e){var n=this,r=e.canonicalId(),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]),o=null;return ue(t).iterate({range:i,index:pn.queryTargetsIndexName},(function(t,r,i){var a=n.serializer.fromDbTarget(r);e.isEqual(a.query)&&(o=a,i.done())})).next((function(){return o}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=pe(t);return e.forEach((function(e){var a=vt(e.path);i.push(o.put(new fn(n,a))),i.push(r.referenceDelegate.addReference(t,e))})),Ht.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=pe(t);return Ht.forEach(e,(function(e){var o=vt(e.path);return Ht.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=pe(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=pe(t),i=jt();return r.iterate({range:n,keysOnly:!0},(function(t,e,n){var r=Et(t[1]),o=new lt(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=vt(e.path),r=IDBKeyRange.bound([n],[Q(n)],!1,!0),i=0;return pe(t).iterate({index:fn.documentTargetsIndex,keysOnly:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.getQueryDataForTarget=function(t,e){var n=this;return ue(t).get(e).next((function(t){return t?n.serializer.fromDbTarget(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t){return jn.getStore(t,pn.store)}function le(t){return qt.getStore(t,dn.store).get(dn.key).next((function(t){return v(null!==t,"Missing metadata row."),t}))}function he(t){return le(t).next((function(t){return t.highestListenSequenceNumber}))}function pe(t){return jn.getStore(t,fn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fe,de=function(){function t(t){this.fields=t}return t.fromSet=function(e){return new t(e)},t.fromArray=function(e){var n=new Ct(ut.comparator);return e.forEach((function(t){return n=n.add(t)})),new t(n)},t.prototype.covers=function(t){var e=!1;return this.fields.forEach((function(n){n.isPrefixOf(t)&&(e=!0)})),e},t.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},t}(),ye=function(){function t(t,e){this.field=t,this.transform=e}return t.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},t}(),me=function(t,e){this.version=t,this.transformResults=e};!function(t){t[t.Set=0]="Set",t[t.Patch=1]="Patch",t[t.Transform=2]="Transform",t[t.Delete=3]="Delete"}(fe||(fe={}));var ge,ve,be=function(){function t(t,e){this.updateTime=t,this.exists=e,v(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}return t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),t.prototype.isValidFor=function(t){return void 0!==this.updateTime?t instanceof Ve&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof Ve:(v(this.isNone,"Precondition should be empty"),!0)},t.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},t.NONE=new t,t}(),_e=function(){function t(){}return t.prototype.verifyKeyMatches=function(t){null!=t&&v(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},t.getPostMutationVersion=function(t){return t instanceof Ve?t.version:St.MIN},t}(),Ee=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.value=n,i.precondition=r,i.type=fe.Set,i}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new Ve(this.key,n,{hasCommittedMutations:!0},this.value)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=_e.getPostMutationVersion(t);return new Ve(this.key,r,{hasLocalMutations:!0},this.value)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.precondition.isEqual(t.precondition)},e}(_e),Te=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.key=e,o.data=n,o.fieldMask=r,o.precondition=i,o.type=fe.Patch,o}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(t))return new Ge(this.key,e.version);var n=this.patchDocument(t);return new Ve(this.key,e.version,{hasCommittedMutations:!0},n)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=_e.getPostMutationVersion(t),i=this.patchDocument(t);return new Ve(this.key,r,{hasLocalMutations:!0},i)},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.fieldMask.isEqual(t.fieldMask)&&this.precondition.isEqual(t.precondition)},e.prototype.patchDocument=function(t){var e;return e=t instanceof Ve?t.data():Fe.EMPTY,this.patchObject(e)},e.prototype.patchObject=function(t){var e=this;return this.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t=null!==r?t.set(n,r):t.delete(n)}})),t},e}(_e),Se=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.fieldTransforms=n,r.type=fe.Transform,r.precondition=be.exists(!0),r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){if(this.verifyKeyMatches(t),v(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(t))return new Ge(this.key,e.version);var n=this.requireDocument(t),r=this.serverTransformResults(t,e.transformResults),i=e.version,o=this.transformObject(n.data(),r);return new Ve(this.key,i,{hasCommittedMutations:!0},o)},e.prototype.applyToLocalView=function(t,e,n){if(this.verifyKeyMatches(t),!this.precondition.isValidFor(t))return t;var r=this.requireDocument(t),i=this.localTransformResults(n,t,e),o=this.transformObject(r.data(),i);return new Ve(this.key,r.version,{hasLocalMutations:!0},o)},e.prototype.extractBaseValue=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof Ve?t.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(e=null==e?Fe.EMPTY.set(i.field,a):e.set(i.field,a))}return e},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&J(this.fieldTransforms,t.fieldTransforms)&&this.precondition.isEqual(t.precondition)},e.prototype.requireDocument=function(t){v(t instanceof Ve,"Unknown MaybeDocument type "+t);var e=t;return v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},e.prototype.serverTransformResults=function(t,e){var n=[];v(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;t instanceof Ve&&(a=t.field(i.field)),n.push(o.applyToRemoteDocument(a,e[r]))}return n},e.prototype.localTransformResults=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,c=null;e instanceof Ve&&(c=e.field(a.field)),null===c&&n instanceof Ve&&(c=n.field(a.field)),r.push(s.applyToLocalView(c,t))}return r},e.prototype.transformObject=function(t,e){v(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;t=t.set(r,e[n])}return t},e}(_e),ke=function(t){function e(e,n){var r=t.call(this)||this;return r.key=e,r.precondition=n,r.type=fe.Delete,r}return a.__extends(e,t),e.prototype.applyToRemoteDocument=function(t,e){return this.verifyKeyMatches(t),v(null==e.transformResults,"Transform results received by DeleteMutation."),new He(this.key,e.version,{hasCommittedMutations:!0})},e.prototype.applyToLocalView=function(t,e,n){return this.verifyKeyMatches(t),this.precondition.isValidFor(t)?(t&&v(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new He(this.key,St.forDeletedDoc())):t},e.prototype.extractBaseValue=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.precondition.isEqual(t.precondition)},e}(_e);!function(t){t[t.NullValue=0]="NullValue",t[t.BooleanValue=1]="BooleanValue",t[t.NumberValue=2]="NumberValue",t[t.TimestampValue=3]="TimestampValue",t[t.StringValue=4]="StringValue",t[t.BlobValue=5]="BlobValue",t[t.RefValue=6]="RefValue",t[t.GeoPointValue=7]="GeoPointValue",t[t.ArrayValue=8]="ArrayValue",t[t.ObjectValue=9]="ObjectValue"}(ge||(ge={})),function(t){t[t.Default=0]="Default",t[t.Estimate=1]="Estimate",t[t.Previous=2]="Previous"}(ve||(ve={}));var we=function(){function t(t,e){this.serverTimestampBehavior=t,this.timestampsInSnapshots=e}return t.fromSnapshotOptions=function(e,n){switch(e.serverTimestamps){case"estimate":return new t(ve.Estimate,n);case"previous":return new t(ve.Previous,n);case"none":case void 0:return new t(ve.Default,n);default:return g("fromSnapshotOptions() called with invalid options.")}},t}(),Ae=function(){function t(){}return t.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},t.prototype.defaultCompareTo=function(t){return v(this.typeOrder!==t.typeOrder,"Default compareTo should not be used for values of same type."),Y(this.typeOrder,t.typeOrder)},t}(),Oe=function(t){function e(){var e=t.call(this)||this;return e.typeOrder=ge.NullValue,e.internalValue=null,e}return a.__extends(e,t),e.prototype.value=function(t){return null},e.prototype.isEqual=function(t){return t instanceof e},e.prototype.compareTo=function(t){return t instanceof e?0:this.defaultCompareTo(t)},e.INSTANCE=new e,e}(Ae),Ce=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.BooleanValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Y(this,t):this.defaultCompareTo(t)},e.of=function(t){return t?e.TRUE:e.FALSE},e.TRUE=new e(!0),e.FALSE=new e(!1),e}(Ae),Ie=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.NumberValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.compareTo=function(t){return t instanceof e?(n=this.internalValue)<(r=t.internalValue)?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1:this.defaultCompareTo(t);var n,r},e}(Ae);function Ne(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var Re=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ne(this.internalValue,t.internalValue)},e}(Ie),Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.isEqual=function(t){return t instanceof e&&Ne(this.internalValue,t.internalValue)},e.NAN=new e(NaN),e.POSITIVE_INFINITY=new e(1/0),e.NEGATIVE_INFINITY=new e(-1/0),e}(Ie),De=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.StringValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue===t.internalValue},e.prototype.compareTo=function(t){return t instanceof e?Y(this.internalValue,t.internalValue):this.defaultCompareTo(t)},e}(Ae),Pe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.TimestampValue,n}return a.__extends(e,t),e.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):t instanceof xe?-1:this.defaultCompareTo(t)},e}(Ae),xe=function(t){function e(e,n){var r=t.call(this)||this;return r.localWriteTime=e,r.previousValue=n,r.typeOrder=ge.TimestampValue,r}return a.__extends(e,t),e.prototype.value=function(t){return t&&t.serverTimestampBehavior===ve.Estimate?new Pe(this.localWriteTime).value(t):t&&t.serverTimestampBehavior===ve.Previous&&this.previousValue?this.previousValue.value(t):null},e.prototype.isEqual=function(t){return t instanceof e&&this.localWriteTime.isEqual(t.localWriteTime)},e.prototype.compareTo=function(t){return t instanceof e?this.localWriteTime._compareTo(t.localWriteTime):t instanceof Pe?1:this.defaultCompareTo(t)},e.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},e}(Ae),Me=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.BlobValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Ae),Le=function(t){function e(e,n){var r=t.call(this)||this;return r.databaseId=e,r.key=n,r.typeOrder=ge.RefValue,r}return a.__extends(e,t),e.prototype.value=function(t){return this.key},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.databaseId.isEqual(t.databaseId)},e.prototype.compareTo=function(t){if(t instanceof e){var n=this.databaseId.compareTo(t.databaseId);return 0!==n?n:lt.comparator(this.key,t.key)}return this.defaultCompareTo(t)},e}(Ae),je=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.GeoPointValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue},e.prototype.isEqual=function(t){return t instanceof e&&this.internalValue.isEqual(t.internalValue)},e.prototype.compareTo=function(t){return t instanceof e?this.internalValue._compareTo(t.internalValue):this.defaultCompareTo(t)},e}(Ae),Fe=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.ObjectValue,n}return a.__extends(e,t),e.prototype.value=function(t){var e={};return this.internalValue.inorderTraversal((function(n,r){e[n]=r.value(t)})),e},e.prototype.forEach=function(t){this.internalValue.inorderTraversal(t)},e.prototype.isEqual=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext();if(i.key!==o.key||!i.value.isEqual(o.value))return!1}return!n.hasNext()&&!r.hasNext()}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=this.internalValue.getIterator(),r=t.internalValue.getIterator();n.hasNext()&&r.hasNext();){var i=n.getNext(),o=r.getNext(),a=Y(i.key,o.key)||i.value.compareTo(o.value);if(a)return a}return Y(n.hasNext(),r.hasNext())}return this.defaultCompareTo(t)},e.prototype.set=function(t,n){if(v(!t.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===t.length)return this.setChild(t.firstSegment(),n);var r=this.child(t.firstSegment());r instanceof e||(r=e.EMPTY);var i=r.set(t.popFirst(),n);return this.setChild(t.firstSegment(),i)},e.prototype.delete=function(t){if(v(!t.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===t.length)return new e(this.internalValue.remove(t.firstSegment()));var n=this.child(t.firstSegment());if(n instanceof e){var r=n.delete(t.popFirst());return new e(this.internalValue.insert(t.firstSegment(),r))}return this},e.prototype.contains=function(t){return null!==this.field(t)},e.prototype.field=function(t){v(!t.isEmpty(),"Can't get field of empty path");var n=this;return t.forEach((function(t){n=n instanceof e?n.internalValue.get(t):null})),n},e.prototype.fieldMask=function(){var t=new Ct(ut.comparator);return this.internalValue.forEach((function(n,r){var i=new ut([n]);if(r instanceof e){var o=r.fieldMask().fields;o.isEmpty()?t=t.add(i):o.forEach((function(e){t=t.add(i.child(e))}))}else t=t.add(i)})),de.fromSet(t)},e.prototype.toString=function(){return this.internalValue.toString()},e.prototype.child=function(t){return this.internalValue.get(t)||void 0},e.prototype.setChild=function(t,n){return new e(this.internalValue.insert(t,n))},e.EMPTY=new e(new kt(Y)),e}(Ae),Ue=function(t){function e(e){var n=t.call(this)||this;return n.internalValue=e,n.typeOrder=ge.ArrayValue,n}return a.__extends(e,t),e.prototype.value=function(t){return this.internalValue.map((function(e){return e.value(t)}))},e.prototype.contains=function(t){for(var e=0,n=this.internalValue;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},e.prototype.forEach=function(t){this.internalValue.forEach(t)},e.prototype.isEqual=function(t){if(t instanceof e){if(this.internalValue.length!==t.internalValue.length)return!1;for(var n=0;n<this.internalValue.length;n++)if(!this.internalValue[n].isEqual(t.internalValue[n]))return!1;return!0}return!1},e.prototype.compareTo=function(t){if(t instanceof e){for(var n=Math.min(this.internalValue.length,t.internalValue.length),r=0;r<n;r++){var i=this.internalValue[r].compareTo(t.internalValue[r]);if(i)return i}return Y(this.internalValue.length,t.internalValue.length)}return this.defaultCompareTo(t)},e.prototype.toString=function(){return"["+this.internalValue.map((function(t){return t.toString()})).join(",")+"]"},e}(Ae),ze=function(){function t(t,e){this.key=t,this.version=e}return t.compareByKey=function(t,e){return lt.comparator(t.key,e.key)},t}(),Ve=function(t){function e(e,n,r,i,o,a){var s=t.call(this,e,n)||this;return s.objectValue=i,s.proto=o,s.converter=a,v(void 0!==s.objectValue||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.hasLocalMutations=!!r.hasLocalMutations,s.hasCommittedMutations=!!r.hasCommittedMutations,s}return a.__extends(e,t),e.prototype.field=function(t){if(this.objectValue)return this.objectValue.field(t);this.fieldValueCache||(this.fieldValueCache=new Map);var e=t.canonicalString(),n=this.fieldValueCache.get(e);if(void 0===n){var r=this.getProtoField(t);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(e,n)}return n},e.prototype.data=function(){var t=this;if(!this.objectValue){var e=Fe.EMPTY;O(this.proto.fields||{},(function(n,r){e=e.set(new ut([n]),t.converter(r))})),this.objectValue=e,this.fieldValueCache=void 0}return this.objectValue},e.prototype.value=function(){return this.data().value()},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.getProtoField=function(t){v(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.firstSegment()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},e.compareByField=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.compareTo(i):g("Trying to compare documents on fields that don't exist")},e}(ze),He=function(t){function e(e,n,r){var i=t.call(this,e,n)||this;return i.hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return a.__extends(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ze),Ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(ze),qe=function(){function t(t){this.mapKeyFn=t,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){O(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return C(this.inner)},t}(),We=function(){function t(){this.changes=new qe((function(t){return t.toString()})),this.changesApplied=!1}return Object.defineProperty(t.prototype,"readTime",{get:function(){return v(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(t){v(void 0===this._readTime||this._readTime.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=t},enumerable:!0,configurable:!0}),t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.readTime=e,this.changes.set(t.key,t)},t.prototype.removeEntry=function(t,e){this.assertNotApplied(),e&&(this.readTime=e),this.changes.set(t,null)},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Ht.resolve(n):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},t}(),Ke=function(){function t(t,e){this.serializer=t,this.indexManager=e}return t.prototype.addEntry=function(t,e,n){return Je(t).put(Qe(e),n)},t.prototype.removeEntry=function(t,e){var n=Je(t),r=Qe(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.setMetadata(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Je(t).get(Qe(e)).next((function(t){return n.maybeDecodeDocument(t)}))},t.prototype.getSizedEntry=function(t,e){var n=this;return Je(t).get(Qe(e)).next((function(t){var e=n.maybeDecodeDocument(t);return e?{maybeDocument:e,size:Xe(t)}:null}))},t.prototype.getEntries=function(t,e){var n=this,r=Bt();return this.forEachDbEntry(t,e,(function(t,e){var i=n.maybeDecodeDocument(e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.getSizedEntries=function(t,e){var n=this,r=Bt(),i=new kt(lt.comparator);return this.forEachDbEntry(t,e,(function(t,e){var o=n.maybeDecodeDocument(e);o?(r=r.insert(t,o),i=i.insert(t,Xe(e))):(r=r.insert(t,null),i=i.insert(t,0))})).next((function(){return{maybeDocuments:r,sizeMap:i}}))},t.prototype.forEachDbEntry=function(t,e,n){if(e.isEmpty())return Ht.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Je(t).iterate({range:r},(function(t,e,r){for(var a=lt.fromSegments(t);o&&lt.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.skip(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this;v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var i=Pt(),o=e.path.length+1,a={};if(n.isEqual(St.MIN)){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var c=e.path.toArray(),u=this.serializer.toDbTimestampKey(n);a.range=IDBKeyRange.lowerBound([c,u],!0),a.index=ln.collectionReadTimeIndex}return Je(t).iterate(a,(function(t,n,a){if(t.length===o){var s=r.serializer.fromDbRemoteDocument(n);e.path.isPrefixOf(s.key.path)?s instanceof Ve&&e.matches(s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.getNewDocumentChanges=function(t,e){var n=this,r=Rt(),i=this.serializer.toDbTimestampKey(e),o=Je(t),a=IDBKeyRange.lowerBound(i,!0);return o.iterate({index:ln.readTimeIndex,range:a},(function(t,e){var o=n.serializer.fromDbRemoteDocument(e);r=r.insert(o.key,o),i=e.readTime})).next((function(){return{changedDocs:r,readTime:n.serializer.fromDbTimestampKey(i)}}))},t.prototype.getLastDocumentChange=function(t){var e,n=this,r=Je(t),i=St.MIN;return r.iterate({index:ln.readTimeIndex,reverse:!0},(function(t,r,o){e=n.serializer.fromDbRemoteDocument(r),r.readTime&&(i=n.serializer.fromDbTimestampKey(r.readTime)),o.done()})).next((function(){return{changedDoc:e,readTime:i}}))},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Ye(t).get(hn.key).next((function(t){return v(!!t,"Missing document cache metadata"),t}))},t.prototype.setMetadata=function(t,e){return Ye(t).put(hn.key,e)},t.prototype.maybeDecodeDocument=function(t){if(t){var e=this.serializer.fromDbRemoteDocument(t);return e instanceof He&&e.version.isEqual(St.forDeletedDoc())?null:e}return null},t.RemoteDocumentChangeBuffer=function(t){function e(e,n){var r=t.call(this)||this;return r.documentCache=e,r.trackRemovals=n,r.documentSizes=new qe((function(t){return t.toString()})),r}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new Ct((function(t,e){return Y(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.documentSizes.get(o);if(v(void 0!==s,"Cannot modify a document that wasn't read (for "+o+")"),a){v(!e.readTime.isEqual(St.MIN),"Cannot add a document with a read time of zero");var c=e.documentCache.serializer.toDbRemoteDocument(a,e.readTime);i=i.add(o.path.popLast());var u=Xe(c);r+=u-s,n.push(e.documentCache.addEntry(t,o,c))}else if(r-=s,e.trackRemovals){var l=e.documentCache.serializer.toDbRemoteDocument(new He(o,St.forDeletedDoc()),e.readTime);n.push(e.documentCache.addEntry(t,o,l))}else n.push(e.documentCache.removeEntry(t,o))})),i.forEach((function(r){n.push(e.documentCache.indexManager.addToCollectionParentIndex(t,r))})),n.push(this.documentCache.updateMetadata(t,r)),Ht.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntry(t,e).next((function(t){return null===t?(n.documentSizes.set(e,0),null):(n.documentSizes.set(e,t.size),t.maybeDocument)}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.documentCache.getSizedEntries(t,e).next((function(t){var e=t.maybeDocuments;return t.sizeMap.forEach((function(t,e){n.documentSizes.set(t,e)})),e}))},e}(We),t}();function Ye(t){return jn.getStore(t,hn.store)}function Je(t){return jn.getStore(t,ln.store)}function Qe(t){return t.path.toArray()}function Xe(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw g("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze=function(){function t(){this.collectionParentIndex=new $e}return t.prototype.addToCollectionParentIndex=function(t,e){return this.collectionParentIndex.add(e),Ht.resolve()},t.prototype.getCollectionParents=function(t,e){return Ht.resolve(this.collectionParentIndex.getEntries(e))},t}(),$e=function(){function t(){this.index={}}return t.prototype.add=function(t){v(t.length%2==1,"Expected a collection path.");var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new Ct(st.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new Ct(st.comparator)).toArray()},t}(),tn=9,en=function(){function t(t){this.serializer=t}return t.prototype.createOrUpgrade=function(t,e,n,r){var i=this;v(n<r&&n>=0&&r<=tn,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Kt(e);n<1&&r>=1&&(function(t){t.createObjectStore(rn.store)}(t),function(t){t.createObjectStore(on.store,{keyPath:on.keyPath}),t.createObjectStore(an.store,{keyPath:an.keyPath,autoIncrement:!0}).createIndex(an.userMutationsIndex,an.userMutationsKeyPath,{unique:!0}),t.createObjectStore(sn.store)}(t),mn(t),function(t){t.createObjectStore(ln.store)}(t));var a=Ht.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(fn.store),t.deleteObjectStore(pn.store),t.deleteObjectStore(dn.store)}(t),mn(t)),a=a.next((function(){return function(t){var e=t.store(dn.store),n=new dn(0,0,St.MIN.toTimestamp(),0);return e.put(dn.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(an.store).loadAll().next((function(n){t.deleteObjectStore(an.store),t.createObjectStore(an.store,{keyPath:an.keyPath,autoIncrement:!0}).createIndex(an.userMutationsIndex,an.userMutationsKeyPath,{unique:!0});var r=e.store(an.store),i=n.map((function(t){return r.put(t)}));return Ht.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(vn.store,{keyPath:vn.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.removeAcknowledgedMutations(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(hn.store)}(t),i.addDocumentGlobal(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ensureSequenceNumbers(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.createCollectionParentIndex(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ln.store);e.createIndex(ln.readTimeIndex,ln.readTimeIndexPath,{unique:!1}),e.createIndex(ln.collectionReadTimeIndex,ln.collectionReadTimeIndexPath,{unique:!1})}(e)}))),a},t.prototype.addDocumentGlobal=function(t){var e=0;return t.store(ln.store).iterate((function(t,n){e+=Xe(n)})).next((function(){var n=new hn(e);return t.store(hn.store).put(hn.key,n)}))},t.prototype.removeAcknowledgedMutations=function(t){var e=this,n=t.store(on.store),r=t.store(an.store);return n.loadAll().next((function(n){return Ht.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.loadAll(an.userMutationsIndex,i).next((function(r){return Ht.forEach(r,(function(r){v(r.userId===n.userId,"Cannot process batch "+r.batchId+" from unexpected user");var i=e.serializer.fromDbMutationBatch(r);return te(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ensureSequenceNumbers=function(t){var e=t.store(fn.store),n=t.store(ln.store);return he(t).next((function(t){var r=[];return n.iterate((function(n,i){var o=new st(n),a=function(t){return[0,vt(t)]}(o);r.push(e.get(a).next((function(n){return n?Ht.resolve():function(n){return e.put(new fn(0,vt(n),t))}(o)})))})).next((function(){return Ht.waitFor(r)}))}))},t.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(yn.store,{keyPath:yn.keyPath});var n=e.store(yn.store),r=new $e,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:vt(i)})}};return e.store(ln.store).iterate({keysOnly:!0},(function(t,e){var n=new st(t);return i(n.popLast())})).next((function(){return e.store(sn.store).iterate({keysOnly:!0},(function(t,e){t[0];var n=t[1],r=(t[2],Et(n));return i(r.popLast())}))}))},t}(),nn=function(t,e){this.seconds=t,this.nanoseconds=e},rn=function(){function t(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}return t.store="owner",t.key="owner",t}(),on=function(){function t(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}return t.store="mutationQueues",t.keyPath="userId",t}(),an=function(){function t(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}return t.store="mutations",t.keyPath="batchId",t.userMutationsIndex="userMutationsIndex",t.userMutationsKeyPath=["userId","batchId"],t}(),sn=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,vt(e)]},t.key=function(t,e,n){return[t,vt(e),n]},t.store="documentMutations",t.PLACEHOLDER=new t,t}(),cn=function(t,e){this.path=t,this.readTime=e},un=function(t,e){this.path=t,this.version=e},ln=function(){function t(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}return t.store="remoteDocuments",t.readTimeIndex="readTimeIndex",t.readTimeIndexPath="readTime",t.collectionReadTimeIndex="collectionReadTimeIndex",t.collectionReadTimeIndexPath=["parentPath","readTime"],t}(),hn=function(){function t(t){this.byteSize=t}return t.store="remoteDocumentGlobal",t.key="remoteDocumentGlobalKey",t}(),pn=function(){function t(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}return t.store="targets",t.keyPath="targetId",t.queryTargetsIndexName="queryTargetsIndex",t.queryTargetsKeyPath=["canonicalId","targetId"],t}(),fn=function(){function t(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n,v(0===t==(void 0!==n),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}return t.store="targetDocuments",t.keyPath=["targetId","path"],t.documentTargetsIndex="documentTargetsIndex",t.documentTargetsKeyPath=["path","targetId"],t}(),dn=function(){function t(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}return t.key="targetGlobalKey",t.store="targetGlobal",t}(),yn=function(){function t(t,e){this.collectionId=t,this.parent=e}return t.store="collectionParents",t.keyPath=["collectionId","parent"],t}();function mn(t){t.createObjectStore(fn.store,{keyPath:fn.keyPath}).createIndex(fn.documentTargetsIndex,fn.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(pn.store,{keyPath:pn.keyPath}).createIndex(pn.queryTargetsIndexName,pn.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(dn.store)}var gn,vn=function(){function t(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}return t.store="clientMetadata",t.keyPath="clientId",t}(),bn=[on.store,an.store,sn.store,ln.store,pn.store,rn.store,dn.store,fn.store],_n=a.__spreadArrays(bn,[vn.store]),En=a.__spreadArrays(_n,[hn.store]),Tn=a.__spreadArrays(En,[yn.store]),Sn=function(){function t(){this.collectionParentsCache=new $e}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(v(e.length%2==1,"Expected a collection path."),!this.collectionParentsCache.has(e)){var r=e.lastSegment(),i=e.popLast();return t.addOnCommittedListener((function(){n.collectionParentsCache.add(e)})),kn(t).put({collectionId:r,parent:vt(i)})}return Ht.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Q(e),""],!1,!0);return kn(t).loadAll(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(Et(o.parent))}return n}))},t}();function kn(t){return jn.getStore(t,yn.store)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.Listen=0]="Listen",t[t.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",t[t.LimboResolution=2]="LimboResolution"}(gn||(gn={}));var wn=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=St.MIN),void 0===o&&(o=St.MIN),void 0===a&&(a=_()),this.query=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.query,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.query,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.query,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.purpose===t.purpose&&this.sequenceNumber===t.sequenceNumber&&this.snapshotVersion.isEqual(t.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken===t.resumeToken&&this.query.isEqual(t.query)},t}(),An=function(){function t(t){this.remoteSerializer=t}return t.prototype.fromDbRemoteDocument=function(t){if(t.document)return this.remoteSerializer.fromDocument(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=lt.fromSegments(t.noDocument.path),n=this.fromDbTimestamp(t.noDocument.readTime);return new He(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=lt.fromSegments(t.unknownDocument.path),n=this.fromDbTimestamp(t.unknownDocument.version),new Ge(e,n)):g("Unexpected DbRemoteDocument")},t.prototype.toDbRemoteDocument=function(t,e){var n=this.toDbTimestampKey(e),r=t.key.path.popLast().toArray();if(t instanceof Ve){var i=t.proto?t.proto:this.remoteSerializer.toDocument(t),o=t.hasCommittedMutations;return new ln(null,null,i,o,n,r)}if(t instanceof He){var a=t.key.path.toArray(),s=this.toDbTimestamp(t.version);return o=t.hasCommittedMutations,new ln(null,new cn(a,s),null,o,n,r)}if(t instanceof Ge){a=t.key.path.toArray();var c=this.toDbTimestamp(t.version);return new ln(new un(a,c),null,null,!0,n,r)}return g("Unexpected MaybeDocument")},t.prototype.toDbTimestampKey=function(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]},t.prototype.fromDbTimestampKey=function(t){var e=new Tt(t[0],t[1]);return St.fromTimestamp(e)},t.prototype.toDbTimestamp=function(t){var e=t.toTimestamp();return new nn(e.seconds,e.nanoseconds)},t.prototype.fromDbTimestamp=function(t){var e=new Tt(t.seconds,t.nanoseconds);return St.fromTimestamp(e)},t.prototype.toDbMutationBatch=function(t,e){var n=this,r=e.baseMutations.map((function(t){return n.remoteSerializer.toMutation(t)})),i=e.mutations.map((function(t){return n.remoteSerializer.toMutation(t)}));return new an(t,e.batchId,e.localWriteTime.toMillis(),r,i)},t.prototype.fromDbMutationBatch=function(t){var e=this,n=(t.baseMutations||[]).map((function(t){return e.remoteSerializer.fromMutation(t)})),r=t.mutations.map((function(t){return e.remoteSerializer.fromMutation(t)})),i=Tt.fromMillis(t.localWriteTimeMs);return new zt(t.batchId,i,n,r)},t.prototype.toDbResourcePaths=function(t){var e=[];return t.forEach((function(t){e.push(vt(t.path))})),e},t.prototype.fromDbResourcePaths=function(t){for(var e=jt(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new lt(Et(i)))}return e},t.prototype.fromDbTarget=function(t){var e,n=this.fromDbTimestamp(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(t.lastLimboFreeSnapshotVersion):St.MIN,i=t.resumeToken;return e=void 0!==t.query.documents?this.remoteSerializer.fromDocumentsTarget(t.query):this.remoteSerializer.fromQueryTarget(t.query),new wn(e,t.targetId,gn.Listen,t.lastListenSequenceNumber,n,r,i)},t.prototype.toDbTarget=function(t){v(gn.Listen===t.purpose,"Only queries with purpose "+gn.Listen+" may be stored, got "+t.purpose);var e,n,r=this.toDbTimestamp(t.snapshotVersion),i=this.toDbTimestamp(t.lastLimboFreeSnapshotVersion);return e=t.query.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(t.query):this.remoteSerializer.toQueryTarget(t.query),t.resumeToken instanceof Uint8Array?(v(qt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),n=t.resumeToken.toString()):n=t.resumeToken,new pn(t.targetId,t.query.canonicalId(),r,n,t.sequenceNumber,i,e)},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function On(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=Y(n,i);return 0===a?Y(r,o):a}var Cn=function(){function t(t){this.maxElements=t,this.buffer=new Ct(On),this.previousIndex=0}return t.prototype.nextIndex=function(){return++this.previousIndex},t.prototype.addElement=function(t){var e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();On(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),t}(),In={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Nn=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t.COLLECTION_DISABLED=-1,t.MINIMUM_CACHE_SIZE_BYTES=1048576,t.DEFAULT_CACHE_SIZE_BYTES=41943040,t.DEFAULT_COLLECTION_PERCENTILE=10,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,t.DEFAULT=new t(t.DEFAULT_CACHE_SIZE_BYTES,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),t.DISABLED=new t(t.COLLECTION_DISABLED,0,0),t}(),Rn=function(){function t(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.hasRun=!1,this.gcTask=null}return t.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Nn.COLLECTION_DISABLED&&this.scheduleGC()},t.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),t.prototype.scheduleGC=function(){var t=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var e=this.hasRun?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay($.LruGarbageCollection,e,(function(){return t.gcTask=null,t.hasRun=!0,t.localStore.collectGarbage(t.garbageCollector).then((function(){return t.scheduleGC()})).catch(Fn)}))},t}(),Bn=function(){function t(t,e){this.delegate=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.delegate.getSequenceNumberCount(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Ht.resolve(ot.INVALID);var r=new Cn(e);return this.delegate.forEachTarget(t,(function(t){return r.addElement(t.sequenceNumber)})).next((function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(t,(function(t){return r.addElement(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.delegate.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.delegate.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return this.params.cacheSizeCollectionThreshold===Nn.COLLECTION_DISABLED?(d("LruGarbageCollector","Garbage collection skipped; disabled"),Ht.resolve(In)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),In):n.runGarbageCollection(t,e)}))},t.prototype.getCacheSize=function(t){return this.delegate.getCacheSize(t)},t.prototype.runGarbageCollection=function(t,e){var n,r,o,a,s,c,u,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>l.params.maximumSequenceNumbersToCollect?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),r=l.params.maximumSequenceNumbersToCollect):r=e,a=Date.now(),l.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),l.removeTargets(t,n,e)})).next((function(e){return o=e,c=Date.now(),l.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),p()<=i.DEBUG&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+r+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(c-s)+"ms\n\tRemoved "+t+" documents in "+(u-c)+"ms\nTotal Duration: "+(u-h)+"ms"),Ht.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:o,documentsRemoved:t})}))},t}(),Dn=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Pn="IndexedDbPersistence",xn="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mn="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Ln=function(t){function e(e,n){var r=t.call(this)||this;return r.simpleDbTransaction=e,r.currentSequenceNumber=n,r}return a.__extends(e,t),e}(Dn),jn=function(){function t(e,n,r,i,o,a,s,c){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.queue=a,this.sequenceNumberSyncer=c,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(t){return Promise.resolve()},this.referenceDelegate=new Vn(this,o),this.dbName=n+t.MAIN_DATABASE,this.serializer=new An(s),this.document=i.document,this.queryCache=new ce(this.referenceDelegate,this.serializer),this.indexManager=new Sn,this.remoteDocumentCache=new Ke(this.serializer,this.indexManager),!i.window||!i.window.localStorage)throw new T(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=i.window,this.webStorage=this.window.localStorage}return t.getStore=function(t,e){if(t instanceof Ln)return qt.getStore(t.simpleDbTransaction,e);throw g("IndexedDbPersistence must use instances of IndexedDbTransaction")},t.createIndexedDbPersistence=function(e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:if(!t.isAvailable())throw new T(E.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(n=new t(e.allowTabSynchronization,e.persistenceKey,e.clientId,e.platform,e.lruParams,e.queue,e.serializer,e.sequenceNumberSyncer)).start()];case 1:return r.sent(),[2,n]}}))}))},t.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),qt.openOrCreate(this.dbName,tn,new en(this.serializer)).then((function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()})).then((function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[dn.store],(function(t){return he(t)}))})).then((function(e){t.listenSequence=new ot(e,t.sequenceNumberSyncer)})).then((function(){t._started=!0})).catch((function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)}))},t.prototype.setPrimaryStateListener=function(t){var e=this;return this.primaryStateListener=function(n){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.simpleDb.setVersionChangeListener((function(n){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return null!==n.newVersion?[3,2]:[4,t()];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.updateClientMetadataAndTryBecomePrimary=function(){var t=this;return this.simpleDb.runTransaction("readwrite-idempotent",Tn,(function(e){return zn(e).put(new vn(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.verifyPrimaryLease(e).next((function(e){e||(t.isPrimary=!1,t.queue.enqueueAndForget((function(){return t.primaryStateListener(!1)})))}))})).next((function(){return t.canActAsPrimary(e)})).next((function(n){return t.isPrimary&&!n?t.releasePrimaryLeaseIfHeld(e).next((function(){return!1})):!!n&&t.acquireOrExtendPrimaryLease(e).next((function(){return!0}))}))})).catch((function(e){if(!t.allowTabSynchronization)throw e;return d(Pn,"Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.queue.enqueueAndForget((function(){return t.primaryStateListener(e)})),t.isPrimary=e}))},t.prototype.verifyPrimaryLease=function(t){var e=this;return Un(t).get(rn.key).next((function(t){return Ht.resolve(e.isLocalClient(t))}))},t.prototype.removeClientMetadata=function(t){return zn(t).delete(this.clientId)},t.prototype.maybeGarbageCollectMultiClientState=function(){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(n){switch(n.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",(function(n){var r=t.getStore(n,vn.store);return r.loadAll().next((function(t){var n=e.filterActiveClients(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Ht.forEach(i,(function(t){return r.delete(t.clientId)})).next((function(){return i}))}))}))]);case 1:n.sent().forEach((function(t){e.window.localStorage.removeItem(e.zombiedClientLocalStorageKey(t.clientId))})),n.label=2;case 2:return[2]}}))}))},t.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var t=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay($.ClientMetadataRefresh,4e3,(function(){return t.updateClientMetadataAndTryBecomePrimary().then((function(){return t.maybeGarbageCollectMultiClientState()})).then((function(){return t.scheduleClientMetadataAndPrimaryLeaseRefreshes()}))}))},t.prototype.isLocalClient=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.canActAsPrimary=function(t){var e=this;return Un(t).get(rn.key).next((function(n){if(null!==n&&e.isWithinAge(n.leaseTimestampMs,5e3)&&!e.isClientZombied(n.ownerId)){if(e.isLocalClient(n)&&e.networkEnabled)return!0;if(!e.isLocalClient(n)){if(!n.allowTabSynchronization)throw new T(E.FAILED_PRECONDITION,Mn);return!1}}return!(!e.networkEnabled||!e.inForeground)||zn(t).loadAll().next((function(t){return void 0===e.filterActiveClients(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&d(Pn,"Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[rn.store,vn.store],(function(e){return t.releasePrimaryLeaseIfHeld(e).next((function(){return t.removeClientMetadata(e)}))}))];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}}))}))},t.prototype.filterActiveClients=function(t,e){var n=this;return t.filter((function(t){return n.isWithinAge(t.updateTimeMs,e)&&!n.isClientZombied(t.clientId)}))},t.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[vn.store],(function(e){return zn(e).loadAll().next((function(e){return t.filterActiveClients(e,18e5).map((function(t){return t.clientId}))}))}))},t.clearPersistence=function(e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return t.isAvailable()?(n=e+t.MAIN_DATABASE,[4,qt.delete(n)]):[2,Promise.resolve()];case 1:return r.sent(),[2]}}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getMutationQueue=function(t){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),Zt.forUser(t,this.serializer,this.indexManager,this.referenceDelegate)},t.prototype.getQueryCache=function(){return v(this.started,"Cannot initialize QueryCache before persistence is started."),this.queryCache},t.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},t.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},t.prototype.runTransaction=function(t,e,n){var r=this;d(Pn,"Starting transaction:",t);var i,o=e.endsWith("idempotent"),a=e.startsWith("readonly")?o?"readonly-idempotent":"readonly":o?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,Tn,(function(o){return i=new Ln(o,r.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?r.verifyPrimaryLease(o).next((function(t){return!!t||r.canActAsPrimary(o)})).next((function(e){if(!e)throw y("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.queue.enqueueAndForget((function(){return r.primaryStateListener(!1)})),new T(E.FAILED_PRECONDITION,xn);return n(i)})).next((function(t){return r.acquireOrExtendPrimaryLease(o).next((function(){return t}))})):r.verifyAllowTabSynchronization(o).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.verifyAllowTabSynchronization=function(t){var e=this;return Un(t).get(rn.key).next((function(t){if(null!==t&&e.isWithinAge(t.leaseTimestampMs,5e3)&&!e.isClientZombied(t.ownerId)&&!e.isLocalClient(t)&&!t.allowTabSynchronization)throw new T(E.FAILED_PRECONDITION,Mn)}))},t.prototype.acquireOrExtendPrimaryLease=function(t){var e=new rn(this.clientId,this.allowTabSynchronization,Date.now());return Un(t).put(rn.key,e)},t.isAvailable=function(){return qt.isAvailable()},t.buildStoragePrefix=function(t){var e=t.databaseId.projectId;return t.databaseId.isDefaultDatabase||(e+="."+t.databaseId.database),"firestore/"+t.persistenceKey+"/"+e+"/"},t.prototype.releasePrimaryLeaseIfHeld=function(t){var e=this,n=Un(t);return n.get(rn.key).next((function(t){return e.isLocalClient(t)?(d(Pn,"Releasing primary lease."),n.delete(rn.key)):Ht.resolve()}))},t.prototype.isWithinAge=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(y("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.attachVisibilityHandler=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){t.queue.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.updateClientMetadataAndTryBecomePrimary()}))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},t.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},t.prototype.attachWindowUnloadHook=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){t.markClientZombied(),t.queue.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("unload",this.windowUnloadHandler))},t.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},t.prototype.isClientZombied=function(t){try{var e=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(t));return d(Pn,"Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return y(Pn,"Failed to get zombied client id.",t),!1}},t.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){y("Failed to set zombie client id.",t)}},t.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(t){}},t.prototype.zombiedClientLocalStorageKey=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t.MAIN_DATABASE="main",t}();function Fn(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){if(!function(t){return t.code===E.FAILED_PRECONDITION&&t.message===xn}(t))throw t;return d(Pn,"Unexpectedly lost primary lease"),[2]}))}))}function Un(t){return t.store(rn.store)}function zn(t){return t.store(vn.store)}var Vn=function(){function t(t,e){this.db=t,this.inMemoryPins=null,this.garbageCollector=new Bn(this,e)}return t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocmentCount(t);return this.db.getQueryCache().getQueryCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocmentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getQueryCache().forEachTarget(t,e)},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){return this.forEachOrphanedDocument(t,(function(t,n){return e(n)}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return Hn(t,e)},t.prototype.removeReference=function(t,e){return Hn(t,e)},t.prototype.removeTargets=function(t,e,n){return this.db.getQueryCache().removeTargets(t,e,n)},t.prototype.removeMutationReference=function(t,e){return Hn(t,e)},t.prototype.isPinned=function(t,e){return this.inMemoryPins.containsKey(e)?Ht.resolve(!0):function(t,e){var n=!1;return ie(t).iterateSerial((function(r){return $t(t,r,e).next((function(t){return t&&(n=!0),Ht.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.forEachOrphanedDocument(t,(function(a,s){if(s<=e){var c=n.isPinned(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),pe(t).delete([0,vt(a.path)])}))}));i.push(c)}})).next((function(){return Ht.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getQueryCache().updateQueryData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Hn(t,e)},t.prototype.forEachOrphanedDocument=function(t,e){var n,r=pe(t),i=ot.INVALID;return r.iterate({index:fn.documentTargetsIndex},(function(t,r){var o=t[0],a=(t[1],r.path),s=r.sequenceNumber;0===o?(i!==ot.INVALID&&e(new lt(Et(n)),i),i=s,n=a):i=ot.INVALID})).next((function(){i!==ot.INVALID&&e(new lt(Et(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Hn(t,e){return pe(t).put(function(t,e){return new fn(0,vt(t.path),e)}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn=function(){function t(t,e,n){this.remoteDocumentCache=t,this.mutationQueue=e,this.indexManager=n}return t.prototype.getDocument=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.getDocumentInternal(t,e,r)}))},t.prototype.getDocumentInternal=function(t,e,n){return this.remoteDocumentCache.getEntry(t,e).next((function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t}))},t.prototype.applyLocalMutationsToDocuments=function(t,e,n){var r=Bt();return e.forEach((function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)})),r},t.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next((function(e){return n.getLocalViewOfDocuments(t,e)}))},t.prototype.getLocalViewOfDocuments=function(t,e){var n=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(r){var i=n.applyLocalMutationsToDocuments(t,e,r),o=Rt();return i.forEach((function(t,e){e||(e=new He(t,St.forDeletedDoc())),o=o.insert(t,e)})),o}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return e.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(t,e.path):e.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(t,e,n):this.getDocumentsMatchingCollectionQuery(t,e,n)},t.prototype.getDocumentsMatchingDocumentQuery=function(t,e){return this.getDocument(t,new lt(e)).next((function(t){var e=Pt();return t instanceof Ve&&(e=e.insert(t.key,t)),e}))},t.prototype.getDocumentsMatchingCollectionGroupQuery=function(t,e,n){var r=this;v(e.path.isEmpty(),"Currently we only support collection group queries at the root.");var i=e.collectionGroup,o=Pt();return this.indexManager.getCollectionParents(t,i).next((function(a){return Ht.forEach(a,(function(a){var s=e.asCollectionQueryAtPath(a.child(i));return r.getDocumentsMatchingCollectionQuery(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.getDocumentsMatchingCollectionQuery=function(t,e,n){var r,i,o=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o.mutationQueue.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.addMissingBaseDocuments(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var c=s[a],u=c.key,l=r.get(u),h=c.applyToLocalView(l,l,o.localWriteTime);r=h instanceof Ve?r.insert(u,h):r.remove(u)}}))})).next((function(){return r.forEach((function(t,n){e.matches(n)||(r=r.remove(t))})),r}))},t.prototype.addMissingBaseDocuments=function(t,e,n){for(var r=jt(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var c=s[a];c instanceof Te&&null===n.get(c.key)&&(r=r.add(c.key))}var u=n;return this.remoteDocumentCache.getEntries(t,r).next((function(t){return t.forEach((function(t,e){null!==e&&e instanceof Ve&&(u=u.insert(t,e))})),u}))},t}(),qn=function(){function t(){this.refsByKey=new Ct(Wn.compareByKey),this.refsByTarget=new Ct(Wn.compareByTargetId)}return t.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},t.prototype.addReference=function(t,e){var n=new Wn(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},t.prototype.addReferences=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.removeRef(new Wn(t,e))},t.prototype.removeReferences=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.removeReferencesForId=function(t){var e=this,n=lt.EMPTY,r=new Wn(n,t),i=new Wn(n,t+1),o=[];return this.refsByTarget.forEachInRange([r,i],(function(t){e.removeRef(t),o.push(t.key)})),o},t.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach((function(e){return t.removeRef(e)}))},t.prototype.removeRef=function(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)},t.prototype.referencesForId=function(t){var e=lt.EMPTY,n=new Wn(e,t),r=new Wn(e,t+1),i=jt();return this.refsByTarget.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Wn(t,0),n=this.refsByKey.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Wn=function(){function t(t,e){this.key=t,this.targetOrBatchId=e}return t.compareByKey=function(t,e){return lt.comparator(t.key,e.key)||Y(t.targetOrBatchId,e.targetOrBatchId)},t.compareByTargetId=function(t,e){return Y(t.targetOrBatchId,e.targetOrBatchId)||lt.comparator(t.key,e.key)},t}(),Kn=function(){function t(t,e,n){this.persistence=t,this.queryEngine=e,this.localViewReferences=new qn,this.queryDataByTarget=new kt(Y),this.targetIdByQuery=new qe((function(t){return t.canonicalId()})),this.lastDocumentChangeReadTime=St.MIN,v(t.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=t.getMutationQueue(n),this.remoteDocuments=t.getRemoteDocumentCache(),this.queryCache=t.getQueryCache(),this.localDocuments=new Gn(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}return t.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},t.prototype.handleUserChange=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i=this;return a.__generator(this,(function(o){switch(o.label){case 0:return e=this.mutationQueue,n=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",(function(r){var o;return i.mutationQueue.getAllMutationBatches(r).next((function(a){return o=a,e=i.persistence.getMutationQueue(t),n=new Gn(i.remoteDocuments,e,i.persistence.getIndexManager()),e.getAllMutationBatches(r)})).next((function(t){for(var e=[],i=[],a=jt(),s=0,c=o;s<c.length;s++){var u=c[s];e.push(u.batchId);for(var l=0,h=u.mutations;l<h.length;l++){var p=h[l];a=a.add(p.key)}}for(var f=0,d=t;f<d.length;f++){u=d[f],i.push(u.batchId);for(var y=0,m=u.mutations;y<m.length;y++)p=m[y],a=a.add(p.key)}return n.getDocuments(r,a).next((function(t){return{affectedDocuments:t,removedBatchIds:e,addedBatchIds:i}}))}))}))];case 1:return r=o.sent(),this.mutationQueue=e,this.localDocuments=n,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,r]}}))}))},t.prototype.localWrite=function(t){var e,n=this,r=Tt.now(),i=t.reduce((function(t,e){return t.add(e.key)}),jt());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",(function(o){return n.localDocuments.getDocuments(o,i).next((function(i){e=i;for(var a=[],s=0,c=t;s<c.length;s++){var u=c[s],l=u.extractBaseValue(e.get(u.key));null!=l&&a.push(new Te(u.key,l,l.fieldMask(),be.exists(!0)))}return n.mutationQueue.addMutationBatch(o,r,a,t)}))})).then((function(t){var n=t.applyToLocalDocumentSet(e);return{batchId:t.batchId,changes:n}}))},t.prototype.lookupMutationDocuments=function(t){var e=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",(function(n){return e.mutationQueue.lookupMutationKeys(n,t).next((function(t){return t?e.localDocuments.getDocuments(n,t):Ht.resolve(null)}))}))},t.prototype.acknowledgeBatch=function(t){var e=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",(function(n){var r=t.batch.keys(),i=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return e.mutationQueue.acknowledgeBatch(n,t.batch,t.streamToken).next((function(){return e.applyWriteToRemoteDocuments(n,t,i)})).next((function(){return i.apply(n)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.rejectBatch=function(t){var e=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",(function(n){var r;return e.mutationQueue.lookupMutationBatch(n,t).next((function(t){return v(null!==t,"Attempt to reject nonexistent batch!"),r=t.keys(),e.mutationQueue.removeMutationBatch(n,t)})).next((function(){return e.mutationQueue.performConsistencyCheck(n)})).next((function(){return e.localDocuments.getDocuments(n,r)}))}))},t.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))},t.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",(function(e){return t.mutationQueue.getLastStreamToken(e)}))},t.prototype.setLastStreamToken=function(t){var e=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",(function(n){return e.mutationQueue.setLastStreamToken(n,t)}))},t.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",(function(e){return t.queryCache.getLastRemoteSnapshotVersion(e)}))},t.prototype.applyRemoteEvent=function(e){var n=this,r=e.snapshotVersion,i=this.queryDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",(function(o){var a=n.remoteDocuments.newChangeBuffer({trackRemovals:!0});i=n.queryDataByTarget;var s=[];A(e.targetChanges,(function(e,a){var c=i.get(e);if(c){s.push(n.queryCache.removeMatchingKeys(o,a.removedDocuments,e).next((function(){return n.queryCache.addMatchingKeys(o,a.addedDocuments,e)})));var u=a.resumeToken;if(u.length>0){var l=c.withResumeToken(u,r).withSequenceNumber(o.currentSequenceNumber);i=i.insert(e,l),t.shouldPersistQueryData(c,l,a)&&s.push(n.queryCache.updateQueryData(o,l))}}}));var c=Rt(),u=jt();if(e.documentUpdates.forEach((function(t,e){u=u.add(t)})),s.push(a.getEntries(o,u).next((function(t){e.documentUpdates.forEach((function(i,u){var l=t.get(i);u instanceof He&&u.version.isEqual(St.MIN)?(a.removeEntry(i,r),c=c.insert(i,u)):null==l||u.version.compareTo(l.version)>0||0===u.version.compareTo(l.version)&&l.hasPendingWrites?(St.MIN.isEqual(r)&&y("LocalStore","Cannot add a document when the remote version is zero"),a.addEntry(u,r),c=c.insert(i,u)):d("LocalStore","Ignoring outdated watch update for ",i,". Current version:",l.version," Watch version:",u.version),e.resolvedLimboDocuments.has(i)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(o,i))}))}))),!r.isEqual(St.MIN)){var l=n.queryCache.getLastRemoteSnapshotVersion(o).next((function(t){return v(r.compareTo(t)>=0,"Watch stream reverted to previous snapshot?? "+r+" < "+t),n.queryCache.setTargetsMetadata(o,o.currentSequenceNumber,r)}));s.push(l)}return Ht.waitFor(s).next((function(){return a.apply(o)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(o,c)}))})).then((function(t){return n.queryDataByTarget=i,t}))},t.shouldPersistQueryData=function(t,e,n){return v(e.resumeToken.length>0,"Attempted to persist query data with no resume token"),0===t.resumeToken.length||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0},t.prototype.notifyLocalViewChanges=function(t){for(var e=this,n=0,r=t;n<r.length;n++){var i=r[n],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.queryDataByTarget.get(o);v(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,c=a.withLastLimboFreeSnapshotVersion(s);this.queryDataByTarget=this.queryDataByTarget.insert(o,c)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",(function(n){return Ht.forEach(t,(function(t){return Ht.forEach(t.removedKeys,(function(t){return e.persistence.referenceDelegate.removeReference(n,t)}))}))}))},t.prototype.nextMutationBatch=function(t){var e=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",(function(n){return void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)}))},t.prototype.readDocument=function(t){var e=this;return this.persistence.runTransaction("read document","readonly-idempotent",(function(n){return e.localDocuments.getDocument(n,t)}))},t.prototype.allocateQuery=function(t){var e=this;return this.persistence.runTransaction("Allocate query","readwrite-idempotent",(function(n){var r;return e.queryCache.getQueryData(n,t).next((function(i){return i?(r=i,Ht.resolve(r)):e.queryCache.allocateTargetId(n).next((function(i){return r=new wn(t,i,gn.Listen,n.currentSequenceNumber),e.queryCache.addQueryData(n,r).next((function(){return r}))}))}))})).then((function(n){return v(null===e.queryDataByTarget.get(n.targetId),"Tried to allocate an already allocated query: "+t),e.queryDataByTarget=e.queryDataByTarget.insert(n.targetId,n),e.targetIdByQuery.set(t,n.targetId),n}))},t.prototype.getQueryData=function(t,e){var n=this.targetIdByQuery.get(e);return void 0!==n?Ht.resolve(this.queryDataByTarget.get(n)):this.queryCache.getQueryData(t,e)},t.prototype.releaseQuery=function(t,e){var n,r=this,i=e?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release query",i,(function(i){var o=r.targetIdByQuery.get(t);v(void 0!==o,"Tried to release nonexistent query: "+t),n=o;var a=r.queryDataByTarget.get(n),s=r.localViewReferences.removeReferencesForId(n);return e?Ht.resolve():Ht.forEach(s,(function(t){return r.persistence.referenceDelegate.removeReference(i,t)})).next((function(){r.persistence.referenceDelegate.removeTarget(i,a)}))})).then((function(){r.queryDataByTarget=r.queryDataByTarget.remove(n),r.targetIdByQuery.delete(t)}))},t.prototype.executeQuery=function(t,e){var n=this,r=St.MIN,i=jt();return this.persistence.runTransaction("Execute query","readonly-idempotent",(function(o){return n.getQueryData(o,t).next((function(t){if(t)return r=t.lastLimboFreeSnapshotVersion,n.queryCache.getMatchingKeysForTargetId(o,t.targetId).next((function(t){i=t}))})).next((function(){return n.queryEngine.getDocumentsMatchingQuery(o,t,e?r:St.MIN,e?i:jt())})).next((function(t){return{documents:t,remoteKeys:i}}))}))},t.prototype.remoteDocumentKeys=function(t){var e=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",(function(n){return e.queryCache.getMatchingKeysForTargetId(n,t)}))},t.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},t.prototype.removeCachedMutationBatchMetadata=function(t){this.mutationQueue.removeCachedMutationKeys(t)},t.prototype.setNetworkEnabled=function(t){this.persistence.setNetworkEnabled(t)},t.prototype.applyWriteToRemoteDocuments=function(t,e,n){var r=this,i=e.batch,o=i.keys(),a=Ht.resolve();return o.forEach((function(r){a=a.next((function(){return n.getEntry(t,r)})).next((function(t){var o=t,a=e.docVersions.get(r);v(null!==a,"ackVersions should contain every doc in the write."),(!o||o.version.compareTo(a)<0)&&((o=i.applyToRemoteDocument(r,o,e))?n.addEntry(o,e.commitVersion):v(!t,"Mutation batch "+i+" applied to document "+t+" resulted in null"))}))})),a.next((function(){return r.mutationQueue.removeMutationBatch(t,i)}))},t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",(function(n){return t.collect(n,e.queryDataByTarget)}))},t.prototype.getQueryForTarget=function(t){var e=this,n=this.queryDataByTarget.get(t);return n?Promise.resolve(n.query):this.persistence.runTransaction("Get query data","readonly-idempotent",(function(n){return e.queryCache.getQueryDataForTarget(n,t).next((function(t){return t?t.query:null}))}))},t.prototype.getNewDocumentChanges=function(){var t=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",(function(e){return t.remoteDocuments.getNewDocumentChanges(e,t.lastDocumentChangeReadTime)})).then((function(e){var n=e.changedDocs,r=e.readTime;return t.lastDocumentChangeReadTime=r,n}))},t.prototype.synchronizeLastDocumentChangeReadTime=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e=this;return a.__generator(this,(function(n){return this.remoteDocuments instanceof Ke?(t=this.remoteDocuments,[2,this.persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",(function(e){return t.getLastDocumentChange(e)})).then((function(t){var n=t.readTime;e.lastDocumentChangeReadTime=n}))]):[2]}))}))},t.RESUME_TOKEN_MAX_AGE_MICROS=3e8,t}(),Yn=function(){function t(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=_(),this.batchesByDocumentKey=new Ct(Wn.compareByKey)}return t.prototype.checkEmpty=function(t){return Ht.resolve(0===this.mutationQueue.length)},t.prototype.acknowledgeBatch=function(t,e,n){var r=e.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ht.resolve()},t.prototype.getLastStreamToken=function(t){return Ht.resolve(this.lastStreamToken)},t.prototype.setLastStreamToken=function(t,e){return this.lastStreamToken=e,Ht.resolve()},t.prototype.addMutationBatch=function(t,e,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new zt(i,e,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var c=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Wn(c.key,i)),this.indexManager.addToCollectionParentIndex(t,c.key.path.popLast())}return Ht.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Ht.resolve(this.findMutationBatch(e))},t.prototype.lookupMutationKeys=function(t,e){var n=this.findMutationBatch(e);return v(null!=n,"Failed to find local mutation batch."),Ht.resolve(n.keys())},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.indexOfBatchId(n),i=r<0?0:r;return Ht.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Ht.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},t.prototype.getAllMutationBatches=function(t){return Ht.resolve(this.mutationQueue.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Wn(e,0),i=new Wn(e,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([r,i],(function(t){v(e.isEqual(t.key),"Should only iterate over a single key's batches");var r=n.findMutationBatch(t.targetOrBatchId);v(null!==r,"Batches in the index must exist in the main table"),o.push(r)})),Ht.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new Ct(Y);return e.forEach((function(t){var e=new Wn(t,0),i=new Wn(t,Number.POSITIVE_INFINITY);n.batchesByDocumentKey.forEachInRange([e,i],(function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),r=r.add(e.targetOrBatchId)}))})),Ht.resolve(this.findMutationBatches(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;lt.isDocumentKey(i)||(i=i.child(""));var o=new Wn(new lt(i),0),a=new Ct(Y);return this.batchesByDocumentKey.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.targetOrBatchId)),!0)}),o),Ht.resolve(this.findMutationBatches(a))},t.prototype.findMutationBatches=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.findMutationBatch(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;v(0===this.indexOfExistingBatchId(e.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var r=this.batchesByDocumentKey;return Ht.forEach(e.mutations,(function(i){var o=new Wn(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.removeMutationReference(t,i.key)})).next((function(){n.batchesByDocumentKey=r}))},t.prototype.removeCachedMutationKeys=function(t){},t.prototype.containsKey=function(t,e){var n=new Wn(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return Ht.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),Ht.resolve()},t.prototype.indexOfExistingBatchId=function(t,e){var n=this.indexOfBatchId(t);return v(n>=0&&n<this.mutationQueue.length,"Batches must exist to be "+e),n},t.prototype.indexOfBatchId=function(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId},t.prototype.findMutationBatch=function(t){var e=this.indexOfBatchId(t);if(e<0||e>=this.mutationQueue.length)return null;var n=this.mutationQueue[e];return v(n.batchId===t,"If found batch must match"),n},t}(),Jn=function(){function t(t){this.persistence=t,this.queries=new qe((function(t){return t.canonicalId()})),this.lastRemoteSnapshotVersion=St.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new qn,this.targetCount=0,this.targetIdGenerator=se.forQueryCache()}return t.prototype.getTargetCount=function(t){return Ht.resolve(this.targetCount)},t.prototype.forEachTarget=function(t,e){return this.queries.forEach((function(t,n){return e(n)})),Ht.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Ht.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Ht.resolve(this.highestSequenceNumber)},t.prototype.allocateTargetId=function(t){var e=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=e,Ht.resolve(e)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),Ht.resolve()},t.prototype.saveQueryData=function(t){this.queries.set(t.query,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)},t.prototype.addQueryData=function(t,e){return v(!this.queries.has(e.query),"Adding a query that already exists"),this.saveQueryData(e),this.targetCount+=1,Ht.resolve()},t.prototype.updateQueryData=function(t,e){return v(this.queries.has(e.query),"Updating a non-existent query"),this.saveQueryData(e),Ht.resolve()},t.prototype.removeQueryData=function(t,e){return v(this.targetCount>0,"Removing a target from an empty cache"),v(this.queries.has(e.query),"Removing a non-existent target from the cache"),this.queries.delete(e.query),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,Ht.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.queries.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.queries.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Ht.waitFor(o).next((function(){return i}))},t.prototype.getQueryCount=function(t){return Ht.resolve(this.targetCount)},t.prototype.getQueryData=function(t,e){var n=this.queries.get(e)||null;return Ht.resolve(n)},t.prototype.getQueryDataForTarget=function(t,e){return g("Not yet implemented.")},t.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.addReference(t,e))})),Ht.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.removeReference(t,e))})),Ht.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.references.removeReferencesForId(e),Ht.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.references.referencesForId(e);return Ht.resolve(n)},t.prototype.containsKey=function(t,e){return Ht.resolve(this.references.containsKey(e))},t}(),Qn=function(){function t(t,e){this.indexManager=t,this.sizer=e,this.docs=new kt(lt.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){v(!n.isEqual(St.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Ht.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=Bt();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)})),Ht.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){v(!e.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=Pt(),i=new lt(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,c=a.value,u=c.maybeDocument,l=c.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||u instanceof Ve&&e.matches(u)&&(r=r.insert(u.key,u))}return Ht.resolve(r)},t.prototype.forEachDocumentKey=function(t,e){return Ht.forEach(this.docs,(function(t){return e(t)}))},t.prototype.getNewDocumentChanges=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},t.prototype.newChangeBuffer=function(e){return new t.RemoteDocumentChangeBuffer(this)},t.prototype.getSize=function(t){return Ht.resolve(this.size)},t.RemoteDocumentChangeBuffer=function(t){function e(e){var n=t.call(this)||this;return n.documentCache=e,n}return a.__extends(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i?n.push(e.documentCache.addEntry(t,i,e.readTime)):e.documentCache.removeEntry(r)})),Ht.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.documentCache.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.documentCache.getEntries(t,e)},e}(We),t}(),Xn=function(){function t(t,e){var n=this;this.clientId=t,this.mutationQueues={},this.listenSequence=new ot(0),this._started=!1,this._started=!0,this.referenceDelegate=e(this),this.queryCache=new Jn(this),this.indexManager=new Ze,this.remoteDocumentCache=new Qn(this.indexManager,(function(t){return n.referenceDelegate.documentSize(t)}))}return t.createLruPersistence=function(e,n,r){return new t(e,(function(t){return new tr(t,new An(n),r)}))},t.createEagerPersistence=function(e){return new t(e,(function(t){return new $n(t)}))},t.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),t.prototype.getActiveClients=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return[2,[this.clientId]]}))}))},t.prototype.setPrimaryStateListener=function(t){return t(!0)},t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(t){},t.prototype.getIndexManager=function(){return this.indexManager},t.prototype.getMutationQueue=function(t){var e=this.mutationQueues[t.toKey()];return e||(e=new Yn(this.indexManager,this.referenceDelegate),this.mutationQueues[t.toKey()]=e),e},t.prototype.getQueryCache=function(){return this.queryCache},t.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},t.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new Zn(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next((function(t){return r.referenceDelegate.onTransactionCommitted(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.mutationQueuesContainKey=function(t,e){return Ht.or((n=this.mutationQueues,r=[],O(n,(function(t,e){return r.push(e)})),r).map((function(n){return function(){return n.containsKey(t,e)}})));var n,r},t}(),Zn=function(t){function e(e){var n=t.call(this)||this;return n.currentSequenceNumber=e,n}return a.__extends(e,t),e}(Dn),$n=function(){function t(t){this.persistence=t,this.inMemoryPins=null,this._orphanedDocuments=null}return Object.defineProperty(t.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw g("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.addReference=function(t,e){return this.orphanedDocuments.delete(e),Ht.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedDocuments.add(e),Ht.resolve()},t.prototype.removeMutationReference=function(t,e){return this.orphanedDocuments.add(e),Ht.resolve()},t.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.getQueryCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.orphanedDocuments.add(t)}))})).next((function(){return r.removeQueryData(t,e)}))},t.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},t.prototype.onTransactionCommitted=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ht.forEach(this.orphanedDocuments,(function(r){return e.isReferenced(t,r).next((function(t){t||n.removeEntry(r)}))})).next((function(){return e._orphanedDocuments=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.isReferenced(t,e).next((function(t){t?n.orphanedDocuments.delete(e):n.orphanedDocuments.add(e)}))},t.prototype.documentSize=function(t){return 0},t.prototype.isReferenced=function(t,e){var n=this;return Ht.or([function(){return n.persistence.getQueryCache().containsKey(t,e)},function(){return n.persistence.mutationQueuesContainKey(t,e)},function(){return Ht.resolve(n.inMemoryPins.containsKey(e))}])},t}(),tr=function(){function t(t,e,n){this.persistence=t,this.serializer=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new qe((function(t){return vt(t.path)})),this.garbageCollector=new Bn(this,n)}return t.prototype.onTransactionStarted=function(){},t.prototype.onTransactionCommitted=function(t){return Ht.resolve()},t.prototype.forEachTarget=function(t,e){return this.persistence.getQueryCache().forEachTarget(t,e)},t.prototype.getSequenceNumberCount=function(t){var e=this.orphanedDocumentCount(t);return this.persistence.getQueryCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.orphanedDocumentCount=function(t){var e=0;return this.forEachOrphanedDocumentSequenceNumber(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachOrphanedDocumentSequenceNumber=function(t,e){var n=this;return Ht.forEach(this.orphanedSequenceNumbers,(function(r,i){return n.isPinned(t,r,i).next((function(t){return t?Ht.resolve():e(i)}))}))},t.prototype.setInMemoryPins=function(t){this.inMemoryPins=t},t.prototype.removeTargets=function(t,e,n){return this.persistence.getQueryCache().removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.forEachDocumentKey(t,(function(i){return n.isPinned(t,i,e).next((function(t){t||(r++,o.removeEntry(i))}))})).next((function(){return o.apply(t)})).next((function(){return r}))},t.prototype.removeMutationReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Ht.resolve()},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getQueryCache().updateQueryData(t,n)},t.prototype.addReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Ht.resolve()},t.prototype.removeReference=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Ht.resolve()},t.prototype.updateLimboDocument=function(t,e){return this.orphanedSequenceNumbers.set(e,t.currentSequenceNumber),Ht.resolve()},t.prototype.documentSize=function(t){var e,n=this.serializer.toDbRemoteDocument(t,t.version);if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw g("Unknown remote document type");e=n.noDocument}return JSON.stringify(e).length},t.prototype.isPinned=function(t,e,n){var r=this;return Ht.or([function(){return r.persistence.mutationQueuesContainKey(t,e)},function(){return Ht.resolve(r.inMemoryPins.containsKey(e))},function(){return r.persistence.getQueryCache().containsKey(t,e)},function(){var t=r.orphanedSequenceNumbers.get(e);return Ht.resolve(void 0!==t&&t>n)}])},t.prototype.getCacheSize=function(t){return this.persistence.getRemoteDocumentCache().getSize(t)},t}(),er=function(){function t(){}return t.prototype.setLocalDocumentsView=function(t){this.localDocumentsView=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){return v(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),this.localDocumentsView.getDocumentsMatchingQuery(t,e,St.MIN)},t}(),nr=Number,rr=nr.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),ir=nr.MAX_SAFE_INTEGER||Math.pow(2,53)-1,or=nr.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t};
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function ar(t){return null==t}function sr(t){return or(t)&&t<=ir&&t>=rr}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cr,ur=1e3,lr=1.5,hr=6e4,pr=function(){function t(t,e,n,r,i){void 0===n&&(n=ur),void 0===r&&(r=lr),void 0===i&&(i=hr),this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}return t.prototype.reset=function(){this.currentBaseMs=0},t.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},t.prototype.backoffAndRun=function(t){var e=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);this.currentBaseMs>0&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,(function(){return e.lastAttemptTime=Date.now(),t()})),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},t.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},t.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},t}();!function(t){t[t.Initial=0]="Initial",t[t.Starting=1]="Starting",t[t.Open=2]="Open",t[t.Error=3]="Error",t[t.Backoff=4]="Backoff"}(cr||(cr={}));var fr,dr,yr=function(){function t(t,e,n,r,i,o){this.queue=t,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=cr.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new pr(t,e)}return t.prototype.isStarted=function(){return this.state===cr.Starting||this.state===cr.Open||this.state===cr.Backoff},t.prototype.isOpen=function(){return this.state===cr.Open},t.prototype.start=function(){this.state!==cr.Error?(v(this.state===cr.Initial,"Already started"),this.auth()):this.performBackoff()},t.prototype.stop=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.isStarted()?[4,this.close(cr.Initial)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=cr.Initial,this.backoff.reset()},t.prototype.markIdle=function(){var t=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,(function(){return t.handleIdleCloseTimer()})))},t.prototype.sendRequest=function(t){this.cancelIdleCheck(),this.stream.send(t)},t.prototype.handleIdleCloseTimer=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.isOpen()?[2,this.close(cr.Initial)]:[2]}))}))},t.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},t.prototype.close=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(n){switch(n.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===cr.Error||ar(e),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==cr.Error?this.backoff.reset():e&&e.code===E.RESOURCE_EXHAUSTED?(y(e.toString()),y("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===E.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.tearDown=function(){},t.prototype.auth=function(){var t=this;v(this.state===cr.Initial,"Must be in initial state to auth"),this.state=cr.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),n=this.closeCount;this.credentialsProvider.getToken().then((function(e){t.closeCount===n&&t.startStream(e)}),(function(n){e((function(){var e=new T(E.UNKNOWN,"Fetching auth token failed: "+n.message);return t.handleStreamClose(e)}))}))},t.prototype.startStream=function(t){var e=this;v(this.state===cr.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t),this.stream.onOpen((function(){n((function(){return v(e.state===cr.Starting,"Expected stream to be in state Starting, but was "+e.state),e.state=cr.Open,e.listener.onOpen()}))})),this.stream.onClose((function(t){n((function(){return e.handleStreamClose(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.performBackoff=function(){var t=this;v(this.state===cr.Error,"Should only perform backoff when in Error state"),this.state=cr.Backoff,this.backoff.backoffAndRun((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){return v(this.state===cr.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=cr.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]}))}))}))},t.prototype.handleStreamClose=function(t){return v(this.isStarted(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close(cr.Error,t)},t.prototype.getCloseGuardedDispatcher=function(t){var e=this;return function(n){e.queue.enqueueAndForget((function(){return e.closeCount===t?n():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),mr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,$.ListenStreamConnectionBackoff,$.ListenStreamIdle,n,r,o)||this;return a.serializer=i,a}return a.__extends(e,t),e.prototype.startRpc=function(t){return this.connection.openStream("Listen",t)},e.prototype.onMessage=function(t){this.backoff.reset();var e=this.serializer.fromWatchChange(t),n=this.serializer.versionFromListenResponse(t);return this.listener.onWatchChange(e,n)},e.prototype.watch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.addTarget=this.serializer.toTarget(t);var n=this.serializer.toListenRequestLabels(t);n&&(e.labels=n),this.sendRequest(e)},e.prototype.unwatch=function(t){var e={};e.database=this.serializer.encodedDatabaseId,e.removeTarget=t,this.sendRequest(e)},e}(yr),gr=function(t){function e(e,n,r,i,o){var a=t.call(this,e,$.WriteStreamConnectionBackoff,$.WriteStreamIdle,n,r,o)||this;return a.serializer=i,a.handshakeComplete_=!1,a.lastStreamToken=_(),a}return a.__extends(e,t),Object.defineProperty(e.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.handshakeComplete_=!1,t.prototype.start.call(this)},e.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},e.prototype.startRpc=function(t){return this.connection.openStream("Write",t)},e.prototype.onMessage=function(t){if(v(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=t.streamToken,this.handshakeComplete_){this.backoff.reset();var e=this.serializer.fromWriteResults(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.onMutationResult(n,e)}return v(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},e.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var t={};t.database=this.serializer.encodedDatabaseId,this.sendRequest(t)},e.prototype.writeMutations=function(t){var e=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(this.lastStreamToken.length>0,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:t.map((function(t){return e.serializer.toMutation(t)}))};this.sendRequest(n)},e}(yr),vr=function(){function t(t,e,n,r){this.queue=t,this.connection=e,this.credentials=n,this.serializer=r}return t.prototype.newPersistentWriteStream=function(t){return new gr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.newPersistentWatchStream=function(t){return new mr(this.queue,this.connection,this.credentials,this.serializer,t)},t.prototype.commit=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,writes:t.map((function(t){return e.serializer.toMutation(t)}))};return this.invokeRPC("Commit",n).then((function(t){return e.serializer.fromWriteResults(t.writeResults,t.commitTime)}))},t.prototype.lookup=function(t){var e=this,n={database:this.serializer.encodedDatabaseId,documents:t.map((function(t){return e.serializer.toName(t)}))};return this.invokeStreamingRPC("BatchGetDocuments",n).then((function(n){var r=Rt();n.forEach((function(t){var n=e.serializer.fromMaybeDocument(t);r=r.insert(n.key,n)}));var i=[];return t.forEach((function(t){var e=r.get(t);v(!!e,"Missing entity in write response for "+t),i.push(e)})),i}))},t.prototype.invokeRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeRPC(t,e,r)})).catch((function(t){throw t.code===E.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t.prototype.invokeStreamingRPC=function(t,e){var n=this;return this.credentials.getToken().then((function(r){return n.connection.invokeStreamingRPC(t,e,r)})).catch((function(t){throw t.code===E.UNAUTHENTICATED&&n.credentials.invalidateToken(),t}))},t}(),br=function(){function t(t){this.datastore=t,this.readVersions=Mt(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new T(E.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(t)];case 1:return(e=r.sent()).forEach((function(t){t instanceof He||t instanceof Ve?n.recordVersion(t):g("Document in a transaction was a "+t.constructor.name)})),[2,e]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutations(t,this.precondition(t))),this.writtenDocs.add(t)},t.prototype.update=function(t,e){try{this.write(e.toMutations(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t)},t.prototype.delete=function(t){this.write([new ke(t,this.precondition(t))]),this.writtenDocs.add(t)},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){var t;return a.__generator(this,(function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;if(t=this.readVersions,this.mutations.forEach((function(e){t=t.remove(e.key)})),!t.isEmpty())throw new T(E.INVALID_ARGUMENT,"Every document read in a transaction must also be written.");return[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t instanceof Ve)e=t.version;else{if(!(t instanceof He))throw g("Document in a transaction was a "+t.constructor.name);e=St.forDeletedDoc()}var n=this.readVersions.get(t.key);if(null!==n){if(!e.isEqual(n))throw new T(E.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(t.key,e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t);return!this.writtenDocs.has(t)&&e?be.updateTime(e):be.NONE},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t);if(!this.writtenDocs.has(t)&&e){if(e.isEqual(St.forDeletedDoc()))throw new T(E.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return be.updateTime(e)}return be.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(t)},t.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},t}();!function(t){t[t.Unknown=0]="Unknown",t[t.Online=1]="Online",t[t.Offline=2]="Offline"}(fr||(fr={})),function(t){t[t.RemoteStore=0]="RemoteStore",t[t.SharedClientState=1]="SharedClientState"}(dr||(dr={}));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _r,Er=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state=fr.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}return t.prototype.handleWatchStreamStart=function(){var t=this;0===this.watchStreamFailures&&(this.setAndBroadcast(fr.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay($.OnlineStateTimeout,1e4,(function(){return t.onlineStateTimer=null,v(t.state===fr.Unknown,"Timer should be canceled if we transitioned to a different state."),t.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),t.setAndBroadcast(fr.Offline),Promise.resolve()})))},t.prototype.handleWatchStreamFailure=function(t){this.state===fr.Online?(this.setAndBroadcast(fr.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,this.watchStreamFailures>=1&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+t.toString()),this.setAndBroadcast(fr.Offline)))},t.prototype.set=function(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t===fr.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)},t.prototype.setAndBroadcast=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.logClientOfflineWarningIfNecessary=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(y(e),this.shouldWarnClientIsOffline=!1):d("OnlineStateTracker",e)},t.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},t}();function Tr(t){switch(t){case E.OK:return g("Treated status OK as error");case E.CANCELLED:case E.UNKNOWN:case E.DEADLINE_EXCEEDED:case E.RESOURCE_EXHAUSTED:case E.INTERNAL:case E.UNAVAILABLE:case E.UNAUTHENTICATED:return!1;case E.INVALID_ARGUMENT:case E.NOT_FOUND:case E.ALREADY_EXISTS:case E.PERMISSION_DENIED:case E.FAILED_PRECONDITION:case E.ABORTED:case E.OUT_OF_RANGE:case E.UNIMPLEMENTED:case E.DATA_LOSS:return!0;default:return g("Unknown status code: "+t)}}function Sr(t){if(void 0===t)return y("GRPC error has no .code"),E.UNKNOWN;switch(t){case _r.OK:return E.OK;case _r.CANCELLED:return E.CANCELLED;case _r.UNKNOWN:return E.UNKNOWN;case _r.DEADLINE_EXCEEDED:return E.DEADLINE_EXCEEDED;case _r.RESOURCE_EXHAUSTED:return E.RESOURCE_EXHAUSTED;case _r.INTERNAL:return E.INTERNAL;case _r.UNAVAILABLE:return E.UNAVAILABLE;case _r.UNAUTHENTICATED:return E.UNAUTHENTICATED;case _r.INVALID_ARGUMENT:return E.INVALID_ARGUMENT;case _r.NOT_FOUND:return E.NOT_FOUND;case _r.ALREADY_EXISTS:return E.ALREADY_EXISTS;case _r.PERMISSION_DENIED:return E.PERMISSION_DENIED;case _r.FAILED_PRECONDITION:return E.FAILED_PRECONDITION;case _r.ABORTED:return E.ABORTED;case _r.OUT_OF_RANGE:return E.OUT_OF_RANGE;case _r.UNIMPLEMENTED:return E.UNIMPLEMENTED;case _r.DATA_LOSS:return E.DATA_LOSS;default:return g("Unknown status code: "+t)}}function kr(t){if(void 0===t)return _r.OK;switch(t){case E.OK:return _r.OK;case E.CANCELLED:return _r.CANCELLED;case E.UNKNOWN:return _r.UNKNOWN;case E.DEADLINE_EXCEEDED:return _r.DEADLINE_EXCEEDED;case E.RESOURCE_EXHAUSTED:return _r.RESOURCE_EXHAUSTED;case E.INTERNAL:return _r.INTERNAL;case E.UNAVAILABLE:return _r.UNAVAILABLE;case E.UNAUTHENTICATED:return _r.UNAUTHENTICATED;case E.INVALID_ARGUMENT:return _r.INVALID_ARGUMENT;case E.NOT_FOUND:return _r.NOT_FOUND;case E.ALREADY_EXISTS:return _r.ALREADY_EXISTS;case E.PERMISSION_DENIED:return _r.PERMISSION_DENIED;case E.FAILED_PRECONDITION:return _r.FAILED_PRECONDITION;case E.ABORTED:return _r.ABORTED;case E.OUT_OF_RANGE:return _r.OUT_OF_RANGE;case E.UNIMPLEMENTED:return _r.UNIMPLEMENTED;case E.DATA_LOSS:return _r.DATA_LOSS;default:return g("Unknown status code: "+t)}}!function(t){t[t.OK=0]="OK",t[t.CANCELLED=1]="CANCELLED",t[t.UNKNOWN=2]="UNKNOWN",t[t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",t[t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",t[t.NOT_FOUND=5]="NOT_FOUND",t[t.ALREADY_EXISTS=6]="ALREADY_EXISTS",t[t.PERMISSION_DENIED=7]="PERMISSION_DENIED",t[t.UNAUTHENTICATED=16]="UNAUTHENTICATED",t[t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",t[t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",t[t.ABORTED=10]="ABORTED",t[t.OUT_OF_RANGE=11]="OUT_OF_RANGE",t[t.UNIMPLEMENTED=12]="UNIMPLEMENTED",t[t.INTERNAL=13]="INTERNAL",t[t.UNAVAILABLE=14]="UNAVAILABLE",t[t.DATA_LOSS=15]="DATA_LOSS"}(_r||(_r={}));
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wr,Ar,Or=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||lt.comparator(e.key,n.key)}:function(t,e){return lt.comparator(t.key,e.key)},this.keyedMap=Pt(),this.sortedSet=new kt(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t[t.Added=0]="Added",t[t.Removed=1]="Removed",t[t.Modified=2]="Modified",t[t.Metadata=3]="Metadata"}(wr||(wr={})),function(t){t[t.Local=0]="Local",t[t.Synced=1]="Synced"}(Ar||(Ar={}));var Cr,Ir=function(){function t(){this.changeMap=new kt(lt.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.changeMap.get(e);n?t.type!==wr.Added&&n.type===wr.Metadata?this.changeMap=this.changeMap.insert(e,t):t.type===wr.Metadata&&n.type!==wr.Removed?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===wr.Modified&&n.type===wr.Modified?this.changeMap=this.changeMap.insert(e,{type:wr.Modified,doc:t.doc}):t.type===wr.Modified&&n.type===wr.Added?this.changeMap=this.changeMap.insert(e,{type:wr.Added,doc:t.doc}):t.type===wr.Removed&&n.type===wr.Added?this.changeMap=this.changeMap.remove(e):t.type===wr.Removed&&n.type===wr.Modified?this.changeMap=this.changeMap.insert(e,{type:wr.Removed,doc:n.doc}):t.type===wr.Added&&n.type===wr.Removed?this.changeMap=this.changeMap.insert(e,{type:wr.Modified,doc:t.doc}):g("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(e,t)},t.prototype.getChanges=function(){var t=[];return this.changeMap.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Nr=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:wr.Added,doc:t})})),new t(e,n,Or.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Rr=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r,i=((r={})[e]=Br.createSynthesizedTargetChangeForCurrentChange(e,n),r);return new t(St.MIN,i,Ut(),Rt(),jt())},t}(),Br=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(_(),n,jt(),jt(),jt())},t}(),Dr=function(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r},Pr=function(t,e){this.targetId=t,this.existenceFilter=e};!function(t){t[t.NoChange=0]="NoChange",t[t.Added=1]="Added",t[t.Removed=2]="Removed",t[t.Current=3]="Current",t[t.Reset=4]="Reset"}(Cr||(Cr={}));var xr=function(t,e,n,r){void 0===n&&(n=_()),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Mr=function(){function t(){this.pendingResponses=0,this.documentChanges=Fr(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),t.prototype.updateResumeToken=function(t){t.length>0&&(this._hasPendingChanges=!0,this._resumeToken=t)},t.prototype.toTargetChange=function(){var t=jt(),e=jt(),n=jt();return this.documentChanges.forEach((function(r,i){switch(i){case wr.Added:t=t.add(r);break;case wr.Modified:e=e.add(r);break;case wr.Removed:n=n.add(r);break;default:g("Encountered invalid change type: "+i)}})),new Br(this._resumeToken,this._current,t,e,n)},t.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=Fr()},t.prototype.addDocumentChange=function(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)},t.prototype.removeDocumentChange=function(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)},t.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},t.prototype.recordTargetResponse=function(){this.pendingResponses-=1},t.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},t}(),Lr=function(){function t(t){this.metadataProvider=t,this.targetStates={},this.pendingDocumentUpdates=Rt(),this.pendingDocumentTargetMapping=jr(),this.pendingTargetResets=new Ct(Y)}return t.prototype.handleDocumentChange=function(t){for(var e=0,n=t.updatedTargetIds;e<n.length;e++){var r=n[e];t.newDoc instanceof Ve?this.addDocumentToTarget(r,t.newDoc):t.newDoc instanceof He&&this.removeDocumentFromTarget(r,t.key,t.newDoc)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,t.key,t.newDoc)},t.prototype.handleTargetChange=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.ensureTargetState(n);switch(t.state){case Cr.NoChange:e.isActiveTarget(n)&&r.updateResumeToken(t.resumeToken);break;case Cr.Added:r.recordTargetResponse(),r.isPending||r.clearPendingChanges(),r.updateResumeToken(t.resumeToken);break;case Cr.Removed:r.recordTargetResponse(),r.isPending||e.removeTarget(n),v(!t.cause,"WatchChangeAggregator does not handle errored targets");break;case Cr.Current:e.isActiveTarget(n)&&(r.markCurrent(),r.updateResumeToken(t.resumeToken));break;case Cr.Reset:e.isActiveTarget(n)&&(e.resetTarget(n),r.updateResumeToken(t.resumeToken));break;default:g("Unknown target watch change state: "+t.state)}}))},t.prototype.forEachTarget=function(t,e){t.targetIds.length>0?t.targetIds.forEach(e):A(this.targetStates,e)},t.prototype.handleExistenceFilter=function(t){var e=t.targetId,n=t.existenceFilter.count,r=this.queryDataForActiveTarget(e);if(r){var i=r.query;if(i.isDocumentQuery())if(0===n){var o=new lt(i.path);this.removeDocumentFromTarget(e,o,new He(o,St.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(e)!==n&&(this.resetTarget(e),this.pendingTargetResets=this.pendingTargetResets.add(e))}},t.prototype.createRemoteEvent=function(t){var e=this,n={};A(this.targetStates,(function(r,i){var o=e.queryDataForActiveTarget(r);if(o){if(i.current&&o.query.isDocumentQuery()){var a=new lt(o.query.path);null!==e.pendingDocumentUpdates.get(a)||e.targetContainsDocument(r,a)||e.removeDocumentFromTarget(r,a,new He(a,t))}i.hasPendingChanges&&(n[r]=i.toTargetChange(),i.clearPendingChanges())}}));var r=jt();this.pendingDocumentTargetMapping.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.queryDataForActiveTarget(t);return!n||n.purpose===gn.LimboResolution||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Rr(t,n,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=Rt(),this.pendingDocumentTargetMapping=jr(),this.pendingTargetResets=new Ct(Y),i},t.prototype.addDocumentToTarget=function(t,e){if(this.isActiveTarget(t)){var n=this.targetContainsDocument(t,e.key)?wr.Modified:wr.Added;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}},t.prototype.removeDocumentFromTarget=function(t,e,n){if(this.isActiveTarget(t)){var r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,wr.Removed):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}},t.prototype.removeTarget=function(t){delete this.targetStates[t]},t.prototype.getCurrentDocumentCountForTarget=function(t){var e=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.recordPendingTargetRequest=function(t){this.ensureTargetState(t).recordPendingTargetRequest()},t.prototype.ensureTargetState=function(t){return this.targetStates[t]||(this.targetStates[t]=new Mr),this.targetStates[t]},t.prototype.ensureDocumentTargetMapping=function(t){var e=this.pendingDocumentTargetMapping.get(t);return e||(e=new Ct(Y),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e},t.prototype.isActiveTarget=function(t){var e=null!==this.queryDataForActiveTarget(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.queryDataForActiveTarget=function(t){var e=this.targetStates[t];return e&&e.isPending?null:this.metadataProvider.getQueryDataForTarget(t)},t.prototype.resetTarget=function(t){var e=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new Mr,this.metadataProvider.getRemoteKeysForTarget(t).forEach((function(n){e.removeDocumentFromTarget(t,n,null)}))},t.prototype.targetContainsDocument=function(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)},t}();function jr(){return new kt(lt.comparator)}function Fr(){return new kt(lt.comparator)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ur="RemoteStore",zr=function(){function t(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback((function(t){n.enqueueAndForget((function(){return a.__awaiter(o,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(d(Ur,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.onlineStateTracker=new Er(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}return t.prototype.start=function(){return this.enableNetwork()},t.prototype.enableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){var t;return a.__generator(this,(function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(fr.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},t.prototype.disableNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(fr.Offline),[2]}}))}))},t.prototype.disableNetworkInternal=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.writeStream.stop()];case 1:return t.sent(),[4,this.watchStream.stop()];case 2:return t.sent(),this.writePipeline.length>0&&(d(Ur,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}}))}))},t.prototype.shutdown=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return d(Ur,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(fr.Unknown),[2]}}))}))},t.prototype.listen=function(t){v(!k(this.listenTargets,t.targetId),"listen called with duplicate targetId!"),this.listenTargets[t.targetId]=t,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(t)},t.prototype.unlisten=function(t){v(k(this.listenTargets,t),"unlisten called without assigned target ID!"),delete this.listenTargets[t],this.watchStream.isOpen()&&this.sendUnwatchRequest(t),C(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(fr.Unknown))},t.prototype.getQueryDataForTarget=function(t){return this.listenTargets[t]||null},t.prototype.getRemoteKeysForTarget=function(t){return this.syncEngine.getRemoteKeysForTarget(t)},t.prototype.sendWatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t.targetId),this.watchStream.watch(t)},t.prototype.sendUnwatchRequest=function(t){this.watchChangeAggregator.recordPendingTargetRequest(t),this.watchStream.unwatch(t)},t.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new Lr(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},t.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!C(this.listenTargets)},t.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},t.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},t.prototype.onWatchStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){var t=this;return a.__generator(this,(function(e){return A(this.listenTargets,(function(e,n){t.sendWatchRequest(n)})),[2]}))}))},t.prototype.onWatchStreamClose=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(fr.Unknown),[2]}))}))},t.prototype.onWatchStreamChange=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.onlineStateTracker.set(fr.Online),t instanceof xr&&t.state===Cr.Removed&&t.cause?[2,this.handleTargetError(t)]:(t instanceof Dr?this.watchChangeAggregator.handleDocumentChange(t):t instanceof Pr?this.watchChangeAggregator.handleExistenceFilter(t):(v(t instanceof xr,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(t)),e.isEqual(St.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return n=r.sent(),e.compareTo(n)>=0?[4,this.raiseWatchSnapshot(e)]:[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}}))}))},t.prototype.raiseWatchSnapshot=function(t){var e=this;v(!t.isEqual(St.MIN),"Can't raise event for unknown SnapshotVersion");var n=this.watchChangeAggregator.createRemoteEvent(t);return A(n.targetChanges,(function(n,r){if(r.resumeToken.length>0){var i=e.listenTargets[n];i&&(e.listenTargets[n]=i.withResumeToken(r.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.listenTargets[t];if(n){e.listenTargets[t]=n.withResumeToken(_(),n.snapshotVersion),e.sendUnwatchRequest(t);var r=new wn(n.query,t,gn.ExistenceFilterMismatch,n.sequenceNumber);e.sendWatchRequest(r)}})),this.syncEngine.applyRemoteEvent(n)},t.prototype.handleTargetError=function(t){var e=this;v(!!t.cause,"Handling target error without a cause");var n=t.cause,r=Promise.resolve();return t.targetIds.forEach((function(t){r=r.then((function(){return a.__awaiter(e,void 0,void 0,(function(){return a.__generator(this,(function(e){return k(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,n)]):[2]}))}))}))})),r},t.prototype.fillWritePipeline=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e;return a.__generator(this,(function(n){switch(n.label){case 0:return this.canAddToWritePipeline()?(t=this.writePipeline.length>0?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(e=n.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(e),[4,this.fillWritePipeline()];case 3:n.sent(),n.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}}))}))},t.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},t.prototype.outstandingWrites=function(){return this.writePipeline.length},t.prototype.addToWritePipeline=function(t){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(t),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(t.mutations)},t.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&this.writePipeline.length>0},t.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},t.prototype.onWriteStreamOpen=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.writeStream.writeHandshake(),[2]}))}))},t.prototype.onWriteHandshakeComplete=function(){var t=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then((function(){for(var e=0,n=t.writePipeline;e<n.length;e++){var r=n[e];t.writeStream.writeMutations(r.mutations)}})).catch(Fn)},t.prototype.onMutationResult=function(t,e){var n=this;v(this.writePipeline.length>0,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=Vt.from(r,t,e,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then((function(){return n.fillWritePipeline()}))},t.prototype.onWriteStreamClose=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e=this;return a.__generator(this,(function(n){return void 0===t&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),t&&this.writePipeline.length>0?[2,(this.writeStream.handshakeComplete?this.handleWriteError(t):this.handleHandshakeError(t)).then((function(){e.shouldStartWriteStream()&&e.startWriteStream()}))]:[2]}))}))},t.prototype.handleHandshakeError=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return Tr(t.code)?(d(Ur,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(Fn)]):[2]}))}))},t.prototype.handleWriteError=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){return Tr(i=t.code)&&i!==E.ABORTED?(e=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(e.batchId,t).then((function(){return n.fillWritePipeline()}))]):[2];var i}))}))},t.prototype.createTransaction=function(){return new br(this.datastore)},t.prototype.restartNetwork=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return t.sent(),this.onlineStateTracker.set(fr.Unknown),[4,this.enableNetwork()];case 2:return t.sent(),[2]}}))}))},t.prototype.handleCredentialChange=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.canUseNetwork()?(d(Ur,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return this.isPrimary=t,t&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(fr.Unknown),e.label=4;case 4:return[2]}}))}))},t}(),Vr=function(){function t(t,e){if(N("GeoPoint",arguments,2),D("GeoPoint","number",1,t),D("GeoPoint","number",2,e),!isFinite(t)||t<-90||t>90)throw new T(E.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new T(E.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype._compareTo=function(t){return Y(this._lat,t._lat)||Y(this._long,t._long)},t}(),Hr=function(){function t(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null,this.memoizedOrderBy=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}return t.atPath=function(e){return new t(e)},Object.defineProperty(t.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var t=this.getInequalityFilterField(),e=this.getFirstOrderByField();if(null!==t&&null===e)t.isKeyField()?this.memoizedOrderBy=[ti]:this.memoizedOrderBy=[new $r(t),ti];else{v(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field."),this.memoizedOrderBy=[];for(var n=!1,r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=this.explicitOrderBy.length>0?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:Xr.ASCENDING;this.memoizedOrderBy.push(a===Xr.ASCENDING?ti:ei)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),t.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof qr)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var n=this.filters.concat([e]);return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),n,this.limit,this.startAt,this.endAt)},t.prototype.addOrderBy=function(e){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var n=this.explicitOrderBy.concat([e]);return new t(this.path,this.collectionGroup,n,this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.withLimit=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,this.startAt,this.endAt)},t.prototype.withStartAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,e,this.endAt)},t.prototype.withEndAt=function(e){return new t(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,e)},t.prototype.asCollectionQueryAtPath=function(e){return new t(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.startAt,this.endAt)},t.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},t.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var t=this.path.canonicalString();this.isCollectionGroupQuery()&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";ar(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.memoizedCanonicalId=t}return this.memoizedCanonicalId},t.prototype.toString=function(){var t="Query("+this.path.canonicalString();return this.isCollectionGroupQuery()&&(t+=" collectionGroup="+this.collectionGroup),this.filters.length>0&&(t+=", filters: ["+this.filters.join(", ")+"]"),ar(this.limit)||(t+=", limit: "+this.limit),this.explicitOrderBy.length>0&&(t+=", orderBy: ["+this.explicitOrderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),t+")"},t.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},t.prototype.docComparator=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(t,e);if(0!==a)return a;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},t.prototype.matches=function(t){return this.matchesPathAndCollectionGroup(t)&&this.matchesOrderBy(t)&&this.matchesFilters(t)&&this.matchesBounds(t)},t.prototype.hasLimit=function(){return!ar(this.limit)},t.prototype.getFirstOrderByField=function(){return this.explicitOrderBy.length>0?this.explicitOrderBy[0].field:null},t.prototype.getInequalityFilterField=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof qr&&n.isInequality())return n.field}return null},t.prototype.findFilterOperator=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof qr&&t.indexOf(r.op)>=0)return r.op}return null},t.prototype.isDocumentQuery=function(){return lt.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},t.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},t.prototype.matchesPathAndCollectionGroup=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(e):lt.isDocumentKey(this.path)?this.path.isEqual(e):this.path.isImmediateParentOf(e)},t.prototype.matchesOrderBy=function(t){for(var e=0,n=this.explicitOrderBy;e<n.length;e++){var r=n[e];if(!r.field.isKeyField()&&null===t.field(r.field))return!1}return!0},t.prototype.matchesFilters=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},t.prototype.matchesBounds=function(t){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,t)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,t))},t.prototype.assertValidBound=function(t){v(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},t}(),Gr=function(){function t(t){this.name=t}return t.fromString=function(e){switch(e){case"<":return t.LESS_THAN;case"<=":return t.LESS_THAN_OR_EQUAL;case"==":return t.EQUAL;case">=":return t.GREATER_THAN_OR_EQUAL;case">":return t.GREATER_THAN;case"array-contains":return t.ARRAY_CONTAINS;case"in":return t.IN;case"array-contains-any":return t.ARRAY_CONTAINS_ANY;default:return g("Unknown FieldFilter operator: "+e)}},t.prototype.toString=function(){return this.name},t.prototype.isEqual=function(t){return this.name===t.name},t.LESS_THAN=new t("<"),t.LESS_THAN_OR_EQUAL=new t("<="),t.EQUAL=new t("=="),t.GREATER_THAN=new t(">"),t.GREATER_THAN_OR_EQUAL=new t(">="),t.ARRAY_CONTAINS=new t("array-contains"),t.IN=new t("in"),t.ARRAY_CONTAINS_ANY=new t("array-contains-any"),t}(),qr=function(t){function e(e,n,r){var i=t.call(this)||this;return i.field=e,i.op=n,i.value=r,i}return a.__extends(e,t),e.create=function(t,n,r){if(t.isKeyField())return n===Gr.IN?(v(r instanceof Ue,"Comparing on key with IN, but filter value not an ArrayValue"),v(r.internalValue.every((function(t){return t instanceof Le})),"Comparing on key with IN, but an array value was not a RefValue"),new Kr(t,r)):(v(r instanceof Le,"Comparing on key, but filter value not a RefValue"),v(n!==Gr.ARRAY_CONTAINS&&n!==Gr.ARRAY_CONTAINS_ANY,"'"+n.toString()+"' queries don't make sense on document keys."),new Wr(t,n,r));if(r.isEqual(Oe.INSTANCE)){if(n!==Gr.EQUAL)throw new T(E.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new e(t,n,r)}if(r.isEqual(Be.NAN)){if(n!==Gr.EQUAL)throw new T(E.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new e(t,n,r)}return n===Gr.ARRAY_CONTAINS?new Yr(t,r):n===Gr.IN?(v(r instanceof Ue,"IN filter has invalid value: "+r.toString()),new Jr(t,r)):n===Gr.ARRAY_CONTAINS_ANY?(v(r instanceof Ue,"ARRAY_CONTAINS_ANY filter has invalid value: "+r.toString()),new Qr(t,r)):new e(t,n,r)},e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.typeOrder===e.typeOrder&&this.matchesComparison(e.compareTo(this.value))},e.prototype.matchesComparison=function(t){switch(this.op){case Gr.LESS_THAN:return t<0;case Gr.LESS_THAN_OR_EQUAL:return t<=0;case Gr.EQUAL:return 0===t;case Gr.GREATER_THAN:return t>0;case Gr.GREATER_THAN_OR_EQUAL:return t>=0;default:return g("Unknown FieldFilter operator: "+this.op)}},e.prototype.isInequality=function(){return[Gr.LESS_THAN,Gr.LESS_THAN_OR_EQUAL,Gr.GREATER_THAN,Gr.GREATER_THAN_OR_EQUAL].indexOf(this.op)>=0},e.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},e.prototype.isEqual=function(t){return t instanceof e&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},e.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},e}((function(){})),Wr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=lt.comparator(t.key,e.key);return this.matchesComparison(n)},e}(qr),Kr=function(t){function e(e,n){var r=t.call(this,e,Gr.IN,n)||this;return r.value=n,r}return a.__extends(e,t),e.prototype.matches=function(t){return this.value.internalValue.some((function(e){return t.key.isEqual(e.key)}))},e}(qr),Yr=function(t){function e(e,n){return t.call(this,e,Gr.ARRAY_CONTAINS,n)||this}return a.__extends(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return e instanceof Ue&&e.contains(this.value)},e}(qr),Jr=function(t){function e(e,n){var r=t.call(this,e,Gr.IN,n)||this;return r.value=n,r}return a.__extends(e,t),e.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},e}(qr),Qr=function(t){function e(e,n){var r=t.call(this,e,Gr.ARRAY_CONTAINS_ANY,n)||this;return r.value=n,r}return a.__extends(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof Ue&&n.internalValue.some((function(t){return e.value.contains(t)}))},e}(qr),Xr=function(){function t(t){this.name=t}return t.prototype.toString=function(){return this.name},t.ASCENDING=new t("asc"),t.DESCENDING=new t("desc"),t}(),Zr=function(){function t(t,e){this.position=t,this.before=e}return t.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},t.prototype.sortsBeforeDocument=function(t,e){v(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof Le,"Bound has a non-key value where the key path is being used."),n=lt.comparator(o.key,e.key);else{var a=e.field(i.field);v(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===Xr.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},t.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},t}(),$r=function(){function t(t,e){this.field=t,void 0===e&&(e=Xr.ASCENDING),this.dir=e,this.isKeyOrderBy=t.isKeyField()}return t.prototype.compare=function(t,e){var n=this.isKeyOrderBy?Ve.compareByKey(t,e):Ve.compareByField(this.field,t,e);switch(this.dir){case Xr.ASCENDING:return n;case Xr.DESCENDING:return-1*n;default:return g("Unknown direction: "+this.dir)}},t.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},t.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},t.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},t}(),ti=new $r(ut.keyField(),Xr.ASCENDING),ei=new $r(ut.keyField(),Xr.DESCENDING),ni=function(){function t(){}return t.prototype.applyToLocalView=function(t,e){return new xe(e,t)},t.prototype.applyToRemoteDocument=function(t,e){return e},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t},t.instance=new t,t}(),ri=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ai(t),n=function(t){e.find((function(e){return e.isEqual(t)}))||e.push(t)},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&J(e.elements,this.elements)},t}(),ii=function(){function t(t){this.elements=t}return t.prototype.applyToLocalView=function(t,e){return this.apply(t)},t.prototype.applyToRemoteDocument=function(t,e){return this.apply(t)},t.prototype.apply=function(t){for(var e=ai(t),n=function(t){e=e.filter((function(e){return!e.isEqual(t)}))},r=0,i=this.elements;r<i.length;r++)n(i[r]);return new Ue(e)},t.prototype.computeBaseValue=function(t){return null},t.prototype.isEqual=function(e){return e instanceof t&&J(e.elements,this.elements)},t}(),oi=function(){function t(t){this.operand=t}return t.prototype.applyToLocalView=function(t,e){var n=this.computeBaseValue(t);if(n instanceof Re&&this.operand instanceof Re){var r=n.internalValue+this.operand.internalValue;return new Re(r)}return r=n.internalValue+this.operand.internalValue,new Be(r)},t.prototype.applyToRemoteDocument=function(t,e){return v(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},t.prototype.computeBaseValue=function(t){return t instanceof Ie?t:new Re(0)},t.prototype.isEqual=function(e){return e instanceof t&&this.operand.isEqual(e.operand)},t}();function ai(t){return t instanceof Ue?t.internalValue.slice():[]}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var si,ci,ui=function(){function t(t){this.count=t}return t.prototype.isEqual=function(t){return t&&t.count===this.count},t}(),li=((si={})[Xr.ASCENDING.name]="ASCENDING",si[Xr.DESCENDING.name]="DESCENDING",si),hi=((ci={})[Gr.LESS_THAN.name]="LESS_THAN",ci[Gr.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",ci[Gr.GREATER_THAN.name]="GREATER_THAN",ci[Gr.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",ci[Gr.EQUAL.name]="EQUAL",ci[Gr.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",ci[Gr.IN.name]="IN",ci[Gr.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",ci),pi=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fi(t,e){v(!ar(t),e+" is missing")}function di(t){return"number"==typeof t?t:"string"==typeof t?Number(t):g("can't parse "+t)}var yi=function(){function t(t,e){this.databaseId=t,this.options=e}return t.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},t.prototype.unsafeCastProtoByteString=function(t){return t},t.prototype.fromRpcStatus=function(t){var e=void 0===t.code?E.UNKNOWN:Sr(t.code);return new T(e,t.message||"")},t.prototype.toInt32Value=function(t){return this.options.useProto3Json||ar(t)?t:{value:t}},t.prototype.fromInt32Value=function(t){var e;return ar(e="object"==typeof t?t.value:t)?null:e},t.prototype.toTimestamp=function(t){return this.options.useProto3Json?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},t.prototype.fromTimestamp=function(t){if("string"==typeof t)return this.fromIso8601String(t);v(!!t,"Cannot deserialize null or undefined timestamp.");var e=di(t.seconds||"0"),n=t.nanos||0;return new Tt(e,n)},t.prototype.fromIso8601String=function(t){var e=0,n=pi.exec(t);if(v(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new Tt(o,e)},t.prototype.toBytes=function(t){return this.options.useProto3Json?t.toBase64():this.unsafeCastProtoByteString(t.toUint8Array())},t.prototype.fromBlob=function(t){return"string"==typeof t?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),tt.fromBase64String(t)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),tt.fromUint8Array(t))},t.prototype.toVersion=function(t){return this.toTimestamp(t.toTimestamp())},t.prototype.fromVersion=function(t){return v(!!t,"Trying to deserialize version that isn't set"),St.fromTimestamp(this.fromTimestamp(t))},t.prototype.toResourceName=function(t,e){return this.fullyQualifiedPrefixPath(t).child("documents").child(e).canonicalString()},t.prototype.fromResourceName=function(t){var e=st.fromString(t);return v(this.isValidResourceName(e),"Tried to deserialize invalid key "+e.toString()),e},t.prototype.toName=function(t){return this.toResourceName(this.databaseId,t.path)},t.prototype.fromName=function(t){var e=this.fromResourceName(t);return v(e.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.databaseId.projectId),v(!e.get(3)&&!this.databaseId.database||e.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.databaseId.database),new lt(this.extractLocalPathFromResourceName(e))},t.prototype.toQueryPath=function(t){return this.toResourceName(this.databaseId,t)},t.prototype.fromQueryPath=function(t){var e=this.fromResourceName(t);return 4===e.length?st.EMPTY_PATH:this.extractLocalPathFromResourceName(e)},Object.defineProperty(t.prototype,"encodedDatabaseId",{get:function(){return new st(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),t.prototype.fullyQualifiedPrefixPath=function(t){return new st(["projects",t.projectId,"databases",t.database])},t.prototype.extractLocalPathFromResourceName=function(t){return v(t.length>4&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.popFirst(5)},t.prototype.isValidResourceName=function(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)},t.prototype.toValue=function(t){if(t instanceof Oe)return{nullValue:"NULL_VALUE"};if(t instanceof Ce)return{booleanValue:t.value()};if(t instanceof Re)return{integerValue:""+t.value()};if(t instanceof Be){var e=t.value();if(this.options.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:t.value()}}return t instanceof De?{stringValue:t.value()}:t instanceof Fe?{mapValue:this.toMapValue(t)}:t instanceof Ue?{arrayValue:this.toArrayValue(t)}:t instanceof Pe?{timestampValue:this.toTimestamp(t.internalValue)}:t instanceof je?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Me?{bytesValue:this.toBytes(t.value())}:t instanceof Le?{referenceValue:this.toResourceName(t.databaseId,t.key.path)}:g("Unknown FieldValue "+JSON.stringify(t))},t.prototype.fromValue=function(t){var e=this;if("nullValue"in t)return Oe.INSTANCE;if("booleanValue"in t)return Ce.of(t.booleanValue);if("integerValue"in t)return new Re(di(t.integerValue));if("doubleValue"in t){if(this.options.useProto3Json){if("NaN"===t.doubleValue)return Be.NAN;if("Infinity"===t.doubleValue)return Be.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Be.NEGATIVE_INFINITY}return new Be(t.doubleValue)}if("stringValue"in t)return new De(t.stringValue);if("mapValue"in t)return this.fromFields(t.mapValue.fields||{});if("arrayValue"in t){fi(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new Ue(n.map((function(t){return e.fromValue(t)})))}if("timestampValue"in t)return fi(t.timestampValue,"timestampValue"),new Pe(this.fromTimestamp(t.timestampValue));if("geoPointValue"in t){fi(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new je(new Vr(r,i))}if("bytesValue"in t){fi(t.bytesValue,"bytesValue");var o=this.fromBlob(t.bytesValue);return new Me(o)}if("referenceValue"in t){fi(t.referenceValue,"referenceValue");var a=this.fromResourceName(t.referenceValue),s=new it(a.get(1),a.get(3)),c=new lt(this.extractLocalPathFromResourceName(a));return new Le(s,c)}return g("Unknown Value proto "+JSON.stringify(t))},t.prototype.toMutationDocument=function(t,e){return{name:this.toName(t),fields:this.toFields(e)}},t.prototype.toDocument=function(t){return v(!t.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toTimestamp(t.version.toTimestamp())}},t.prototype.fromDocument=function(t,e){var n=this,r=this.fromName(t.name),i=this.fromVersion(t.updateTime);return new Ve(r,i,{hasCommittedMutations:!!e},void 0,t,(function(t){return n.fromValue(t)}))},t.prototype.toFields=function(t){var e=this,n={};return t.forEach((function(t,r){n[t]=e.toValue(r)})),n},t.prototype.fromFields=function(t){var e=this,n=t,r=Fe.EMPTY;return O(n,(function(t,n){r=r.set(new ut([t]),e.fromValue(n))})),r},t.prototype.toMapValue=function(t){return{fields:this.toFields(t)}},t.prototype.toArrayValue=function(t){var e=this,n=[];return t.forEach((function(t){n.push(e.toValue(t))})),{values:n}},t.prototype.fromFound=function(t){var e=this;v(!!t.found,"Tried to deserialize a found document from a missing document."),fi(t.found.name,"doc.found.name"),fi(t.found.updateTime,"doc.found.updateTime");var n=this.fromName(t.found.name),r=this.fromVersion(t.found.updateTime);return new Ve(n,r,{},void 0,t.found,(function(t){return e.fromValue(t)}))},t.prototype.fromMissing=function(t){v(!!t.missing,"Tried to deserialize a missing document from a found document."),v(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.fromName(t.missing),n=this.fromVersion(t.readTime);return new He(e,n)},t.prototype.fromMaybeDocument=function(t){return"found"in t?this.fromFound(t):"missing"in t?this.fromMissing(t):g("invalid batch get response: "+JSON.stringify(t))},t.prototype.toWatchTargetChangeState=function(t){switch(t){case Cr.Added:return"ADD";case Cr.Current:return"CURRENT";case Cr.NoChange:return"NO_CHANGE";case Cr.Removed:return"REMOVE";case Cr.Reset:return"RESET";default:return g("Unknown WatchTargetChangeState: "+t)}},t.prototype.toTestWatchChange=function(t){if(t instanceof Pr)return{filter:{count:t.existenceFilter.count,targetId:t.targetId}};if(t instanceof Dr){if(t.newDoc instanceof Ve){var e=t.newDoc;return{documentChange:{document:{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.updatedTargetIds,removedTargetIds:t.removedTargetIds}}}if(t.newDoc instanceof He)return e=t.newDoc,{documentDelete:{document:this.toName(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.newDoc)return{documentRemove:{document:this.toName(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof xr){var n=void 0;return t.cause&&(n={code:kr(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(t.state),targetIds:t.targetIds,resumeToken:this.unsafeCastProtoByteString(t.resumeToken),cause:n}}}return g("Unrecognized watch change: "+JSON.stringify(t))},t.prototype.fromWatchChange=function(t){var e,n=this;if("targetChange"in t){fi(t.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=t.targetChange.resumeToken||this.emptyByteString(),a=t.targetChange.cause,s=a&&this.fromRpcStatus(a);e=new xr(r,i,o,s||null)}else if("documentChange"in t){fi(t.documentChange,"documentChange"),fi(t.documentChange.document,"documentChange.name"),fi(t.documentChange.document.name,"documentChange.document.name"),fi(t.documentChange.document.updateTime,"documentChange.document.updateTime");var c=t.documentChange,u=this.fromName(c.document.name),l=this.fromVersion(c.document.updateTime),h=new Ve(u,l,{},void 0,c.document,(function(t){return n.fromValue(t)})),p=c.targetIds||[],f=c.removedTargetIds||[];e=new Dr(p,f,h.key,h)}else if("documentDelete"in t){fi(t.documentDelete,"documentDelete"),fi(t.documentDelete.document,"documentDelete.document");var d=t.documentDelete;u=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):St.forDeletedDoc(),h=new He(u,l),f=d.removedTargetIds||[],e=new Dr([],f,h.key,h)}else if("documentRemove"in t){fi(t.documentRemove,"documentRemove"),fi(t.documentRemove.document,"documentRemove");var y=t.documentRemove;u=this.fromName(y.document),f=y.removedTargetIds||[],e=new Dr([],f,u,null)}else{if(!("filter"in t))return g("Unknown change type "+JSON.stringify(t));fi(t.filter,"filter"),fi(t.filter.targetId,"filter.targetId");var m=t.filter,v=m.count||0,b=new ui(v),_=m.targetId;e=new Pr(_,b)}return e},t.prototype.fromWatchTargetChangeState=function(t){return"NO_CHANGE"===t?Cr.NoChange:"ADD"===t?Cr.Added:"REMOVE"===t?Cr.Removed:"CURRENT"===t?Cr.Current:"RESET"===t?Cr.Reset:g("Got unexpected TargetChange.state: "+t)},t.prototype.versionFromListenResponse=function(t){if(!("targetChange"in t))return St.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?St.MIN:e.readTime?this.fromVersion(e.readTime):St.MIN},t.prototype.toMutation=function(t){var e,n=this;if(t instanceof Ee)e={update:this.toMutationDocument(t.key,t.value)};else if(t instanceof ke)e={delete:this.toName(t.key)};else if(t instanceof Te)e={update:this.toMutationDocument(t.key,t.data),updateMask:this.toDocumentMask(t.fieldMask)};else{if(!(t instanceof Se))return g("Unknown mutation type "+t.type);e={transform:{document:this.toName(t.key),fieldTransforms:t.fieldTransforms.map((function(t){return n.toFieldTransform(t)}))}}}return t.precondition.isNone||(e.currentDocument=this.toPrecondition(t.precondition)),e},t.prototype.fromMutation=function(t){var e=this,n=t.currentDocument?this.fromPrecondition(t.currentDocument):be.NONE;if(t.update){fi(t.update.name,"name");var r=this.fromName(t.update.name),i=this.fromFields(t.update.fields||{});if(t.updateMask){var o=this.fromDocumentMask(t.updateMask);return new Te(r,i,o,n)}return new Ee(r,i,n)}if(t.delete)return r=this.fromName(t.delete),new ke(r,n);if(t.transform){r=this.fromName(t.transform.document);var a=t.transform.fieldTransforms.map((function(t){return e.fromFieldTransform(t)}));return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new Se(r,a)}return g("unknown mutation proto: "+JSON.stringify(t))},t.prototype.toPrecondition=function(t){return v(!t.isNone,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:g("Unknown precondition")},t.prototype.fromPrecondition=function(t){return void 0!==t.updateTime?be.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?be.exists(t.exists):be.NONE},t.prototype.fromWriteResult=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(St.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&t.transformResults.length>0&&(i=t.transformResults.map((function(t){return n.fromValue(t)}))),new me(r,i)},t.prototype.fromWriteResults=function(t,e){var n=this;return t&&t.length>0?(v(void 0!==e,"Received a write result without a commit time"),t.map((function(t){return n.fromWriteResult(t,e)}))):[]},t.prototype.toFieldTransform=function(t){var e=this,n=t.transform;if(n instanceof ni)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ri)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof ii)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements.map((function(t){return e.toValue(t)}))}};if(n instanceof oi)return{fieldPath:t.field.canonicalString(),increment:this.toValue(n.operand)};throw g("Unknown transform: "+t.transform)},t.prototype.fromFieldTransform=function(t){var e=this,n=null;if("setToServerValue"in t)v("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=ni.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new ri(r.map((function(t){return e.fromValue(t)})))}else if("removeAllFromArray"in t)r=t.removeAllFromArray.values||[],n=new ii(r.map((function(t){return e.fromValue(t)})));else if("increment"in t){var i=this.fromValue(t.increment);v(i instanceof Ie,"NUMERIC_ADD transform requires a NumberValue"),n=new oi(i)}else g("Unknown transform proto: "+JSON.stringify(t));var o=ut.fromServerFormat(t.fieldPath);return new ye(o,n)},t.prototype.toDocumentsTarget=function(t){return{documents:[this.toQueryPath(t.path)]}},t.prototype.fromDocumentsTarget=function(t){var e=t.documents.length;v(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return Hr.atPath(this.fromQueryPath(n))},t.prototype.toQueryTarget=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.toQueryPath(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.toQueryPath(n.popLast()),e.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(t.filters);r&&(e.structuredQuery.where=r);var i=this.toOrder(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.toInt32Value(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.toCursor(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.toCursor(t.endAt)),e},t.prototype.fromQueryTarget=function(t){var e=this.fromQueryPath(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var c=null;n.limit&&(c=this.fromInt32Value(n.limit));var u=null;n.startAt&&(u=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new Hr(e,i,s,a,c,u,l)},t.prototype.toListenRequestLabels=function(t){var e=this.toLabel(t.purpose);return null==e?null:{"goog-listen-tags":e}},t.prototype.toLabel=function(t){switch(t){case gn.Listen:return null;case gn.ExistenceFilterMismatch:return"existence-filter-mismatch";case gn.LimboResolution:return"limbo-document";default:return g("Unrecognized query purpose: "+t)}},t.prototype.toTarget=function(t){var e,n=t.query;return(e=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=t.targetId,t.resumeToken.length>0&&(e.resumeToken=this.unsafeCastProtoByteString(t.resumeToken)),e},t.prototype.toFilter=function(t){var e=this;if(0!==t.length){var n=t.map((function(t){return t instanceof qr?e.toUnaryOrFieldFilter(t):g("Unrecognized filter: "+JSON.stringify(t))}));return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},t.prototype.fromFilter=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.fromUnaryFilter(t)]:void 0!==t.fieldFilter?[this.fromFieldFilter(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return e.fromFilter(t)})).reduce((function(t,e){return t.concat(e)})):g("Unknown filter: "+JSON.stringify(t)):[]},t.prototype.toOrder=function(t){var e=this;if(0!==t.length)return t.map((function(t){return e.toPropertyOrder(t)}))},t.prototype.fromOrder=function(t){var e=this;return t.map((function(t){return e.fromPropertyOrder(t)}))},t.prototype.toCursor=function(t){var e=this;return{before:t.before,values:t.position.map((function(t){return e.toValue(t)}))}},t.prototype.fromCursor=function(t){var e=this,n=!!t.before,r=t.values.map((function(t){return e.fromValue(t)}));return new Zr(r,n)},t.prototype.toDirection=function(t){return li[t.name]},t.prototype.fromDirection=function(t){switch(t){case"ASCENDING":return Xr.ASCENDING;case"DESCENDING":return Xr.DESCENDING;default:return}},t.prototype.toOperatorName=function(t){return hi[t.name]},t.prototype.fromOperatorName=function(t){switch(t){case"EQUAL":return Gr.EQUAL;case"GREATER_THAN":return Gr.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return Gr.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return Gr.LESS_THAN;case"LESS_THAN_OR_EQUAL":return Gr.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return Gr.ARRAY_CONTAINS;case"IN":return Gr.IN;case"ARRAY_CONTAINS_ANY":return Gr.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return g("Unspecified operator");default:return g("Unknown operator")}},t.prototype.toFieldPathReference=function(t){return{fieldPath:t.canonicalString()}},t.prototype.fromFieldPathReference=function(t){return ut.fromServerFormat(t.fieldPath)},t.prototype.toPropertyOrder=function(t){return{field:this.toFieldPathReference(t.field),direction:this.toDirection(t.dir)}},t.prototype.fromPropertyOrder=function(t){return new $r(this.fromFieldPathReference(t.field),this.fromDirection(t.direction))},t.prototype.fromFieldFilter=function(t){return qr.create(this.fromFieldPathReference(t.fieldFilter.field),this.fromOperatorName(t.fieldFilter.op),this.fromValue(t.fieldFilter.value))},t.prototype.toUnaryOrFieldFilter=function(t){if(t.op===Gr.EQUAL){if(t.value.isEqual(Be.NAN))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NAN"}};if(t.value.isEqual(Oe.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(t.field),op:this.toOperatorName(t.op),value:this.toValue(t.value)}}},t.prototype.fromUnaryFilter=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.fromFieldPathReference(t.unaryFilter.field);return qr.create(e,Gr.EQUAL,Be.NAN);case"IS_NULL":var n=this.fromFieldPathReference(t.unaryFilter.field);return qr.create(n,Gr.EQUAL,Oe.INSTANCE);case"OPERATOR_UNSPECIFIED":return g("Unspecified filter");default:return g("Unknown filter")}},t.prototype.toDocumentMask=function(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}},t.prototype.fromDocumentMask=function(t){var e=(t.fieldPaths||[]).map((function(t){return ut.fromServerFormat(t)}));return de.fromArray(e)},t}(),mi=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},gi=function(){function t(t){this.syncEngine=t,this.queries=new qe((function(t){return t.canonicalId()})),this.onlineState=fr.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}return t.prototype.listen=function(t){var e=t.query,n=!1,r=this.queries.get(e);return r||(n=!0,r=new mi,this.queries.set(e,r)),r.listeners.push(t),v(!t.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.viewSnap&&t.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(e).then((function(t){return r.targetId=t,t})):Promise.resolve(r.targetId)},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return a.__generator(this,(function(o){return e=t.query,n=!1,(r=this.queries.get(e))&&(i=r.listeners.indexOf(t))>=0&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(e),[2,this.syncEngine.unlisten(e)]):[2]}))}))},t.prototype.onWatchChange=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,c=a.listeners;s<c.length;s++)c[s].onViewSnapshot(i)&&(e=!0);a.viewSnap=i}}e&&this.raiseSnapshotsInSyncEvent()},t.prototype.onWatchError=function(t,e){var n=this.queries.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.queries.delete(t)},t.prototype.onOnlineStateChange=function(t){this.onlineState=t;var e=!1;this.queries.forEach((function(n,r){for(var i=0,o=r.listeners;i<o.length;i++)o[i].applyOnlineStateChange(t)&&(e=!0)})),e&&this.raiseSnapshotsInSyncEvent()},t.prototype.addSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.add(t),t.next()},t.prototype.removeSnapshotsInSyncListener=function(t){this.snapshotsInSyncListeners.delete(t)},t.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach((function(t){t.next()}))},t}(),vi=function(){function t(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=fr.Unknown,this.options=n||{}}return t.prototype.onViewSnapshot=function(t){if(v(t.docChanges.length>0||t.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];i.type!==wr.Metadata&&e.push(i)}t=new Nr(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),o=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),o=!0),this.snap=t,o},t.prototype.onError=function(t){this.queryObserver.error(t)},t.prototype.applyOnlineStateChange=function(t){this.onlineState=t;var e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e},t.prototype.shouldRaiseInitialEvent=function(t,e){if(v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n=e!==fr.Offline;return this.options.waitForSyncWhenOnline&&n?(v(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.isEmpty()||e===fr.Offline},t.prototype.shouldRaiseEvent=function(t){if(t.docChanges.length>0)return!0;var e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.raiseInitialEvent=function(t){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),t=Nr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(t)},t}(),bi=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}return t.fromSnapshot=function(e,n){for(var r=jt(),i=jt(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case wr.Added:r=r.add(s.doc.key);break;case wr.Removed:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),_i=function(t){this.key=t},Ei=function(t){this.key=t},Ti=function(){function t(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.current=!1,this.limboDocuments=jt(),this.mutatedKeys=jt(),this.documentSet=new Or(t.docComparator.bind(t))}return Object.defineProperty(t.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),t.prototype.computeDocChanges=function(t,e){var n=this,r=e?e.changeSet:new Ir,i=e?e.documentSet:this.documentSet,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,c=this.query.hasLimit()&&i.size===this.query.limit?i.last():null;if(t.inorderTraversal((function(t,e){var u=i.get(t),l=e instanceof Ve?e:null;l&&(v(t.isEqual(l.key),"Mismatching keys found in document changes: "+t+" != "+l.key),l=n.query.matches(l)?l:null);var h=!!u&&n.mutatedKeys.has(u.key),p=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),f=!1;u&&l?u.data().isEqual(l.data())?h!==p&&(r.track({type:wr.Metadata,doc:l}),f=!0):n.shouldWaitForSyncedDocument(u,l)||(r.track({type:wr.Modified,doc:l}),f=!0,c&&n.query.docComparator(l,c)>0&&(s=!0)):!u&&l?(r.track({type:wr.Added,doc:l}),f=!0):u&&!l&&(r.track({type:wr.Removed,doc:u}),f=!0,c&&(s=!0)),f&&(l?(a=a.add(l),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),this.query.hasLimit())for(;a.size>this.query.limit;){var u=a.last();a=a.delete(u.key),o=o.delete(u.key),r.track({type:wr.Removed,doc:u})}return v(!s||!e,"View was refilled using docs that themselves needed refilling."),{documentSet:a,changeSet:r,needsRefill:s,mutatedKeys:o}},t.prototype.shouldWaitForSyncedDocument=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this;v(!t.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;var o=t.changeSet.getChanges();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case wr.Added:return 1;case wr.Modified:case wr.Metadata:return 2;case wr.Removed:return 0;default:return g("Unknown ChangeType: "+t)}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||r.query.docComparator(t.doc,e.doc)})),this.applyTargetChange(n);var a=e?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Ar.Synced:Ar.Local,c=s!==this.syncState;return this.syncState=s,0!==o.length||c?{snapshot:new Nr(this.query,t.documentSet,i,o,t.mutatedKeys,s===Ar.Local,c,!1),limboChanges:a}:{limboChanges:a}},t.prototype.applyOnlineStateChange=function(t){return this.current&&t===fr.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Ir,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},t.prototype.shouldBeInLimbo=function(t){return!this._syncedDocuments.has(t)&&!!this.documentSet.has(t)&&!this.documentSet.get(t).hasLocalMutations},t.prototype.applyTargetChange=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.add(t)})),t.modifiedDocuments.forEach((function(t){return v(e._syncedDocuments.has(t),"Modified document "+t+" not found in view.")})),t.removedDocuments.forEach((function(t){return e._syncedDocuments=e._syncedDocuments.delete(t)})),this.current=t.current)},t.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var e=this.limboDocuments;this.limboDocuments=jt(),this.documentSet.forEach((function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))}));var n=[];return e.forEach((function(e){t.limboDocuments.has(e)||n.push(new Ei(e))})),this.limboDocuments.forEach((function(t){e.has(t)||n.push(new _i(t))})),n},t.prototype.synchronizeWithPersistedState=function(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=jt();var e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)},t.prototype.computeInitialSnapshot=function(){return Nr.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ar.Local)},t}(),Si=5,ki=function(){function t(t,e,n,r){this.asyncQueue=t,this.remoteStore=e,this.updateFunction=n,this.deferred=r,this.retries=Si,this.backoff=new pr(this.asyncQueue,$.RetryTransaction)}return t.prototype.run=function(){this.runWithBackOff()},t.prototype.runWithBackOff=function(){var t=this;this.backoff.backoffAndRun((function(){return a.__awaiter(t,void 0,void 0,(function(){var t,e,n=this;return a.__generator(this,(function(r){return t=this.remoteStore.createTransaction(),(e=this.tryRunUpdateFunction(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.handleTransactionError(t)}))}))})).catch((function(t){n.handleTransactionError(t)})),[2]}))}))}))},t.prototype.tryRunUpdateFunction=function(t){try{var e=this.updateFunction(t);return!ar(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.handleTransactionError=function(t){var e=this;this.retries>0&&this.isRetryableTransactionError(t)?(this.retries-=1,this.asyncQueue.enqueueAndForget((function(){return e.runWithBackOff(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.isRetryableTransactionError=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Tr(e)}return!1},t}(),wi=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ai=function(t){this.key=t,this.receivedDocument=!1},Oi=function(){function t(t,e,n,r){this.localStore=t,this.remoteStore=e,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new qe((function(t){return t.canonicalId()})),this.queryViewsByTarget={},this.limboTargetsByKey=new kt(lt.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new qn,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=se.forSyncEngine(),this.isPrimary=void 0,this.onlineState=fr.Unknown}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),t.prototype.subscribe=function(t){v(null!==t,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=t},t.prototype.listen=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(t))?(e=r.targetId,this.sharedClientState.addLocalQueryTarget(e),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateQuery(t)];case 2:return i=a.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),e=i.targetId,[4,this.initializeViewAndComputeSnapshot(i,"current"===o)];case 3:n=a.sent(),this.isPrimary&&this.remoteStore.listen(i),a.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,e]}}))}))},t.prototype.initializeViewAndComputeSnapshot=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,c,u;return a.__generator(this,(function(a){switch(a.label){case 0:return n=t.query,[4,this.localStore.executeQuery(n,!0)];case 1:return r=a.sent(),i=new Ti(n,r.remoteKeys),o=i.computeDocChanges(r.documents),s=Br.createSynthesizedTargetChangeForCurrentChange(t.targetId,e&&this.onlineState!==fr.Offline),v(0===(c=i.applyChanges(o,!0===this.isPrimary,s)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!c.snapshot,"applyChanges for new view should always return a snapshot"),u=new wi(n,t.targetId,i),this.queryViewsByQuery.set(n,u),this.queryViewsByTarget[t.targetId]=u,[2,c.snapshot]}}))}))},t.prototype.synchronizeViewAndComputeSnapshot=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return[4,this.localStore.executeQuery(t.query,!0)];case 1:return e=r.sent(),n=t.view.synchronizeWithPersistedState(e),this.isPrimary&&this.updateTrackedLimbos(t.targetId,n.limboChanges),[2,n]}}))}))},t.prototype.unlisten=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(e=this.queryViewsByQuery.get(t)),"Trying to unlisten on query not found:"+t),this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(e.targetId),this.sharedClientState.isActiveQueryTarget(e.targetId)?[3,2]:[4,this.localStore.releaseQuery(t,!1).then((function(){n.sharedClientState.clearQueryState(e.targetId),n.remoteStore.unlisten(e.targetId),n.removeAndCleanupQuery(e)})).catch(Fn)]):[3,3];case 1:r.sent(),r.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupQuery(e),[4,this.localStore.releaseQuery(t,!0)];case 4:r.sent(),r.label=5;case 5:return[2]}}))}))},t.prototype.write=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(t)];case 1:return n=r.sent(),this.sharedClientState.addPendingMutation(n.batchId),this.addMutationCallback(n.batchId,e),[4,this.emitNewSnapsAndNotifyLocalStore(n.changes)];case 2:return r.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return r.sent(),[2]}}))}))},t.prototype.runTransaction=function(t,e,n){new ki(t,this.remoteStore,e,n).run()},t.prototype.applyRemoteEvent=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n=this;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applyRemoteEvent()"),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(t)];case 2:return e=r.sent(),O(t.targetChanges,(function(t,e){var r=n.limboResolutionsByTarget[Number(t)];r&&(v(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),e.addedDocuments.size>0?r.receivedDocument=!0:e.modifiedDocuments.size>0?v(r.receivedDocument,"Received change for limbo target document without add."):e.removedDocuments.size>0&&(v(r.receivedDocument,"Received remove for limbo target document without add."),r.receivedDocument=!1))})),[4,this.emitNewSnapsAndNotifyLocalStore(e,t)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.applyOnlineStateChange=function(t,e){if(this.isPrimary&&e===dr.RemoteStore||!this.isPrimary&&e===dr.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var n=[];this.queryViewsByQuery.forEach((function(e,r){var i=r.view.applyOnlineStateChange(t);v(0===i.limboChanges.length,"OnlineState should not affect limbo documents."),i.snapshot&&n.push(i.snapshot)})),this.syncEngineListener.onOnlineStateChange(t),this.syncEngineListener.onWatchChange(n),this.onlineState=t,this.isPrimary&&this.sharedClientState.setOnlineState(t)}},t.prototype.rejectListen=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,c,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(t,"rejected",e),n=this.limboResolutionsByTarget[t],(r=n&&n.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(r),delete this.limboResolutionsByTarget[t],i=(i=new kt(lt.comparator)).insert(r,new He(r,St.forDeletedDoc())),o=jt().add(r),s=new Rr(St.MIN,{},new Ct(Y),i,o),[2,this.applyRemoteEvent(s)]):[3,1];case 1:return v(!!(c=this.queryViewsByTarget[t]),"Unknown targetId: "+t),[4,this.localStore.releaseQuery(c.query,!1).then((function(){return u.removeAndCleanupQuery(c)})).catch(Fn)];case 2:a.sent(),this.syncEngineListener.onWatchError(c.query,e),a.label=3;case 3:return[2]}}))}))},t.prototype.applyBatchState=function(t,e,n){return a.__awaiter(this,void 0,void 0,(function(){var r;return a.__generator(this,(function(i){switch(i.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(t)];case 1:return null===(r=i.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+t),[2]):"pending"!==e?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return i.sent(),[3,4];case 3:"acknowledged"===e||"rejected"===e?(this.processUserCallback(t,n||null),this.localStore.removeCachedMutationBatchMetadata(t)):g("Unknown batchState: "+e),i.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(r)];case 5:return i.sent(),[2]}}))}))},t.prototype.applySuccessfulWrite=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),e=t.batch.batchId,this.processUserCallback(e,null),this.triggerPendingWritesCallbacks(e),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(e,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.rejectFailedWrite=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n;return a.__generator(this,(function(r){switch(r.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(t,e),this.triggerPendingWritesCallbacks(t),r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(t)];case 2:return n=r.sent(),this.sharedClientState.updateMutationState(t,"rejected",e),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return r.sent(),[3,6];case 4:return[4,Fn(r.sent())];case 5:return r.sent(),[3,6];case 6:return[2]}}))}))},t.prototype.registerPendingWritesCallback=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return this.remoteStore.canUseNetwork()||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(e=r.sent())?(t.resolve(),[2]):((n=this.pendingWritesCallbacks.get(e)||[]).push(t),this.pendingWritesCallbacks.set(e,n),[2])}}))}))},t.prototype.triggerPendingWritesCallbacks=function(t){(this.pendingWritesCallbacks.get(t)||[]).forEach((function(t){t.resolve()})),this.pendingWritesCallbacks.delete(t)},t.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach((function(e){e.forEach((function(e){e.reject(new T(E.CANCELLED,t))}))})),this.pendingWritesCallbacks.clear()},t.prototype.addMutationCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n||(n=new kt(Y)),n=n.insert(t,e),this.mutationUserCallbacks[this.currentUser.toKey()]=n},t.prototype.processUserCallback=function(t,e){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(t);r&&(v(t===n.minKey(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},t.prototype.removeAndCleanupQuery=function(t){var e=this;if(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.queryViewsByQuery.delete(t.query),delete this.queryViewsByTarget[t.targetId],this.isPrimary){var n=this.limboDocumentRefs.referencesForId(t.targetId);this.limboDocumentRefs.removeReferencesForId(t.targetId),n.forEach((function(t){e.limboDocumentRefs.containsKey(t)||e.removeLimboTarget(t)}))}},t.prototype.removeLimboTarget=function(t){var e=this.limboTargetsByKey.get(t);null!==e&&(this.remoteStore.unlisten(e),this.limboTargetsByKey=this.limboTargetsByKey.remove(t),delete this.limboResolutionsByTarget[e])},t.prototype.updateTrackedLimbos=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof _i?(this.limboDocumentRefs.addReference(i.key,t),this.trackLimboChange(i)):i instanceof Ei?(d("SyncEngine","Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,t),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):g("Unknown limbo change: "+JSON.stringify(i))}},t.prototype.trackLimboChange=function(t){var e=t.key;if(!this.limboTargetsByKey.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.limboTargetIdGenerator.next(),r=Hr.atPath(e.path);this.limboResolutionsByTarget[n]=new Ai(e),this.remoteStore.listen(new wn(r,n,gn.LimboResolution,ot.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(e,n)}},t.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},t.prototype.emitNewSnapsAndNotifyLocalStore=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o=this;return a.__generator(this,(function(a){switch(a.label){case 0:return n=[],r=[],i=[],this.queryViewsByQuery.forEach((function(a,s){i.push(Promise.resolve().then((function(){var e=s.view.computeDocChanges(t);return e.needsRefill?o.localStore.executeQuery(s.query,!1).then((function(t){var n=t.documents;return s.view.computeDocChanges(n,e)})):e})).then((function(t){var i=e&&e.targetChanges[s.targetId],a=s.view.applyChanges(t,!0===o.isPrimary,i);if(o.updateTrackedLimbos(s.targetId,a.limboChanges),a.snapshot){o.isPrimary&&o.sharedClientState.updateQueryState(s.targetId,a.snapshot.fromCache?"not-current":"current"),n.push(a.snapshot);var c=bi.fromSnapshot(s.targetId,a.snapshot);r.push(c)}})))})),[4,Promise.all(i)];case 1:return a.sent(),this.syncEngineListener.onWatchChange(n),[4,this.localStore.notifyLocalViewChanges(r)];case 2:return a.sent(),[2]}}))}))},t.prototype.assertSubscribed=function(t){v(null!==this.syncEngineListener,"Trying to call "+t+" before calling subscribe().")},t.prototype.handleCredentialChange=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n;return a.__generator(this,(function(r){switch(r.label){case 0:return e=!this.currentUser.isEqual(t),this.currentUser=t,e?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(t)]):[3,3];case 1:return n=r.sent(),this.sharedClientState.handleUserChange(t,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:r.sent(),r.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return r.sent(),[2]}}))}))},t.prototype.applyPrimaryState=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,s,c,u=this;return a.__generator(this,(function(a){switch(a.label){case 0:return!0!==t||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return a.sent(),e=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(e.toArray())];case 2:for(n=a.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==t||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,s=[],c=Promise.resolve(),A(this.queryViewsByTarget,(function(t,e){u.sharedClientState.isLocalQueryTarget(t)?s.push(t):c=c.then((function(){return u.unlisten(e.query)})),u.remoteStore.unlisten(e.targetId)})),[4,c]);case 4:return a.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(s)];case 5:return a.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:a.sent(),a.label=7;case 7:return[2]}}))}))},t.prototype.resetLimboDocuments=function(){var t=this;A(this.limboResolutionsByTarget,(function(e){t.remoteStore.unlisten(e)})),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new kt(lt.comparator)},t.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(t){return a.__awaiter(this,void 0,void 0,(function(){var e,n,r,i,o,s,c,u,l;return a.__generator(this,(function(a){switch(a.label){case 0:e=[],n=[],r=0,i=t,a.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(c=this.queryViewsByTarget[o])?[4,this.localStore.releaseQuery(c.query,!0)]:[3,5]):[3,11];case 2:return a.sent(),[4,this.localStore.allocateQuery(c.query)];case 3:return s=a.sent(),[4,this.synchronizeViewAndComputeSnapshot(c)];case 4:return(u=a.sent()).snapshot&&n.push(u.snapshot),[3,9];case 5:return v(!0===this.isPrimary,"A secondary tab should never have an active query without an active view."),[4,this.localStore.getQueryForTarget(o)];case 6:return v(!!(l=a.sent()),"Query data for target "+o+" not found"),[4,this.localStore.allocateQuery(l)];case 7:return s=a.sent(),[4,this.initializeViewAndComputeSnapshot(s,!1)];case 8:a.sent(),a.label=9;case 9:e.push(s),a.label=10;case 10:return r++,[3,1];case 11:return this.syncEngineListener.onWatchChange(n),[2,e]}}))}))},t.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},t.prototype.applyTargetState=function(t,e,n){return a.__awaiter(this,void 0,void 0,(function(){var r,i,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.queryViewsByTarget[t])return[3,7];switch(e){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return r=a.sent(),i=Rr.createSynthesizedRemoteEventForCurrentChange(t,"current"===e),[4,this.emitNewSnapsAndNotifyLocalStore(r,i)];case 3:return a.sent(),[3,7];case 4:return o=this.queryViewsByTarget[t],this.removeAndCleanupQuery(o),[4,this.localStore.releaseQuery(o.query,!0)];case 5:return a.sent(),this.syncEngineListener.onWatchError(o.query,n),[3,7];case 6:g("Unexpected target state: "+e),a.label=7;case 7:return[2]}}))}))},t.prototype.applyActiveTargetsChange=function(t,e){return a.__awaiter(this,void 0,void 0,(function(){var n,r,i,o,s,c,u,l,h,p=this;return a.__generator(this,(function(f){switch(f.label){case 0:if(!this.isPrimary)return[2];n=0,r=t,f.label=1;case 1:return n<r.length?(h=r[n],v(!this.queryViewsByTarget[h],"Trying to add an already active target"),[4,this.localStore.getQueryForTarget(h)]):[3,6];case 2:return v(!!(i=f.sent()),"Query data for active target "+h+" not found"),[4,this.localStore.allocateQuery(i)];case 3:return o=f.sent(),[4,this.initializeViewAndComputeSnapshot(o,!1)];case 4:f.sent(),this.remoteStore.listen(o),f.label=5;case 5:return n++,[3,1];case 6:s=function(t){var e;return a.__generator(this,(function(n){switch(n.label){case 0:return(e=c.queryViewsByTarget[t])?[4,c.localStore.releaseQuery(e.query,!1).then((function(){p.remoteStore.unlisten(t),p.removeAndCleanupQuery(e)})).catch(Fn)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))},c=this,u=0,l=e,f.label=7;case 7:return u<l.length?(h=l[u],[5,s(h)]):[3,10];case 8:f.sent(),f.label=9;case 9:return u++,[3,7];case 10:return[2]}}))}))},t.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},t.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},t.prototype.getRemoteKeysForTarget=function(t){var e=this.limboResolutionsByTarget[t];return e&&e.receivedDocument?jt().add(e.key):this.queryViewsByTarget[t]?this.queryViewsByTarget[t].view.syncedDocuments:jt()},t}(),Ci=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t.UNAUTHENTICATED=new t(null),t.GOOGLE_CREDENTIALS=new t("google-credentials-uid"),t.FIRST_PARTY=new t("first-party-uid"),t}(),Ii="SharedClientState",Ni="firestore_clients",Ri="firestore_mutations",Bi="firestore_targets",Di="firestore_online_state",Pi="firestore_sequence_number",xi=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r,v(void 0!==r==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n,r){var i=JSON.parse(r),o="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error),a=void 0;return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(a=new T(i.error.code,i.error.message)),o?new t(e,n,i.state,a):(y(Ii,"Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Mi=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n,v(void 0!==n==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}return t.fromWebStorageEntry=function(e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new T(r.error.code,r.error.message)),i?new t(e,r.state,o):(y(Ii,"Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.toWebStorageJSON=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Li=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.fromWebStorageEntry=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Ut(),a=0;i&&a<r.activeTargetIds.length;++a)i=sr(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(y(Ii,"Failed to parse client data for instance '"+e+"': "+n),null)},t}(),ji=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.fromWebStorageEntry=function(e){var n=JSON.parse(e);return"object"==typeof n&&n.onlineState in fr&&"string"==typeof n.clientId?new t(n.clientId,fr[n.onlineState]):(y(Ii,"Failed to parse online state: "+e),null)},t}(),Fi=function(){function t(){this.activeTargetIds=Ut()}return t.prototype.addQueryTarget=function(t){v(!this.activeTargetIds.has(t),"Target with ID '"+t+"' already active."),this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.removeQueryTarget=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.toWebStorageJSON=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Ui=function(){function t(e,n,r,i,o){if(this.queue=e,this.platform=n,this.persistenceKey=r,this.localClientId=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!t.isAvailable(this.platform))throw new T(E.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=o,this.localClientStorageKey=this.toWebStorageClientStateKey(this.localClientId),this.sequenceNumberKey=Pi+"_"+r,this.activeClients[this.localClientId]=new Fi,this.clientStateKeyRe=new RegExp("^"+Ni+"_"+a+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+Ri+"_"+a+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+Bi+"_"+a+"_(\\d+)$"),this.onlineStateKey=Di+"_"+r,this.platform.window.addEventListener("storage",this.storageListener)}return t.isAvailable=function(t){return!(!t.window||null==t.window.localStorage)},t.prototype.start=function(){return a.__awaiter(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,c,u,l,h,p=this;return a.__generator(this,(function(a){switch(a.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=a.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.localClientId&&(i=this.getItem(this.toWebStorageClientStateKey(r)))&&(o=Li.fromWebStorageEntry(r,i))&&(this.activeClients[o.clientId]=o);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(c=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(c),u=0,l=this.earlyEvents;u<l.length;u++)h=l[u],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",(function(){return p.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){var t=Ut();return O(this.activeClients,(function(e,n){t=t.unionWith(n.activeTargetIds)})),t},t.prototype.isActiveQueryTarget=function(t){for(var e in this.activeClients)if(this.activeClients.hasOwnProperty(e)&&this.activeClients[e].activeTargetIds.has(t))return!0;return!1},t.prototype.addPendingMutation=function(t){this.persistMutationState(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(this.toWebStorageQueryTargetMetadataKey(t));if(n){var r=Mi.fromWebStorageEntry(t,n);r&&(e=r.state)}}return this.localClientState.addQueryTarget(t),this.persistClientState(),e},t.prototype.removeLocalQueryTarget=function(t){this.localClientState.removeQueryTarget(t),this.persistClientState()},t.prototype.isLocalQueryTarget=function(t){return this.localClientState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(this.toWebStorageQueryTargetMetadataKey(t))},t.prototype.updateQueryState=function(t,e,n){this.persistQueryTargetState(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.removeMutationState(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.persistOnlineState(t)},t.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return d(Ii,"READ",t,e),e},t.prototype.setItem=function(t,e){d(Ii,"SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){d(Ii,"REMOVE",t),this.storage.removeItem(t)},t.prototype.handleWebStorageEvent=function(t){var e=this;if(t.storageArea===this.storage){if(d(Ii,"EVENT",t.key,t.newValue),t.key===this.localClientStorageKey)return void y("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,n,r,i,o,s;return a.__generator(this,(function(a){if(!this.started)return this.earlyEvents.push(t),[2];if(null===t.key)return[2];if(this.clientStateKeyRe.test(t.key)){if(null==t.newValue)return n=this.fromWebStorageClientStateKey(t.key),[2,this.handleClientStateEvent(n,null)];if(e=this.fromWebStorageClientState(t.key,t.newValue))return[2,this.handleClientStateEvent(e.clientId,e)]}else if(this.mutationBatchKeyRe.test(t.key)){if(null!==t.newValue&&(r=this.fromWebStorageMutationMetadata(t.key,t.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(t.key)){if(null!==t.newValue&&(i=this.fromWebStorageQueryTargetMetadata(t.key,t.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(t.key===this.onlineStateKey){if(null!==t.newValue&&(o=this.fromWebStorageOnlineState(t.newValue)))return[2,this.handleOnlineStateEvent(o)]}else t.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(s=function(t){var e=ot.INVALID;if(null!=t)try{var n=JSON.parse(t);v("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){y(Ii,"Failed to read sequence number from WebStorage",t)}return e}(t.newValue))!==ot.INVALID&&this.sequenceNumberHandler(s));return[2]}))}))}))}},Object.defineProperty(t.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),t.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},t.prototype.persistMutationState=function(t,e,n){var r=new xi(this.currentUser,t,e,n),i=this.toWebStorageMutationBatchKey(t);this.setItem(i,r.toWebStorageJSON())},t.prototype.removeMutationState=function(t){var e=this.toWebStorageMutationBatchKey(t);this.removeItem(e)},t.prototype.persistOnlineState=function(t){var e={clientId:this.localClientId,onlineState:fr[t]};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))},t.prototype.persistQueryTargetState=function(t,e,n){var r=this.toWebStorageQueryTargetMetadataKey(t),i=new Mi(t,e,n);this.setItem(r,i.toWebStorageJSON())},t.prototype.toWebStorageClientStateKey=function(t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),Ni+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageQueryTargetMetadataKey=function(t){return Bi+"_"+this.persistenceKey+"_"+t},t.prototype.toWebStorageMutationBatchKey=function(t){var e=Ri+"_"+this.persistenceKey+"_"+t;return this.currentUser.isAuthenticated()&&(e+="_"+this.currentUser.uid),e},t.prototype.fromWebStorageClientStateKey=function(t){var e=this.clientStateKeyRe.exec(t);return e?e[1]:null},t.prototype.fromWebStorageClientState=function(t,e){var n=this.fromWebStorageClientStateKey(t);return v(null!==n,"Cannot parse client state key '"+t+"'"),Li.fromWebStorageEntry(n,e)},t.prototype.fromWebStorageMutationMetadata=function(t,e){var n=this.mutationBatchKeyRe.exec(t);v(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return xi.fromWebStorageEntry(new Ci(i),r,e)},t.prototype.fromWebStorageQueryTargetMetadata=function(t,e){var n=this.queryTargetKeyRe.exec(t);v(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return Mi.fromWebStorageEntry(r,e)},t.prototype.fromWebStorageOnlineState=function(t){return ji.fromWebStorageEntry(t)},t.prototype.handleMutationBatchEvent=function(t){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(e){return t.user.uid!==this.currentUser.uid?(d(Ii,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]}))}))},t.prototype.handleQueryTargetEvent=function(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)},t.prototype.handleClientStateEvent=function(t,e){var n=this,r=this.getAllActiveQueryTargets();e?this.activeClients[t]=e:delete this.activeClients[t];var i=this.getAllActiveQueryTargets(),o=[],s=[];return i.forEach((function(t){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(e){return r.has(t)||o.push(t),[2]}))}))})),r.forEach((function(t){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(e){return i.has(t)||s.push(t),[2]}))}))})),this.syncEngine.applyActiveTargetsChange(o,s)},t.prototype.handleOnlineStateEvent=function(t){this.activeClients[t.clientId]&&this.onlineStateHandler(t.onlineState)},t}(),zi=function(){function t(){this.localState=new Fi,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.localState.addQueryTarget(t),this.queryState[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.queryState[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.localState.removeQueryTarget(t)},t.prototype.isLocalQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.queryState[t]},t.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.localState.activeTargetIds.has(t)},t.prototype.start=function(){return this.localState=new Fi,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t}(),Vi=function(){function t(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}return t.prototype.lruParams=function(){return Nn.withCacheSize(this.cacheSizeBytes)},t}(),Hi=function(){},Gi=function(){function t(t,e,n,r){this.platform=t,this.databaseInfo=e,this.credentials=n,this.asyncQueue=r,this.clientId=K.newId()}return t.prototype.start=function(t){var e=this;this.verifyNotTerminated();var n=new ht,r=new ht,i=!1;return this.credentials.setChangeListener((function(o){i?e.asyncQueue.enqueueAndForget((function(){return e.handleCredentialChange(o)})):(i=!0,e.initializePersistence(t,r,o).then((function(t){return e.initializeRest(o,t)})).then(n.resolve,n.reject))})),this.asyncQueue.enqueueAndForget((function(){return n.promise})),r.promise},t.prototype.enableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.enableNetwork()}))},t.prototype.initializePersistence=function(t,e,n){var r=this;return t instanceof Vi?this.startIndexedDbPersistence(n,t).then((function(t){return e.resolve(),t})).catch((function(t){if(e.reject(t),!r.canFallback(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.startMemoryPersistence()})):(e.resolve(),this.startMemoryPersistence())},t.prototype.canFallback=function(t){return t instanceof T?t.code===E.FAILED_PRECONDITION||t.code===E.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new T(E.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.startIndexedDbPersistence=function(t,e){var n=this,r=jn.buildStoragePrefix(this.databaseInfo),i=new yi(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then((function(){return a.__awaiter(n,void 0,void 0,(function(){var n,o;return a.__generator(this,(function(a){switch(a.label){case 0:if(e.synchronizeTabs&&!Ui.isAvailable(this.platform))throw new T(E.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return n=e.lruParams(),this.sharedClientState=e.synchronizeTabs?new Ui(this.asyncQueue,this.platform,r,this.clientId,t):new zi,[4,jn.createIndexedDbPersistence({allowTabSynchronization:e.synchronizeTabs,persistenceKey:r,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:i,lruParams:n,sequenceNumberSyncer:this.sharedClientState})];case 1:return o=a.sent(),this.persistence=o,[2,o.referenceDelegate.garbageCollector]}}))}))}))},t.prototype.startMemoryPersistence=function(){return this.persistence=Xn.createEagerPersistence(this.clientId),this.sharedClientState=new zi,Promise.resolve(null)},t.prototype.initializeRest=function(t,e){var n=this;return d("FirestoreClient","Initializing. user=",t.uid),this.platform.loadConnection(this.databaseInfo).then((function(r){return a.__awaiter(n,void 0,void 0,(function(){var n,i,o,s,c,u,l=this;return a.__generator(this,(function(h){switch(h.label){case 0:return n=new er,this.localStore=new Kn(this.persistence,n,t),[4,this.localStore.start()];case 1:return h.sent(),e&&(this.lruScheduler=new Rn(e,this.asyncQueue,this.localStore)),i=this.platform.newConnectivityMonitor(),o=this.platform.newSerializer(this.databaseInfo.databaseId),s=new vr(this.asyncQueue,r,this.credentials,o),c=function(t){return l.syncEngine.applyOnlineStateChange(t,dr.RemoteStore)},u=function(t){return l.syncEngine.applyOnlineStateChange(t,dr.SharedClientState)},this.remoteStore=new zr(this.localStore,s,this.asyncQueue,c,i),this.syncEngine=new Oi(this.localStore,this.remoteStore,this.sharedClientState,t),this.sharedClientState.onlineStateHandler=u,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new gi(this.syncEngine),[4,this.sharedClientState.start()];case 2:return h.sent(),[4,this.remoteStore.start()];case 3:return h.sent(),[4,this.persistence.setPrimaryStateListener((function(t){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}}))}))}))];case 4:return h.sent(),[4,this.persistence.setDatabaseDeletedListener((function(){return a.__awaiter(l,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}}))}))}))];case 5:return h.sent(),[2]}}))}))}))},t.prototype.handleCredentialChange=function(t){return this.asyncQueue.verifyOperationInProgress(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.syncEngine.handleCredentialChange(t)},t.prototype.disableNetwork=function(){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return t.syncEngine.disableNetwork()}))},t.prototype.terminate=function(){var t=this;return this.asyncQueue.enqueueAndInitiateShutdown((function(){return a.__awaiter(t,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return t.sent(),[4,this.sharedClientState.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.removeChangeListener(),[2]}}))}))}))},t.prototype.waitForPendingWrites=function(){var t=this;this.verifyNotTerminated();var e=new ht;return this.asyncQueue.enqueueAndForget((function(){return t.syncEngine.registerPendingWritesCallback(e)})),e.promise},t.prototype.listen=function(t,e,n){var r=this;this.verifyNotTerminated();var i=new vi(t,e,n);return this.asyncQueue.enqueueAndForget((function(){return r.eventMgr.listen(i)})),i},t.prototype.unlisten=function(t){var e=this;this.clientTerminated||this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.unlisten(t)}))},t.prototype.getDocumentFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return e.localStore.readDocument(t)})).then((function(t){if(t instanceof Ve)return t;if(t instanceof He)return null;throw new T(E.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")}))},t.prototype.getDocumentsFromLocalCache=function(t){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue((function(){return a.__awaiter(e,void 0,void 0,(function(){var e,n,r;return a.__generator(this,(function(i){switch(i.label){case 0:return[4,this.localStore.executeQuery(t,!0)];case 1:return e=i.sent(),n=new Ti(t,e.remoteKeys),r=n.computeDocChanges(e.documents),[2,n.applyChanges(r,!1).snapshot]}}))}))}))},t.prototype.write=function(t){var e=this;this.verifyNotTerminated();var n=new ht;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.write(t,n)})),n.promise},t.prototype.databaseId=function(){return this.databaseInfo.databaseId},t.prototype.addSnapshotsInSyncListener=function(t){var e=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget((function(){return e.eventMgr.addSnapshotsInSyncListener(t),Promise.resolve()}))},t.prototype.removeSnapshotsInSyncListener=function(t){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(t)},Object.defineProperty(t.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),t.prototype.transaction=function(t){var e=this;this.verifyNotTerminated();var n=new ht;return this.asyncQueue.enqueueAndForget((function(){return e.syncEngine.runTransaction(e.asyncQueue,t,n),Promise.resolve()})),n.promise},t}(),qi=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.scheduleEvent(this.observer.next,t)},t.prototype.error=function(t){this.scheduleEvent(this.observer.error,t)},t.prototype.mute=function(){this.muted=!0},t.prototype.scheduleEvent=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Wi=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<1)throw new T(E.INVALID_ARGUMENT,"Function FieldPath() requires its fieldNames argument to be an array with at least "+W(1,"element")+".")}(0,t);for(var n=0;n<t.length;++n)if(D("FieldPath","string",n,t[n]),0===t[n].length)throw new T(E.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ut(t)}return t.documentId=function(){return t._DOCUMENT_ID},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},t._DOCUMENT_ID=new t(ut.keyField().canonicalString()),t}(),Ki=new RegExp("[~\\*/\\[\\]]"),Yi=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={Authorization:"Bearer "+t}},Ji=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(Ci.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},t}(),Qi=function(){function t(t){var e=this;this.app=t,this.tokenListener=null,this.currentUser=Ci.UNAUTHENTICATED,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){e.tokenCounter++,e.currentUser=e.getUser(),e.changeListener&&e.changeListener(e.currentUser)},this.currentUser=this.getUser(),this.tokenCounter=0,this.app.INTERNAL.addAuthTokenListener(this.tokenListener)}return t.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var e=this.tokenCounter,n=this.forceRefresh;return this.forceRefresh=!1,this.app.INTERNAL.getToken(n).then((function(n){if(t.tokenCounter!==e)throw new T(E.ABORTED,"getToken aborted due to token change.");return n?(v("string"==typeof n.accessToken,"Invalid tokenData returned from getToken():"+n),new Yi(n.accessToken,t.currentUser)):null}))},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=t,t(this.currentUser)},t.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.app.INTERNAL.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},t.prototype.getUser=function(){var t=this.app.INTERNAL.getUid();return v(null===t||"string"==typeof t,"Received invalid UID: "+t),new Ci(t)},t}(),Xi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e,this.type="FirstParty",this.user=Ci.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.sessionIndex},e=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),t}(),Zi=function(){function t(t,e){this.gapi=t,this.sessionIndex=e}return t.prototype.getToken=function(){return Promise.resolve(new Xi(this.gapi,this.sessionIndex))},t.prototype.setChangeListener=function(t){t(Ci.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $i(t){if(!t)return new Ji;switch(t.type){case"gapi":var e=t.client;return v(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Zi(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new T(E.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function to(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)}var eo,no=function(){function t(t){this._methodName=t}return t.delete=function(){return I("FieldValue.delete",arguments),ro.instance},t.serverTimestamp=function(){return I("FieldValue.serverTimestamp",arguments),io.instance},t.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R("FieldValue.arrayUnion",arguments,1),new oo(t)},t.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return R("FieldValue.arrayRemove",arguments,1),new ao(t)},t.increment=function(t){return D("FieldValue.increment","number",1,t),N("FieldValue.increment",arguments,1),new so(t)},t.prototype.isEqual=function(t){return this===t},t}(),ro=function(t){function e(){return t.call(this,"FieldValue.delete")||this}return a.__extends(e,t),e.instance=new e,e}(no),io=function(t){function e(){return t.call(this,"FieldValue.serverTimestamp")||this}return a.__extends(e,t),e.instance=new e,e}(no),oo=function(t){function e(e){var n=t.call(this,"FieldValue.arrayUnion")||this;return n._elements=e,n}return a.__extends(e,t),e}(no),ao=function(t){function e(e){var n=t.call(this,"FieldValue.arrayRemove")||this;return n._elements=e,n}return a.__extends(e,t),e}(no),so=function(t){function e(e){var n=t.call(this,"FieldValue.increment")||this;return n._operand=e,n}return a.__extends(e,t),e}(no),co=S(no,"Use FieldValue.<field>() instead."),uo=/^__.*__$/,lo=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[];return null!==this.fieldMask?n.push(new Te(t,this.data,this.fieldMask,e)):n.push(new Ee(t,this.data,e)),this.fieldTransforms.length>0&&n.push(new Se(t,this.fieldTransforms)),n},t}(),ho=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutations=function(t,e){var n=[new Te(t,this.data,this.fieldMask,e)];return this.fieldTransforms.length>0&&n.push(new Se(t,this.fieldTransforms)),n},t}();function po(t){switch(t){case eo.Set:case eo.MergeSet:case eo.Update:return!0;case eo.Argument:return!1;default:throw g("Unexpected case for UserDataSource: "+t)}}!function(t){t[t.Set=0]="Set",t[t.Update=1]="Update",t[t.MergeSet=2]="MergeSet",t[t.Argument=3]="Argument"}(eo||(eo={}));var fo=function(){function t(t,e,n,r,i,o){this.dataSource=t,this.methodName=e,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}return t.prototype.childContextForField=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePathSegment(e),r},t.prototype.childContextForFieldPath=function(e){var n=null==this.path?null:this.path.child(e),r=new t(this.dataSource,this.methodName,n,!1,this.fieldTransforms,this.fieldMask);return r.validatePath(),r},t.prototype.childContextForArray=function(e){return new t(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},t.prototype.createError=function(t){var e=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new T(E.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.validatePath=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))},t.prototype.validatePathSegment=function(t){if(po(this.dataSource)&&uo.test(t))throw this.createError("Document fields cannot begin and end with __")},t}(),yo=function(t,e){this.databaseId=t,this.key=e},mo=function(){function t(t){this.preConverter=t}return t.prototype.parseSetData=function(t,e){var n=new fo(eo.Set,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",n,e);var r=this.parseData(e,n);return new lo(r,null,n.fieldTransforms)},t.prototype.parseMergeData=function(t,e,n){var r=new fo(eo.MergeSet,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",r,e);var i,o,a=this.parseData(e,r);if(n){for(var s=new Ct(ut.comparator),c=0,u=n;c<u.length;c++){var l=u[c],h=void 0;if(l instanceof Wi)h=l._internalPath;else{if("string"!=typeof l)throw g("Expected stringOrFieldPath to be a string or a FieldPath");h=_o(t,l)}if(!r.contains(h))throw new T(E.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=de.fromSet(s),o=r.fieldTransforms.filter((function(t){return i.covers(t.field)}))}else i=de.fromArray(r.fieldMask),o=r.fieldTransforms;return new lo(a,i,o)},t.prototype.parseUpdateData=function(t,e){var n=this,r=new fo(eo.Update,t,ut.EMPTY_PATH);vo("Data must be an object, but it was:",r,e);var i=new Ct(ut.comparator),o=Fe.EMPTY;O(e,(function(e,a){var s=_o(t,e),c=r.childContextForFieldPath(s);if((a=n.runPreConverter(a,c))instanceof ro)i=i.add(s);else{var u=n.parseData(a,c);null!=u&&(i=i.add(s),o=o.set(s,u))}}));var a=de.fromSet(i);return new ho(o,a,r.fieldTransforms)},t.prototype.parseUpdateVarargs=function(t,e,n,r){var i=new fo(eo.Update,t,ut.EMPTY_PATH),o=[bo(t,e)],a=[n];if(r.length%2!=0)throw new T(E.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(bo(t,r[s])),a.push(r[s+1]);var c=new Ct(ut.comparator),u=Fe.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),p=this.runPreConverter(a[s],h);if(p instanceof ro)c=c.add(l);else{var f=this.parseData(p,h);null!=f&&(c=c.add(l),u=u.set(l,f))}}var d=de.fromSet(c);return new ho(u,d,i.fieldTransforms)},t.prototype.parseQueryValue=function(t,e){var n=new fo(eo.Argument,t,ut.EMPTY_PATH),r=this.parseData(e,n);return v(null!=r,"Parsed data should not be null."),v(0===n.fieldTransforms.length,"Field transforms should have been disallowed."),r},t.prototype.runPreConverter=function(t,e){try{return this.preConverter(t)}catch(t){var n=Eo(t);throw e.createError(n)}},t.prototype.parseData=function(t,e){if(go(t=this.runPreConverter(t,e)))return vo("Unsupported field value:",e,t),this.parseObject(t,e);if(t instanceof no)return this.parseSentinelFieldValue(t,e),null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.arrayElement)throw e.createError("Nested arrays are not supported");return this.parseArray(t,e)}return this.parseScalarValue(t,e)},t.prototype.parseObject=function(t,e){var n=this,r=new kt(Y);return C(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):O(t,(function(t,i){var o=n.parseData(i,e.childContextForField(t));null!=o&&(r=r.insert(t,o))})),new Fe(r)},t.prototype.parseArray=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=o[i],s=this.parseData(a,e.childContextForArray(r));null==s&&(s=Oe.INSTANCE),n.push(s),r++}return new Ue(n)},t.prototype.parseSentinelFieldValue=function(t,e){if(!po(e.dataSource))throw e.createError(t._methodName+"() can only be used with update() and set()");if(null===e.path)throw e.createError(t._methodName+"() is not currently supported inside arrays");if(t instanceof ro){if(e.dataSource!==eo.MergeSet)throw e.dataSource===eo.Update?(v(e.path.length>0,"FieldValue.delete() at the top level should have already been handled."),e.createError("FieldValue.delete() can only appear at the top level of your update data")):e.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.fieldMask.push(e.path)}else if(t instanceof io)e.fieldTransforms.push(new ye(e.path,ni.instance));else if(t instanceof oo){var n=this.parseArrayTransformElements(t._methodName,t._elements),r=new ri(n);e.fieldTransforms.push(new ye(e.path,r))}else if(t instanceof ao){n=this.parseArrayTransformElements(t._methodName,t._elements);var i=new ii(n);e.fieldTransforms.push(new ye(e.path,i))}else if(t instanceof so){var o=this.parseQueryValue("FieldValue.increment",t._operand),a=new oi(o);e.fieldTransforms.push(new ye(e.path,a))}else g("Unknown FieldValue type: "+t)},t.prototype.parseScalarValue=function(t,e){if(null===t)return Oe.INSTANCE;if("number"==typeof t)return sr(t)?new Re(t):new Be(t);if("boolean"==typeof t)return Ce.of(t);if("string"==typeof t)return new De(t);if(t instanceof Date)return new Pe(Tt.fromDate(t));if(t instanceof Tt)return new Pe(new Tt(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof Vr)return new je(t);if(t instanceof tt)return new Me(t);if(t instanceof yo)return new Le(t.databaseId,t.key);throw e.createError("Unsupported field value: "+z(t))},t.prototype.parseArrayTransformElements=function(t,e){var n=this;return e.map((function(e,r){var i=new fo(eo.Argument,t,ut.EMPTY_PATH);return n.parseData(e,i.childContextForArray(r))}))},t}();function go(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Tt||t instanceof Vr||t instanceof tt||t instanceof yo||t instanceof no)}function vo(t,e,n){if(!go(n)||!U(n)){var r=z(n);throw"an object"===r?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function bo(t,e){if(e instanceof Wi)return e._internalPath;if("string"==typeof e)return _o(t,e);throw new T(E.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function _o(t,e){try{return function(t){if(t.search(Ki)>=0)throw new T(E.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Wi.bind.apply(Wi,a.__spreadArrays([void 0],t.split("."))))}catch(e){throw new T(E.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=Eo(e);throw new T(E.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Eo(t){return t instanceof Error?t.message:t.toString()}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var To="firestore.googleapis.com",So=!0,ko=!0,wo=!1,Ao=Nn.COLLECTION_DISABLED,Oo=function(){function t(t){if(void 0===t.host){if(void 0!==t.ssl)throw new T(E.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=To,this.ssl=So}else x("settings","non-empty string","host",t.host),this.host=t.host,M("settings","boolean","ssl",t.ssl),this.ssl=w(t.ssl,So);if(H("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),M("settings","object","credentials",t.credentials),this.credentials=t.credentials,M("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?y("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&y("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=w(t.timestampsInSnapshots,ko),M("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=Nn.DEFAULT_CACHE_SIZE_BYTES;else{if(t.cacheSizeBytes!==Ao&&t.cacheSizeBytes<Nn.MINIMUM_CACHE_SIZE_BYTES)throw new T(E.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Nn.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=t.cacheSizeBytes}M("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0===t.experimentalForceLongPolling?wo:t.experimentalForceLongPolling}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},t}(),Co=function(){function t(e){var n=this;if(this._firebaseApp=null,this._queue=new ft,this.INTERNAL={delete:function(){return a.__awaiter(n,void 0,void 0,(function(){return a.__generator(this,(function(t){switch(t.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return t.sent(),[2]}}))}))}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=t.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Qi(r)}else{var i=e;if(!i.projectId)throw new T(E.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new it(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new Ji}this._settings=new Oo({}),this._dataConverter=this.createDataConverter(this._databaseId)}return t.prototype.settings=function(t){if(N("Firestore.settings",arguments,1),D("Firestore.settings","object",1,t),k(t,"persistence"))throw new T(E.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new Oo(t);if(this._firestoreClient&&!this._settings.isEqual(e))throw new T(E.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");this._settings=e,void 0!==e.credentials&&(this._credentials=$i(e.credentials))},t.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},t.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},t.prototype.enablePersistence=function(t){if(this._firestoreClient)throw new T(E.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&y("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=w(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.configureClient(new Vi(this._settings.cacheSizeBytes,e))},t.prototype.clearPersistence=function(){var t=this,e=jn.buildStoragePrefix(this.makeDatabaseInfo()),n=new ht;return this._queue.enqueueAndForgetEvenAfterShutdown((function(){return a.__awaiter(t,void 0,void 0,(function(){var t;return a.__generator(this,(function(r){switch(r.label){case 0:if(r.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new T(E.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,jn.clearPersistence(e)];case 1:return r.sent(),n.resolve(),[3,3];case 2:return t=r.sent(),n.reject(t),[3,3];case 3:return[2]}}))}))})),n.promise},t.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(t.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),t.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},t.prototype.onSnapshotsInSync=function(t){if(this.ensureClientConfigured(),to(t))return this.onSnapshotsInSyncInternal(t);D("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.onSnapshotsInSyncInternal(e)},t.prototype.onSnapshotsInSyncInternal=function(t){var e=this,n=new qi({next:function(){t.next&&t.next()},error:function(t){throw g("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),e._firestoreClient.removeSnapshotsInSyncListener(n)}},t.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Hi),this._firestoreClient},t.prototype.makeDatabaseInfo=function(){return new nt(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},t.prototype.configureClient=function(t){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var e=this.makeDatabaseInfo();return this._firestoreClient=new Gi(b.getPlatform(),e,this._credentials,this._queue),this._firestoreClient.start(t)},t.prototype.createDataConverter=function(t){return new mo((function(e){if(e instanceof Ro){var n=t,r=e.firestore._databaseId;if(!r.isEqual(n))throw new T(E.INVALID_ARGUMENT,"Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return new yo(t,e._key)}return e}))},t.databaseIdFromApp=function(t){var e=t.options;if(!k(e,"projectId"))throw new T(E.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new T(E.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new it(n)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this._firebaseApp)throw new T(E.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){return N("Firestore.collection",arguments,1),D("Firestore.collection","non-empty string",1,t),this.ensureClientConfigured(),new Lo(st.fromString(t),this)},t.prototype.doc=function(t){return N("Firestore.doc",arguments,1),D("Firestore.doc","non-empty string",1,t),this.ensureClientConfigured(),Ro.forPath(st.fromString(t),this)},t.prototype.collectionGroup=function(t){if(N("Firestore.collectionGroup",arguments,1),D("Firestore.collectionGroup","non-empty string",1,t),t.indexOf("/")>=0)throw new T(E.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new xo(new Hr(st.EMPTY_PATH,t),this)},t.prototype.runTransaction=function(t){var e=this;return N("Firestore.runTransaction",arguments,1),D("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction((function(n){return t(new Io(e,n))}))},t.prototype.batch=function(){return this.ensureClientConfigured(),new No(this)},Object.defineProperty(t,"logLevel",{get:function(){switch(p()){case i.DEBUG:return"debug";case i.ERROR:return"error";case i.SILENT:return"silent";default:return g("Unknown log level: "+p())}},enumerable:!0,configurable:!0}),t.setLogLevel=function(t){switch(N("Firestore.setLogLevel",arguments,1),D("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":f(i.DEBUG);break;case"error":f(i.ERROR);break;case"silent":f(i.SILENT);break;default:throw new T(E.INVALID_ARGUMENT,"Invalid log level: "+t)}},t.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},t}(),Io=function(){function t(t,e){this._firestore=t,this._transaction=e}return t.prototype.get=function(t){var e=this;N("Transaction.get",arguments,1);var n=zo("Transaction.get",t,this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return g("Mismatch in docs returned from document lookup.");var r=t[0];if(r instanceof He)return new Do(e._firestore,n._key,null,!1,!1);if(r instanceof Ve)return new Do(e._firestore,n._key,r,!1,!1);throw g("BatchGetDocumentsRequest returned unexpected document type: "+r.constructor.name)}))},t.prototype.set=function(t,e,n){B("Transaction.set",arguments,2,3);var r=zo("Transaction.set",t,this._firestore),i=(n=jo("Transaction.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("Transaction.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("Transaction.set",e);return this._transaction.set(r._key,i),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return"string"==typeof e||e instanceof Wi?(R("Transaction.update",arguments,3),r=zo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",e,n,o)):(N("Transaction.update",arguments,2),r=zo("Transaction.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("Transaction.update",e)),this._transaction.update(r._key,i),this},t.prototype.delete=function(t){N("Transaction.delete",arguments,1);var e=zo("Transaction.delete",t,this._firestore);return this._transaction.delete(e._key),this},t}(),No=function(){function t(t){this._firestore=t,this._mutations=[],this._committed=!1}return t.prototype.set=function(t,e,n){B("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=zo("WriteBatch.set",t,this._firestore),i=(n=jo("WriteBatch.set",n)).merge||n.mergeFields?this._firestore._dataConverter.parseMergeData("WriteBatch.set",e,n.mergeFields):this._firestore._dataConverter.parseSetData("WriteBatch.set",e);return this._mutations=this._mutations.concat(i.toMutations(r._key,be.NONE)),this},t.prototype.update=function(t,e,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),"string"==typeof e||e instanceof Wi?(R("WriteBatch.update",arguments,3),r=zo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",e,n,o)):(N("WriteBatch.update",arguments,2),r=zo("WriteBatch.update",t,this._firestore),i=this._firestore._dataConverter.parseUpdateData("WriteBatch.update",e)),this._mutations=this._mutations.concat(i.toMutations(r._key,be.exists(!0))),this},t.prototype.delete=function(t){N("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var e=zo("WriteBatch.delete",t,this._firestore);return this._mutations=this._mutations.concat(new ke(e._key,be.NONE)),this},t.prototype.commit=function(){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(t){return this.verifyNotCommitted(),this._committed=!0,this._mutations.length>0?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]}))}))},t.prototype.verifyNotCommitted=function(){if(this._committed)throw new T(E.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}(),Ro=function(){function t(t,e){this._key=t,this.firestore=e,this._firestoreClient=this.firestore.ensureClientConfigured()}return t.forPath=function(e,n){if(e.length%2!=0)throw new T(E.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(new lt(e),n)},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Lo(this._key.path.popLast(),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),t.prototype.collection=function(t){if(N("DocumentReference.collection",arguments,1),D("DocumentReference.collection","non-empty string",1,t),!t)throw new T(E.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=st.fromString(t);return new Lo(this._key.path.child(e),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)},t.prototype.set=function(t,e){B("DocumentReference.set",arguments,1,2);var n=(e=jo("DocumentReference.set",e)).merge||e.mergeFields?this.firestore._dataConverter.parseMergeData("DocumentReference.set",t,e.mergeFields):this.firestore._dataConverter.parseSetData("DocumentReference.set",t);return this._firestoreClient.write(n.toMutations(this._key,be.NONE))},t.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return"string"==typeof t||t instanceof Wi?(R("DocumentReference.update",arguments,2),n=this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",t,e,r)):(N("DocumentReference.update",arguments,1),n=this.firestore._dataConverter.parseUpdateData("DocumentReference.update",t)),this._firestoreClient.write(n.toMutations(this._key,be.exists(!0)))},t.prototype.delete=function(){return N("DocumentReference.delete",arguments,0),this._firestoreClient.write([new ke(this._key,be.NONE)])},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];B("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||to(t[i])||(H("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),M("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return to(t[i])?n=t[i]:(D("DocumentReference.onSnapshot","function",i,t[i]),P("DocumentReference.onSnapshot","function",i+1,t[i+1]),P("DocumentReference.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(o,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qi({next:function(t){if(e.next){v(t.docs.size<=1,"Too many documents returned on a document query");var r=t.docs.get(n._key);e.next(new Do(n.firestore,n._key,r,t.fromCache,t.hasPendingWrites))}},error:r}),o=this._firestoreClient.listen(Hr.atPath(this._key.path),i,t);return function(){i.mute(),n._firestoreClient.unlisten(o)}},t.prototype.get=function(t){var e=this;return B("DocumentReference.get",arguments,0,1),Uo("DocumentReference.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentFromLocalCache(e._key).then((function(t){n(new Do(e.firestore,e._key,t,!0,t instanceof Ve&&t.hasLocalMutations))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),!i.exists&&i.metadata.fromCache?e(new T(E.UNAVAILABLE,"Failed to get document because the client is offline.")):i.exists&&i.metadata.fromCache&&n&&"server"===n.source?e(new T(E.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(i)},error:e})},t}(),Bo=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Do=function(){function t(t,e,n,r,i){this._firestore=t,this._key=e,this._document=n,this._fromCache=r,this._hasPendingWrites=i}return t.prototype.data=function(t){return B("DocumentSnapshot.data",arguments,0,1),t=Fo("DocumentSnapshot.data",t),this._document?this.convertObject(this._document.data(),we.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled())):void 0},t.prototype.get=function(t,e){if(B("DocumentSnapshot.get",arguments,1,2),e=Fo("DocumentSnapshot.get",e),this._document){var n=this._document.data().field(bo("DocumentSnapshot.get",t));if(null!==n)return this.convertValue(n,we.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this._key,this._firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return new Bo(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))},t.prototype.convertObject=function(t,e){var n=this,r={};return t.forEach((function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertValue=function(t,e){if(t instanceof Fe)return this.convertObject(t,e);if(t instanceof Ue)return this.convertArray(t,e);if(t instanceof Le){var n=t.value(e),r=this._firestore.ensureClientConfigured().databaseId();return t.databaseId.isEqual(r)||y("Document "+this._key.path+" contains a document reference within a different database ("+t.databaseId.projectId+"/"+t.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Ro(n,this._firestore)}return t.value(e)},t.prototype.convertArray=function(t,e){var n=this;return t.internalValue.map((function(t){return n.convertValue(t,e)}))},t}(),Po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return a.__extends(e,t),e.prototype.data=function(e){var n=t.prototype.data.call(this,e);return v("object"==typeof n,"Document in a QueryDocumentSnapshot should exist"),n},e}(Do),xo=function(){function t(t,e){this._query=t,this.firestore=e}return t.prototype.where=function(e,n,r){if(N("Query.where",arguments,3),V("Query.where",3,r),"in"!==n&&"array-contains-any"!==n){var i=["<","<=","==",">=",">","array-contains"];j("Query.where",i,2,n)}var o,a=bo("Query.where",e),s=Gr.fromString(n);if(a.isKeyField()){if(s===Gr.ARRAY_CONTAINS||s===Gr.ARRAY_CONTAINS_ANY)throw new T(E.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+s.toString()+"' queries on FieldPath.documentId().");if(s===Gr.IN){this.validateDisjunctiveFilterElements(r,s);for(var c=[],u=0,l=r;u<l.length;u++){var h=l[u];c.push(this.parseDocumentIdValue(h))}o=new Ue(c)}else o=this.parseDocumentIdValue(r)}else s!==Gr.IN&&s!==Gr.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(r,s),o=this.firestore._dataConverter.parseQueryValue("Query.where",r);var p=qr.create(a,s,o);return this.validateNewFilter(p),new t(this._query.addFilter(p),this.firestore)},t.prototype.orderBy=function(e,n){var r;if(B("Query.orderBy",arguments,1,2),P("Query.orderBy","non-empty string",2,n),void 0===n||"asc"===n)r=Xr.ASCENDING;else{if("desc"!==n)throw new T(E.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+n+"', expected 'asc' or 'desc'.");r=Xr.DESCENDING}if(null!==this._query.startAt)throw new T(E.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new T(E.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var i=bo("Query.orderBy",e),o=new $r(i,r);return this.validateNewOrderBy(o),new t(this._query.addOrderBy(o),this.firestore)},t.prototype.limit=function(e){if(N("Query.limit",arguments,1),D("Query.limit","number",1,e),e<=0)throw new T(E.INVALID_ARGUMENT,"Invalid Query. Query limit ("+e+") is invalid. Limit must be positive.");return new t(this._query.withLimit(e),this.firestore)},t.prototype.startAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAt",arguments,1);var i=this.boundFromDocOrFields("Query.startAt",e,n,!0);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.startAfter=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.startAfter",arguments,1);var i=this.boundFromDocOrFields("Query.startAfter",e,n,!1);return new t(this._query.withStartAt(i),this.firestore)},t.prototype.endBefore=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endBefore",arguments,1);var i=this.boundFromDocOrFields("Query.endBefore",e,n,!0);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.endAt=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];R("Query.endAt",arguments,1);var i=this.boundFromDocOrFields("Query.endAt",e,n,!1);return new t(this._query.withEndAt(i),this.firestore)},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},t.prototype.boundFromDocOrFields=function(t,e,n,r){if(V(t,1,e),e instanceof Do){if(n.length>0)throw new T(E.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new T(E.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.boundFromDocument(t,i._document,r)}var o=[e].concat(n);return this.boundFromFields(t,o,r)},t.prototype.boundFromDocument=function(t,e,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new Le(this.firestore._databaseId,e.key));else{var s=e.field(a.field);if(s instanceof xe)throw new T(E.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var c=a.field.canonicalString();throw new T(E.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+c+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Zr(r,n)},t.prototype.boundFromFields=function(t,e,n){var r=this._query.explicitOrderBy;if(e.length>r.length)throw new T(E.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var a=e[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new T(E.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(st.fromString(a));if(!lt.isDocumentKey(s))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var c=new lt(s);i.push(new Le(this.firestore._databaseId,c))}else{var u=this.firestore._dataConverter.parseQueryValue(t,a);i.push(u)}}return new Zr(i,n)},t.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];B("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||to(t[i])||(H("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),M("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),to(t[i])?n=t[i]:(D("Query.onSnapshot","function",i,t[i]),P("Query.onSnapshot","function",i+1,t[i+1]),P("Query.onSnapshot","function",i+2,t[i+2]),n={next:t[i],error:t[i+1],complete:t[i+2]}),this.onSnapshotInternal(r,n)},t.prototype.onSnapshotInternal=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new qi({next:function(t){e.next&&e.next(new Mo(n.firestore,n._query,t))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,t);return function(){i.mute(),o.unlisten(a)}},t.prototype.get=function(t){var e=this;return B("Query.get",arguments,0,1),Uo("Query.get",t),new Promise((function(n,r){t&&"cache"===t.source?e.firestore.ensureClientConfigured().getDocumentsFromLocalCache(e._query).then((function(t){n(new Mo(e.firestore,e._query,t))}),r):e.getViaSnapshotListener(n,r,t)}))},t.prototype.getViaSnapshotListener=function(t,e,n){var r=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(i){r(),i.metadata.fromCache&&n&&"server"===n.source?e(new T(E.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(i)},error:e})},t.prototype.parseDocumentIdValue=function(t){if("string"==typeof t){if(""===t)throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==t.indexOf("/"))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this._query.path.child(st.fromString(t));if(!lt.isDocumentKey(e))throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Le(this.firestore._databaseId,new lt(e))}if(t instanceof Ro){var n=t;return new Le(this.firestore._databaseId,n._key)}throw new T(E.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+z(t)+".")},t.prototype.validateDisjunctiveFilterElements=function(t,e){if(!Array.isArray(t)||0===t.length)throw new T(E.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new T(E.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(t.indexOf(null)>=0)throw new T(E.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(t.filter((function(t){return Number.isNaN(t)})).length>0)throw new T(E.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},t.prototype.validateNewFilter=function(t){if(t instanceof qr){var e=[Gr.ARRAY_CONTAINS,Gr.ARRAY_CONTAINS_ANY],n=[Gr.IN,Gr.ARRAY_CONTAINS_ANY],r=e.indexOf(t.op)>=0,i=n.indexOf(t.op)>=0;if(t.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(t.field))throw new T(E.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(t.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(e)),null!=s)throw s===t.op?new T(E.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new T(E.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},t.prototype.validateNewOrderBy=function(t){if(null===this._query.getFirstOrderByField()){var e=this._query.getInequalityFilterField();null!==e&&this.validateOrderByAndInequalityMatch(e,t.field)}},t.prototype.validateOrderByAndInequalityMatch=function(t,e){if(!e.isEqual(t))throw new T(E.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},t}(),Mo=function(){function t(t,e,n){this._firestore=t,this._originalQuery=e,this._snapshot=n,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Bo(n.hasPendingWrites,n.fromCache)}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;B("QuerySnapshot.forEach",arguments,1,2),D("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach((function(r){t.call(e,n.convertToDocumentImpl(r))}))},Object.defineProperty(t.prototype,"query",{get:function(){return new xo(this._originalQuery,this._firestore)},enumerable:!0,configurable:!0}),t.prototype.docChanges=function(t){t&&(H("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),M("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this._snapshot.excludesMetadataChanges)throw new T(E.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e,n){if(n.oldDocs.isEmpty()){var r,i=0;return n.docChanges.map((function(e){var o=new Po(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key));return v(e.type===wr.Added,"Invalid event type for first snapshot"),v(!r||n.query.docComparator(r,e.doc)<0,"Got added events in wrong order"),r=e.doc,{type:"added",doc:o,oldIndex:-1,newIndex:i++}}))}var o=n.oldDocs;return n.docChanges.filter((function(t){return e||t.type!==wr.Metadata})).map((function(e){var r=new Po(t,e.doc.key,e.doc,n.fromCache,n.mutatedKeys.has(e.doc.key)),i=-1,a=-1;return e.type!==wr.Added&&(v((i=o.indexOf(e.doc.key))>=0,"Index for document not found"),o=o.delete(e.doc.key)),e.type!==wr.Removed&&(a=(o=o.add(e.doc)).indexOf(e.doc.key)),{type:Vo(e.type),doc:r,oldIndex:i,newIndex:a}}))}(this._firestore,e,this._snapshot),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t.prototype.isEqual=function(e){if(!(e instanceof t))throw G("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)},t.prototype.convertToDocumentImpl=function(t){return new Po(this._firestore,t.key,t,this.metadata.fromCache,this._snapshot.mutatedKeys.has(t.key))},t}();a.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach((function(t){try{Object.defineProperty(Mo.prototype.docChanges,t,{get:function(){return function(){throw new T(E.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}}));var Lo=function(t){function e(e,n){var r=t.call(this,Hr.atPath(e),n)||this;if(e.length%2!=1)throw new T(E.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}return a.__extends(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._query.path.popLast();return t.isEmpty()?null:new Ro(new lt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),e.prototype.doc=function(t){if(B("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=K.newId()),D("CollectionReference.doc","non-empty string",1,t),""===t)throw new T(E.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=st.fromString(t);return Ro.forPath(this._query.path.child(e),this.firestore)},e.prototype.add=function(t){N("CollectionReference.add",arguments,1),D("CollectionReference.add","object",1,t);var e=this.doc();return e.set(t).then((function(){return e}))},e}(xo);function jo(t,e){if(void 0===e)return{merge:!1};if(H(t,e,["merge","mergeFields"]),M(t,"boolean","merge",e.merge),function(t,e,n,r,i){void 0!==r&&function(t,e,n,r,i){if(!(r instanceof Array))throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+z(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new T(E.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+z(r[o]))}(t,e,n,r,i)}(t,"mergeFields","a string or a FieldPath",e.mergeFields,(function(t){return"string"==typeof t||t instanceof Wi})),void 0!==e.mergeFields&&void 0!==e.merge)throw new T(E.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Fo(t,e){return void 0===e?{}:(H(t,e,["serverTimestamps"]),L(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function Uo(t,e){P(t,"object",1,e),e&&(H(t,e,["source"]),L(t,0,"source",e.source,["default","server","cache"]))}function zo(t,e,n){if(e instanceof Ro){if(e.firestore!==n)throw new T(E.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw G(t,"DocumentReference",1,e)}function Vo(t){switch(t){case wr.Added:return"added";case wr.Modified:case wr.Metadata:return"modified";case wr.Removed:return"removed";default:return g("Unknown change type: "+t)}}var Ho=S(Co,"Use firebase.firestore() instead."),Go=S(Io,"Use firebase.firestore().runTransaction() instead."),qo=S(No,"Use firebase.firestore().batch() instead."),Wo=S(Ro,"Use firebase.firestore().doc() instead."),Ko=S(Do),Yo=S(Po),Jo=S(xo),Qo=S(Mo),Xo=S(Lo,"Use firebase.firestore().collection() instead."),Zo={Firestore:Ho,GeoPoint:Vr,Timestamp:Tt,Blob:et,Transaction:Go,WriteBatch:qo,DocumentReference:Wo,DocumentSnapshot:Ko,Query:Jo,QueryDocumentSnapshot:Yo,QuerySnapshot:Qo,CollectionReference:Xo,FieldPath:Wi,FieldValue:co,setLogLevel:Co.setLogLevel,CACHE_SIZE_UNLIMITED:Ao},$o=function(){function t(){}return t.prototype.addCallback=function(t){},t.prototype.shutdown=function(){},t}(),ta=function(){function t(){var t=this;this.networkAvailableListener=function(){return t.onNetworkAvailable()},this.networkUnavailableListener=function(){return t.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}return t.prototype.addCallback=function(t){this.callbacks.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},t.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},t.prototype.onNetworkAvailable=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(0)},t.prototype.onNetworkUnavailable=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.callbacks;t<e.length;t++)(0,e[t])(1)},t.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),ea=function(){function t(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}return t.prototype.onOpen=function(t){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=t},t.prototype.onClose=function(t){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=t},t.prototype.onMessage=function(t){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=t},t.prototype.close=function(){this.closeFn()},t.prototype.send=function(t){this.sendFn(t)},t.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},t.prototype.callOnClose=function(t){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(t)},t.prototype.callOnMessage=function(t){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(t)},t}(),na="Connection",ra={BatchGetDocuments:"batchGet",Commit:"commit"},ia="gl-js/ fire/"+l,oa=function(){function t(t){this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.baseUrl=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}return t.prototype.modifyHeadersForRequest=function(t,e){if(e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n]);t["X-Goog-Api-Client"]=ia},t.prototype.invokeRPC=function(t,e,n){var r=this,i=this.makeUrl(t);return new Promise((function(o,s){var c=new u.XhrIo;c.listenOnce(u.EventType.COMPLETE,(function(){try{switch(c.getLastErrorCode()){case u.ErrorCode.NO_ERROR:var e=c.getResponseJson();d(na,"XHR received:",JSON.stringify(e)),o(e);break;case u.ErrorCode.TIMEOUT:d(na,'RPC "'+t+'" timed out'),s(new T(E.DEADLINE_EXCEEDED,"Request time out"));break;case u.ErrorCode.HTTP_ERROR:var n=c.getStatus();if(d(na,'RPC "'+t+'" failed with status:',n,"response text:",c.getResponseText()),n>0){var r=c.getResponseJson().error;if(r&&r.status&&r.message){var i=(a=r.status.toLowerCase().replace("_","-"),Object.values(E).indexOf(a)>=0?a:E.UNKNOWN);s(new T(i,r.message))}else s(new T(E.UNKNOWN,"Server responded with status "+c.getStatus()))}else d(na,'RPC "'+t+'" failed'),s(new T(E.UNAVAILABLE,"Connection failed."));break;default:g('RPC "'+t+'" failed with unanticipated webchannel error '+c.getLastErrorCode()+": "+c.getLastError()+", giving up.")}}finally{d(na,'RPC "'+t+'" completed.')}var a}));var l=a.__assign({},e);delete l.database;var h=JSON.stringify(l);d(na,"XHR sending: ",i+" "+h);var p={"Content-Type":"text/plain"};r.modifyHeadersForRequest(p,n),c.send(i,"POST",h,p,15)}))},t.prototype.invokeStreamingRPC=function(t,e,n){return this.invokeRPC(t,e,n)},t.prototype.openStream=function(t,e){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=u.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,e),c.isReactNative()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");d(na,"Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),s=!1,l=!1,h=new ea({sendFn:function(t){l?d(na,"Not sending because WebChannel is closed:",t):(s||(d(na,"Opening WebChannel transport."),a.open(),s=!0),d(na,"WebChannel sending:",t),a.send(t))},closeFn:function(){return a.close()}}),p=function(t,e){a.listen(t,(function(t){try{e(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return p(u.WebChannel.EventType.OPEN,(function(){l||d(na,"WebChannel transport opened.")})),p(u.WebChannel.EventType.CLOSE,(function(){l||(l=!0,d(na,"WebChannel transport closed"),h.callOnClose())})),p(u.WebChannel.EventType.ERROR,(function(t){l||(l=!0,d(na,"WebChannel transport errored:",t),h.callOnClose(new T(E.UNAVAILABLE,"The operation could not be completed")))})),p(u.WebChannel.EventType.MESSAGE,(function(t){if(!l){var e=t.data[0];v(!!e,"Got a webchannel message without data.");var n=e,r=n.error||n[0]&&n[0].error;if(r){d(na,"WebChannel received error:",r);var i=r.status,o=function(t){var e=_r[t];if(void 0!==e)return Sr(e)}(i),s=r.message;void 0===o&&(o=E.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),l=!0,h.callOnClose(new T(o,s)),a.close()}else d(na,"WebChannel received:",e),h.callOnMessage(e)}})),setTimeout((function(){h.callOnOpen()}),0),h},t.prototype.makeUrl=function(t){var e=ra[t];v(void 0!==e,"Unknown REST mapping for: "+t);var n=[this.baseUrl,"/","v1"];return n.push("/projects/"),n.push(this.databaseId.projectId),n.push("/databases/"),n.push(this.databaseId.database),n.push("/documents"),n.push(":"),n.push(e),n.join("")},t}(),aa=function(){function t(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}return Object.defineProperty(t.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),t.prototype.loadConnection=function(t){return Promise.resolve(new oa(t))},t.prototype.newConnectivityMonitor=function(){return ta.isAvailable()?new ta:new $o},t.prototype.newSerializer=function(t){return new yi(t,{useProto3Json:!0})},t.prototype.formatJSON=function(t){return JSON.stringify(t)},t.prototype.atob=function(t){return atob(t)},t.prototype.btoa=function(t){return btoa(t)},t}();
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function sa(t){!function(t){t.INTERNAL.registerService("firestore",(function(t){return new Co(t)}),function(t){v(t&&"object"==typeof t,"shallowCopy() expects object parameter.");var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}(Zo))}
/**
 * @license
 * Copyright 2019 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)}
/**
 * @license
 * Copyright 2017 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */b.setPlatform(new aa),sa(o),e.registerFirestore=sa}).call(this,n(53))},function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"ErrorCode",(function(){return ur})),n.d(e,"EventType",(function(){return lr})),n.d(e,"WebChannel",(function(){return hr})),n.d(e,"XhrIo",(function(){return pr})),n.d(e,"createWebChannelTransport",(function(){return cr}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},o=o||{},a=i;function s(t){return"string"==typeof t}function c(t){return"number"==typeof t}function u(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function l(){}function h(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){return"array"==h(t)}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var y="closure_uid_"+(1e9*Math.random()>>>0),m=0;function g(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?g:v).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var E=Date.now||function(){return+new Date};function T(t,e){function n(){}n.prototype=e.prototype,t.N=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.yb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function S(){this.j=this.j,this.i=this.i}S.prototype.j=!1,S.prototype.la=function(){!this.j&&(this.j=!0,this.G(),0)&&(this[y]||(this[y]=++m))},S.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var k=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(s(t))return s(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},w=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=s(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function A(t){return Array.prototype.concat.apply([],arguments)}function O(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function C(t){return/^[\s\xa0]*$/.test(t)}var I,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function R(t,e){return-1!=t.indexOf(e)}function B(t,e){return t<e?-1:t>e?1:0}t:{var D=a.navigator;if(D){var P=D.userAgent;if(P){I=P;break t}}I=""}function x(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function M(t){var e,n={};for(e in t)n[e]=t[e];return n}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=l;var U,z,V=R(I,"Opera"),H=R(I,"Trident")||R(I,"MSIE"),G=R(I,"Edge"),q=G||H,W=R(I,"Gecko")&&!(R(I.toLowerCase(),"webkit")&&!R(I,"Edge"))&&!(R(I,"Trident")||R(I,"MSIE"))&&!R(I,"Edge"),K=R(I.toLowerCase(),"webkit")&&!R(I,"Edge");function Y(){var t=a.document;return t?t.documentMode:void 0}t:{var J="",Q=(z=I,W?/rv:([^\);]+)(\)|;)/.exec(z):G?/Edge\/([\d\.]+)/.exec(z):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(z):K?/WebKit\/(\S+)/.exec(z):V?/(?:Version)[ \/]?(\S+)/.exec(z):void 0);if(Q&&(J=Q?Q[1]:""),H){var X=Y();if(null!=X&&X>parseFloat(J)){U=String(X);break t}}U=J}var Z,$={};function tt(t){return function(t,e){var n=$;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=N(String(U)).split("."),r=N(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=B(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||B(0==a[2].length,0==s[2].length)||B(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var et=a.document;Z=et&&H?Y()||("CSS1Compat"==et.compatMode?parseInt(U,10):5):void 0;var nt=!H||9<=Number(Z),rt=H&&!tt("9"),it=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function ot(t,e){this.type=t,this.a=this.target=e,this.Ja=!0}function at(t,e){if(ot.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(W){t:{try{F(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=s(t.pointerType)?t.pointerType:st[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}ot.prototype.b=function(){this.Ja=!1},T(at,ot);var st={2:"touch",3:"pen",4:"mouse"};at.prototype.b=function(){at.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,rt)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}};var ct="closure_listenable_"+(1e6*Math.random()|0),ut=0;function lt(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++ut,this.X=this.Z=!1}function ht(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function pt(t){this.src=t,this.a={},this.b=0}function ft(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=k(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}pt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=dt(t,e,r,i);return-1<a?(e=t[a],n||(e.Z=!1)):((e=new lt(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var yt="closure_lm_"+(1e6*Math.random()|0),mt={};function gt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(p(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=wt(r),e&&e[ct]?e.Ba(n,r,d(i)?!!i.capture:!!i,o):vt(e,n,r,!0,i,o)}(t,e,n,r,i);if(p(e)){for(var o=0;o<e.length;o++)gt(t,e[o],n,r,i);return null}return n=wt(n),t&&t[ct]?t.Aa(e,n,d(r)?!!r.capture:!!r,i):vt(t,e,n,!1,r,i)}function vt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=d(i)?!!i.capture:!!i;if(a&&!nt)return null;var s=St(t);if(s||(t[yt]=s=new pt(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=Tt,e=nt?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)it||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_t(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function bt(t){if(!c(t)&&t&&!t.X){var e=t.src;if(e&&e[ct])ft(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_t(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=St(e))?(ft(n,t),0==n.b&&(n.src=null,e[yt]=null)):ht(t)}}}function _t(t){return t in mt?mt[t]:mt[t]="on"+t}function Et(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&bt(t),n.call(r,e)}function Tt(t,e){return!!t.X||Et(t,nt?new at(e,this):e=new at(e||u("window.event"),this))}function St(t){return(t=t[yt])instanceof pt?t:null}var kt="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(t){return"function"==h(t)?t:(t[kt]||(t[kt]=function(e){return t.handleEvent(e)}),t[kt])}function At(){S.call(this),this.c=new pt(this),this.J=this,this.B=null}function Ot(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.X&&a.capture==n){var s=a.listener,c=a.da||a.src;a.Z&&ft(t.c,a),i=!1!==s.call(c,r)&&i}}return i&&0!=r.Ja}T(At,S),At.prototype[ct]=!0,(r=At.prototype).addEventListener=function(t,e,n,r){gt(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(p(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=d(i)?!!i.capture:!!i,r=wt(r),e&&e[ct]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=dt(a=e.a[n],r,i,o))&&(ht(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.a[n],e.b--))):e&&(e=St(e))&&(n=e.a[n.toString()],e=-1,n&&(e=dt(n,r,i,o)),(r=-1<e?n[e]:null)&&bt(r))}(this,t,e,n,r)},r.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(s(t))t=new ot(t,n);else if(t instanceof ot)t.target=t.target||n;else{var i=t;j(t=new ot(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.a=e[o];i=Ot(a,r,!0,t)&&i}if(i=Ot(a=t.a=n,r,!0,t)&&i,i=Ot(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Ot(a=t.a=e[o],r,!1,t)&&i;return i},r.G=function(){if(At.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ht(n[r]);delete e.a[t],e.b--}}this.B=null},r.Aa=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},r.Ba=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ct=a.JSON.stringify;function It(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Nt(){this.b=this.a=null}It.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Rt,Bt=new It((function(){return new Pt}),(function(t){t.reset()}));function Dt(){var t=jt,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function Pt(){this.next=this.b=this.a=null}function xt(t){a.setTimeout((function(){throw t}),0)}function Mt(t,e){Rt||function(){var t=a.Promise.resolve(void 0);Rt=function(){t.then(Ft)}}(),Lt||(Rt(),Lt=!0),jt.add(t,e)}Nt.prototype.add=function(t,e){var n=Bt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Pt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},Pt.prototype.reset=function(){this.next=this.b=this.a=null};var Lt=!1,jt=new Nt;function Ft(){for(var t;t=Dt();){try{t.a.call(t.b)}catch(t){xt(t)}var e=Bt;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}Lt=!1}function Ut(t,e){At.call(this),this.b=t||1,this.a=e||a,this.f=b(this.gb,this),this.g=E()}function zt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Vt(t,e,n){if("function"==h(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Ht(t,e,n){S.call(this),this.f=null!=n?b(t,n):t,this.c=e,this.b=b(this.ab,this),this.a=[]}function Gt(t){t.U=Vt(t.b,t.c),t.f.apply(null,t.a)}function qt(t){S.call(this),this.b=t,this.a={}}T(Ut,At),(r=Ut.prototype).ba=!1,r.L=null,r.gb=function(){if(this.ba){var t=E()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(zt(this),this.start()))}},r.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=E())},r.G=function(){Ut.N.G.call(this),zt(this),delete this.a},T(Ht,S),(r=Ht.prototype).ea=!1,r.U=null,r.Ua=function(t){this.a=arguments,this.U?this.ea=!0:Gt(this)},r.G=function(){Ht.N.G.call(this),this.U&&(a.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},r.ab=function(){this.U=null,this.ea&&(this.ea=!1,Gt(this))},T(qt,S);var Wt=[];function Kt(t,e,n,r){p(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=gt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Yt(t){x(t.a,(function(t,e){this.a.hasOwnProperty(e)&&bt(t)}),t),t.a={}}function Jt(){}qt.prototype.G=function(){qt.N.G.call(this),Yt(this)},qt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qt=new At;function Xt(t){ot.call(this,"serverreachability",t)}function Zt(t){Qt.dispatchEvent(new Xt(Qt,t))}function $t(t){ot.call(this,"statevent",t)}function te(t){Qt.dispatchEvent(new $t(Qt,t))}function ee(t){ot.call(this,"timingevent",t)}function ne(t,e){if("function"!=h(t))throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){t()}),e)}T(Xt,ot),T($t,ot),T(ee,ot);var re={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,Ma:7,TIMEOUT:8,sb:9},ie={jb:"complete",wb:"success",Na:"error",Ma:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function oe(){}function ae(t){var e;return(e=t.a)||(e=t.a={}),e}function se(){}oe.prototype.a=null;var ce,ue={OPEN:"a",ib:"b",Na:"c",rb:"d"};function le(){ot.call(this,"d")}function he(){ot.call(this,"c")}function pe(){}function fe(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new qt(this),this.O=de,t=q?125:void 0,this.P=new Ut(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}T(le,ot),T(he,ot),T(pe,oe),ce=new pe;var de=45e3,ye={},me={};function ge(t,e,n){t.F=1,t.f=Ve(xe(e)),t.l=n,t.H=!0,be(t,null)}function ve(t,e,n,r){t.F=1,t.f=Ve(xe(e)),t.l=null,t.H=n,be(t,r)}function be(t,e){t.v=E(),Te(t),t.D=xe(t.f),ze(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new Ht(b(t.Ka,t,t.a),t.J)),Kt(t.I,t.a,"readystatechange",t.eb),e=t.h?M(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Zt(1)}function _e(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=Ee(t,n);if(i==me){4==e&&(t.c=4,te(14),r=!1);break}if(i==ye){t.c=4,te(15),r=!1;break}Oe(t,i)}4==e&&0==n.length&&(t.c=1,te(16),r=!1),t.b=t.b&&r,r||(Ae(t),we(t))}function Ee(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?me:(n=Number(e.substring(n,r)),isNaN(n)?ye:(r+=1)+n>e.length?me:(e=e.substr(r,n),t.A=r+n,e))}function Te(t){t.R=E()+t.O,Se(t,t.O)}function Se(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=ne(b(t.bb,t),e)}function ke(t){t.i&&(a.clearTimeout(t.i),t.i=null)}function we(t){t.g.Da()||t.m||t.g.na(t)}function Ae(t){ke(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,zt(t.P),Yt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Oe(t,e){try{t.g.Ga(t,e),Zt(4)}catch(t){}}function Ce(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||s(t))w(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(f(t)||s(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(s(t))return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ie(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ie)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ne(t,e){Be(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Re(t))}function Re(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Be(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Be(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Be(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(r=fe.prototype).setTimeout=function(t){this.O=t},r.eb=function(t){t=t.target;var e=this.B;e&&3==xn(t)?e.Ua():this.Ka(t)},r.Ka=function(t){try{if(t==this.a)t:{var e=xn(this.a),n=this.a.ya(),r=this.a.T();if(!(3>e||3==e&&!q&&!this.a.aa())){this.m||4!=e||7==n||Zt(8==n||0>=r?3:2),ke(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var a=Mn(this.a,"X-HTTP-Initial-Response");if(a&&!C(a)){var s=a;break e}}s=null}if(!s){this.b=!1,this.c=3,te(12),Ae(this),we(this);break t}this.s=!0,Oe(this,s)}this.H?(_e(this,e,o),q&&this.b&&3==e&&(Kt(this.I,this.P,"tick",this.cb),this.P.start())):Oe(this,o),4==e&&Ae(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,Te(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,te(12)):(this.c=0,te(13)),Ae(this),we(this)}}}catch(t){}},r.cb=function(){if(this.a){var t=xn(this.a),e=this.a.aa();this.A<e.length&&(ke(this),_e(this,t,e),this.b&&4!=t&&Te(this))}},r.cancel=function(){this.m=!0,Ae(this)},r.bb=function(){this.i=null;var t=E();0<=t-this.R?(2!=this.F&&(Zt(3),te(17)),Ae(this),this.c=2,we(this)):Se(this,this.R-t)},(r=Ie.prototype).C=function(){Re(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},r.K=function(){return Re(this),this.a.concat()},r.get=function(t,e){return Be(this.b,t)?this.b[t]:e},r.set=function(t,e){Be(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},r.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var De=/^(?:([^:\/?#.]+):)?(?:\/\/(?:([^\/?#]*)@)?([^\/#?]*?)(?::([0-9]+))?(?=[\/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pe(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof Pe?(this.h=void 0!==e?e:t.h,Me(this,t.f),this.j=t.j,Le(this,t.b),je(this,t.i),this.a=t.a,Fe(this,nn(t.c)),this.g=t.g):t&&(n=String(t).match(De))?(this.h=!!e,Me(this,n[1]||"",!0),this.j=He(n[2]||""),Le(this,n[3]||"",!0),je(this,n[4]),this.a=He(n[5]||"",!0),Fe(this,n[6]||"",!0),this.g=He(n[7]||"")):(this.h=!!e,this.c=new Xe(null,this.h))}function xe(t){return new Pe(t)}function Me(t,e,n){t.f=n?He(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Le(t,e,n){t.b=n?He(e,!0):e}function je(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Fe(t,e,n){e instanceof Xe?(t.c=e,function(t,e){e&&!t.f&&(Ze(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($e(this,e),en(this,n,t))}),t)),t.f=e}(t.c,t.h)):(n||(e=Ge(e,Je)),t.c=new Xe(e,t.h))}function Ue(t,e,n){t.c.set(e,n)}function ze(t,e,n){p(n)||(n=[String(n)]),en(t.c,e,n)}function Ve(t){return Ue(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^E()).toString(36)),t}function He(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ge(t,e,n){return s(t)?(t=encodeURI(t).replace(e,qe),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function qe(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pe.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ge(e,We,!0),":");var n=this.b;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Ge(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ge(n,"/"==n.charAt(0)?Ye:Ke,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ge(n,Qe)),t.join("")},Pe.prototype.resolve=function(t){var e=xe(this),n=!!t.f;n?Me(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Le(e,t.b):n=null!=t.i;var r=t.a;if(n)je(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(R(i,"./")||R(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Fe(e,nn(t.c)):n=!!t.g,n&&(e.g=t.g),e};var We=/[#\/\?@]/g,Ke=/[#\?:]/g,Ye=/[#\?]/g,Je=/[#\?@]/g,Qe=/#/g;function Xe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ze(t){t.a||(t.a=new Ie,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function $e(t,e){Ze(t),e=rn(t,e),Be(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ne(t.a,e))}function tn(t,e){return Ze(t),e=rn(t,e),Be(t.a.b,e)}function en(t,e,n){$e(t,e),0<n.length&&(t.c=null,t.a.set(rn(t,e),O(n)),t.b+=n.length)}function nn(t){var e=new Xe;return e.c=t.c,t.a&&(e.a=new Ie(t.a),e.b=t.b),e}function rn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function on(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function an(t){var e=t.a.F.a;if(null!=e)te(4),e?(te(10),Yn(t.a,t,!1)):(te(11),Yn(t.a,t,!0));else{t.b=new fe(t,void 0,void 0),t.b.h=t.h,e=$n(e=t.a,e.Y()?t.f:null,t.i),te(4),ze(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Ue(e,n,r),ve(t.b,e,!1,t.f)}}function sn(){this.a=this.b=null}function cn(){this.a=new Ie}function un(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[y]||(t[y]=++m)):e.charAt(0)+t}function ln(t,e){this.b=t,this.a=e}function hn(t){this.g=t||pn,t=a.PerformanceNavigationTiming?0<(t=a.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(a.ka&&a.ka.Ea&&a.ka.Ea()&&a.ka.Ea().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new cn),this.b=null,this.c=[]}(r=Xe.prototype).add=function(t,e){Ze(this),this.c=null,t=rn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},r.forEach=function(t,e){Ze(this),this.a.forEach((function(n,r){w(n,(function(n){t.call(e,n,r,this)}),this)}),this)},r.K=function(){Ze(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},r.C=function(t){Ze(this);var e=[];if(s(t))tn(this,t)&&(e=A(e,this.a.get(rn(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=A(e,t[n])}return e},r.set=function(t,e){return Ze(this),this.c=null,tn(this,t=rn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},r.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},r.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")},T((function(){}),(function(){})),(r=on.prototype).M=null,r.$=function(t){return this.a.$(t)},r.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},r.Da=function(){return!1},r.Ga=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Mn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Mn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void Xn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Xn(e,2)}else 1==this.M&&(this.g?te(6):"11111"==e?(te(5),this.g=!0,(!H||10<=Number(Z))&&(this.c=200,this.b.cancel(),te(11),Yn(this.a,this,!0))):(te(7),this.g=!1))},r.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,an(this)):1==this.M&&(this.g?(te(11),Yn(this.a,this,!0)):(te(10),Yn(this.a,this,!1)));else{0==this.M?te(8):1==this.M&&te(9);var t=this.a;t.m=this.c,Xn(t,2)}},r.Y=function(){return this.a.Y()},r.ma=function(){return this.a.ma()},cn.prototype.add=function(t){this.a.set(un(t),t)},cn.prototype.C=function(){return this.a.C()};var pn=10;function fn(t,e){!t.a&&(R(e,"spdy")||R(e,"quic")||R(e,"h2"))&&(t.f=t.g,t.a=new cn,t.b&&(gn(t,t.b),t.b=null))}function dn(t){return!!t.b||!!t.a&&t.a.a.c>=t.f}function yn(t){return t.b?1:t.a?t.a.a.c:0}function mn(t,e){return t.b?t=t.b==e:t.a?(e=un(e),t=Be(t.a.a.b,e)):t=!1,t}function gn(t,e){t.a?t.a.add(e):t.b=e}function vn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=un(e),n=Be(t.a.a.b,n)),n&&Ne(t.a.a,un(e)))}function bn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null!=t.a&&0!=t.a.a.c){var e=t.c;return w(t.a.C(),(function(t){e=e.concat(t.j)})),e}return O(t.c)}function _n(){}function En(){this.a=new _n}function Tn(t,e,n){var r=n||"";try{Ce(t,(function(t,n){var i=t;d(t)&&(i=Ct(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Sn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}hn.prototype.cancel=function(){this.c=bn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(w(this.a.C(),(function(t){t.cancel()})),function(t){t.b={},t.a.length=0,t.c=0}(this.a.a))},_n.prototype.stringify=function(t){return a.JSON.stringify(t,void 0)},_n.prototype.parse=function(t){return a.JSON.parse(t,void 0)};var kn=a.JSON.parse;function wn(t){At.call(this),this.headers=new Ie,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=An,this.D=this.F=!1}T(wn,At);var An="",On=/^https?$/i,Cn=["POST","PUT"];function In(t){return"content-type"==t.toLowerCase()}function Nn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Rn(t),Dn(t)}function Rn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Bn(t){if(t.b&&void 0!==o&&(!t.s[1]||4!=xn(t)||2!=t.T()))if(t.l&&4==xn(t))Vt(t.Fa,0,t);else if(t.dispatchEvent("readystatechange"),4==xn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.A).match(De)[1]||null;if(!s&&a.self&&a.self.location){var c=a.self.location.protocol;s=c.substr(0,c.length-1)}i=!On.test(s?s.toLowerCase():"")}e=i}e?(t.dispatchEvent("complete"),t.dispatchEvent("success")):(t.h=6,t.f=t.za()+" ["+t.T()+"]",Rn(t))}finally{Dn(t)}}}function Dn(t,e){if(t.a){Pn(t);var n=t.a,r=t.s[0]?l:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function Pn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(a.clearTimeout(t.m),t.m=null)}function xn(t){return t.a?t.a.readyState:0}function Mn(t,e){return t.a?t.a.getResponseHeader(e):null}function Ln(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;if(n=function(t){var e="";return x(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),s(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if(0>(n=t.indexOf("#"))&&(n=t.length),0>(r=t.indexOf("?"))||r>n){r=n;var i=""}else i=t.substring(r+1,n);n=(t=[t.substr(0,r),i,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Ue(t,e,n),t}function jn(t){this.f=[],this.F=new sn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Ra=this.P=0,this.Pa=!!u("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Oa=u("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Sa=u("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Qa=u("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=u("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.La=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new hn(t&&t.concurrentRequestLimit),this.ja=new En,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Fn(t){if(Un(t),3==t.u){var e=t.P++,n=xe(t.B);Ue(n,"SID",t.H),Ue(n,"RID",e),Ue(n,"TYPE","terminate"),Gn(t,n),(e=new fe(t,e,void 0)).F=2,e.f=Ve(xe(n)),n=!1,a.navigator&&a.navigator.sendBeacon&&(n=a.navigator.sendBeacon(e.f.toString(),"")),!n&&a.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=E(),Te(e)}Zn(t)}function Un(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(a.clearTimeout(t.l),t.l=null),Jn(t),t.b.cancel(),t.h&&(c(t.h)&&a.clearTimeout(t.h),t.h=null)}function zn(t,e){t.f.push(new ln(t.Ra++,e)),3==t.u&&Vn(t)}function Vn(t){dn(t.b)||t.h||(t.h=!0,Mt(t.Ia,t),t.A=0)}function Hn(t,e){var n;n=e?e.W:t.P++;var r=xe(t.B);Ue(r,"SID",t.H),Ue(r,"RID",n),Ue(r,"AID",t.O),Gn(t,r),t.g&&t.i&&Ln(r,t.g,t.i),n=new fe(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=qn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),gn(t.b,n),ge(n,r,e)}function Gn(t,e){t.c&&Ce({},(function(t,n){Ue(e,n,t)}))}function qn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?b(t.c.Ta,t.c,t):null;t:for(var i=t.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,c=0;c<n;c++){var u=i[c].b,l=i[c].a;if(0>(u-=o))o=Math.max(0,i[c].b-100),s=!1;else try{Tn(l,a,"req"+u+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Wn(t){t.a||t.l||(t.S=1,Mt(t.Ha,t),t.v=0)}function Kn(t){return!(t.a||t.l||3<=t.v||(t.S++,t.l=ne(b(t.Ha,t),Qn(t,t.v)),t.v++,0))}function Yn(t,e,n){var r=e.l;r&&fn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=$n(t,null,t.ha),Vn(t)}function Jn(t){null!=t.s&&(a.clearTimeout(t.s),t.s=null)}function Qn(t,e){var n=t.Oa+Math.floor(Math.random()*t.Sa);return t.ma()||(n*=2),n*e}function Xn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=b(t.fb,t);n||(n=new Pe("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||Me(n,"https"),Ve(n)),function(t,e){var n=new Jt;if(a.Image){var r=new Image;r.onload=_(Sn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(Sn,n,r,"TestLoadImage: error",!1,e),r.onabort=_(Sn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(Sn,n,r,"TestLoadImage: timeout",!1,e),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else te(2);t.u=0,t.c&&t.c.ta(e),Zn(t),Un(t)}function Zn(t){t.u=0,t.m=-1,t.c&&(0==bn(t.b).length&&0==t.f.length||(t.b.c.length=0,O(t.f),t.f.length=0),t.c.sa())}function $n(t,e,n){var r=function(t){return t instanceof Pe?xe(t):new Pe(t,void 0)}(n);if(""!=r.b)e&&Le(r,e+"."+r.b),je(r,r.i);else{var i,o=a.location;i=e?e+"."+o.hostname:o.hostname,r=function(t,e,n,r){var i=new Pe(null,void 0);return t&&Me(i,t),e&&Le(i,e),n&&je(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return t.V&&x(t.V,(function(t,e){Ue(r,e,t)})),e=t.j,n=t.I,e&&n&&Ue(r,e,n),Ue(r,"VER",t.wa),Gn(t,r),r}function tr(){}function er(){if(H&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function nr(t,e){At.call(this),this.a=new jn(e),this.g=t,this.m=e&&e.testUrl?e.testUrl:function(t){for(var e=arguments[0],n=1;n<arguments.length;n++){var r,i=arguments[n];0==i.lastIndexOf("/",0)?e=i:((r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i)}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!C(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new or(this)}function rr(t){le.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function ir(){he.call(this),this.status=1}function or(t){this.a=t}(r=wn.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?ae(this.H):ae(ce),this.a.onreadystatechange=b(this.Fa,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void Nn(this,t)}t=n||"";var i=new Ie(this.headers);r&&Ce(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=In,n=t.length,r=s(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:s(t)?t.charAt(e):t[e]}(i.K()),n=a.FormData&&t instanceof a.FormData,!(0<=k(Cn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.a.setRequestHeader(e,t)}),this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Pn(this),0<this.o&&((this.D=function(t){return H&&tt(9)&&c(t.timeout)&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=b(this.Ca,this)):this.m=Vt(this.Ca,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Nn(this,t)}},r.Ca=function(){void 0!==o&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},r.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dn(this))},r.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dn(this,!0)),wn.N.G.call(this)},r.Fa=function(){this.j||(this.w||this.l||this.g?Bn(this):this.$a())},r.$a=function(){Bn(this)},r.T=function(){try{return 2<xn(this)?this.a.status:-1}catch(t){return-1}},r.za=function(){try{return 2<xn(this)?this.a.statusText:""}catch(t){return""}},r.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},r.Va=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),kn(e)}},r.ya=function(){return this.h},r.Ya=function(){return s(this.f)?this.f:String(this.f)},(r=jn.prototype).wa=8,r.u=1,r.Da=function(){return 0==this.u},r.Ia=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random());var e,n=new fe(this,t=this.P++,void 0),r=this.i;if(this.J&&(r?j(r=M(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if(void 0===(o="__data__"in o.a&&s(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=qn(this,n,e),Ue(i=xe(this.B),"RID",t),Ue(i,"CVER",22),this.o&&this.j&&Ue(i,"X-HTTP-Session-Id",this.j),Gn(this,i),this.g&&r&&Ln(i,this.g,r),gn(this.b,n),this.W?(Ue(i,"$req",e),Ue(i,"SID","null"),n.S=!0,ge(n,i,null)):ge(n,i,e),this.u=2}}else 3==this.u&&(t?Hn(this,t):0==this.f.length||dn(this.b)||Hn(this))},r.Ha=function(){this.l=null,this.a=new fe(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=xe(this.pa);Ue(t,"RID","rpc"),Ue(t,"SID",this.H),Ue(t,"CI",this.ia?"0":"1"),Ue(t,"AID",this.O),Gn(this,t),Ue(t,"TYPE","xmlhttp"),this.g&&this.i&&Ln(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ve(this.a,t,!0,this.ga)},r.Ga=function(t,e){if(0!=this.u&&(this.a==t||mn(this.b,t)))if(this.m=t.o,!t.s&&mn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(p(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;Jn(this),this.a.cancel(),this.a=null}Kn(this),te(18)}}else this.ra=e[1],0<this.ra-this.O&&37500>e[2]&&this.ia&&0==this.v&&!this.s&&(this.s=ne(b(this.Za,this),6e3));if(1>=yn(this.b)&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else Xn(this,11)}else if((t.s||this.a==t)&&Jn(this),!C(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&c(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Mn(r,"X-Client-Wire-Protocol"))&&fn(this.b,i),this.j&&(r=Mn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ue(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=$n(this,this.Y()?this.ga:null,this.ha),r.s?(vn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(ke(r),Te(r)),this.a=r):Wn(this),0<this.f.length&&Vn(this)}else"stop"!=r[0]&&"close"!=r[0]||Xn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Xn(this,7):Fn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},r.Za=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Kn(this),te(19))},r.na=function(t){var e=null;if(this.a==t){Jn(this),this.a=null;var n=2}else{if(!mn(this.b,t))return;e=t.j,vn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=E()-t.v,Qt.dispatchEvent(new ee(Qt,t.l?t.l.length:0,e,this.A)),Vn(this)):Wn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){return!(yn(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.f=e.j.concat(t.f),0):1==t.u||2==t.u||t.A>=(t.Pa?0:t.Qa)||(t.h=ne(b(t.Ia,t,e),Qn(t,t.A)),t.A++,0)))}(this,t)||2==n&&Kn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Xn(this,5);break;case 4:Xn(this,10);break;case 3:Xn(this,6);break;default:Xn(this,2)}}},r.fb=function(t){te(t?2:1)},r.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new wn(this.La)).F=this.R,t},r.ma=function(){return!!this.c&&!0},r.Y=function(){return this.R},(r=tr.prototype).va=function(){},r.ua=function(){},r.ta=function(){},r.sa=function(){},r.Ta=function(){},er.prototype.a=function(t,e){return new nr(t,e)},T(nr,At),(r=nr.prototype).addEventListener=function(t,e,n,r){nr.N.addEventListener.call(this,t,e,n,r)},r.removeEventListener=function(t,e,n,r){nr.N.removeEventListener.call(this,t,e,n,r)},r.Wa=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;te(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new on(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Ln(e,t.g,t.i)),(t=t.w).i=n,e=$n(t.a,null,t.i),te(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,an(t)):(ze(e,"MODE","init"),!t.a.o&&t.a.j&&ze(e,"X-HTTP-Session-Id",t.a.j),t.b=new fe(t,void 0,void 0),t.b.h=t.h,ve(t.b,e,!1,null),t.M=0)},r.close=function(){Fn(this.a)},r.Xa=function(t){if(s(t)){var e={};e.__data__=t,zn(this.a,e)}else this.h?((e={}).__data__=Ct(t),zn(this.a,e)):zn(this.a,t)},r.G=function(){this.a.c=null,delete this.f,Fn(this.a),delete this.a,nr.N.G.call(this)},T(rr,le),T(ir,he),T(or,tr),or.prototype.va=function(){this.a.dispatchEvent("a")},or.prototype.ua=function(t){this.a.dispatchEvent(new rr(t))},or.prototype.ta=function(t){this.a.dispatchEvent(new ir(t))},or.prototype.sa=function(){this.a.dispatchEvent("b")};var ar=_((function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r}),er);er.prototype.createWebChannel=er.prototype.a,nr.prototype.send=nr.prototype.Xa,nr.prototype.open=nr.prototype.Wa,nr.prototype.close=nr.prototype.close,re.NO_ERROR=0,re.TIMEOUT=8,re.HTTP_ERROR=6,ie.COMPLETE="complete",se.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",At.prototype.listen=At.prototype.Aa,wn.prototype.listenOnce=wn.prototype.Ba,wn.prototype.getLastError=wn.prototype.Ya,wn.prototype.getLastErrorCode=wn.prototype.ya,wn.prototype.getStatus=wn.prototype.T,wn.prototype.getStatusText=wn.prototype.za,wn.prototype.getResponseJson=wn.prototype.Va,wn.prototype.getResponseText=wn.prototype.aa,wn.prototype.send=wn.prototype.ca;var sr={createWebChannelTransport:ar,ErrorCode:re,EventType:ie,WebChannel:se,XhrIo:wn},cr=sr.createWebChannelTransport,ur=sr.ErrorCode,lr=sr.EventType,hr=sr.WebChannel,pr=sr.XhrIo;e.default=sr}.call(this,n(30))},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(2),i=n(1),o=n.n(i),a=n(50),s=n.n(a);
/** @license mobx-react v5.4.4
 * index.module.js
 *
 * Copyright (c) 2015 Michel Weststrate.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function c(t){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function h(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function p(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function d(t){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function m(t,e){return t(e={exports:{}},e.exports),e.exports}var g,v=m((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,c=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,p=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,d=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116;function m(t){if("object"==typeof t&&null!==t){var e=t.$$typeof;switch(e){case r:switch(t=t.type){case l:case h:case o:case s:case a:return t;default:switch(t=t&&t.$$typeof){case u:case p:case c:return t;default:return e}}case i:return e}}}function g(t){return m(t)===h}e.typeOf=m,e.AsyncMode=l,e.ConcurrentMode=h,e.ContextConsumer=u,e.ContextProvider=c,e.Element=r,e.ForwardRef=p,e.Fragment=o,e.Profiler=s,e.Portal=i,e.StrictMode=a,e.isValidElementType=function(t){return"string"==typeof t||"function"==typeof t||t===o||t===h||t===s||t===a||t===f||"object"==typeof t&&null!==t&&(t.$$typeof===y||t.$$typeof===d||t.$$typeof===c||t.$$typeof===u||t.$$typeof===p)},e.isAsyncMode=function(t){return g(t)||m(t)===l},e.isConcurrentMode=g,e.isContextConsumer=function(t){return m(t)===u},e.isContextProvider=function(t){return m(t)===c},e.isElement=function(t){return"object"==typeof t&&null!==t&&t.$$typeof===r},e.isForwardRef=function(t){return m(t)===p},e.isFragment=function(t){return m(t)===o},e.isProfiler=function(t){return m(t)===s},e.isPortal=function(t){return m(t)===i},e.isStrictMode=function(t){return m(t)===a}}));(g=v)&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")&&g.default,v.typeOf,v.AsyncMode,v.ConcurrentMode,v.ContextConsumer,v.ContextProvider,v.Element,v.ForwardRef,v.Fragment,v.Profiler,v.Portal,v.StrictMode,v.isValidElementType,v.isAsyncMode,v.isConcurrentMode,v.isContextConsumer,v.isContextProvider,v.isElement,v.isForwardRef,v.isFragment,v.isProfiler,v.isPortal,v.isStrictMode;var b=m((function(t){t.exports=v})),_={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},E={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},T={};T[b.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var S=Object.defineProperty,k=Object.getOwnPropertyNames,w=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,O=Object.getPrototypeOf,C=Object.prototype,I=function t(e,n,r){if("string"!=typeof n){if(C){var i=O(n);i&&i!==C&&t(e,i,r)}var o=k(n);w&&(o=o.concat(w(n)));for(var a=T[e.$$typeof]||_,s=T[n.$$typeof]||_,c=0;c<o.length;++c){var u=o[c];if(!(E[u]||r&&r[u]||s&&s[u]||a&&a[u])){var l=A(n,u);try{S(e,u,l)}catch(t){}}}return e}return e},N=function(){function t(){u(this,t),this.listeners=[]}return h(t,[{key:"on",value:function(t){var e=this;return this.listeners.push(t),function(){var n=e.listeners.indexOf(t);-1!==n&&e.listeners.splice(n,1)}}},{key:"emit",value:function(t){this.listeners.forEach((function(e){return e(t)}))}}]),t}();function R(t){function e(e,n,i,o,a,s){for(var c=arguments.length,u=new Array(c>6?c-6:0),l=6;l<c;l++)u[l-6]=arguments[l];return Object(r.p)((function(){if(o=o||"<<anonymous>>",s=s||i,null==n[i]){if(e){var r=null===n[i]?"null":"undefined";return new Error("The "+a+" `"+s+"` is marked as required in `"+o+"`, but its value is `"+r+"`.")}return null}return t.apply(void 0,[n,i,o,a,s].concat(u))}))}var n=e.bind(null,!1);return n.isRequired=e.bind(null,!0),n}function B(t){var e=c(t);return Array.isArray(t)?"array":t instanceof RegExp?"object":function(t,e){return"symbol"===t||"Symbol"===e["@@toStringTag"]||"function"==typeof Symbol&&e instanceof Symbol}(e,t)?"symbol":e}function D(t,e){return R((function(n,i,o,a,s){return Object(r.p)((function(){if(t&&B(n[i])===e.toLowerCase())return null;var a;switch(e){case"Array":a=r.i;break;case"Object":a=r.k;break;case"Map":a=r.j;break;default:throw new Error("Unexpected mobxType: ".concat(e))}var c=n[i];if(!a(c)){var u=function(t){var e=B(t);if("object"===e){if(t instanceof Date)return"date";if(t instanceof RegExp)return"regexp"}return e}(c),l=t?" or javascript `"+e.toLowerCase()+"`":"";return new Error("Invalid prop `"+s+"` of type `"+u+"` supplied to `"+o+"`, expected `mobx.Observable"+e+"`"+l+".")}return null}))}))}function P(t,e){return R((function(n,i,o,a,s){for(var c=arguments.length,u=new Array(c>5?c-5:0),l=5;l<c;l++)u[l-5]=arguments[l];return Object(r.p)((function(){if("function"!=typeof e)return new Error("Property `"+s+"` of component `"+o+"` has invalid PropType notation.");var r=D(t,"Array")(n,i,o);if(r instanceof Error)return r;for(var c=n[i],l=0;l<c.length;l++)if((r=e.apply(void 0,[c,l,o,a,s+"["+l+"]"].concat(u)))instanceof Error)return r;return null}))}))}D(!1,"Array"),P.bind(null,!1),D(!1,"Map"),D(!1,"Object"),D(!0,"Array"),P.bind(null,!0);var x=D(!0,"Object"),M=0,L={};function j(t){return L[t]||(L[t]=function(t){if("function"==typeof Symbol)return Symbol(t);var e="__$mobx-react ".concat(t," (").concat(M,")");return M++,e}(t)),L[t]}var F=j("patchMixins"),U=j("patchedDefinition");function z(t,e){for(var n=this,r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];e.locks++;try{var a;return null!=t&&(a=t.apply(this,i)),a}finally{e.locks--,0===e.locks&&e.methods.forEach((function(t){t.apply(n,i)}))}}function V(t,e){return function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];z.call.apply(z,[this,t,e].concat(r))}}function H(t,e){for(var n=function(t,e){var n=t[F]=t[F]||{},r=n[e]=n[e]||{};return r.locks=r.locks||0,r.methods=r.methods||[],r}(t,e),r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];for(var a=0;a<i.length;a++){var s=i[a];n.methods.indexOf(s)<0&&n.methods.push(s)}var c=Object.getOwnPropertyDescriptor(t,e);if(!c||!c[U]){var u=t[e],l=function t(e,n,r,i,o){var a,s=V(o,i);return p(a={},U,!0),p(a,"get",(function(){return s})),p(a,"set",(function(o){if(this===e)s=V(o,i);else{var a=t(this,n,r,i,o);Object.defineProperty(this,n,a)}})),p(a,"configurable",!0),p(a,"enumerable",r),a}(t,e,c?c.enumerable:void 0,n,u);Object.defineProperty(t,e,l)}}var G={mobxStores:x};Object.seal(G);var q={contextTypes:{get:function(){return G},set:function(t){console.warn("Mobx Injector: you are trying to attach `contextTypes` on an component decorated with `inject` (or `observer`) HOC. Please specify the contextTypes on the wrapped component instead. It is accessible through the `wrappedComponent`")},configurable:!0,enumerable:!1},isMobxInjector:{value:!0,writable:!0,configurable:!0,enumerable:!0}};function W(t,e,n){var r="inject-"+(e.displayName||e.name||e.constructor&&e.constructor.name||"Unknown");n&&(r+="-with-"+n);var o=function(n){function r(){var t,e;u(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=y(this,(t=d(r)).call.apply(t,[this].concat(i)))).storeRef=function(t){e.wrappedInstance=t},e}return f(r,n),h(r,[{key:"render",value:function(){var n={};for(var r in this.props)this.props.hasOwnProperty(r)&&(n[r]=this.props[r]);var o=t(this.context.mobxStores||{},n,this.context)||{};for(var a in o)n[a]=o[a];return function(t){return!(t.prototype&&t.prototype.render)}(e)||(n.ref=this.storeRef),Object(i.createElement)(e,n)}}]),r}(i.Component);return o.displayName=r,I(o,e),o.wrappedComponent=e,Object.defineProperties(o,q),o}function K(){var t;if("function"==typeof arguments[0])return t=arguments[0],function(e){var n=W(t,e);return n.isMobxInjector=!1,(n=ft(n)).isMobxInjector=!0,n};for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t=function(t){return function(e,n){return t.forEach((function(t){if(!(t in n)){if(!(t in e))throw new Error("MobX injector: Store '"+t+"' is not available! Make sure it is provided by some Provider");n[t]=e[t]}})),n}}(e),function(n){return W(t,n,e.join("-"))}}var Y=r.a||"$mobx",J=j("isUnmounted"),Q=!1,X=!1,Z=!1,$="undefined"!=typeof WeakMap?new WeakMap:void 0,tt=new N,et=j("skipRender"),nt=j("isForcingUpdate"),rt="function"==typeof i.forwardRef&&Object(i.forwardRef)((function(t,e){})).$$typeof;function it(t,e,n){Object.hasOwnProperty.call(t,e)?t[e]=n:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:n})}function ot(t){if(a.findDOMNode)try{return Object(a.findDOMNode)(t)}catch(t){return null}return null}function at(t){var e=ot(t);e&&$&&$.set(e,t),tt.emit({event:"render",renderTime:t.__$mobRenderEnd-t.__$mobRenderStart,totalTime:Date.now()-t.__$mobRenderStart,component:t,node:e})}var st=new N;function ct(t,e){if(ut(t,e))return!0;if("object"!==c(t)||null===t||"object"!==c(e)||null===e)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!hasOwnProperty.call(e,n[i])||!ut(t[n[i]],e[n[i]]))return!1;return!0}function ut(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}function lt(t){var e=this;if(!0===X)return t.call(this);function n(){var t=this;c=!1;var e=void 0,n=void 0;if(u.track((function(){Q&&(t.__$mobRenderStart=Date.now());try{n=Object(r.c)(!1,s)}catch(t){e=t}Q&&(t.__$mobRenderEnd=Date.now())})),e)throw st.emit(e),e;return n}var o=this.displayName||this.name||this.constructor&&(this.constructor.displayName||this.constructor.name)||"<component>",a=this._reactInternalInstance&&this._reactInternalInstance._rootNodeID||this._reactInternalInstance&&this._reactInternalInstance._debugID||this._reactInternalFiber&&this._reactInternalFiber._debugID;it(this,et,!1),it(this,nt,!1);var s=t.bind(this),c=!1,u=new r.b("".concat(o,"#").concat(a,".render()"),(function(){if(!c&&(c=!0,"function"==typeof e.componentWillReact&&e.componentWillReact(),!0!==e[J])){var t=!0;try{it(e,nt,!0),e[et]||i.Component.prototype.forceUpdate.call(e),t=!1}finally{it(e,nt,!1),t&&u.dispose()}}}));return u.reactComponent=this,n[Y]=u,this.render=n,n.call(this)}var ht={componentWillUnmount:function(){if(!0!==X&&(this.render[Y]&&this.render[Y].dispose(),this[J]=!0,Q)){var t=ot(this);t&&$&&$.delete(t),tt.emit({event:"destroy",component:this,node:t})}},componentDidMount:function(){Q&&at(this)},componentDidUpdate:function(){Q&&at(this)},shouldComponentUpdate:function(t,e){return X&&console.warn("[mobx-react] It seems that a re-rendering of a React component is triggered while in static (server-side) mode. Please make sure components are rendered only once server-side."),this.state!==e||!ct(this.props,t)}};function pt(t,e){var n=j("reactProp_".concat(e,"_valueHolder")),i=j("reactProp_".concat(e,"_atomHolder"));function o(){return this[i]||it(this,i,Object(r.g)("reactive "+e)),this[i]}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return o.call(this).reportObserved(),this[n]},set:function(t){this[nt]||ct(this[n],t)?it(this,n,t):(it(this,n,t),it(this,et,!0),o.call(this).reportChanged(),it(this,et,!1))}})}function ft(t,e){if("string"==typeof t)throw new Error("Store names should be provided as array");if(Array.isArray(t))return Z||(Z=!0,console.warn('Mobx observer: Using observer to inject stores is deprecated since 4.0. Use `@inject("store1", "store2") @observer ComponentClass` or `inject("store1", "store2")(observer(componentClass))` instead of `@observer(["store1", "store2"]) ComponentClass`')),e?K.apply(null,t)(ft(e)):function(e){return ft(t,e)};var n=t;if(!0===n.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),n.__proto__===i.PureComponent&&console.warn("Mobx observer: You are using 'observer' on React.PureComponent. These two achieve two opposite goals and should not be used together"),rt&&n.$$typeof===rt){var r=n.render;if("function"!=typeof r)throw new Error("render property of ForwardRef was not a function");return Object(i.forwardRef)((function(){var t=arguments;return o.a.createElement(dt,null,(function(){return r.apply(void 0,t)}))}))}if(!("function"!=typeof n||n.prototype&&n.prototype.render||n.isReactClass||i.Component.isPrototypeOf(n))){var a,s,c=ft((s=a=function(t){function e(){return u(this,e),y(this,d(e).apply(this,arguments))}return f(e,t),h(e,[{key:"render",value:function(){return n.call(this,this.props,this.context)}}]),e}(i.Component),a.displayName=n.displayName||n.name,a.contextTypes=n.contextTypes,a.propTypes=n.propTypes,a.defaultProps=n.defaultProps,s));return I(c,n),c}if(!n)throw new Error("Please pass a valid component to 'observer'");var l=n.prototype||n;!function(t){["componentDidMount","componentWillUnmount","componentDidUpdate"].forEach((function(e){!function(t,e){H(t,e,ht[e])}(t,e)})),t.shouldComponentUpdate?t.shouldComponentUpdate!==ht.shouldComponentUpdate&&console.warn("Use `shouldComponentUpdate` in an `observer` based component breaks the behavior of `observer` and might lead to unexpected results. Manually implementing `sCU` should not be needed when using mobx-react."):t.shouldComponentUpdate=ht.shouldComponentUpdate}(l),n.isMobXReactObserver=!0,pt(l,"props"),pt(l,"state");var p=l.render;return l.render=function(){return lt.call(this,p)},n}var dt=ft((function(t){var e=t.children,n=t.inject,r=t.render,i=e||r;if(void 0===i)return null;if(!n)return i();console.warn("<Observer inject=.../> is no longer supported. Please use inject on the enclosing component instead");var a=K(n)(i);return o.a.createElement(a,null)}));dt.displayName="Observer";var yt=function(t,e,n,r,i){var o="children"===e?"render":"children";return"function"==typeof t[e]&&"function"==typeof t[o]?new Error("Invalid prop,do not use children and render in the same time in`"+n):"function"!=typeof t[e]&&"function"!=typeof t[o]?new Error("Invalid prop `"+i+"` of type `"+c(t[e])+"` supplied to `"+n+"`, expected `function`."):void 0};function mt(){var t=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=t&&this.setState(t)}function gt(t){this.setState(function(e){var n=this.constructor.getDerivedStateFromProps(t,e);return null!=n?n:null}.bind(this))}function vt(t,e){try{var n=this.props,r=this.state;this.props=t,this.state=e,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}dt.propTypes={render:yt,children:yt},mt.__suppressDeprecationWarning=!0,gt.__suppressDeprecationWarning=!0,vt.__suppressDeprecationWarning=!0;var bt={children:!0,key:!0,ref:!0},_t=function(t){function e(t,n){var r;return u(this,e),(r=y(this,d(e).call(this,t,n))).state={},Et(t,r.state),r}return f(e,t),h(e,[{key:"render",value:function(){return i.Children.only(this.props.children)}},{key:"getChildContext",value:function(){var t={};return Et(this.context.mobxStores,t),Et(this.props,t),{mobxStores:t}}}],[{key:"getDerivedStateFromProps",value:function(t,e){if(!t)return null;if(!e)return t;if(Object.keys(t).filter(Tt).length!==Object.keys(e).filter(Tt).length&&console.warn("MobX Provider: The set of provided stores has changed. Please avoid changing stores as the change might not propagate to all children"),!t.suppressChangedStoreWarning)for(var n in t)Tt(n)&&e[n]!==t[n]&&console.warn("MobX Provider: Provided store '"+n+"' has changed. Please avoid replacing stores as the change might not propagate to all children");return t}}]),e}(i.Component);function Et(t,e){if(t)for(var n in t)Tt(n)&&(e[n]=t[n])}function Tt(t){return!bt[t]&&"suppressChangedStoreWarning"!==t}if(_t.contextTypes={mobxStores:x},_t.childContextTypes={mobxStores:x.isRequired},function(t){var e=t.prototype;if(!e||!e.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof t.getDerivedStateFromProps&&"function"!=typeof e.getSnapshotBeforeUpdate)return t;var n=null,r=null,i=null;if("function"==typeof e.componentWillMount?n="componentWillMount":"function"==typeof e.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof e.componentWillReceiveProps?r="componentWillReceiveProps":"function"==typeof e.UNSAFE_componentWillReceiveProps&&(r="UNSAFE_componentWillReceiveProps"),"function"==typeof e.componentWillUpdate?i="componentWillUpdate":"function"==typeof e.UNSAFE_componentWillUpdate&&(i="UNSAFE_componentWillUpdate"),null!==n||null!==r||null!==i){var o=t.displayName||t.name,a="function"==typeof t.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+o+" uses "+a+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==r?"\n  "+r:"")+(null!==i?"\n  "+i:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof t.getDerivedStateFromProps&&(e.componentWillMount=mt,e.componentWillReceiveProps=gt),"function"==typeof e.getSnapshotBeforeUpdate){if("function"!=typeof e.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.componentWillUpdate=vt;var s=e.componentDidUpdate;e.componentDidUpdate=function(t,e,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;s.call(this,t,e,r)}}}(_t),j("disposeOnUnmount"),!i.Component)throw new Error("mobx-react requires React to be available");if(!r.o)throw new Error("mobx-react requires mobx to be available");if("function"==typeof a.unstable_batchedUpdates&&Object(r.f)({reactionScheduler:a.unstable_batchedUpdates}),"object"===("undefined"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__?"undefined":c(__MOBX_DEVTOOLS_GLOBAL_HOOK__))){var St={spy:r.o,extras:{getDebugName:r.h}},kt={renderReporter:tt,componentByNodeRegistry:$,componentByNodeRegistery:$,trackComponents:function(){if("undefined"==typeof WeakMap)throw new Error("[mobx-react] tracking components is not supported in this browser.");Q||(Q=!0)}};__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobxReact(kt,St)}function wt(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=function(e){n.isPending=!1,t(e)},n.reject=function(t){n.isPending=!1,e(t)},n}n(58),function(t){n.p=t}(function(t){void 0===t&&(t="");var e=window.location;return/^\/(br_)/.test(e.pathname)?"/"+e.pathname.split("/")[1]+(/^\//.test(t)?t:"/"+t):t}("/js/bot/")),n(9),n(11),n(5),n(6),n(4),n(8),n(38),n(20);var At=function(){function t(t){this.init_promise=new wt,this.is_initialised=!1,this.trading_times={},this.root_store=t,this.ws=this.root_store.ws}var e=t.prototype;return e.initialise=function(){var t,e,n=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(!this.is_initialised){r.next=2;break}return r.abrupt("return",this.init_promise);case 2:if(this.is_initialised=!0,t=this.root_store.core.common.server_time,this.server_time=t.clone(),this.last_update_moment=this.server_time.local(),Object.keys(this.trading_times).length){r.next=13;break}return r.next=9,regeneratorRuntime.awrap(this.updateTradingTimes());case 9:return this.init_promise.resolve(),e=function t(){var e,r,i,o,a,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=n.updateMarketOpenClosed(),Object.keys(e).length>0&&n.onMarketOpenCloseChanged&&n.onMarketOpenCloseChanged(e),r=n.nextUpdateDate()){c.next=14;break}return i=n.server_time.local(),o=n.last_update_moment.clone().add(1,"days"),i.isAfter(o)?n.last_update_moment=i.clone():n.last_update_moment=o.clone(),a={},Object.keys(n.trading_times).forEach((function(t){a[t]=n.trading_times[t].is_opened})),c.next=11,regeneratorRuntime.awrap(n.updateTradingTimes());case 11:Object.keys(n.trading_times).forEach((function(t){n.trading_times[t].is_opened=a[t]})),o.set({hour:0,minute:0,second:0}),r=o.toDate();case 14:s=r-n.server_time.local().toDate(),n.update_timer=setTimeout(t,s);case 16:case"end":return c.stop()}}))},r.next=13,regeneratorRuntime.awrap(e());case 13:return r.abrupt("return",this.init_promise);case 14:case"end":return r.stop()}}),null,this)},e.updateTradingTimes=function(){var t,e,n,r,i,o,a=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=this.last_update_moment.format("YYYY-MM-DD"),s.next=3,regeneratorRuntime.awrap(this.ws.tradingTimes(t));case 3:if(!(e=s.sent).error){s.next=6;break}return s.abrupt("return");case 6:if(this.trading_times={},n=this.server_time.local().toDate(),r=n.toISOString().substring(0,11),i=function(t){return new Date(""+r+t+"Z")},o=e.trading_times.markets){s.next=13;break}return s.abrupt("return");case 13:o.forEach((function(t){t.submarkets.forEach((function(t){t.symbols.forEach((function(t){var e,n=t.times,r=t.symbol,o=n.open,s=n.close,c=1===o.length&&"00:00:00"===o[0]&&"23:59:59"===s[0],u=1===o.length&&"--"===o[0]&&"--"===s[0];c||u||(e=o.map((function(t,e){return{open:i(t),close:i(s[e])}}))),a.trading_times[r]={is_open_all_day:c,is_closed_all_day:u,times:e}}))}))}));case 14:case"end":return s.stop()}}),null,this)},e.updateMarketOpenClosed=function(){var t=this,e={};return Object.keys(this.trading_times).forEach((function(n){var r=t.calcIsMarketOpened(n),i=t.trading_times[n];i.is_opened!==r&&(i.is_opened=r,e[n]=r)})),e},e.calcIsMarketOpened=function(t){var e=this.server_time.local().unix(),n=this.trading_times[t],r=n.times,i=n.is_open_all_day;return!n.is_closed_all_day&&(!!i||r.some((function(t){var n=t.open,r=t.close;return e>=n&&e<r})))},e.nextUpdateDate=function(){var t,e=this,n=this.server_time.local().toDate();return Object.keys(this.trading_times).forEach((function(r){var i=e.trading_times[r],o=i.times,a=i.is_open_all_day,s=i.is_closed_all_day;a||s||o.forEach((function(e){var r=e.open,i=e.close;r>n&&(!t||r<t)&&(t=r),i>n&&(!t||i<t)&&(t=i)}))})),t},e.isMarketOpened=function(t){var e=Object.keys(this.trading_times);return!(!e.length||!e.includes(t))&&this.trading_times[t].is_opened},t}(),Ot=(n(48),n(59),n(31),n(123),n(49),n(25),n(166),n(88),n(0)),Ct=["BTC","ETH","LTC","BCH","UST"],It={lists:{PAYOUTTYPE:[[Object(Ot.localize)("Stake"),"stake"]],CRYPTO_CURRENCIES:Ct,DETAILS:[[Object(Ot.localize)("deal reference id"),"1"],[Object(Ot.localize)("purchase price"),"2"],[Object(Ot.localize)("payout"),"3"],[Object(Ot.localize)("profit"),"4"],[Object(Ot.localize)("contract type"),"5"],[Object(Ot.localize)("entry spot time"),"6"],[Object(Ot.localize)("entry spot price"),"7"],[Object(Ot.localize)("exit spot time"),"8"],[Object(Ot.localize)("exit spot price"),"9"],[Object(Ot.localize)("barrier"),"10"],[Object(Ot.localize)("result"),"11"]],CHECK_RESULT:[[Object(Ot.localize)("Win"),"win"],[Object(Ot.localize)("Loss"),"loss"]],CHECK_DIRECTION:[[Object(Ot.localize)("Rise"),"rise"],[Object(Ot.localize)("Fall"),"fall"],[Object(Ot.localize)("No Change"),""]],BALANCE_TYPE:[[Object(Ot.localize)("string"),"STR"],[Object(Ot.localize)("number"),"NUM"]],NOTIFICATION_TYPE:[[Object(Ot.localize)("green"),"success"],[Object(Ot.localize)("blue"),"info"],[Object(Ot.localize)("yellow"),"warn"],[Object(Ot.localize)("red"),"error"]],NOTIFICATION_SOUND:[[Object(Ot.localize)("Silent"),"silent"],[Object(Ot.localize)("Announcement"),"announcement"],[Object(Ot.localize)("Earned money"),"earned-money"],[Object(Ot.localize)("Job done"),"job-done"],[Object(Ot.localize)("Error"),"error"],[Object(Ot.localize)("Severe error"),"severe-error"]],CURRENCY:[["USD","USD"],["EUR","EUR"],["GBP","GBP"],["AUD","AUD"]].concat(Ct.map((function(t){return[t,t]})))},opposites:{CALLPUT:[{CALL:Object(Ot.localize)("Rise")},{PUT:Object(Ot.localize)("Fall")}],CALLPUTEQUAL:[{CALLE:Object(Ot.localize)("Rise Equals")},{PUTE:Object(Ot.localize)("Fall Equals")}],HIGHERLOWER:[{CALL:Object(Ot.localize)("Higher")},{PUT:Object(Ot.localize)("Lower")}],TOUCHNOTOUCH:[{ONETOUCH:Object(Ot.localize)("Touch")},{NOTOUCH:Object(Ot.localize)("No Touch")}],ENDSINOUT:[{EXPIRYRANGE:Object(Ot.localize)("Ends Between")},{EXPIRYMISS:Object(Ot.localize)("Ends Outside")}],STAYSINOUT:[{RANGE:Object(Ot.localize)("Stays Between")},{UPORDOWN:Object(Ot.localize)("Goes Outside")}],ASIANS:[{ASIANU:Object(Ot.localize)("Asian Up")},{ASIAND:Object(Ot.localize)("Asian Down")}],MATCHESDIFFERS:[{DIGITMATCH:Object(Ot.localize)("Matches")},{DIGITDIFF:Object(Ot.localize)("Differs")}],EVENODD:[{DIGITEVEN:Object(Ot.localize)("Even")},{DIGITODD:Object(Ot.localize)("Odd")}],OVERUNDER:[{DIGITOVER:Object(Ot.localize)("Over")},{DIGITUNDER:Object(Ot.localize)("Under")}],HIGHLOWTICKS:[{TICKHIGH:Object(Ot.localize)("High Tick")},{TICKLOW:Object(Ot.localize)("Low Tick")}],RESET:[{RESETCALL:Object(Ot.localize)("Reset Call")},{RESETPUT:Object(Ot.localize)("Reset Put")}],RUNS:[{RUNHIGH:Object(Ot.localize)("Only Ups")},{RUNLOW:Object(Ot.localize)("Only Downs")}],CALLPUTSPREAD:[{CALLSPREAD:Object(Ot.localize)("Call Spread")},{PUTSPREAD:Object(Ot.localize)("Put Spread")}]},BARRIER_TYPES:[["Offset +","+"],["Offset -","-"]],ohlcFields:[[Object(Ot.localize)("Open"),"open"],[Object(Ot.localize)("High"),"high"],[Object(Ot.localize)("Low"),"low"],[Object(Ot.localize)("Close"),"close"],[Object(Ot.localize)("Open Time"),"epoch"]],candleIntervals:[[Object(Ot.localize)("Default"),"default"],[Object(Ot.localize)("1 minute"),"60"],[Object(Ot.localize)("2 minutes"),"120"],[Object(Ot.localize)("3 minutes"),"180"],[Object(Ot.localize)("5 minutes"),"300"],[Object(Ot.localize)("10 minutes"),"600"],[Object(Ot.localize)("15 minutes"),"900"],[Object(Ot.localize)("30 minutes"),"1800"],[Object(Ot.localize)("1 hour"),"3600"],[Object(Ot.localize)("2 hours"),"7200"],[Object(Ot.localize)("4 hours"),"14400"],[Object(Ot.localize)("8 hours"),"28800"],[Object(Ot.localize)("1 day"),"86400"]],mainBlocks:["trade_definition","before_purchase","during_purchase","after_purchase"],mandatoryMainBlocks:["trade_definition","before_purchase"],procedureDefinitionBlocks:["procedures_defnoreturn","procedures_defreturn"],TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING:{callput:["callput","higherlower"],asian:["asians"],digits:["matchesdiffers","evenodd","overunder"]},TRADE_TYPE_CATEGORIES:{callput:["callput","callputequal","higherlower"],touchnotouch:["touchnotouch"],inout:["endsinout","staysinout"],asian:["asians"],digits:["matchesdiffers","evenodd","overunder"],reset:["reset"],callputspread:["callputspread"],highlowticks:["highlowticks"],runs:["runs"]},TRADE_TYPE_CATEGORY_NAMES:{callput:Object(Ot.localize)("Up/Down"),touchnotouch:Object(Ot.localize)("Touch/No Touch"),inout:Object(Ot.localize)("In/Out"),asian:Object(Ot.localize)("Asians"),digits:Object(Ot.localize)("Digits"),reset:Object(Ot.localize)("Reset Call/Reset Put"),callputspread:Object(Ot.localize)("Call Spread/Put Spread"),highlowticks:Object(Ot.localize)("High/Low Ticks"),runs:Object(Ot.localize)("Only Ups/Only Downs")},BARRIER_CATEGORIES:{euro_atm:["callput","callputequal"],euro_non_atm:["endsinout","higherlower","callputspread"],american:["staysinout","touchnotouch","highlowticks","runs"],non_financial:["digits","overunder","evenodd","matchesdiffers"],asian:["asians"],reset:["reset"],lookback:["lookback"]},DEFAULT_DURATION_DROPDOWN_OPTIONS:[[Object(Ot.localize)("Ticks"),"t"],[Object(Ot.localize)("Seconds"),"s"],[Object(Ot.localize)("Minutes"),"m"],[Object(Ot.localize)("Hours"),"h"],[Object(Ot.localize)("Days"),"d"]],BARRIER_LABELS:[Object(Ot.localize)("High barrier"),Object(Ot.localize)("Low barrier")],ABSOLUTE_BARRIER_DROPDOWN_OPTION:[[Object(Ot.localize)("Absolute"),"absolute"]],NOT_AVAILABLE_DROPDOWN_OPTIONS:[[Object(Ot.localize)("Not available"),"na"]],NOT_AVAILABLE_DURATIONS:[{display:Object(Ot.localize)("Not available"),unit:"na",min:0}],BARRIER_TRADE_TYPES:["higherlower","touchnotouch","endsinout","staysinout","callputspread"],DIGIT_CATEGORIES:["digits","highlowticks"],INDEPEDENT_BLOCKS:["block_holder","tick_analysis","loader","procedures_defreturn","procedures_defnoreturn"],bbResult:[[Object(Ot.localize)("upper"),"1"],[Object(Ot.localize)("middle"),"0"],[Object(Ot.localize)("lower"),"2"]],macdFields:[[Object(Ot.localize)("Histogram"),"0"],[Object(Ot.localize)("MACD"),"1"],[Object(Ot.localize)("Signal"),"2"]],gd:{cid:"828416594271-b4bhia944ecegn3j327oeb4l8o803bts.apps.googleusercontent.com",aid:"derivbot-248506",api:"AIzaSyA52MX2l8p75-w7nvab7fU6Lk6KwLqnyEI"},help:{TEXT:"text",VIDEO:"video",IMAGE:"image",BLOCK:"block"},workspaces:{flyoutWorkspacesStartScale:.7,mainWorkspaceStartScale:.9},strategies:{martingale:{index:0,label:"Martingale",description:Object(Ot.localize)("The Martingale Strategy is a classic trading technique that has been used for more than a hundred years, popularised by the French mathematician Paul Pierre Levy in the 18th century.")},dalembert:{index:1,label:"D'Alembert",description:Object(Ot.localize)("The concept of the D’Alembert Strategy is said to be similar to the Martingale Strategy where you will increase your contract size after a loss. With the D’Alembert Strategy, you will also decrease your contract size after a successful trade.")},oscars_grind:{index:2,label:"Oscar's Grind",description:Object(Ot.localize)("The Oscar's Grind Strategy is a low-risk positive progression strategy that first appeared in 1965. By using this strategy, you will increase the size of your contract after each successful trade, the size of your contract will increase after successful trades, and remain unchanged after unsuccessful trades.")}}},Nt=function(){function t(t){this.cache_age_in_min=10,this.contracts_for={},this.disabled_options=[{submarket:"smart_fx",trade_type:"higherlower"},{submarket:"minor_pairs",trade_type:"higherlower"},{submarket:"metals",trade_type:"callputequal"},{market:"indices",trade_type:"callputequal"},{symbol:"OTC_AS51",trade_type_category:"inout"},{trade_type_category:"lookback"},{trade_type_category:"callputspread"}],this.retrieving_contracts_for={},this.root_store=t,this.ws=this.root_store.ws}var e=t.prototype;return e.getBarriers=function(t,e,n,r){var i,o,a,s,c,u,l,h=this;return regeneratorRuntime.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(i={values:[]},It.BARRIER_TRADE_TYPES.includes(e)){p.next=3;break}return p.abrupt("return",i);case 3:return o=["high_barrier","low_barrier"],p.next=6,regeneratorRuntime.awrap(this.getContractsByTradeType(t,e));case 6:return a=p.sent,p.next=9,regeneratorRuntime.awrap(this.getDurations(t,e,!1));case 9:return s=p.sent,c=new RegExp("^[-|+]([0-9]+.[0-9]+)$"),u=function(t){return t&&c.test(t.toString())},l=!0,a.length>0&&(r.forEach((function(t,p){var f=["+","-"].includes(t),d=h.getContractCategoryByTradeType(e),y=a.find((function(t){var r=It.BARRIER_CATEGORIES,i=Object.keys(r).find((function(t){return r[t].includes(e)})),a=t.contract_category===d,c=-1!==s.findIndex((function(t){return t.unit===n})),l=t.barrier_category===i,h=f&&u(t.barrier||t[o[p]])||!f&&!u(t.barrier||t[o[p]]);return a&&c&&l&&h}));if(y||(y=a.filter((function(t){return t.barrier||t.high_barrier})).sort((function(t,e){var n=t.barrier||t.high_barrier,r=e.barrier||e.high_barrier;return parseFloat(n)-parseFloat(r)})).shift())&&!f&&(l=!1),y){var m=1===y.barriers?"barrier":o[p];if(y[m]){var g=(""+y[m]).match(c);i.values[p]=g?g[1]:y[m]}Object.assign(i,{allow_both_types:["intraday","tick"].includes(y.expiry_type)&&u(y[m]),allow_absolute_type:"absolute"===t&&!u(y[m])}),1===y.barriers&&r.splice(p+1,1)}})),l?2===i.values.length&&r.every((function(t){return t===r[0]}))&&i.values.every((function(t){return t===i.values[0]}))&&(i.values[1]=(.95*i.values[0]).toFixed(1)):i.values=i.values.map((function(){return!1}))),p.abrupt("return",i);case 15:case"end":return p.stop()}}),null,this)},e.getContractCategoryByTradeType=function(t){var e=It.TRADE_TYPE_TO_CONTRACT_CATEGORY_MAPPING;return Object.keys(e).find((function(n){return e[n].includes(t)}))||t},e.getTradeTypeCategoryByTradeType=function(t){var e=It.TRADE_TYPE_CATEGORIES;return Object.keys(e).find((function(n){return e[n].includes(t)}))||t},e.getTradeTypeCategoryNameByTradeType=function(t){return It.TRADE_TYPE_CATEGORY_NAMES[this.getTradeTypeCategoryByTradeType(t)]},e.getBarrierCategoryByTradeType=function(t){var e=It.BARRIER_CATEGORIES;return Object.keys(e).find((function(n){return e[n].includes(t)}))},e.getContractsByTradeType=function(t,e){var n,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,regeneratorRuntime.awrap(this.getContractsFor(t));case 2:return n=o.sent,r=this.getContractCategoryByTradeType(e),i=this.getBarrierCategoryByTradeType(e),o.abrupt("return",n.filter((function(t){var e=t.contract_category===r,n=t.barrier_category===i;return e&&n})));case 6:case"end":return o.stop()}}),null,this)},e.getContractsFor=function(t){var e,n,r,i,o,a=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(t&&"na"!==t){s.next=2;break}return s.abrupt("return",[]);case 2:if(e=this.root_store.core.common.server_time,n=function(){var n,r,i;return regeneratorRuntime.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!a.retrieving_contracts_for[t]){o.next=4;break}return o.next=3,regeneratorRuntime.awrap(a.retrieving_contracts_for[t]);case 3:return o.abrupt("return",a.contracts_for[t].contracts);case 4:return a.retrieving_contracts_for[t]=new wt,o.next=7,regeneratorRuntime.awrap(a.ws.send({contracts_for:t}));case 7:if(!(n=o.sent).error){o.next=10;break}return o.abrupt("return",[]);case 10:return r=n.contracts_for.available,i=r.filter((function(t){return"forward"!==t.start_type})),a.contracts_for[t]={contracts:i,timestamp:e.unix()},a.retrieving_contracts_for[t].resolve(),delete a.retrieving_contracts_for[t],o.abrupt("return",i);case 16:case"end":return o.stop()}}))},!this.contracts_for[t]){s.next=9;break}return r=this.contracts_for[t],i=r.contracts,o=r.timestamp,e.unix()-o>60*this.cache_age_in_min&&n(),s.abrupt("return",i);case 9:return s.abrupt("return",n());case 10:case"end":return s.stop()}}),null,this)},e.getDurations=function(t,e,n){var r,i,o,a,s,c,u,l;return regeneratorRuntime.async((function(h){for(;;)switch(h.prev=h.next){case 0:return void 0===n&&(n=!0),h.next=3,regeneratorRuntime.awrap(this.getContractsFor(t));case 3:if(r=h.sent,i=It.NOT_AVAILABLE_DURATIONS,o=It.DEFAULT_DURATION_DROPDOWN_OPTIONS,0!==r.length){h.next=7;break}return h.abrupt("return",i);case 7:return h.next=9,regeneratorRuntime.awrap(this.getContractsByTradeType(t,e));case 9:if(a=h.sent,s=[],c=function(t){return o.findIndex((function(e){return e[1]===t.replace(/\d+/g,"")}))},u=function(t,e){var n=t.replace(/\D/g,""),r=c(t),i=o.findIndex((function(t){return t[1]===e})),a=parseInt(n);return o.slice(i+1,r+1).reverse().forEach((function(t){switch(t[1]){case"m":case"h":a*=60;break;case"d":a*=24}})),a},a.forEach((function(t){if(t.min_contract_duration&&t.max_contract_duration){var e=c(t.min_contract_duration),r=c("1d"===t.max_contract_duration&&n?"24h":t.max_contract_duration);o.slice(e,r+1).forEach((function(e,n){-1!==s.findIndex((function(t){return t.unit===e[1]}))||s.push({display:e[0],unit:e[1],min:0===n?parseInt(t.min_contract_duration.replace(/\D/g,"")):1,max:u(t.max_contract_duration,e[1])})}))}})),a.every((function(t){return"intraday"===t.expiry_type}))&&-1!==(l=s.findIndex((function(t){return"d"===t[1]})))&&s.splice(l,1),0!==s.length){h.next=17;break}return h.abrupt("return",i);case 17:return h.abrupt("return",s.sort((function(t,e){return c(t.unit)-c(e.unit)})));case 18:case"end":return h.stop()}}),null,this)},e.getPredictionRange=function(t,e){var n,r,i,o,a,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,regeneratorRuntime.awrap(this.getContractsByTradeType(t,e));case 2:return n=c.sent,r=this.getContractCategoryByTradeType(e),i=[],o=It.DIGIT_CATEGORIES,a=It.opposites,o.includes(r)&&"evenodd"!==e&&((s=n.find((function(t){return Object.keys(a).some((function(e){return a[e].map((function(t){return Object.keys(t)[0]})).includes(t.contract_type)}))})))&&s.last_digit_range?i.push.apply(i,s.last_digit_range):i.push(1,2,3,4,5,6,7,8)),c.abrupt("return",i);case 8:case"end":return c.stop()}}),null,this)},e.getMarketBySymbol=function(t){var e;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.getContractsFor(t));case 2:if((e=n.sent).length){n.next=5;break}return n.abrupt("return","na");case 5:return n.abrupt("return",e[0].market);case 6:case"end":return n.stop()}}),null,this)},e.getSubmarketBySymbol=function(t){var e;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.getContractsFor(t));case 2:if((e=n.sent).length){n.next=5;break}return n.abrupt("return","na");case 5:return n.abrupt("return",e[0].submarket);case 6:case"end":return n.stop()}}),null,this)},e.getGroupedTradeTypes=function(t){var e,n,r,i,o,a,s,c;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,regeneratorRuntime.awrap(this.getContractsFor(t));case 2:e=u.sent,n={},r=0;case 5:if(!(r<e.length)){u.next=17;break}return i=e[r].market,o=e[r].submarket,a=this.getTradeTypeCategoryByTradeType(e[r].contract_category),s=this.getTradeTypeCategoryNameByTradeType(e[r].contract_category),u.next=12,regeneratorRuntime.awrap(this.getTradeTypeByTradeCategory(i,o,t,a));case 12:c=u.sent,s&&(this.isDisabledOption({market:i,submarket:o,symbol:t,trade_type_category:a})||(n[s]=c));case 14:r++,u.next=5;break;case 17:return u.abrupt("return",n);case 18:case"end":return u.stop()}}),null,this)},e.getTradeTypeByTradeCategory=function(t,e,n,r){var i,o,a,s,c,u,l,h,p,f;return regeneratorRuntime.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(i=It.NOT_AVAILABLE_DURATIONS,o=It.TRADE_TYPE_CATEGORIES,a=It.opposites,s=o[r],c=[],!s||!s.length){d.next=16;break}u=0;case 5:if(!(u<s.length)){d.next=16;break}return l=s[u],d.next=9,regeneratorRuntime.awrap(this.getDurations(n,l));case 9:h=d.sent,p=JSON.stringify(h)!==JSON.stringify(i),!this.isDisabledOption({market:t,submarket:e,symbol:n,trade_type_category:r,trade_type:l})&&p&&(f=a[l.toUpperCase()],c.push({name:f.map((function(t){return t[Object.keys(t)[0]]})).join("/"),value:l,icon:[Object.keys(f[0])[0],Object.keys(f[1])[0]]}));case 13:u++,d.next=5;break;case 16:return d.abrupt("return",c);case 17:case"end":return d.stop()}}),null,this)},e.getTradeTypeCategories=function(t,e,n){var r,i,o,a,s,c=this;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return r=It.TRADE_TYPE_CATEGORY_NAMES,i=It.NOT_AVAILABLE_DROPDOWN_OPTIONS,u.next=3,regeneratorRuntime.awrap(this.getContractsFor(n));case 3:if(o=u.sent,a=[],o.forEach((function(r){var i=c.getTradeTypeCategoryByTradeType(r.contract_category),o=c.getTradeTypeCategoryNameByTradeType(r.contract_category);o&&(c.isDisabledOption({market:t,submarket:e,symbol:n,trade_type_category:i})||-1!==a.findIndex((function(t){return t[1]===i}))||a.push([o,i]))})),!(a.length>0)){u.next=9;break}return s=Object.keys(r),u.abrupt("return",a.sort((function(t,e){return s.findIndex((function(e){return e===t[1]}))-s.findIndex((function(t){return t===e[1]}))})));case 9:return u.abrupt("return",i);case 10:case"end":return u.stop()}}),null,this)},e.getTradeTypes=function(t,e,n,r){var i,o,a,s,c,u,l,h,p,f;return regeneratorRuntime.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(i=It.NOT_AVAILABLE_DURATIONS,o=It.TRADE_TYPE_CATEGORIES,a=It.opposites,s=[],!(c=o[r])){d.next=16;break}u=0;case 5:if(!(u<c.length)){d.next=16;break}return l=c[u],d.next=9,regeneratorRuntime.awrap(this.getDurations(n,l));case 9:h=d.sent,p=JSON.stringify(h)!==JSON.stringify(i),!this.isDisabledOption({market:t,submarket:e,symbol:n,trade_type_category:r,trade_type:l})&&p&&(f=a[l.toUpperCase()],s.push([f.map((function(t){return t[Object.keys(t)[0]]})).join("/"),l]));case 13:u++,d.next=5;break;case 16:return d.abrupt("return",s.length>0?s:It.NOT_AVAILABLE_DROPDOWN_OPTIONS);case 17:case"end":return d.stop()}}),null,this)},e.isDisabledOption=function(t){return this.disabled_options.some((function(e){return Object.keys(e).every((function(n){return t[n]===e[n]}))}))},e.disposeCache=function(){this.contracts_for={}},t}(),Rt=function(){function t(t,e){this.active_symbols=[],this.disabled_markets=[],this.disabled_symbols=["frxGBPNOK","frxUSDNOK","frxUSDNEK","frxUSDSEK"],this.disabled_submarkets=["energy"],this.init_promise=new wt,this.is_initialised=!1,this.processed_symbols={},this.trading_times=e,this.root_store=t,this.ws=this.root_store.ws}var e=t.prototype;return e.retrieveActiveSymbols=function(t){var e,n,r=this;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return void 0===t&&(t=!1),i.next=3,regeneratorRuntime.awrap(this.trading_times.initialise());case 3:if(t||!this.is_initialised){i.next=7;break}return i.next=6,regeneratorRuntime.awrap(this.init_promise);case 6:return i.abrupt("return",this.active_symbols);case 7:return this.is_initialised=!0,i.next=10,regeneratorRuntime.awrap(this.ws.activeSymbols());case 10:return e=i.sent,n=e.active_symbols,this.active_symbols=n,this.processed_symbols=this.processActiveSymbols(),this.trading_times.onMarketOpenCloseChanged=function(t){Object.keys(t).forEach((function(e){var n=r.active_symbols[e];n&&(n.exchange_is_open=t[e])})),r.changes=t,r.processActiveSymbols()},this.init_promise.resolve(),i.abrupt("return",this.active_symbols);case 17:case"end":return i.stop()}}),null,this)},e.processActiveSymbols=function(){var t=this;return this.active_symbols.reduce((function(e,n){if(t.disabled_markets.includes(n.market)||t.disabled_symbols.includes(n.symbol)||t.disabled_submarkets.includes(n.submarket))return e;var r=function(t,e){return-1!==Object.keys(t).findIndex((function(t){return t===n[e]}))};r(e,"market")||(e[n.market]={display_name:n.market_display_name,submarkets:{}});var i=e[n.market].submarkets;r(i,"submarket")||(i[n.submarket]={display_name:n.submarket_display_name,symbols:{}});var o=i[n.submarket].symbols;return r(o,"symbol")||(o[n.symbol]={display_name:n.display_name,pip_size:(""+n.pip).length-2,is_active:!n.is_trading_suspended&&n.exchange_is_open}),e}),{})},e.getAssetOptions=function(){var t,e=this;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.retrieveActiveSymbols());case 2:return t={},Object.keys(this.processed_symbols).forEach((function(n){var r=e.processed_symbols[n].submarkets;Object.keys(r).forEach((function(n){var i=r[n];t[i.display_name]=e.getAllSymbolDropdownOptions(i)}))})),n.abrupt("return",0===t.length?It.NOT_AVAILABLE_DROPDOWN_OPTIONS:t);case 5:case"end":return n.stop()}}),null,this)},e.getAllSymbolDropdownOptions=function(t){return Object.keys(t.symbols).map((function(e){return{name:t.symbols[e].display_name,value:e}}))},e.getMarketDropdownOptions=function(){var t,e=this;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(this.retrieveActiveSymbols());case 2:return t=[],Object.keys(this.processed_symbols).forEach((function(n){var r=e.processed_symbols[n];t.push([r.display_name,n])})),n.abrupt("return",0===t.length?It.NOT_AVAILABLE_DROPDOWN_OPTIONS:t);case 5:case"end":return n.stop()}}),null,this)},e.getSubmarketDropdownOptions=function(t){var e,n,r;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,regeneratorRuntime.awrap(this.retrieveActiveSymbols());case 2:return e=[],(n=this.processed_symbols[t])&&(r=n.submarkets,Object.keys(r).forEach((function(t){e.push([r[t].display_name,t])}))),i.abrupt("return",0===e.length?It.NOT_AVAILABLE_DROPDOWN_OPTIONS:e);case 6:case"end":return i.stop()}}),null,this)},e.getSymbolDropdownOptions=function(t){var e,n=this;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,regeneratorRuntime.awrap(this.retrieveActiveSymbols());case 2:return e=Object.keys(this.processed_symbols).reduce((function(e,r){var i=n.processed_symbols[r].submarkets;return Object.keys(i).forEach((function(n){if(n===t){var r=i[n].symbols;Object.keys(r).forEach((function(t){e.push([r[t].display_name,t])}))}})),e}),[]),r.abrupt("return",0===e.length?It.NOT_AVAILABLE_DROPDOWN_OPTIONS:e);case 4:case"end":return r.stop()}}),null,this)},t}();function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Dt=function(){function t(t){var e=this;this.registerOnAccountSwitch=function(){var t=e.root_store.core.client;e.disposeSwitchAccountListener=Object(r.m)((function(){return t.switch_broadcast}),(function(t){if(t){var n=Blockly.derivWorkspace;n&&e.active_symbols.retrieveActiveSymbols(!0).then((function(){e.contracts_for.disposeCache(),n.getAllBlocks().filter((function(t){return"trade_definition_market"===t.type})).forEach((function(t){var e=new Blockly.Events.Create(t);Blockly.Events.fire(e)}))}))}}))},this.root_store=t,this.trading_times=new At(this.root_store),this.contracts_for=new Nt(this.root_store),this.active_symbols=new Rt(this.root_store,this.trading_times)}var e,n;return t.setInstance=function(e){return this.singleton||(this.singleton=new t(e)),this.instance},t.prototype.disposeOnAccountSwitch=function(){"function"==typeof this.disposeSwitchAccountListener&&this.disposeSwitchAccountListener()},e=t,(n=[{key:"instance",get:function(){return this.singleton}}])&&Bt(e,n),t}();Dt.singleton=null;var Pt,xt,Mt,Lt,jt,Ft,Ut=Dt,zt=(n(90),Object.freeze({NOT_RUNNING:{index:0,text:Object(Ot.localize)("Bot is not running")},STARTING:{index:1,text:Object(Ot.localize)("Bot is starting")},PURCHASE_SENT:{index:2,text:Object(Ot.localize)("Attempting to buy")},PURCHASE_RECEIVED:{index:3,text:Object(Ot.localize)("Buy is successful")},IS_STOPPING:{index:4,text:Object(Ot.localize)("Bot is stopping")},CONTRACT_CLOSED:{index:5,text:Object(Ot.localize)("Contract closed")}})),Vt=(n(71),function(t){return"open"!==t.status||!!t.is_expired||!!t.is_settleable}),Ht=function(t){return function(t){return+(t.sell_price||t.bid_price)}(t)||null};function Gt(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wt(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var Kt,Yt,Jt,Qt,Xt,Zt,$t,te,ee,ne,re,ie,oe,ae,se,ce,ue=(Pt=r.d.bound,xt=r.d.bound,Lt=Wt((Mt=function(){function t(t){Gt(this,"contract",Lt,this),Gt(this,"indicative_movement",jt,this),Gt(this,"profit_movement",Ft,this),this.contract_id=null,this.profit=0,this.indicative=0,this.root_store=t}var e,n,r=t.prototype;return r.onBotContractEvent=function(t){var e=this,n=t.profit,r=Ht(t);this.contract_id!==t.id&&(this.clear(!1),this.contract_id=t.id,this.profit=n,this.indicative=r);var i={profit:n,indicative:r};Object.keys(i).forEach((function(t){i[t]!==e[t]?e[t+"_movement"]=i[t]>e[t]?"profit":"loss":""!==e[t+"_movement"]&&(e.indicative_movement=""),e[t]=i[t]})),this.contract=t},r.clear=function(t){void 0===t&&(t=!0),t&&(this.contract=null),this.profit=0,this.profit_loss=0,this.indicative=0,this.indicative_movement="",this.profit_movement=""},e=t,(n=[{key:"is_contract_completed",get:function(){return this.contract&&Vt(this.contract)&&this.root_store.run_panel.contract_stage.index!==zt.PURCHASE_RECEIVED.index}},{key:"is_contract_loading",get:function(){return this.root_store.run_panel.is_running&&null===this.contract||this.root_store.run_panel.contract_stage.index===zt.PURCHASE_SENT.index||this.root_store.run_panel.contract_stage.index===zt.STARTING.index}},{key:"is_contract_inactive",get:function(){return!this.contract&&!this.is_loading}},{key:"is_contract_losing",get:function(){return this.contract&&this.contract.profit<0}},{key:"is_contract_winning",get:function(){return this.contract&&this.contract.profit>0}}])&&qt(e.prototype,n),t}()).prototype,"contract",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),jt=Wt(Mt.prototype,"indicative_movement",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ft=Wt(Mt.prototype,"profit_movement",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Wt(Mt.prototype,"is_contract_completed",[r.e],Object.getOwnPropertyDescriptor(Mt.prototype,"is_contract_completed"),Mt.prototype),Wt(Mt.prototype,"is_contract_loading",[r.e],Object.getOwnPropertyDescriptor(Mt.prototype,"is_contract_loading"),Mt.prototype),Wt(Mt.prototype,"is_contract_inactive",[r.e],Object.getOwnPropertyDescriptor(Mt.prototype,"is_contract_inactive"),Mt.prototype),Wt(Mt.prototype,"is_contract_losing",[r.e],Object.getOwnPropertyDescriptor(Mt.prototype,"is_contract_losing"),Mt.prototype),Wt(Mt.prototype,"is_contract_winning",[r.e],Object.getOwnPropertyDescriptor(Mt.prototype,"is_contract_winning"),Mt.prototype),Wt(Mt.prototype,"onBotContractEvent",[Pt],Object.getOwnPropertyDescriptor(Mt.prototype,"onBotContractEvent"),Mt.prototype),Wt(Mt.prototype,"clear",[xt],Object.getOwnPropertyDescriptor(Mt.prototype,"clear"),Mt.prototype),Mt);function le(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function he(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var pe,fe,de,ye,me,ge,ve,be,_e,Ee=(Kt=r.d.bound,Yt=r.d.bound,Jt=r.d.bound,Qt=r.d.bound,Xt=r.d.bound,Zt=r.d.bound,$t=r.d.bound,te=r.d.bound,ne=he((ee=function(){function t(t){this.block_listeners=[],this.block_workspaces=[],this.flyout_min_width=500,this.options={css:!1,media:n.p+"media/",move:{scrollbars:!1,drag:!0,wheel:!1},zoom:{startScale:It.workspaces.flyoutWorkspacesStartScale},sounds:!1},le(this,"is_help_content",ne,this),le(this,"flyout_content",re,this),le(this,"flyout_width",ie,this),le(this,"is_visible",oe,this),le(this,"is_search_flyout",ae,this),le(this,"is_loading",se,this),le(this,"search_term",ce,this),this.root_store=t}var e=t.prototype;return e.setContents=function(t,e){void 0===e&&(e="");var n=t;this.block_listeners.forEach((function(t){return Blockly.unbindEvent_(t)})),this.block_workspaces.forEach((function(t){return t.dispose()})),this.block_listeners=[],this.block_workspaces=[],this.is_help_content=!1,this.search_term=e.length>20?e.substring(0,20)+"...":e,this.flyout_content=Object(r.l)(t),this.setFlyoutWidth(n),this.setVisibility(!0);var i=this;setTimeout((function(){i.setFlyoutWidth(n)}),50)},e.setVisibility=function(t){this.is_visible!==t&&(this.is_visible=t,t||(this.flyout_content=Object(r.l)([])))},e.setIsSearchFlyout=function(t){this.is_search_flyout=t},e.initBlockWorkspace=function(t,e){var n=Blockly.inject(t,this.options);n.isFlyout=!0,n.targetWorkspace=Blockly.derivWorkspace;var r=Blockly.Xml.domToBlock(e,n),i=r.getHeightWidth();r.isInFlyout=!0,t.style.height=Math.ceil(i.height*this.options.zoom.startScale)+1+"px",t.style.width=Math.ceil(i.width*this.options.zoom.startScale)+1+"px",r.moveBy(1,1);var o=Blockly.derivWorkspace.toolbox_.flyout_;this.block_listeners.push(Blockly.bindEventWithChecks_(r.getSvgRoot(),"mousedown",null,(function(t){o.blockMouseDown_(r)(t)}))),this.block_workspaces.push(n),this.block_workspaces.forEach(Blockly.svgResize)},e.setFlyoutWidth=function(t){var e=this,n=0;t.forEach((function(t){if(t.tagName.toUpperCase()===Blockly.Xml.NODE_BLOCK){var r=Blockly.Block.getDimensions(t);t.setAttribute("width",Math.ceil(r.width*e.options.zoom.startScale)),t.setAttribute("height",Math.ceil(r.height*e.options.zoom.startScale)),n=Math.max(n,Math.ceil(r.width*e.options.zoom.startScale))}})),this.flyout_width=Math.max(this.flyout_min_width,n+65)},e.onClickOutsideFlyout=function(t){if(this.is_visible&&Blockly.derivWorkspace){var e=Blockly.derivWorkspace.toolbox_;t.path.some((function(t){return t.classList&&t.classList.contains("flyout")}))||e.HtmlDiv.contains(t.target)||e.clearSelection()}},e.onMount=function(){window.addEventListener("click",this.onClickOutsideFlyout)},e.onUnmount=function(){window.removeEventListener("click",this.onClickOutsideFlyout)},t}()).prototype,"is_help_content",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re=he(ee.prototype,"flyout_content",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ie=he(ee.prototype,"flyout_width",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return this.flyout_min_width}}),oe=he(ee.prototype,"is_visible",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ae=he(ee.prototype,"is_search_flyout",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),se=he(ee.prototype,"is_loading",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ce=he(ee.prototype,"search_term",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),he(ee.prototype,"setContents",[Kt],Object.getOwnPropertyDescriptor(ee.prototype,"setContents"),ee.prototype),he(ee.prototype,"setVisibility",[Yt],Object.getOwnPropertyDescriptor(ee.prototype,"setVisibility"),ee.prototype),he(ee.prototype,"setIsSearchFlyout",[Jt],Object.getOwnPropertyDescriptor(ee.prototype,"setIsSearchFlyout"),ee.prototype),he(ee.prototype,"initBlockWorkspace",[Qt],Object.getOwnPropertyDescriptor(ee.prototype,"initBlockWorkspace"),ee.prototype),he(ee.prototype,"setFlyoutWidth",[Xt],Object.getOwnPropertyDescriptor(ee.prototype,"setFlyoutWidth"),ee.prototype),he(ee.prototype,"onClickOutsideFlyout",[Zt],Object.getOwnPropertyDescriptor(ee.prototype,"onClickOutsideFlyout"),ee.prototype),he(ee.prototype,"onMount",[$t],Object.getOwnPropertyDescriptor(ee.prototype,"onMount"),ee.prototype),he(ee.prototype,"onUnmount",[te],Object.getOwnPropertyDescriptor(ee.prototype,"onUnmount"),ee.prototype),ee);function Te(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Se(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var ke,we,Ae,Oe,Ce,Ie=(pe=r.d.bound,fe=r.d.bound,de=r.d.bound,me=Se((ye=function(){function t(t){this.options={css:!1,media:n.p+"media/",move:{scrollbars:!1,drag:!0,wheel:!1},zoom:{startScale:It.workspaces.flyoutWorkspacesStartScale},sounds:!1},Te(this,"block_node",me,this),Te(this,"block_type",ge,this),Te(this,"help_string",ve,this),Te(this,"title",be,this),Te(this,"setHelpContent",_e,this),this.root_store=t}var e=t.prototype;return e.onBackClick=function(){var t=Blockly.derivWorkspace.toolbox_,e=this.root_store,n=e.toolbar;if(e.flyout.is_search_flyout){var r=document.getElementsByName("search")[0].value;n.onSearch({search:r})}else t.refreshCategory()},e.onSequenceClick=function(t){var e,r,i,o,a,s,c,u,l,h=this;return regeneratorRuntime.async((function(p){for(;;)switch(p.prev=p.next){case 0:return e=Blockly.derivWorkspace.toolbox_,r=e.getSelectedItem(),i=e.getCategoryContents(r),o=this.groupBy(i,!0),a=i.find((function(t){return t.getAttribute("type")===h.block_type})),Object.keys(o).forEach((function(t,e){a.getAttribute("type")===t&&(s=e)})),c=function t(e,r,i){var o,a;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(o=r+(i?1:-1),a=Object.keys(e).find((function(t,e){return o===e}))){s.next=4;break}return s.abrupt("return",!1);case 4:return s.prev=4,s.next=7,regeneratorRuntime.awrap(n(168)("./"+a));case 7:return s.abrupt("return",a);case 10:return s.prev=10,s.t0=s.catch(4),s.abrupt("return",t(e,o,i));case 13:case"end":return s.stop()}}),null,null,[[4,10]])},p.next=9,regeneratorRuntime.awrap(c(o,s,t));case 9:(u=p.sent)&&(l=o[u],this.setHelpContent(l[0]));case 11:case"end":return p.stop()}}),null,this)},e.groupBy=function(t,e){return void 0===e&&(e=!1),t.reduce((function(t,n){var r=n.getAttribute("type");return e&&null===r?t:(t[r]||(t[r]=[]),(!e||e&&null!==r)&&t[r].push(n),t)}),{})},t}()).prototype,"block_node",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=Se(ye.prototype,"block_type",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),ve=Se(ye.prototype,"help_string",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),be=Se(ye.prototype,"title",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),_e=Se(ye.prototype,"setHelpContent",[pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(e){var i,o,a,s,c;return regeneratorRuntime.async((function(u){for(;;)switch(u.prev=u.next){case 0:return i=Blockly.Block.getDimensions(e),o=e.getAttribute("type"),a=Blockly.Blocks[o].meta().display_name,u.next=5,regeneratorRuntime.awrap(n(168)("./"+o));case 5:s=u.sent,c=It.workspaces.flyoutWorkspacesStartScale,e.setAttribute("width",i.width*c),e.setAttribute("height",i.height*c),Object(r.n)((function(){t.root_store.flyout.is_help_content=!0,t.block_node=e,t.block_type=o,t.title=a,t.help_string=s.default}));case 10:case"end":return u.stop()}}))}}}),Se(ye.prototype,"onBackClick",[fe],Object.getOwnPropertyDescriptor(ye.prototype,"onBackClick"),ye.prototype),Se(ye.prototype,"onSequenceClick",[de],Object.getOwnPropertyDescriptor(ye.prototype,"onSequenceClick"),ye.prototype),ye),Ne=(n(13),n(43),n(54),n(205),n(29)),Re=function(){function t(){this.eam=new Ne.Map}var e=t.prototype;return e.register=function(t,e,n,r,i){var o=this;i&&this.unregisterAll(t);var a=function t(e){e.type===r.type&&(o.unregister("api.error",t),r.unregister.forEach((function(t){t instanceof Array?o.unregister.apply(o,t):o.unregisterAll(t)})))};r&&this.register("api.error",a);var s=function(){n&&o.unregister(t,e),r&&o.unregister("api.error",a),e.apply(void 0,arguments)},c=this.eam.get(t);this.eam=c?this.eam.set(t,c.push({action:s,searchBy:e})):this.eam.set(t,(new Ne.List).push({action:s,searchBy:e}))},e.unregister=function(t,e){this.eam=this.eam.set(t,this.eam.get(t).filter((function(t){return t.searchBy!==e})))},e.isRegistered=function(t){return this.eam.has(t)},e.unregisterAll=function(t){this.eam=this.eam.delete(t)},e.emit=function(t,e){this.eam.has(t)&&this.eam.get(t).forEach((function(t){return t.action(e)}))},t}(),Be=new Re,De=function(t){var e=new Date(t);return("0"+e.getUTCHours()).slice(-2)+":"+("0"+e.getUTCMinutes()).slice(-2)+":"+("0"+e.getUTCSeconds()).slice(-2)},Pe=function(t){return new Promise((function(e,n){var r=document.createElement("script");r.src=t,r.async=!0,r.onload=function(){return e(window.external_global_component)},r.onerror=n,document.body.appendChild(r)}))};function xe(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var Me,Le,je,Fe,Ue,ze,Ve,He=(ke=r.d.bound,we=r.d.bound,Ae=r.d.bound,Ce=xe((Oe=function(){function t(t){var e,n=this;(e=Ce)&&Object.defineProperty(this,"is_authorised",{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(this):void 0}),this.setKey=function(){var t=It.gd,e=t.aid,r=t.cid,i=t.api;n.client_id=r,n.app_id=e,n.api_key=i},this.root_store=t,this.bot_folder_name="Binary Bot - "+Object(Ot.localize)("Strategies"),this.google_auth=null,this.setKey(),Pe("https://apis.google.com/js/api.js").then((function(){return n.initialise()}))}var e=t.prototype;return e.initialise=function(){var t=this;gapi.load("client:auth2:picker",{callback:function(){gapi.client.init({apiKey:t.api_key,clientId:t.client_id,scope:"https://www.googleapis.com/auth/drive",discoveryDocs:["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"]}).then((function(){t.google_auth=gapi.auth2.getAuthInstance(),t.google_auth.isSignedIn.listen((function(e){return t.updateSigninStatus(e)})),t.updateSigninStatus(t.google_auth.isSignedIn.get())}),(function(t){console.warn(t)}))},onerror:console.warn})},e.updateSigninStatus=function(t){this.is_authorised=t},e.signIn=function(){return this.is_authorised?Promise.resolve():this.google_auth.signIn({prompt:"select_account"}).catch((function(t){"access_denied"===t.error&&console.error("Please grant permission to view and manage Google Drive folders created with Deriv Bot")}))},e.signOut=function(){return this.is_authorised?this.google_auth.signOut():Promise.resolve()},e.getPickerLanguage=function(){var t=Object(Ot.getLanguage)();return"zhTw"===t?"zh-TW":"zhCn"===t?"zh-CN":t},e.saveFile=function(t){return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.signIn());case 2:return e.next=4,regeneratorRuntime.awrap(this.checkFolderExists());case 4:return e.next=6,regeneratorRuntime.awrap(this.createSaveFilePicker("application/vnd.google-apps.folder",Object(Ot.localize)("Select a folder"),t));case 6:case"end":return e.stop()}}),null,this)},e.loadFile=function(){var t;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(this.signIn());case 2:return e.next=4,regeneratorRuntime.awrap(this.createLoadFilePicker(["text/xml","application/xml"],Object(Ot.localize)("Select a Deriv Bot Strategy")));case 4:return t=e.sent,e.abrupt("return",t);case 6:case"end":return e.stop()}}),null,this)},e.checkFolderExists=function(){var t,e,n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t=gapi.client.drive.files,r.next=3,regeneratorRuntime.awrap(t.list({q:"trashed=false"}));case 3:if(e=r.sent,n="application/vnd.google-apps.folder",!e.result.files.find((function(t){return t.mimeType===n}))){r.next=8;break}return r.abrupt("return");case 8:return r.next=10,regeneratorRuntime.awrap(t.create({resource:{name:this.bot_folder_name,mimeType:n,fields:"id"}}));case 10:case"end":return r.stop()}}),null,this)},e.createSaveFilePicker=function(t,e,n){var r=this,i=this.root_store.saveload.setButtonStatus;return new Promise((function(o){r.showGoogleDriveFilePicker(!0,t,e,(function(t){if(t.action===google.picker.Action.PICKED){var e=t.docs[0].id,a=new Blob([n.content],{type:n.mimeType}),s=JSON.stringify({name:n.name,mimeType:n.mimeType,parents:[e]}),c=new FormData;c.append("metadata",new Blob([s],{type:"application/json"})),c.append("file",a);var u=new XMLHttpRequest;u.responseType="json",u.open("POST","https://www.googleapis.com/upload/drive/v3/files?uploadType=multipart"),u.setRequestHeader("Authorization","Bearer "+gapi.auth.getToken().access_token),u.onload=function(){401===u.status&&r.signOut(),i(0),o()},u.send(c)}else t.action===google.picker.Action.CANCEL&&i(0)}))}))},e.createLoadFilePicker=function(t,e){var n=this,r=this.root_store.saveload.setButtonStatus;return new Promise((function(i){n.showGoogleDriveFilePicker(!1,t,e,(function(t){var e,n,o,a,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(t.action!==google.picker.Action.PICKED){c.next=11;break}return e=t.docs[0],n=e.name,o=e.id,a=gapi.client.drive.files,c.next=7,regeneratorRuntime.awrap(a.get({alt:"media",fileId:o,mimeType:"text/plain"}));case 7:s=c.sent,i({xml_doc:s.body,file_name:n}),c.next=12;break;case 11:t.action===google.picker.Action.CANCEL&&r(0);case 12:case"end":return c.stop()}}))}))}))},e.showGoogleDriveFilePicker=function(t,e,n,r){var i=new google.picker.DocsView;i.setIncludeFolders(!0),i.setMimeTypes(e),t&&i.setSelectFolderEnabled(!0),(new google.picker.PickerBuilder).setOrigin(window.location.protocol+"//"+window.location.host).setTitle(Object(Ot.localize)(n)).setLocale(this.getPickerLanguage()).setAppId(this.app_id).setOAuthToken(gapi.auth.getToken().access_token).addView(i).setDeveloperKey(this.api_key).setCallback(r).build().setVisible(!0)},t}()).prototype,"is_authorised",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xe(Oe.prototype,"updateSigninStatus",[ke],Object.getOwnPropertyDescriptor(Oe.prototype,"updateSigninStatus"),Oe.prototype),xe(Oe.prototype,"saveFile",[we],Object.getOwnPropertyDescriptor(Oe.prototype,"saveFile"),Oe.prototype),xe(Oe.prototype,"loadFile",[Ae],Object.getOwnPropertyDescriptor(Oe.prototype,"loadFile"),Oe.prototype),Oe),Ge=n(144),qe=["InsufficientBalance","CustomLimitsReached","OfferingsValidationError","InvalidCurrency","ContractBuyValidationError","NotDefaultCurrency","PleaseAuthenticate","FinancialAssessmentRequired","PositiveNumberExpected","OptionError"],We=Object.freeze({ERROR:"error",NOTIFY:"notify",SUCCESS:"success"}),Ke=Object.freeze({RECOVERABLE_ERRORS:"recoverable_errors",UNRECOVERABLE_ERRORS:"unrecoverable_errors"});function Ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Je(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var Qe=(Me=r.d.bound,Le=r.d.bound,je=r.d.bound,Fe=r.d.bound,Ue=r.d.bound,Ve=Je((ze=function(){function t(t){var e;(e=Ve)&&Object.defineProperty(this,"messages",{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(this):void 0}),this.root_store=t}var e,n,r=t.prototype;return r.onLogSuccess=function(t){this.pushMessage(t,We.SUCCESS)},r.onError=function(t){this.pushMessage(t,We.ERROR)},r.onNotify=function(t){this.pushMessage(t,We.NOTIFY)},r.pushMessage=function(t,e){var n=Object(Ge.formatDate)(this.serverTime.get()),r=Object(Ge.formatDate)(this.serverTime.get(),"HH:mm:ss [GMT]"),i=t;if("string"!=typeof t){var o=t.error,a=t.message;i=o&&o.error?o.error.message:a}this.messages.unshift({date:n,time:r,message:i,message_type:e}),this.messages=this.messages.slice(0)},r.clear=function(){this.messages=this.messages.slice(0,0)},e=t,(n=[{key:"serverTime",get:function(){return this.root_store.core.common.server_time}}])&&Ye(e.prototype,n),t}()).prototype,"messages",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Je(ze.prototype,"onLogSuccess",[Me],Object.getOwnPropertyDescriptor(ze.prototype,"onLogSuccess"),ze.prototype),Je(ze.prototype,"onError",[Le],Object.getOwnPropertyDescriptor(ze.prototype,"onError"),ze.prototype),Je(ze.prototype,"onNotify",[je],Object.getOwnPropertyDescriptor(ze.prototype,"onNotify"),ze.prototype),Je(ze.prototype,"pushMessage",[Fe],Object.getOwnPropertyDescriptor(ze.prototype,"pushMessage"),ze.prototype),Je(ze.prototype,"clear",[Ue],Object.getOwnPropertyDescriptor(ze.prototype,"clear"),ze.prototype),ze),Xe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==",Ze="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC6ElEQVR4Ae2bA6weURCFp7bd4NnaOyeo3Qa1zaiKXpzUbazajJ3UjVXbtm1rGqO6u/sv5uXf74t91nfvHEpISEhISAgO5PAwU4nlvANHcBmP8Z0/8xNcwRHegeWmkochhzRS0hDjsBF3IHb5Nm8yYwoakRZMBVbjA8Sb/I7XooziBbXMGD4I8S8fNGNRi+KgrBnm8hNIAD7EvLJmFCnVeCpeQAL0mZlG1SgauAhHICF4hIsofHgYPkJC8iMPoFCpjsWQcOUloV1KmXV5JyR8eWdmXQqekuZ8DBKNfKykOQVLWTauQyL0elk2BQfa4S4kYu+a9sFdPFchMXilsEUgty5OQmLyVEltShVeAYnR5ZQapg8kZvuRfwpb4FncAfgpWpJfsA2iwG3kD9MRokOnE/mgJi5DlHjZx6IHMyCKnOH5+PNtTQH4FtUkL/AUiDInkxdwWV2AK+Qe0w2iT9NN//M/mPdBeQP+rDLAp/IG5AYzHKJTM1z796dFXkFuwDmIUs+5Wn9B9OpisW96aw5gepMNzIQodqY9wDLVAZaRDd6nOQDvIxs4C3EjBYzLCGfJBt/WHIBv2wO8VB3gpT3AT9UBftgDfFEd4AvZwHPNAfCcbPAtzQH4Vho8RnW/yPaSDSyv6p8SszUH4FlkA/00B3D6ko2CRqoXNA3JDp+B6JTPkAXtt/Hy9PitUt4AnyD65M/lDcgd2KoywBZyC3dVGaBrGvxeV7zBwVO8bjE9UBXgIdUkb/Bs7d9AFlBL0zYr1STvOJ20BDAd03PUgAgt+SkkZp9Zhj20rw5Mnyo98MQrghg5OxFbgBOBTJAWtsAV7UN/Fkx7/WOXFpzMqAdfncxk9Pgvw987IOHLOzLrhtfcWKJ//N6CMxgftBcgLHARHwjl2B/gouhKQFOCLwFFX8Oap7+GZV/0jONDqRXheDxqxV5F5LX8XnkV0f5P24xVXAZ1j5P3Rx33Cz/BFT4aRh03ISEhISHhF9FSCRjypNzcAAAAAElFTkSuQmCC";function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Blockly.Blocks.procedures_defnoreturn={init:function(){var t=this;this.arguments=[],this.argument_var_models=[],this.jsonInit(this.definition()),this.getField("NAME").setValidator(Blockly.Procedures.rename);var e=new Blockly.FieldImage("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAQAAABIkb+zAAAC+0lEQVR4Ae2bA4xeURCFp7bdoGvjv3OC2m1Q24xW0cZJ3caqzdhJ3Vi1bdu2po1T3v95Nvu+E/N+z5hDMf4RExMTE4N0HmkqsZS34RAu4iG+8kd+hEs4xNuw1FTySKSTRvIbYyLW4xbEHr7JG8z47CakBVOMlXgHcRZ+w6tRSNGCOmY874e4D+83E1CHoqCwBWbzI4gPuY85hS0oVGrwDDyD+JgnZibVoHDgXByCBJBDnBvG8kfiPSSgvOfBFCg1sRASbHhRYIdSSn3eDgk+vD2lPvlPfks+AgknfCS/pd8XzTRchYSYq4Vp5B/ogNuQkHPbdPTv4LkMiSCXclr5curiOCSinMivS17hZZAIs5S8YfpDIs5Ack9OKzyJWoAfozW5BVsgCrKF3GG6QHQk0ZVcUBsXIe5Dv+FJ4aKLlx6UQtQICEodb3++qUmAb1BtcgJPh2gSgGAaOQEX1QlcouQxPSHqBMT0dH791yDg/H5Q1Ig/qhT4UNSIksGMgqgUEDPK+fOnKgFeRsmAM1oFcCap9y+IWgFJ4mXf9NMsYPqRDZRpFkCZXWCJaoElZIP3aBbgPWQDp50v0D2OBU+TDb6pWYBv2gWeqxZ4bhf4rlrgm13gk2qBT2QDTzUL4CnZ4BuaBfhGNbiM6r6R7SYbWFrVHyUqNAtwOdnAQM0CiQFkI7uJZoH8xmSHT2kV4FOUDFiqVQBLq8dnlaJG+KBRgD8WNaLkwGaVApsoWbiHSoEe1eDzuuIfHDzd6S+me6oE7lNtcgZXaBLgchczoZp+s1Jtck6iK0RHTJdqOWrwE7Tmx5CI8wStyT0YGLWA6V+lB554mR8jZ8ciEzjmywRpTitcUj30Z8d0VD52aSeREvbgayIlHj3+83TmbaEsf1tK/eCaG4uUj9/bSQzDO9UFCDucy/sC2fb7ODe8EtB0/0tA4dew5uivYdlfeibyAW9FOJ6EOpFXEXk1v1VeRbR/0zYTHJdBNZLI/KOO+4kf4RIfDqKOGxMTExMT8wNOZdb6YlKT2wAAAABJRU5ErkJggg==",24,24,"+",(function(){return t.onAddClick()}));this.appendDummyInput("ADD_ICON").appendField(e),this.setStatements(!0)},definition:function(){return{message0:Object(Ot.localize)("function %1 %2"),args0:[{type:"field_input",name:"NAME",text:""},{type:"field_label",name:"PARAMS",text:""}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:Object(Ot.localize)("Function with no return value"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:Object(Ot.localize)("Function"),description:Object(Ot.localize)("This block creates a function, which is a group of instructions that can be executed at any time. Place other blocks in here to perform any kind of action that you need in your strategy. When all the instructions in a function have been carried out, your bot will continue with the remaining blocks in your strategy. Click the “do something” field to give it a name of your choice. Click the plus icon to send a value (as a named variable) to your function.")}},onchange:function(t){var e=[Blockly.Events.BLOCK_DELETE,Blockly.Events.BLOCK_CREATE,Blockly.Events.BLOCK_CHANGE];this.workspace&&!this.workspace.isFlyout&&e.includes(t.type)&&t.type===Blockly.Events.BLOCK_CHANGE&&t.blockId===this.id&&"NAME"===t.name&&this.getProcedureCallers().forEach((function(e){e.setFieldValue(t.newValue,"NAME")}))},onAddClick:function(){var t=this;this.isInFlyout||setTimeout((function(){var e=Object(Ot.localize)("Specify a parameter name:");Blockly.prompt(e,"",(function(e){if(e){var n=Blockly.Variables.getOrCreateVariablePackage(t.workspace,null,e,"");n&&(t.arguments.push(e),t.argument_var_models.push(n),t.getField("PARAMS").setText(Object(Ot.localize)("with: ")+" "+t.arguments.join(", ")),t.getProcedureCallers().forEach((function(e){e.setProcedureParameters(t.arguments),e.initSvg(),e.render(!1)})))}}))}),200)},setStatements:function(t){this.hasStatements!==t&&(t?(this.appendStatementInput("STACK").appendField(""),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements=t)},updateParams:function(){var t="";this.arguments.length&&(t=Object(Ot.localize)("with:")+" "+this.arguments.join(", ")),Blockly.Events.disable();try{this.setFieldValue(t,"PARAMS")}finally{Blockly.Events.enable()}},mutationToDom:function(t){var e=this,n=document.createElement("mutation");return t&&n.setAttribute("name",this.getFieldValue("NAME")),this.argument_var_models.forEach((function(r,i){var o=document.createElement("arg");o.setAttribute("name",r.name),o.setAttribute("varid",r.getId()),t&&e.paramIds&&o.setAttribute("paramId",e.paramIds[i]),n.appendChild(o)})),this.hasStatements||n.setAttribute("statements","false"),n},domToMutation:function(t){var e=this;this.arguments=[],this.argument_var_models=[],t.childNodes.forEach((function(t){if("arg"===t.nodeName.toLowerCase()){var n=t.getAttribute("name"),r=t.getAttribute("varid")||t.getAttribute("varId"),i=Blockly.Variables.getOrCreateVariablePackage(e.workspace,r,n,"");e.arguments.push(n),null!==i?e.argument_var_models.push(i):console.log("Failed to create a variable with name "+n+", ignoring.")}})),this.updateParams(),this.setStatements("false"!==t.getAttribute("statements"))},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments,!1]},getProcedureCallers:function(){var t=this;return this.workspace.getAllBlocks(!1).filter((function(e){return e.type===t.callType&&e.data===t.id}))},getVars:function(){return this.arguments},getVarModels:function(){return this.argument_var_models},customContextMenu:function(t){var e=this;if(!this.isInFlyout){var n={enabled:!0},r=this.getFieldValue("NAME");n.text=Object(Ot.localize)('Create "%1"').replace("%1",r);var i=document.createElement("mutation");i.setAttribute("name",r),this.arguments.forEach((function(t){var e=document.createElement("arg");e.setAttribute("name",t),i.appendChild(e)}));var o=document.createElement("block");o.setAttribute("type",this.callType),o.appendChild(i),n.callback=Blockly.ContextMenu.callbackFactory(this,o),t.push(n),this.isCollapsed()||this.argument_var_models.forEach((function(n){var r={enabled:!0};r.text=Object(Ot.localize)('Create "get %1"').replace("%1",n.name);var i=Blockly.Variables.generateVariableFieldDom(n),o=document.createElement("block");o.setAttribute("type","variables_get"),o.appendChild(i),r.callback=Blockly.ContextMenu.callbackFactory(e,o),t.push(r)}))}},callType:"procedures_callnoreturn"},Blockly.JavaScript.procedures_defnoreturn=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE),n=Blockly.JavaScript.statementToCode(t,"STACK");if(Blockly.JavaScript.STATEMENT_PREFIX){var r=t.id.replace(/\$/g,"$$$$");n=Blockly.JavaScript.prefixLines(Blockly.JavaScript.STATEMENT_PREFIX.replace(/%1/g,"'"+r+"'"),Blockly.JavaScript.INDENT)+n}Blockly.JavaScript.INFINITE_LOOP_TRAP&&(n=Blockly.JavaScript.INFINITE_LOOP_TRAP.replace(/%1/g,"'"+t.id+"'")+n);var i=Blockly.JavaScript.valueToCode(t,"RETURN",Blockly.JavaScript.ORDER_NONE)||"";i&&(i=Blockly.JavaScript.INDENT+"return "+i+";\n");var o=t.arguments.map((function(t){return Blockly.JavaScript.variableDB_.getName(t,Blockly.Variables.NAME_TYPE)})),a=Blockly.JavaScript.scrub_(t,"\n    function "+e+"("+o.join(", ")+") {\n        "+n+"\n        "+i+"\n    }\n");return Blockly.JavaScript.definitions_["%"+e]=a,null},Blockly.Blocks.procedures_defreturn={init:function(){var t=this;this.arguments=[],this.argument_var_models=[],this.jsonInit(this.definition()),this.getField("NAME").setValidator(Blockly.Procedures.rename);var e=new Blockly.FieldImage(Xe,24,24,"+",(function(){return t.onAddClick()}));this.appendDummyInput("ADD_ICON").appendField(e),this.moveInputBefore("ADD_ICON","RETURN"),this.setStatements(!0)},definition:function(){return{message0:Object(Ot.localize)("function %1 %2 %3"),message1:"return %1",args0:[{type:"field_input",name:"NAME",text:""},{type:"field_label",name:"PARAMS",text:""},{type:"input_dummy"}],args1:[{type:"input_value",name:"RETURN",check:null,align:Blockly.ALIGN_RIGHT}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:Object(Ot.localize)("Function that returns a value"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:Object(Ot.localize)("Function that returns a value"),description:Object(Ot.localize)("This block is similar to the one above, except that this returns a value. The returned value can be assigned to a variable of your choice.")}},onAddClick:Blockly.Blocks.procedures_defnoreturn.onAddClick,onchange:Blockly.Blocks.procedures_defnoreturn.onchange,setStatements:Blockly.Blocks.procedures_defnoreturn.setStatements,updateParams:Blockly.Blocks.procedures_defnoreturn.updateParams,mutationToDom:Blockly.Blocks.procedures_defnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_defnoreturn.domToMutation,getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments,!0]},getProcedureCallers:Blockly.Blocks.procedures_defnoreturn.getProcedureCallers,getVars:Blockly.Blocks.procedures_defnoreturn.getVars,getVarModels:Blockly.Blocks.procedures_defnoreturn.getVarModels,renameVarById:Blockly.Blocks.procedures_defnoreturn.renameVarById,updateVarName:Blockly.Blocks.procedures_defnoreturn.updateVarName,displayRenamedVar:Blockly.Blocks.procedures_defnoreturn.displayRenamedVar,customContextMenu:Blockly.Blocks.procedures_defnoreturn.customContextMenu,callType:"procedures_callreturn",registerWorkspaceListener:Blockly.Blocks.procedures_defnoreturn.registerWorkspaceListener},Blockly.JavaScript.procedures_defreturn=Blockly.JavaScript.procedures_defnoreturn,Blockly.Blocks.procedures_callnoreturn={init:function(){this.arguments=[],this.argument_var_models=[],this.previousDisabledState=!1,this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:this.id},{type:"input_dummy",name:"TOPROW"}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Custom function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:Object(Ot.localize)("Custom function"),description:""}},onchange:function(t){if(this.workspace&&!this.workspace.isFlyout&&t.recordUndo)if(t.type===Blockly.Events.BLOCK_CREATE&&-1!==t.ids.indexOf(this.id)){var e=this.getProcedureCall(),n=Blockly.Procedures.getDefinition(e,this.workspace);if(!n||n.type===this.defType&&JSON.stringify(n.arguments)===JSON.stringify(this.arguments)||(n=null),n)return void(this.data=n.id);Blockly.Events.setGroup(t.group);var r=document.createElement("xml"),i=document.createElement("block");i.setAttribute("type",this.defType);var o=this.getRelativeToSurfaceXY(),a=o.x+Blockly.SNAP_RADIUS*(this.RTL?-1:1),s=o.y+2*Blockly.SNAP_RADIUS;i.setAttribute("x",a),i.setAttribute("y",s);var c=this.mutationToDom();i.appendChild(c);var u=document.createElement("field");u.setAttribute("name","NAME"),u.appendChild(document.createTextNode(this.getProcedureCall())),i.appendChild(u),r.appendChild(i),Blockly.Xml.domToWorkspace(r,this.workspace),Blockly.Events.setGroup(!1);var l=Blockly.Procedures.getDefinition(e,this.workspace);this.data=l.id}else if(t.type===Blockly.Events.BLOCK_DELETE){var h=this.getProcedureCall();Blockly.Procedures.getDefinition(h,this.workspace)||(Blockly.Events.setGroup(t.group),this.dispose(!0,!1),Blockly.Events.setGroup(!1))}else if(t.type===Blockly.Events.BLOCK_CHANGE&&"disabled"===t.element){var p=this.getProcedureCall(),f=Blockly.Procedures.getDefinition(p,this.workspace);if(f&&f.id===t.blockId){var d=Blockly.Events.getGroup();d&&console.log("Saw an existing group while responding to a definition change"),Blockly.Events.setGroup(t.group),t.newValue?(this.previousDisabledState=this.disabled,this.setDisabled(!0)):this.setDisabled(this.previousDisabledState),Blockly.Events.setGroup(d)}}},getProcedureDefinition:function(t){return this.workspace.getTopBlocks(!1).find((function(e){if(e.getProcedureDef){var n=e.getProcedureDef();return n&&Blockly.Names.equals(n[0],t)}return!1}))},getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(t,e){Blockly.Names.equals(t,this.getProcedureCall())&&this.setFieldValue(e,"NAME")},setProcedureParameters:function(t){var e=this;this.arguments=[].concat(t),this.argument_var_models=this.arguments.map((function(t){return Blockly.Variables.getOrCreateVariablePackage(e.workspace,null,t,"")})),this.updateShape()},updateShape:function(){var t=this;this.arguments.forEach((function(e,n){var r=t.getField("ARGNAME"+n);if(r){Blockly.Events.disable();try{r.setValue(e)}finally{Blockly.Events.enable()}}else r=new Blockly.FieldLabel(e),t.appendValueInput("ARG"+n).appendField(r,"ARGNAME"+n).init()}));for(var e=this.arguments.length;this.getInput("ARG"+e);)this.removeInput("ARG"+e),e++;var n=this.getInput("TOPROW");n&&(this.arguments.length?this.getField("WITH")||(n.appendField(Object(Ot.localize)("with:"),"WITH"),n.init()):this.getField("WITH")&&n.removeField("WITH"))},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("name",this.getProcedureCall()),this.arguments.forEach((function(e){var n=document.createElement("arg");n.setAttribute("name",e),t.appendChild(n)})),t},domToMutation:function(t){var e=t.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e);var n=[],r=[];t.childNodes.forEach((function(t){"arg"===t.nodeName.toLowerCase()&&(n.push(t.getAttribute("name")),r.push(t.getAttribute("paramId")))})),this.setProcedureParameters(n,r)},getVarModels:function(){return this.argument_var_models},customContextMenu:function(t){var e=this,n=this.getProcedureCall(),r=this.workspace,i={enabled:!0};i.text=Object(Ot.localize)("Highlight function definition"),i.callback=function(){var t=e.getProcedureDefinition(n);t&&(r.centerOnBlock(t.id),t.select())},t.push(i)},defType:"procedures_defnoreturn"},Blockly.JavaScript.procedures_callnoreturn=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE)+"("+t.arguments.map((function(e,n){return Blockly.JavaScript.valueToCode(t,"ARG"+n,Blockly.JavaScript.ORDER_COMMA)||"null"})).join(", ")+");\n"},Blockly.Blocks.procedures_callreturn={init:function(){this.arguments=[],this.previousDisabledState=!1,this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_label",name:"NAME",text:this.id},{type:"input_dummy",name:"TOPROW"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:Object(Ot.localize)("Custom function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:Object(Ot.localize)("Custom function"),description:""}},onchange:Blockly.Blocks.procedures_callnoreturn.onchange,getProcedureDefinition:Blockly.Blocks.procedures_callnoreturn.getProcedureDefinition,getProcedureCall:Blockly.Blocks.procedures_callnoreturn.getProcedureCall,renameProcedure:Blockly.Blocks.procedures_callnoreturn.renameProcedure,setProcedureParameters:Blockly.Blocks.procedures_callnoreturn.setProcedureParameters,updateShape:Blockly.Blocks.procedures_callnoreturn.updateShape,mutationToDom:Blockly.Blocks.procedures_callnoreturn.mutationToDom,domToMutation:Blockly.Blocks.procedures_callnoreturn.domToMutation,getVarModels:Blockly.Blocks.procedures_callnoreturn.getVarModels,customContextMenu:Blockly.Blocks.procedures_callnoreturn.customContextMenu,defType:"procedures_defreturn"},Blockly.JavaScript.procedures_callreturn=function(t){return[Blockly.JavaScript.variableDB_.getName(t.getFieldValue("NAME"),Blockly.Procedures.NAME_TYPE)+"("+t.arguments.map((function(e,n){return Blockly.JavaScript.valueToCode(t,"ARG"+n,Blockly.JavaScript.ORDER_COMMA)||"null"})).join(", ")+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},n(32),Blockly.Blocks.procedures_ifreturn={init:function(){this.hasReturnValue=!0,this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("if %1 return %2"),args0:[{type:"input_value",name:"CONDITION"},{type:"input_value",name:"VALUE"}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Prematurely returns a value within a function"),category:Blockly.Categories.Functions}},meta:function(){return{display_name:Object(Ot.localize)("Conditional return"),description:Object(Ot.localize)("This block returns a value when a condition is true. Use this block within either of the function blocks above.")}},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("value",Number(this.hasReturnValue)),t},domToMutation:function(t){var e=t.getAttribute("value");this.hasReturnValue="1"===e,this.hasReturnValue||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Object(Ot.localize)("return")),this.initSvg(),this.render())},onchange:function(){var t=this;if(this.workspace.isDragging&&!this.workspace.isDragging()){var e=!1,n=this;do{if(-1!==this.FUNCTION_TYPES.indexOf(n.type)){e=!0;break}n=n.getSurroundParent()}while(n);if(e){var r=function(){t.initSvg(),t.render()};"procedures_defnoreturn"===n.type&&this.hasReturnValue?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(Object(Ot.localize)("return")),r(),this.hasReturnValue=!1):"procedures_defreturn"!==n.type||this.hasReturnValue||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(Object(Ot.localize)("return")),r(),this.hasReturnValue=!0),this.isInFlyout||this.setDisabled(!1)}else this.isInFlyout||this.getInheritedDisabled()||this.setDisabled(!0)}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},Blockly.JavaScript.procedures_ifreturn=function(t){return"\n    if ("+(Blockly.JavaScript.valueToCode(t,"CONDITION",Blockly.JavaScript.ORDER_NONE)||"false")+") {\n        "+(t.hasReturnValue?"return "+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_NONE)||"null")+";\n":"return;\n")+"\n    }\n"},Blockly.Blocks.lists_create_with={protected_statements:["STACK"],init:function(){var t=this;this.jsonInit(this.definition());var e=new Blockly.FieldImage(Xe,25,25,"",(function(){return t.onIconClick()}));this.appendDummyInput("ADD_ICON").appendField(e),this.moveInputBefore("ADD_ICON","STACK")},definition:function(){return{message0:Object(Ot.localize)("set %1 to create list with"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:Object(Ot.localize)("list")}],args1:[{type:"input_statement",name:"STACK"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("This block creates a list with strings and numbers."),category:Blockly.Categories.List}},meta:function(){return{display_name:Object(Ot.localize)("Create list"),description:Object(Ot.localize)("This block creates a list with strings and numbers.")}},onIconClick:function(){if(this.workspace&&!this.isInFlyout){var t=this.workspace.newBlock("lists_statement");t.requiredParentId=this.id,t.setMovable(!1),t.initSvg(),t.render(),this.getLastConnectionInStatement("STACK").connect(t.previousConnection)}},onchange:function(t){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()&&t.type===Blockly.Events.END_DRAG)for(var e=this.getInputTargetBlock("STACK");null!==e;)"lists_statement"!==e.type&&e.unplug(!1),e=e.getNextBlock()}},Blockly.JavaScript.lists_create_with=function(t){for(var e=t.getFieldValue("VARIABLE"),n=Blockly.JavaScript.variableDB_.getName(e,Blockly.Variables.NAME_TYPE),r=[],i=t.getInputTargetBlock("STACK");null!==i;){var o=Blockly.JavaScript[i.type](i);Array.isArray(o)&&2===o.length?r.push(o[0]):r.push(o),i=i.getNextBlock()}return n+" = ["+r.join(", ")+"];\n"},Blockly.Blocks.lists_repeat={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("create list with item %1 repeated %2 times"),args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Creates a list by repeating a given item"),category:Blockly.Categories.List}},meta:function(){return{display_name:Object(Ot.localize)("Repeat an item"),description:Object(Ot.localize)("Creates a list with a given item repeated for a specific number of times.")}}},Blockly.JavaScript.lists_repeat=function(t){return[Blockly.JavaScript.provideFunction_("listsRepeat",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(value, n) {\n            var array = [];\n            for (var i = 0; i < n; i++) {\n                array[i] = value;\n            }\n            return array;\n        }"])+"("+(Blockly.JavaScript.valueToCode(t,"ITEM",Blockly.JavaScript.ORDER_COMMA)||"null")+", "+(Blockly.JavaScript.valueToCode(t,"NUM",Blockly.JavaScript.ORDER_COMMA)||"0")+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_length={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("length of %1"),args0:[{type:"input_value",name:"VALUE"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you the total number of items in a given list."),category:Blockly.Categories.List}},meta:function(){return{display_name:Object(Ot.localize)("List Length"),description:Object(Ot.localize)("This block gives you the total number of items in a given list.")}}},Blockly.JavaScript.lists_length=function(t){return[(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]")+".length",Blockly.JavaScript.ORDER_MEMBER]},Blockly.Blocks.lists_isEmpty={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("list %1 is empty"),args0:[{type:"input_value",name:"VALUE",check:["Array"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Checks if a given list is empty"),category:Blockly.Categories.List}},meta:function(){return{display_name:Object(Ot.localize)("Is list empty?"),description:Object(Ot.localize)("This block checks if a given list is empty. It returns “True” if the list is empty, “False” if otherwise.")}}},Blockly.JavaScript.lists_isEmpty=function(t){var e=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"[]";return[-1!==t.workspace.getAllVariables().findIndex((function(t){return t.name===e}))?"!"+e+" || !"+e+".length":"!"+e+".length",Blockly.JavaScript.ORDER_LOGICAL_NOT]},Blockly.Blocks.lists_indexOf={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("in list %1 find %2 occurence of item %3"),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"END",options:[[Object(Ot.localize)("first"),"FIRST"],[Object(Ot.localize)("last"),"LAST"]]},{type:"input_value",name:"FIND"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you the position of an item in a given list."),category:Blockly.Categories.List}},meta:function(){return{display_name:Object(Ot.localize)("List item position"),description:Object(Ot.localize)("This block gives you the position of an item in a given list.")}}},Blockly.JavaScript.lists_indexOf=function(t){var e="FIRST"===t.getFieldValue("END")?"indexOf":"lastIndexOf",n=Blockly.JavaScript.valueToCode(t,"FIND",Blockly.JavaScript.ORDER_NONE)||"''",r=(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''")+"."+e+"("+n+")";return t.workspace.options.oneBasedIndex?[r+" + 1",Blockly.JavaScript.ORDER_ADDITION]:[r,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_getIndex={init:function(){var t=this;this.MODE_OPTIONS=[[Object(Ot.localize)("get"),"GET"],[Object(Ot.localize)("get and remove"),"GET_REMOVE"],[Object(Ot.localize)("remove"),"REMOVE"]],this.WHERE_OPTIONS=[["#","FROM_START"],[Object(Ot.localize)("# from end"),"FROM_END"],[Object(Ot.localize)("first"),"FIRST"],[Object(Ot.localize)("last"),"LAST"],[Object(Ot.localize)("random"),"RANDOM"]];var e=new Blockly.FieldDropdown(this.MODE_OPTIONS,(function(e){var n="REMOVE"===e;t.updateStatement(n)}));this.appendValueInput("VALUE").setCheck("Array").appendField(Object(Ot.localize)("in list")),this.appendDummyInput().appendField(e,"MODE"),this.appendDummyInput("AT"),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setTooltip("This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list."),this.setOutput(!0,null),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.updateAt(!0)},meta:function(){return{display_name:Object(Ot.localize)("Get list item"),description:Object(Ot.localize)("This block gives you the value of a specific item in a list, given the position of the item. It can also remove the item from the list."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation"),e=!this.outputConnection,n=this.getInput("AT").type===Blockly.INPUT_VALUE;return t.setAttribute("statement",e),t.setAttribute("at",n),t},domToMutation:function(t){var e="true"===t.getAttribute("statement");this.updateStatement(e);var n="false"!==t.getAttribute("at");this.updateAt(n)},updateStatement:function(t){t!==!this.outputConnection&&(this.unplug(!0,!0),this.setOutput(!t),this.setPreviousStatement(t),this.setNextStatement(t),this.initSvg(),this.render(!1))},updateAt:function(t){var e=this;this.removeInput("AT",!0),t?this.appendValueInput("AT").setCheck("Number"):this.appendDummyInput("AT");var n=new Blockly.FieldDropdown(this.WHERE_OPTIONS,(function(n){var r=["FROM_START","FROM_END"].includes(n);if(r!==t)return e.updateAt(r),e.setFieldValue(n,"WHERE"),null}));this.getInput("AT").appendField(n,"WHERE"),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_getIndex=function(t){var e,n,r=t.getFieldValue("MODE")||"GET",i=t.getFieldValue("WHERE")||"FIRST",o="RANDOM"===i?Blockly.JavaScript.ORDER_COMMA:Blockly.JavaScript.ORDER_MEMBER,a=Blockly.JavaScript.valueToCode(t,"VALUE",o)||"[]";if("FIRST"===i){if("GET"===r)e=a+"[0]",n=Blockly.JavaScript.ORDER_MEMBER;else if("GET_REMOVE"===r)e=a+".shift()",n=Blockly.JavaScript.ORDER_MEMBER;else if("REMOVE"===r)return a+".shift();\n"}else if("LAST"===i){if("GET"===r)e=a+".slice(-1)[0]",n=Blockly.JavaScript.ORDER_MEMBER;else if("GET_REMOVE"===r)e=a+".pop()",n=Blockly.JavaScript.ORDER_MEMBER;else if("REMOVE"===r)return a+".pop();\n"}else if("FROM_START"===i){var s=Blockly.JavaScript.getAdjusted(t,"AT");if("GET"===r)e=a+"["+s+"]",n=Blockly.JavaScript.ORDER_MEMBER;else if("GET_REMOVE"===r)e=a+".splice("+s+", 1)[0]",n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("REMOVE"===r)return a+".splice("+s+", 1);\n"}else if("FROM_END"===i){var c=Blockly.JavaScript.getAdjusted(t,"AT",1,!0);if("GET"===r)e=a+".slice("+c+")[0]",n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("GET_REMOVE"===r)e=a+".splice("+c+", 1)[0]",n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("REMOVE"===r)return a+".splice("+c+", 1);\n"}else if("RANDOM"===i)if(e=Blockly.JavaScript.provideFunction_("listsGetRandomItem",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list, remove) {\n                var x = Math.floor(Math.random() * list.length);\n                if (remove) {\n                    return list.splice(x, 1)[0];\n                } else {\n                    return list[x];\n                }\n            }"])+"("+a+", "+("GET"!==r)+")","GET"===r||"GET_REMOVE"===r)n=Blockly.JavaScript.ORDER_FUNCTION_CALL;else if("REMOVE"===r)return e+";\n";return[e,n]},Blockly.Blocks.lists_setIndex={init:function(){this.MODE_OPTIONS=[[Object(Ot.localize)("set"),"SET"],[Object(Ot.localize)("insert at"),"INSERT"]],this.WHERE_OPTIONS=[[Object(Ot.localize)("#"),"FROM_START"],[Object(Ot.localize)("# from end"),"FROM_END"],[Object(Ot.localize)("first"),"FIRST"],[Object(Ot.localize)("last"),"LAST"],[Object(Ot.localize)("random"),"RANDOM"]],this.appendValueInput("LIST").setCheck("Array").appendField(Object(Ot.localize)("in list")),this.appendDummyInput().appendField(new Blockly.FieldDropdown(this.MODE_OPTIONS),"MODE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(Object(Ot.localize)("as")),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setPreviousStatement(!0,null),this.setNextStatement(!0,null),this.setTooltip(Object(Ot.localize)("This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position.")),this.updateAt(!0)},meta:function(){return{display_name:Object(Ot.localize)("Set list item"),description:Object(Ot.localize)("This block replaces a specific item in a list with another given item. It can also insert the new item in the list at a specific position."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation"),e=this.getInput("AT").type===Blockly.INPUT_VALUE;return t.setAttribute("at",e),t},domToMutation:function(t){var e="false"!==t.getAttribute("at");this.updateAt(e)},updateAt:function(t){var e=this;this.removeInput("AT",!0),t?this.appendValueInput("AT").setCheck("Number"):this.appendDummyInput("AT");var n=new Blockly.FieldDropdown(this.WHERE_OPTIONS,(function(n){var r=["FROM_START","FROM_END"].includes(n);if(r!==t)return e.updateAt(r),e.setFieldValue(n,"WHERE"),null}));this.moveInputBefore("AT","TO"),this.getInput("AT").appendField(n,"WHERE"),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_setIndex=function(t){var e,n=t.getFieldValue("MODE")||"SET",r=t.getFieldValue("WHERE")||"FIRST",i=Blockly.JavaScript.valueToCode(t,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"null",o=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",a=function(){if(o.match(/^\w+$/))return"";var t=Blockly.JavaScript.variableDB_.getDistinctName("tmpList",Blockly.Variables.NAME_TYPE),e="var "+t+" = "+o+";\n";return o=t,e};if("FIRST"===r)"SET"===n?e=o+"[0] = "+i+";\n":"INSERT"===n&&(e=o+".unshift("+i+");\n");else if("LAST"===r)"SET"===n?(e=a(),e+=o+"["+o+".length - 1] = "+i+";\n"):"INSERT"===n&&(e=o+".push("+i+");\n");else if("FROM_START"===r){var s=Blockly.JavaScript.getAdjusted(t,"AT");"SET"===n?e=o+"["+s+"] = "+i+";\n":"INSERT"===n&&(e=o+".splice("+s+", 0, "+i+");\n")}else if("FROM_END"===r){var c=Blockly.JavaScript.getAdjusted(t,"AT",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION);e=a(),"SET"===n?e=o+"["+o+".length - "+c+"] = "+i+";\n":"INSERT"===n&&(e=o+".splice("+o+".length - "+c+", 0, "+i+");\n")}else if("RANDOM"===r){e=a();var u=Blockly.JavaScript.variableDB_.getDistinctName("tmpX",Blockly.Variables.NAME_TYPE);e+="var "+u+" = Math.floor(Math.random() * "+o+".length);\n","SET"===n?e+=o+"["+u+"] = "+i+";\n":"INSERT"===n&&(e+=o+".splice("+u+", 0, "+i+");\n")}return e},Blockly.Blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[Object(Ot.localize)("get sub-list from #"),"FROM_START"],[Object(Ot.localize)("get sub-list from # from end"),"FROM_END"],[Object(Ot.localize)("get sub-list from first"),"FIRST"]],this.WHERE_OPTIONS_2=[[Object(Ot.localize)("#"),"FROM_START"],[Object(Ot.localize)("# from end"),"FROM_END"],[Object(Ot.localize)("last"),"LAST"]],this.appendValueInput("LIST").appendField(Object(Ot.localize)("in list")),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setOutput(!0,null),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setTooltip(Object(Ot.localize)("This block creates a list of items from an existing list, using specific item positions.")),this.updateAt(1,!0),this.updateAt(2,!0)},meta:function(){return{display_name:Object(Ot.localize)("Get sub-list"),description:Object(Ot.localize)("This block creates a list of items from an existing list, using specific item positions."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation"),e=this.getInput("AT1").type===Blockly.INPUT_VALUE,n=this.getInput("AT2").type===Blockly.INPUT_VALUE;return t.setAttribute("at1",e),t.setAttribute("at2",n),t},domToMutation:function(t){var e="true"===t.getAttribute("at1"),n="true"===t.getAttribute("at2");this.updateAt(1,e),this.updateAt(2,n)},updateAt:function(t,e){var n=this;this.removeInput("AT"+t),e?this.appendValueInput("AT"+t).setCheck("Number"):this.appendDummyInput("AT"+t);var r=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(r){var i=["FROM_START","FROM_END"].includes(r);if(i!==e)return n.updateAt(t,i),n.setFieldValue(r,"WHERE"+t),null}));this.getInput("AT"+t).appendField(r,"WHERE"+t),1===t&&this.moveInputBefore("AT1","AT2"),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_getSublist=function(t){var e,n,r,i=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]",o=t.getFieldValue("WHERE1"),a=t.getFieldValue("WHERE2");if("FIRST"===o&&"LAST"===a)r=i+".slice(0)";else if(i.match(/^\w+$/)||"FROM_END"!==o&&"FROM_START"===a)"FROM_START"===o?e=Blockly.JavaScript.getAdjusted(t,"AT1"):"FROM_END"===o?e=i+".length - "+(e=Blockly.JavaScript.getAdjusted(t,"AT1",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION)):"FIRST"===o&&(e="0"),"FROM_START"===a?n=Blockly.JavaScript.getAdjusted(t,"AT2",1):"FROM_END"===a?n=i+".length - "+(n=Blockly.JavaScript.getAdjusted(t,"AT2",0,!1,Blockly.JavaScript.ORDER_SUBTRACTION)):"LAST"===a&&(n=i+".length"),r=i+".slice("+e+", "+n+")";else{e=Blockly.JavaScript.getAdjusted(t,"AT1"),n=Blockly.JavaScript.getAdjusted(t,"AT2");var s={FROM_START:"FromStart",FROM_END:"FromEnd",FIRST:"First",LAST:"Last"},c=function(t,e,n){return"FIRST"===e?"0":"FROM_END"===e?t+".length - 1 - "+n:"LAST"===e?t+".length - 1":""+n},u="FROM_END"===o||"FROM_START"===o,l="FROM_END"===a||"FROM_START"===a;r=Blockly.JavaScript.provideFunction_("subsequence"+s[o]+s[a],["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(\n                    sequence"+(u?", at1":"")+(l?", at2":"")+"\n                ) {\n                    var start = "+c("sequence",o,"at1")+";\n                    var end = "+c("sequence",a,"at2")+" + 1;\n\n                    return sequence.slice(start, end);\n                }"])+"("+i+(u?", "+e:"")+(l?", "+n:"")+")"}return[r,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_split={init:function(){var t=this,e=new Blockly.FieldDropdown([[Object(Ot.localize)("make list from text"),"SPLIT"],[Object(Ot.localize)("make text from list"),"JOIN"]],(function(e){return t.updateType(e)}));this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField("","SPACE1").appendField(Object(Ot.localize)("with delimiter"),"DELIM_LABEL"),this.appendDummyInput().appendField("","SPACE2"),this.setOutput(!0,"Array"),this.setOutputShape(Blockly.OUTPUT_SHAPE_ROUND),this.setColourFromRawValues_(Blockly.Colours.Base.colour,Blockly.Colours.Base.colourSecondary,Blockly.Colours.Base.colourTertiary),this.setTooltip(Object(Ot.localize)("This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text."))},meta:function(){return{display_name:Object(Ot.localize)("Create list from text"),description:Object(Ot.localize)("This block creates a list from a given string of text, splitting it with the given delimiter. It can also join items in a list into a string of text."),category:Blockly.Categories.List}},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("mode",this.getFieldValue("MODE")),t},domToMutation:function(t){this.updateType(t.getAttribute("mode"))},updateType:function(t){var e=this.getInput("DELIM"),n=this.getField("SPACE1");"SPLIT"===t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String"),n||e.insertFieldAt(0,"","SPACE1")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck(null),n&&e.removeField("SPACE1")),this.initSvg(),this.render(!1)}},Blockly.JavaScript.lists_split=function(t){var e,n=Blockly.JavaScript.valueToCode(t,"INPUT",Blockly.JavaScript.ORDER_MEMBER),r=Blockly.JavaScript.valueToCode(t,"DELIM",Blockly.JavaScript.ORDER_NONE)||"''",i=t.getFieldValue("MODE");return"SPLIT"===i?e=(n||"''")+".split("+r+")":"JOIN"===i&&(e=(n||"[]")+".join("+r+")"),[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_sort={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("sort %1 %2 %3"),args0:[{type:"field_dropdown",name:"TYPE",options:[[Object(Ot.localize)("numeric"),"NUMERIC"],[Object(Ot.localize)("alphabetic"),"TEXT"]]},{type:"field_dropdown",name:"DIRECTION",options:[[Object(Ot.localize)("ascending"),"1"],[Object(Ot.localize)("descending"),"-1"]]},{type:"input_value",name:"LIST"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Sorts the items in a given list"),category:Blockly.Categories.List}},meta:function(){return{display_name:Object(Ot.localize)("Sort list"),description:Object(Ot.localize)("Sorts the items in a given list, by their numeric or alphabetical value, in either ascending or descending order.")}}},Blockly.JavaScript.lists_sort=function(t){var e=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]",n="1"===t.getFieldValue("DIRECTION")?1:-1,r=t.getFieldValue("TYPE");return[e+".slice(0).sort("+Blockly.JavaScript.provideFunction_("listsGetSortCompare",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(type, direction) {\n            var compareFuncs = {\n                NUMERIC: function(a, b) {\n                    return parseFloat(a) - parseFloat(b);\n                },\n                TEXT: function(a, b) {\n                    return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1;\n                }\n            };\n\n            return function(a, b) {\n                return compareFuncs[type](a, b) * direction; \n            }\n        }"])+'("'+r+'", '+n+"))",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.lists_statement={init:function(){var t=this;this.requiredParentId="",this.jsonInit(this.definition());var e=new Blockly.FieldImage(Ze,25,25,"",(function(){return t.onIconClick()}));this.appendDummyInput("REMOVE_ICON").appendField(e)},definition:function(){return{message0:"%1",args0:[{type:"input_value",name:"VALUE"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("List Statement Tooltip"),category:Blockly.Categories.List}},meta:function(){return{display_name:Object(Ot.localize)("List Statement"),description:Object(Ot.localize)("List Statement Description")}},onIconClick:function(){this.workspace&&!this.isInFlyout&&(this.unplug(!0),this.dispose())},onchange:function(t){var e=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){var n=this.getSurroundParent();if(t.type===Blockly.Events.END_DRAG)if(this.requiredParentId||"lists_create_with"!==n.type){if(!n||n.id!==this.requiredParentId){Blockly.Events.disable(),this.unplug(!1);var r=this.workspace.getAllBlocks().find((function(t){return t.id===e.requiredParentId}));r?r.getLastConnectionInStatement("STACK").connect(this.previousConnection):this.dispose(),Blockly.Events.enable()}}else this.requiredParentId=n.id}}},Blockly.JavaScript.lists_statement=function(t){return[Blockly.JavaScript.valueToCode(t,"VALUE")||"null",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.controls_repeat_ext={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("repeat %1 times"),args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:Object(Ot.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Repeats inside instructions specified number of times"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:Object(Ot.localize)("Repeat (2)"),description:Object(Ot.localize)("This block is similar to the block above, except that the number of times it repeats is determined by a given variable.")}}},Blockly.JavaScript.controls_repeat_ext=function(t){var e;e=t.getField("TIMES")?String(Number(t.getFieldValue("TIMES"))):Blockly.JavaScript.valueToCode(t,"TIMES")||"0";var n=Blockly.JavaScript.statementToCode(t,"DO"),r="",i=Blockly.JavaScript.variableDB_.getDistinctName("count",Blockly.Variables.NAME_TYPE),o=e;return e.match(/^\w+$/)||Blockly.isNumber(e)||(r+="var "+(o=Blockly.JavaScript.variableDB_.getDistinctName("repeat_end",Blockly.Variables.NAME_TYPE))+" = "+e+";\n"),r+"\n    for (var "+i+" = 0; "+i+" < "+o+"; "+i+"++) {\n        "+n+"\n    }\n"},Blockly.Blocks.controls_repeat={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"controls_repeat",message0:Object(Ot.localize)("repeat %1 times"),args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:Object(Ot.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Repeats inside instructions specified number of times"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:Object(Ot.localize)("Repeat (1)"),description:Object(Ot.localize)("This block repeats the instructions contained within for a specific number of times.")}}},Blockly.JavaScript.controls_repeat=Blockly.JavaScript.controls_repeat_ext,Blockly.Blocks.controls_whileUntil={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("repeat %1 %2"),args0:[{type:"field_dropdown",name:"MODE",options:[[Object(Ot.localize)("while"),"WHILE"],[Object(Ot.localize)("until"),"UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:Object(Ot.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("This block repeats instructions as long as a given condition is true"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:Object(Ot.localize)("Repeat While/Until"),description:Object(Ot.localize)("This block repeats instructions as long as a given condition is true.")}}},Blockly.JavaScript.controls_whileUntil=function(t){var e=Blockly.JavaScript.statementToCode(t,"DO"),n="UNTIL"===t.getFieldValue("MODE"),r=n?Blockly.JavaScript.ORDER_LOGICAL_NOT:Blockly.JavaScript.ORDER_NONE,i=Blockly.JavaScript.valueToCode(t,"BOOL",r)||"false";n&&(i="!"+i);var o=Blockly.JavaScript.variableDB_.getDistinctName("maxLoops",Blockly.Variables.NAME_TYPE),a=Blockly.JavaScript.variableDB_.getDistinctName("currentLoop",Blockly.Variables.NAME_TYPE);return"\n        var "+o+" = 10000;\n        var "+a+" = 0;\n\n        while ("+i+") {\n            if ("+a+" > "+o+') {\n                throw new Error("'+Object(Ot.localize)("Infinite loop detected")+'");\n            } else {\n                '+a+"++;\n            }\n            \n            "+e+"\n        }\n"},Blockly.Blocks.controls_for={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("count with %1 from %2 to %3 by %4"),args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"},{type:"input_value",name:"BY",check:"Number"}],message1:Object(Ot.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list."),category:Blockly.Categories.Loop}},meta:function(){return{display_name:Object(Ot.localize)("Iterate (1)"),description:Object(Ot.localize)("This block uses the variable “i” to control the iterations. With each iteration, the value of “i” is determined by the items in a given list.")}}},Blockly.JavaScript.controls_for=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),n=Blockly.JavaScript.valueToCode(t,"FROM",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",r=Blockly.JavaScript.valueToCode(t,"TO",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",i=Blockly.JavaScript.valueToCode(t,"BY",Blockly.JavaScript.ORDER_ASSIGNMENT)||"1",o=Blockly.JavaScript.statementToCode(t,"DO");o=Blockly.JavaScript.addLoopTrap(o,t.id);var a="";if(Blockly.isNumber(n)&&Blockly.isNumber(r)&&Blockly.isNumber(i)){var s=parseFloat(n)<=parseFloat(r);a="\n        for ("+e+" = "+n+"; "+e+" "+(s?"<=":">=")+" "+r+"; "+e+" "+(s?"+=":"-=")+" "+Math.abs(parseFloat(i))+") {\n            "+o+"\n        }\n"}else{var c=n;n.match(/^\w+$/)||Blockly.isNumber(n)||(a="var "+(c=Blockly.JavaScript.variableDB_.getDistinctName(e+"_start",Blockly.Variables.NAME_TYPE))+" = "+n+";\n");var u=r;r.match(/^\w+$/)||Blockly.isNumber(r)||(a+="var "+(u=Blockly.JavaScript.variableDB_.getDistinctName(e+"_end",Blockly.Variables.NAME_TYPE))+" = "+r+";\n");var l=Blockly.JavaScript.variableDB_.getDistinctName(e+"_inc",Blockly.Variables.NAME_TYPE);a+="\n        var "+l+" = "+(Blockly.isNumber(i)?Math.abs(i):"Math.abs("+i+")")+";\n        if ("+c+" > "+u+") {\n            "+l+" = -"+l+";\n        }\n        for (\n           "+e+" = "+c+"; \n           "+l+" >= 0 ? "+e+" <= "+u+" : "+e+" >= "+u+";\n           "+e+" += "+l+"\n        ) {\n            "+o+";\n        }\n"}return a},Blockly.Blocks.controls_forEach={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("for each item %1 in list %2"),args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:Object(Ot.localize)("do %1"),args1:[{type:"input_statement",name:"DO"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Iterates through a given list"),category:Blockly.Categories.Loop}},meta:function(){return{display_name:Object(Ot.localize)("Iterate (2)"),description:Object(Ot.localize)('This block uses the variable "i" to control the iterations. With each iteration, the value of "i" is determined by the items in a given list.')}}},Blockly.JavaScript.controls_forEach=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),n=Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_ASSIGNMENT)||"[]",r=Blockly.JavaScript.statementToCode(t,"DO");r=Blockly.JavaScript.addLoopTrap(r,t.id);var i="",o=n;n.match(/^\w+$/)||(i="var "+(o=Blockly.JavaScript.variableDB_.getDistinctName(e+"_list",Blockly.Variables.NAME_TYPE))+" = "+n+";\n");var a=Blockly.JavaScript.variableDB_.getDistinctName(e+"_list",Blockly.Variables.NAME_TYPE);return i+"\n    for (var "+a+" in "+o+") {\n        "+e+" = "+o+"["+a+"];\n        "+r+"\n    }\n"},Blockly.Blocks.controls_flow_statements={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 of loop"),args0:[{type:"field_dropdown",name:"FLOW",options:[[Object(Ot.localize)("break out"),"BREAK"],[Object(Ot.localize)("continue with next iteration"),"CONTINUE"]]}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block."),category:Blockly.Categories.Loop}},meta:function(){return{display_name:Object(Ot.localize)("Break out/continue"),description:Object(Ot.localize)("This block is used to either terminate or continue a loop, and can be placed anywhere within a loop block.")}}},Blockly.JavaScript.controls_flow_statements=function(t){return("BREAK"===t.getFieldValue("FLOW")?"break":"continue")+";\n"},Blockly.Blocks.variables_get={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:Object(Ot.localize)("item")}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,tooltip:Object(Ot.localize)("Gets variable value"),category:Blockly.Categories.Variables}},meta:function(){return{display_name:Object(Ot.localize)("User-defined variable"),description:Object(Ot.localize)("")}}},Blockly.JavaScript.variables_get=function(t){return[Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.variables_set={init:function(){this.jsonInit(this.definition())},definition:function(){return{type:"field_variable",message0:Object(Ot.localize)("set %1 to %2"),args0:[{type:"field_variable",name:"VAR",variable:Object(Ot.localize)("item")},{type:"input_value",name:"VALUE"}],colour:Blockly.Colours.Special2.colour,colourSecondary:Blockly.Colours.Special2.colourSecondary,colourTertiary:Blockly.Colours.Special2.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Sets variable value"),category:Blockly.Categories.Variables}},meta:function(){return{display_name:Object(Ot.localize)("Set variable"),description:Object(Ot.localize)("Assigns a given value to a variable")}}},Blockly.JavaScript.variables_set=function(t){var e=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_ASSIGNMENT)||"0";return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" = "+e+";\n"},n(182);var tn=function(){function t(t){this.root_store=t,this.flyout=t.flyout,this.toolbar=t.toolbar,this.saveload=t.saveload,this.quick_strategy=t.quick_strategy}var e,n;return t.setInstance=function(e){return this.singleton||(this.singleton=new t(e)),this.instance},e=t,(n=[{key:"instance",get:function(){return this.singleton}}])&&$e(e,n),t}();tn.singleton=null;var en=tn,nn=function(){function t(){this.blocks_pending_reconnect={},this.workspace=this.createWorkspace(),this.workspace_variables={}}var e=t.prototype;return e.getConversions=function(){var t=this,e=function(e,n,r,i){var o=t.workspace.newBlock(n),a=Array.from(e.children),s=a.find((function(t){return"mutation"===t.tagName.toLowerCase()}));if(s){var c=parseInt(s.getAttribute("items"))||0;if(c>0){for(var u=0;u<c;u++)o.onIconClick();a.filter((function(t){return"value"===t.tagName.toLowerCase()})).forEach((function(e){var n=e.getAttribute("name"),r=parseInt(n.replace(/[^0-9]+/g,""));Array.from(e.children).forEach((function(e){var n=t.convertBlockNode(e,o);o.getBlocksInStatement("STACK").find((function(t,e){return r===e})).getInput(i).connection.connect(n.outputConnection)})),e.parentNode.removeChild(e)}))}}var l=t.generateUniqueVariable(r),h=t.workspace.newBlock("variables_get");return h.setFieldValue(l.getId(),"VAR"),o.setFieldValue(l.getId(),"VARIABLE"),{block_to_attach:h,statement_blocks:[o]}},n=function(e,n,r){var i=t.workspace.newBlock(n),o={input_list:[{old:"INPUT",new:"INPUT_LIST"}],period:[{old:"PERIOD",new:"PERIOD"}],fast_ema_period:[{old:"FAST_EMA_PERIOD",new:"FAST_EMA_PERIOD"}],signal_ema_period:[{old:"SMA_PERIOD",new:"SIGNAL_EMA_PERIOD"},{old:"SIGNAL_EMA_PERIOD",new:"SIGNAL_EMA_PERIOD"}],slow_ema_period:[{old:"SLOW_EMA_PERIOD",new:"SLOW_EMA_PERIOD"}],std_dev_multiplier_up:[{old:"UPMULTIPLIER",new:"UPMULTIPLIER"}],std_dev_multiplier_down:[{old:"DOWNMULTIPLIER",new:"DOWNMULTIPLIER"}]};switch(n){case"bb_statement":case"bba_statement":var a=i.getField("BBRESULT_LIST");a&&a.setValue(t.getFieldValue(e,"BBRESULT_LIST"));break;case"macda_statement":var s=i.getField("MACDFIELDS_LIST");s&&s.setValue(t.getFieldValue(e,"MACDFIELDS_LIST"))}(i.required_child_blocks||[]).forEach((function(e){var n=t.workspace.newBlock(e);i.getLastConnectionInStatement("STATEMENT").connect(n.previousConnection)})),i.getBlocksInStatement("STATEMENT").forEach((function(n){var r=o[n.type];r&&r.forEach((function(r){var o=e.querySelector('value[name="'+r.old+'"]');if(o){var a=n.getInput(r.new);Array.from(o.children).forEach((function(e){var n=t.convertBlockNode(e,i);"shadow"===e.tagName.toLowerCase()&&n.setShadow(!0),a.connection.connect(n.outputConnection)})),o.parentNode.removeChild(o)}}))}));var c=t.generateUniqueVariable(r),u=t.workspace.newBlock("variables_get");return u.setFieldValue(c.getId(),"VAR"),i.setFieldValue(c.getId(),"VARIABLE"),{block_to_attach:u,statement_blocks:[i]}},r=function(e,n){void 0===n&&(n=!1);var r=t.workspace.newBlock("trade_definition_tradeoptions"),i=e;if(n)return!1;var o=Array.from(i.children),a=0,s=!1;return o.filter((function(t){return"value"===t.tagName.toLowerCase()})).forEach((function(t){var e=t.getAttribute("name");"BARRIEROFFSET"===e||"SECONDBARRIEROFFSET"===e?a++:"PREDICTION"===e&&(s=!0)})),a>0&&r.createBarrierInputs({allow_both_types:!0,values:[1,-1]}),s&&r.createPredictionInput([0]),["DURATIONTYPE_LIST","CURRENCY_LIST","BARRIEROFFSETTYPE_LIST","SECONDBARRIEROFFSETTYPE_LIST"].forEach((function(e){var n=r.getField(e);n&&n.setValue(t.getFieldValue(i,e))})),{block_to_attach:r}};return{bb:function(t){return n(t,"bb_statement","bb")},bba:function(t){return n(t,"bba_statement","bba")},ema:function(t){return n(t,"ema_statement","ema")},emaa:function(t){return n(t,"emaa_statement","emaa")},lists_create_with:function(t){return e(t,"lists_create_with",Object(Ot.localize)("list"),"VALUE")},macda:function(t){return n(t,"macda_statement","macda")},market:function(t){return r(t)},rsi:function(t){return n(t,"rsi_statement","rsi")},rsia:function(t){return n(t,"rsia_statement","rsia")},sma:function(t){return n(t,"sma_statement","sma")},smaa:function(t){return n(t,"smaa_statement","smaa")},text_join:function(t){return e(t,"text_join",Object(Ot.localize)("text"),"TEXT")},trade:function(e){var n=t.workspace.newBlock("trade_definition"),r={trade_definition_market:["MARKET_LIST","SUBMARKET_LIST","SYMBOL_LIST"],trade_definition_tradetype:["TRADETYPECAT_LIST","TRADETYPE_LIST"],trade_definition_contracttype:["TYPE_LIST"],trade_definition_candleinterval:["CANDLEINTERVAL_LIST"],trade_definition_restartbuysell:[],trade_definition_restartonerror:[]},i={};Object.keys(r).forEach((function(n){var o=t.workspace.newBlock(n);r[n].forEach((function(n){o.setFieldValue(t.getFieldValue(e,n),n)})),i[n]=o}));var o=i.trade_definition_restartonerror.getInput("RESTARTONERROR"),a=t.workspace.newBlock("logic_boolean");a.setShadow(!0),a.setFieldValue(t.getFieldValue(e,"RESTARTONERROR")||"FALSE","BOOL"),o.connection.connect(a.outputConnection);var s=i.trade_definition_restartbuysell.getInput("TIME_MACHINE_ENABLED"),c=t.workspace.newBlock("logic_boolean");return c.setShadow(!0),c.setFieldValue(t.getFieldValue(e,"TIME_MACHINE_ENABLED")||"TRUE","BOOL"),s.connection.connect(c.outputConnection),Object.values(i).forEach((function(t){n.getLastConnectionInStatement("TRADE_OPTIONS").connect(t.previousConnection)})),{block_to_attach:n}},tradeOptions:r}},e.getIllegalBlocks=function(){var t=[],e=Ut.instance.active_symbols.active_symbols,n=It.opposites;return e.forEach((function(e){var n=e.symbol.toLowerCase();t.includes(n)||t.push(n)})),Object.keys(n).forEach((function(e){return t.push(e)})),t},e.createWorkspace=function(){var t=new Blockly.Options({media:n.p+"media/"}),e=document.createDocumentFragment(),r=document.createElement("div");e.appendChild(r);var i=Blockly.createDom_(r,t);return Blockly.createMainWorkspace_(i,t,!1,!1)},e.getFieldValue=function(t,e){var n=t.querySelector('field[name="'+e+'"]');return n?n.textContent:""},e.getFirstBlockInStack=function(t){var e=t.previousConnection,n=t.getPreviousBlock();if(!e)return t;for(;n&&n!==t.getSurroundParent();)e=n.previousConnection,n=n.getPreviousBlock();return e.sourceBlock_},e.updateRenamedFields=function(t){var e={MARKET_LIST:{volidx:"synthetic_index"},TRADETYPECAT_LIST:{endsinout:"inout",staysinout:"inout",callputequal:"callput"},TRADETYPE_LIST:{risefall:"callput",risefallequals:"callputequal"}};return Object.keys(e).forEach((function(n){var r=t.querySelector('field[name="'+n+'"]');if(r){var i=r.innerText;Object.keys(e[n]).forEach((function(t){i===t&&(r.innerText=e[n][t])}))}})),t},e.generateUniqueVariable=function(t){for(var e=t,n=0;Object.values(this.workspace_variables).includes(e);)e=t+ ++n;var r=Blockly.Variables.getOrCreateVariablePackage(this.workspace,"",e,"");return this.workspace_variables[r.id_]=e,r},e.convertStrategy=function(t){var e=this;Blockly.Events.disable();var n=this.updateRenamedFields(t);if(t.hasAttribute("is_dbot")&&"true"===t.getAttribute("is_dbot"))return Blockly.Events.enable(),n;if(this.getIllegalBlocks().some((function(t){return!!n.querySelector("block[type="+t+"]")})))return en.instance.root_store.run_panel.showIncompatibleStrategyDialog(),Blockly.Events.enable(),Blockly.Xml.textToDom("<xml />");var r=[],i=[];Array.from(n.children).forEach((function(t){switch(t.nodeName.toLowerCase()){case"block":case"shadow":i.push(t);break;case"variables":r.push.apply(r,t.children)}}));var o=function(t){t.forEach((function(t){var n=t.getAttribute("id"),r=t.textContent;if(!e.workspace_variables[n]){var i=Blockly.Variables.getOrCreateVariablePackage(e.workspace,n,r,"");e.workspace_variables[i.id_]=i.name}}))};o(r),o(n.querySelectorAll('field[name="VAR"]')),i.forEach((function(t){return e.convertBlockNode(t)})),Object.keys(this.blocks_pending_reconnect).forEach((function(t){var n=e.workspace.getBlockById(t),r=e.blocks_pending_reconnect[t],i=n.previousConnection;if(i){var o=i.targetConnection,a=i;if(r.reverse().forEach((function(t){a.connect(t.nextConnection),a=t.previousConnection})),o){for(var s=n.previousConnection,c=n.getPreviousBlock();c&&c!==c.getSurroundParent();)s=c.previousConnection,c=c.getPreviousBlock();o.connect(s)}}})),this.workspace.getAllBlocks(!0).forEach((function(t){t.initSvg(),t.render()})),this.workspace.cleanUp();var a=Blockly.Xml.workspaceToDom(this.workspace);return t.hasAttribute("collection")&&"true"===t.getAttribute("collection")&&a.setAttribute("collection","true"),this.workspace.dispose(),this.workspace=null,Blockly.Events.enable(),a},e.convertBlockNode=function(t,e){var n=this;void 0===e&&(e=null);var r=this.getConversions(),i=t.getAttribute("type"),o=Object.keys(r).includes(i),a=null,s=t.getAttribute("collapsed")&&"true"===t.getAttribute("collapsed"),c=t.getAttribute("movable")&&"false"===t.getAttribute("movable"),u=t.getAttribute("deletable")&&"false"===t.getAttribute("deletable"),l=t.getAttribute("disabled")&&"true"===t.getAttribute("disabled"),h=function(t){t.setCollapsed(s),t.setMovable(!c),t.setDeletable(!u),t.setDisabled(l)};if(o){var p=r[i](t);p.block_to_attach&&(a=p.block_to_attach,h(a)),e&&p.statement_blocks&&p.statement_blocks.forEach((function(t){h(t);var r=n.getClosestLegalPreviousConnection(e);if(r){var i=r.sourceBlock_;n.blocks_pending_reconnect[i.id]||(n.blocks_pending_reconnect[i.id]=[]),n.blocks_pending_reconnect[i.id].push(t)}}))}else if(Object.keys(Blockly.Blocks).includes(i)&&(a=this.workspace.newBlock(i),h(a),a)){var f=Array.from(t.children).find((function(t){return"mutation"===t.tagName.toLowerCase()}));f&&a.domToMutation&&a.domToMutation(f)}return a?(e&&(a.conversion_parent=e),Array.from(t.children).forEach((function(t){switch(t.tagName.toLowerCase()){case"field":var e=t.getAttribute("name"),r=a.getField(e);if(r)if(r instanceof Blockly.FieldVariable){var i=t.getAttribute("id"),o=t.innerText.trim(),s=Blockly.Variables.getOrCreateVariablePackage(n.workspace,i,o,"");n.workspace_variables[s.id_]=o,r.setValue(s.id_)}else r.setValue(t.innerText);break;case"value":n.processValueInputs(a,t);break;case"statement":var c=t.getAttribute("name");n.processStatementInputs(a,c,t);break;case"next":var u=t.closest("statement");if(u){var l=u.getAttribute("name");n.processStatementInputs(a,l,t,a.conversion_parent)}else a.nextConnection&&Array.from(t.children).forEach((function(t){var e=n.convertBlockNode(t);a.nextConnection.connect(e.previousConnection)}));break;case"comment":var h="true"!==t.getAttribute("pinned"),p=t.innerText;a.comment=new Blockly.ScratchBlockComment(a,p,null,0,0,h),a.comment.iconXY_={x:0,y:0},a.comment.setVisible(!0)}})),a):(console.warn("Unrecognised block found.",i),!1)},e.processValueInputs=function(t,e){var n=this,r=e.getAttribute("name"),i=t.getInput(r);if(!i)return console.warn("Unrecognised value input",r),!1;Array.from(e.children).forEach((function(e){var r=n.convertBlockNode(e,t);if(!r)return console.warn("Illegal child.",e.getAttribute("type")),!1;"shadow"===e.tagName.toLowerCase()&&r.setShadow(!0),i.connection.connect(r.outputConnection)}))},e.processStatementInputs=function(t,e,n,r){var i=this;void 0===r&&(r=null);var o=r||t;if(!o.getInput(e))return console.warn("Unrecognised statement input",e),!1;Array.from(n.children).forEach((function(t){var n=i.convertBlockNode(t,o);if(!n)return console.warn("Unrecognised child in statement",t.getAttribute("type")),!1;var r=o.getInput(e);r&&n.previousConnection&&r.connection.connect(n.previousConnection)}))},e.getClosestLegalPreviousConnection=function(t){if(It.procedureDefinitionBlocks.includes(t.type)){if(0===t.getBlocksInStatement("STACK").length){var e=t.getInput("STACK"),n=this.workspace.newBlock("useless_block");return e.connection.connect(n.previousConnection),n.previousConnection}return t.getInputTargetBlock("STACK").previousConnection}for(var r=this.getFirstBlockInStack(t),i=this.isConnectedToProtectedStatementInput(r);i;){var o=r.getParent();o&&(r=o,i=this.isConnectedToProtectedStatementInput(r))}return r.previousConnection?r.previousConnection:!!t.conversion_parent&&this.getClosestLegalPreviousConnection(t.conversion_parent)},e.isConnectedToProtectedStatementInput=function(t){var e=this.getFirstBlockInStack(t).previousConnection;if(e){var n=e.targetConnection;if(n){var r=n.sourceBlock_,i=r.getInputWithConnection(n),o=r.protected_statements||[];if(i&&o.includes(i.name))return!0}}return!1},t}(),rn=n(100),on=n.n(rn),an=function(t,e){var n=It.opposites[e.toUpperCase()];if(!n)return It.NOT_AVAILABLE_DROPDOWN_OPTIONS;var r=n.map((function(t){return Object.entries(t)[0].reverse()}));return"both"!==t?r.filter((function(e){return e[1]===t})):r},sn=function(t,e){var n=Blockly.JavaScript.valueToCode(t,e,Blockly.JavaScript.ORDER_ATOMIC);if(!n)throw Error(Object(Ot.localize)(e+" cannot be empty"));return n},cn=function(t){Blockly.Events.recordUndo=!1,t.inputList instanceof Array&&Array.from(t.inputList).forEach((function(t){return t.fieldRow.forEach((function(t){if(t instanceof Blockly.FieldLabel){var e=t.getSvgRoot();e&&e.setAttribute("class","blocklyTextRootBlockHeader")}}))}));var e=t.getField();if(e){var n=e.getSvgRoot();n&&n.setAttribute("class","blocklyTextRootBlockHeader")}Blockly.Events.recordUndo=!0},un=function(t,e){var n,r=en.instance.root_store,i=r.journal,o=r.run_panel,a=function(){var t=Object(Ot.localize)("XML file contains unsupported elements. Please check or modify file.");i.onError(t),o.setActiveTabIndex(2)};try{if((new DOMParser).parseFromString(t,"application/xml").getElementsByTagName("parsererror").length)return a()}catch(t){return a()}try{n=Blockly.Xml.textToDom(t)}catch(t){return a()}var s=(n=(new nn).convertStrategy(n)).querySelectorAll("block");if(!s.length)return a();if(Array.from(s).some((function(t){var e=t.getAttribute("type");return!Object.keys(Blockly.Blocks).includes(e)})))return a();try{n.hasAttribute("collection")&&"true"===n.getAttribute("collection")?ln(n,e):hn(n),window.dispatchEvent(new Event("resize")),i.onLogSuccess(Object(Ot.localize)("Blocks are loaded successfully"))}catch(t){return a()}return!0},ln=function(t,e){Blockly.Events.setGroup("load");var n=Blockly.derivWorkspace,r=Blockly.Xml.domToWorkspace(t,n).map((function(t){return n.getBlockById(t)}));e&&0!==Object.keys(e).length?function(t,e){var n=e||{},r=n.clientX,i=void 0===r?0:r,o=n.clientY,a=void 0===o?0:o,s=Blockly.derivWorkspace.getMetrics(),c=1/Blockly.derivWorkspace.scale,u=s.absoluteLeft-s.viewLeft,l=document.body.offsetHeight-s.viewHeight-s.viewTop,h=i?(i-u)*c:0,p=a?(a-l-76)*c:0;Blockly.derivWorkspace.cleanUp(h,p,t)}(r,e):n.cleanUp(),Blockly.Events.setGroup(!1)},hn=function(t){var e=Blockly.derivWorkspace;Blockly.Events.setGroup("load"),e.clear(),Blockly.Xml.domToWorkspace(t,e),Blockly.Events.setGroup(!1)},pn=function(t){return new Promise((function(e,n){var r=t.getFieldValue("URL");-1===r.indexOf("http")&&(r="http://"+r);var i="/"===r.slice(-1)[0];if(!r.match(/[^\/]*\.[a-zA-Z]{3}$/)&&!i)return n(Object(Ot.localize)("Target must be an XML file"));if(i&&(r+="index.xml"),t.isKnownUrl(r))return t.setDisabled(!0),n(Object(Ot.localize)("This URL is already loaded"));var o=function(){return n(Object(Ot.localize)("An error occured while trying to load the URL"))};fetch(r).then((function(n){n.ok?n.text().then((function(n){(function(t,e){return new Promise((function(n,r){var i;try{i=Blockly.Xml.textToDom(t)}catch(t){return r(Object(Ot.localize)("Unrecognized file format"))}try{i.hasAttribute("collection")&&"true"===i.getAttribute("collection")||r(Object(Ot.localize)("Remote blocks to load must be a collection."));var o=Blockly.Events.recordUndo;Blockly.Events.recordUndo=!1,fn(i).then((function(){Array.from(i.children).forEach((function(t){return dn(t,e)})),Blockly.Events.recordUndo=o,n()})).catch((function(){Blockly.Events.recordUndo=o,r()}))}catch(t){r(Object(Ot.localize)("Unable to load the block file."))}}))})(n,t).then((function(){return e(t)})).catch(o)})):o()})).catch(o)}))},fn=function(t){return new Promise((function(e,n){var r=[];Array.from(t.children).forEach((function(t){if("loader"===t.getAttribute("type")){t.remove();var e=Blockly.Xml.domToBlock(t,Blockly.derivWorkspace);r.push(pn(e))}})),r.length?Promise.all(r).then(e,n):e([])}))},dn=function(t,e){if(void 0===e&&(e=null),"variables"===t.tagName.toLowerCase())return Blockly.Xml.domToVariables(t,Blockly.derivWorkspace);var n=t.getAttribute("type"),r=new nn,i=Blockly.Xml.blockToDom(r.convertBlockNode(t));Array.from(i.getElementsByTagName("arg")).forEach((function(t){t.hasAttribute("varid")&&t.setAttribute("varId",t.getAttribute("varid"))})),It.mainBlocks.includes(n)&&Blockly.derivWorkspace.getTopBlocks().forEach((function(t){t.type===n&&t.dispose()}));var o=Blockly.Xml.domToBlock(i,Blockly.derivWorkspace);return e&&e.blocks_added_by_me.push(o),o};Blockly.Blocks.after_purchase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 4. Restart trading conditions %2"),message1:"%1",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwBAMAAAClLOS0AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAABJQTFRFAAAAMzMzMzMzMzMzMzMzMzMzbxxq5QAAAAZ0Uk5TALX/40m0LpdrJAAAADpJREFUeJxjYBi0QBCXhBJOCTRggktCGVkCQiE4g0ACWRTZwwMrMTjDCl/UYk8MDDjAyJUQxSUx6AAAWjIi1ZSdqFYAAAAASUVORK5CYII=",width:25,height:25,alt:"F"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"AFTERPURCHASE_STACK",check:"TradeAgain"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:Object(Ot.localize)("Get the last trade information and result, then trade again."),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Restart trading conditions"),description:Object(Ot.localize)("Here is where you can decide if your bot should continue trading.")}},onchange:function(t){var e=this;cn(this),this.workspace&&!this.isInFlyout&&t.type===Blockly.Events.BLOCK_CREATE&&t.ids&&t.ids.includes(this.id)&&this.workspace.getAllBlocks(!0).forEach((function(t){t.type===e.type&&t.id!==e.id&&t.dispose()}))}},Blockly.JavaScript.after_purchase=function(t){return["\n    BinaryBotPrivateAfterPurchase = function BinaryBotPrivateAfterPurchase() {\n        "+Blockly.JavaScript.statementToCode(t,"AFTERPURCHASE_STACK")+"\n        Bot.isTradeAgain(false);\n        return false;\n    };",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.contract_check_result={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Result is %1"),args0:[{type:"field_dropdown",name:"CHECK_RESULT",options:It.lists.CHECK_RESULT}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("True if the result of the last trade matches the selection"),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Last trade result"),description:Object(Ot.localize)("You can check the result of the last trade with this block.")}},onchange:function(t){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()&&(t.type===Blockly.Events.BLOCK_CREATE||t.type===Blockly.Events.END_DRAG)){var e=this.getTopParent();e&&e.isMainBlock()&&"after_purchase"!==e.type&&this.setDisabled(!0)}}},Blockly.JavaScript.contract_check_result=function(t){return["Bot.isResult('"+t.getFieldValue("CHECK_RESULT")+"')",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.read_details={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Contract Details: %1"),args0:[{type:"field_dropdown",name:"DETAIL_INDEX",options:It.lists.DETAILS}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Reads a selected property from contract details list"),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Contract details"),description:Object(Ot.localize)("This block gives you information about your last contract.")}},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type!==Blockly.Events.BLOCK_CREATE&&t.type!==Blockly.Events.END_DRAG||(this.isDescendantOf("after_purchase")?this.disabled&&this.setDisabled(!1):this.disabled||this.setDisabled(!0))}},Blockly.JavaScript.read_details=function(t){return["Bot.readDetails("+t.getFieldValue("DETAIL_INDEX")+")",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.trade_again={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:Object(Ot.localize)("Trade again"),colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,tooltip:Object(Ot.localize)("This blocks transfers control to the Purchase conditions block."),category:Blockly.Categories.After_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Trade again"),description:Object(Ot.localize)("This block will transfer the control back to the Purchase conditions block, enabling you to purchase another contract.")}},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type!==Blockly.Events.BLOCK_CREATE&&t.type!==Blockly.Events.END_DRAG||(this.isDescendantOf("after_purchase")?this.disabled&&this.setDisabled(!1):this.disabled||this.setDisabled(!0))}},Blockly.JavaScript.trade_again=function(){return"\n        Bot.isTradeAgain(true);\n\n        return true;\n\n    "},Blockly.Blocks.before_purchase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 2. Purchase conditions %2"),message1:"%1",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAIRQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzxeXsBQAAACx0Uk5TAAG7tbYCR//Y2a15rhj7+hmse95G391Iehd4tNIy0bJSsZJykXFRMRLxEbk1pp94AAAA7UlEQVR4nO2R2RaCMAxEi1VHQXBfAUXcQP7//xSOgC2J1Vd1Htq0J7dJOkL89auyWrIM263OG0AXvTLso/sGYMMpQwcDc77reW4VD72REXBg14cxJqZ8a/rc9wxz09j3FOsJX2BpAMZYqQ0axl5rY+rnhjb6i/zYEi8lPwV8okaAkC4eYkve7xDRQIQ9eR/jQAMHHJn7mAZinJjKu2KXUlnyXs8kECIodkBZ8t+4kECClAZSXOleUyQUUD7U1MMIHeBsqIyQvrKwNrBGcDawRnA21EY0OqVtqI3QxNmQ/x8jxgYhMjo/4/L/+mbdAKHBEAKASOAzAAAAAElFTkSuQmCC",width:25,height:25,alt:"P"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"BEFOREPURCHASE_STACK",check:"Purchase"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:Object(Ot.localize)("Specify contract type and purchase conditions."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Purchase conditions"),description:Object(Ot.localize)("This block is mandatory. Only one copy of this block is allowed. You can place the Purchase block (see below) here as well as conditional blocks to define your purchase conditions.")}},onchange:function(t){var e=this;cn(this),this.workspace&&!this.isInFlyout&&t.type===Blockly.Events.BLOCK_CREATE&&t.ids&&t.ids.includes(this.id)&&this.workspace.getAllBlocks(!0).forEach((function(t){t.type===e.type&&t.id!==e.id&&t.dispose()}))}},Blockly.JavaScript.before_purchase=function(t){return"BinaryBotPrivateBeforePurchase = function BinaryBotPrivateBeforePurchase() {\n        "+Blockly.JavaScript.statementToCode(t,"BEFOREPURCHASE_STACK")+"\n    };\n"},Blockly.Blocks.purchase={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){return{message0:Object(Ot.localize)("Purchase %1"),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],previousStatement:null,colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,tooltip:Object(Ot.localize)("This block purchases contract of a specified type."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Purchase"),description:Object(Ot.localize)("Use this block to purchase the specific contract you want. You may add multiple Purchase blocks together with conditional blocks to define your purchase conditions. This block can only be used within the Purchase conditions block.")}},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||(this.enforceLimitations(),t.type===Blockly.Events.BLOCK_CHANGE?"TYPE_LIST"!==t.name&&"TRADETYPE_LIST"!==t.name||this.populatePurchaseList(t):t.type===Blockly.Events.END_DRAG&&t.blockId===this.id&&""===this.getField("PURCHASE_LIST").menuGenerator_[0][0]&&this.populatePurchaseList(t))},populatePurchaseList:function(t){var e=this.workspace.getAllBlocks(!0).find((function(t){return"trade_definition"===t.type}));if(e){var n=e.getChildByType("trade_definition_tradetype").getFieldValue("TRADETYPE_LIST"),r=e.getChildByType("trade_definition_contracttype").getFieldValue("TYPE_LIST"),i=this.getField("PURCHASE_LIST"),o=i.getValue(),a=an(r,n);i.updateOptions(a,{default_value:o,event_group:t.group})}},enforceLimitations:function(){this.getTopParent()&&(this.isDescendantOf("before_purchase")?this.disabled&&this.setDisabled(!1):this.disabled||this.setDisabled(!0))}},Blockly.JavaScript.purchase=function(t){return"Bot.purchase('"+t.getFieldValue("PURCHASE_LIST")+"');\n"},Blockly.Blocks.ask_price={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Ask Price %1"),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block returns the purchase price for the selected trade type."),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Purchase price"),description:Object(Ot.localize)('This block returns the purchase price for the selected trade type. This block can be used only in the "Purchase conditions" root block.')}},onchange:Blockly.Blocks.purchase.onchange,populatePurchaseList:Blockly.Blocks.purchase.populatePurchaseList,enforceLimitations:Blockly.Blocks.purchase.enforceLimitations},Blockly.JavaScript.ask_price=function(t){return["Bot.getAskPrice('"+t.getFieldValue("PURCHASE_LIST")+"')",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.payout={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Payout %1"),args0:[{type:"field_dropdown",name:"PURCHASE_LIST",options:[["",""]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block returns the potential payout for the selected trade type"),category:Blockly.Categories.Before_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Potential payout"),description:Object(Ot.localize)('This block returns the potential payout for the selected trade type. This block can be used only in the "Purchase conditions" root block.')}},onchange:Blockly.Blocks.purchase.onchange,populatePurchaseList:Blockly.Blocks.purchase.populatePurchaseList,enforceLimitations:Blockly.Blocks.purchase.enforceLimitations},Blockly.JavaScript.payout=function(t){return["Bot.getPayout('"+t.getFieldValue("PURCHASE_LIST")+"')",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.during_purchase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 3. Sell conditions %2"),message1:"%1",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAMZQTFRFAAAAMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzMzsMQO9wAAAEJ0Uk5TAEnj/xnzWcgSZVrxvQFt9AlD34If9dBpcPij0X7mSLyziAyl7H1k3dYbAu2qn6eA1LGN6G66uPucBP23ERPXJIPGaDxgqAAAAQdJREFUeJztlFlvwjAQhBeP4yQlKVfvg7acvQ+g90H5/3+qViWSjQ2RLfGYebC0q/k2sTw2UaVKG1RNwEGilgFOfk1kAKAXiWDdHwSQSxcDFMJ1QAhlA5FAzDxbdVbEEJEBSCWQpMyz3WjmRZpAKFkAtBKZO1ptoNHJB8jk38KAIIzZ/J1d1PeAffaNOAzMTTMd4DCiIxwXuyXACU5T6p6dOwNd4KJHpkoA6gODoYmUATQaA5dXHgBdqxvcOgN39zqYDxg4A494IppgWgIUD24GPL+84i3vWAdXjMb75EM3Pr+yhh0NM3zf/Z85m2+Hz4r374IVK+JN/hfI64p6PwLez0ylShvQHzxCDnS9VqsZAAAAAElFTkSuQmCC",width:25,height:25,alt:"S"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"DURING_PURCHASE_STACK",check:"SellAtMarket"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:Object(Ot.localize)("Sell your active contract if needed (optional)"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Sell conditions"),description:Object(Ot.localize)("Here is where you can decide to sell your contract before it expires. Only one copy of this block is allowed.")}},onchange:function(t){var e=this;cn(this),this.workspace&&!this.isInFlyout&&t.type===Blockly.Events.BLOCK_CREATE&&t.ids&&t.ids.includes(this.id)&&this.workspace.getAllBlocks(!0).forEach((function(t){t.type===e.type&&t.id!==e.id&&t.dispose()}))}},Blockly.JavaScript.during_purchase=function(t){return"BinaryBotPrivateDuringPurchase = function BinaryBotPrivateDuringPurchase() {\n        "+Blockly.JavaScript.statementToCode(t,"DURING_PURCHASE_STACK")+"\n    };\n"},Blockly.Blocks.sell_at_market={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Sell at market price"),colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Use this block to sell your contract at the market price."),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Sell at market price"),description:Object(Ot.localize)("Use this block to sell your contract at the market price.")}},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type!==Blockly.Events.BLOCK_CREATE&&t.type!==Blockly.Events.END_DRAG||(this.isDescendantOf("during_purchase")?this.disabled&&this.setDisabled(!1):this.disabled||this.setDisabled(!0))}},Blockly.JavaScript.sell_at_market=function(){return"Bot.sellAtMarket();\n"},Blockly.Blocks.check_sell={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Sell is available"),output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("True if active contract can be sold before expiration at current market price"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Can contract be sold?"),description:Object(Ot.localize)("This block helps you check if your contract can be sold. If your contract can be sold, it returns “True”. Otherwise, it returns an empty string.")}},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type!==Blockly.Events.BLOCK_CREATE&&t.type!==Blockly.Events.END_DRAG||(this.isDescendantOf("during_purchase")?this.disabled&&this.setDisabled(!1):this.disabled||this.setDisabled(!0))}},Blockly.JavaScript.check_sell=function(){return["Bot.isSellAvailable()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.sell_price={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Sell profit/loss"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the profit/loss form selling at market price"),category:Blockly.Categories.During_Purchase}},meta:function(){return{display_name:Object(Ot.localize)("Profit/loss from selling"),description:Object(Ot.localize)("This block gives you the potential profit or loss if you decide to sell your contract.")}},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type!==Blockly.Events.BLOCK_CREATE&&t.type!==Blockly.Events.END_DRAG||(this.isDescendantOf("during_purchase")?this.disabled&&this.setDisabled(!1):this.disabled||this.setDisabled(!0))}},Blockly.JavaScript.sell_price=function(){return["Bot.getSellPrice()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.bb_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period","std_dev_multiplier_up","std_dev_multiplier_down"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Bollinger Bands %2 %3"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"bb"},{type:"field_dropdown",name:"BBRESULT_LIST",options:It.bbResult},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Bollinger Bands (BB) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Bollinger Bands (BB)"),description:Object(Ot.localize)("BB is a technical analysis indicator that’s commonly used by traders. The idea behind BB is that the market price stays within the upper and lower bands for 95% of the time. The bands are the standard deviations of the market price, while the line in the middle is a simple moving average line. If the price reaches either the upper or lower band, there’s a possibility of a trend reversal.")}},onchange:function(t){var e=this;!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type===Blockly.Events.END_DRAG&&this.getBlocksInStatement("STATEMENT").forEach((function(t){e.required_child_blocks.includes(t.type)||(Blockly.Events.disable(),t.unplug(!1),Blockly.Events.enable())}))}},Blockly.JavaScript.bb_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=t.getFieldValue("BBRESULT_LIST");return e+" = Bot.bb("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", { periods: "+(t.childValueToCode("period","PERIOD")||"10")+", stdDevUp: "+(t.childValueToCode("std_dev_multiplier_up","UPMULTIPLIER")||"5")+", stdDevDown: "+(t.childValueToCode("std_dev_multiplier_down","DOWNMULTIPLIER")||"5")+" }, "+n+");\n"},Blockly.Blocks.bba_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period","std_dev_multiplier_up","std_dev_multiplier_down"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Bollinger Bands Array %2 %3"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"bba"},{type:"field_dropdown",name:"BBRESULT_LIST",options:It.bbResult},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Bollinger Bands (BB) list from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Bollinger Bands Array (BBA)"),description:Object(Ot.localize)("Similar to BB. This block gives you a choice of returning the values of either the lower band, higher band, or the SMA line in the middle.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.bba_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=t.getFieldValue("BBRESULT_LIST");return e+" = Bot.bba("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", { periods: "+(t.childValueToCode("period","PERIOD")||"10")+", stdDevUp: "+(t.childValueToCode("std_dev_multiplier_up","UPMULTIPLIER")||"5")+", stdDevDown: "+(t.childValueToCode("std_dev_multiplier_down","DOWNMULTIPLIER")||"5")+" }, "+n+");\n"},Blockly.Blocks.ema_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Exponentional Moving Average %2"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"ema"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Exponential Moving Average (EMA) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Exponential Moving Average (EMA)"),description:Object(Ot.localize)("EMA is a type of moving average that places more significance on the most recent data points. It’s also known as the exponentially weighted moving average. EMA is different from SMA in that it reacts more significantly to recent price changes.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.ema_statement=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE)+" = Bot.ema("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", "+(t.childValueToCode("period","PERIOD")||"10")+");\n"},Blockly.Blocks.emaa_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Exponentional Moving Average Array %2"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"emaa"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Exponential Moving Average (EMA) list from a list of values with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Exponential Moving Average Array (EMAA)"),description:Object(Ot.localize)("This block is similar to EMA, except that it gives you the entire EMA line based on the input list and the given period.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.emaa_statement=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE)+" = Bot.emaa("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", "+(t.childValueToCode("period","PERIOD")||"10")+");\n"},Blockly.Blocks.rsi_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Relative Strength Index %2"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"rsi"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Relative Strength Index (RSI) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Relative Strength Index (RSI)"),description:Object(Ot.localize)("RSI is a technical analysis tool that helps you identify the market trend. It will give you a value from 0 to 100. An RSI value of 70 and above means that the asset is overbought and the current trend may reverse, while a value of 30 and below means that the asset is oversold.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.rsi_statement=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE)+" = Bot.rsi("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", "+(t.childValueToCode("period","PERIOD")||"10")+");\n"},Blockly.Blocks.rsia_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Relative Strength Index Array %2"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"rsia"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Relative Strength Index (RSI) list from a list of values with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Relative Strength Index Array (RSIA)"),description:Object(Ot.localize)("Similar to RSI, this block gives you a list of values for each entry in the input list.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.rsia_statement=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE)+" = Bot.rsia("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", "+(t.childValueToCode("period","PERIOD")||"10")+");\n"},Blockly.Blocks.sma_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Simple Moving Average %2"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"sma"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Simple Moving Average (SMA) from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Simple Moving Average (SMA)"),description:Object(Ot.localize)("SMA is a frequently used indicator in technical analysis. It calculates the average market price over a specified period, and is usually used to identify market trend direction: up or down. For example, if the SMA is moving upwards, it means the market trend is up. ")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.sma_statement=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE)+" = Bot.sma("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", "+(t.getChildFieldValue("period","PERIOD")||"10")+");\n"},Blockly.Blocks.smaa_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to Simple Moving Average Array %2"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"smaa"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Simple Moving Average line from a list with a period"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Simple Moving Average Array (SMAA)"),description:Object(Ot.localize)("Similar to SMA, this block gives you the entire SMA line containing a list of all values for a given period.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.smaa_statement=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE)+" = Bot.smaa("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", "+(t.childValueToCode("period","PERIOD")||"10")+");\n"},Blockly.Blocks.macda_statement={protected_statements:["STATEMENT"],required_child_blocks:["input_list","fast_ema_period","slow_ema_period","signal_ema_period"],init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("set %1 to MACD Array %2 %3"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:"macda"},{type:"field_dropdown",name:"MACDFIELDS_LIST",options:It.macdFields},{type:"input_dummy"}],args1:[{type:"input_statement",name:"STATEMENT",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Calculates Moving Average Convergence Divergence (MACD) from a list"),previousStatement:null,nextStatement:null,category:Blockly.Categories.Indicators}},meta:function(){return{display_name:Object(Ot.localize)("Moving Average Convergence Divergence"),description:Object(Ot.localize)("MACD is calculated by subtracting the long-term EMA (26 periods) from the short-term EMA (12 periods). If the short-term EMA is greater or lower than the long-term EMA than there’s a possibility of a trend reversal.")}},onchange:Blockly.Blocks.bb_statement.onchange},Blockly.JavaScript.macda_statement=function(t){var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=t.getFieldValue("MACDFIELDS_LIST");return e+" = Bot.macda("+sn(t.getChildByType("input_list"),"INPUT_LIST")+", { \n        fastEmaPeriod: "+(t.childValueToCode("fast_ema_period","FAST_EMA_PERIOD")||"12")+",\n        slowEmaPeriod: "+(t.childValueToCode("slow_ema_period","SLOW_EMA_PERIOD")||"26")+",\n        signalEmaPeriod: "+(t.childValueToCode("signal_ema_period","SIGNAL_EMA_PERIOD")||"9")+",\n    }, "+n+");\n"},Blockly.Blocks.input_list={init:function(){this.jsonInit({message0:Object(Ot.localize)("Input List %1"),args0:[{type:"input_value",name:"INPUT_LIST",check:"Array"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(t){var e=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){var n=function(){var t=e.getSurroundParent();t&&!e.required_parent_id&&e.allowed_parents.includes(t.type)&&(e.required_parent_id=t.id)};if(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))n();else if(t.type===Blockly.Events.END_DRAG){n();var r=this.getSurroundParent(),i=!r,o=r.id!==this.required_parent_id;if(i||o){var a=Blockly.Events.recordUndo;Blockly.Events.recordUndo=!1,this.unplug(!0);var s=this.workspace.getAllBlocks().find((function(t){return t.id===e.required_parent_id}));s?s.getLastConnectionInStatement("STATEMENT").connect(this.previousConnection):this.dispose(),Blockly.Events.recordUndo=a}}}},allowed_parents:["bb_statement","bba_statement","ema_statement","emaa_statement","macda_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement"]},Blockly.JavaScript.input_list=function(){},Blockly.Blocks.period={init:function(){this.jsonInit({message0:Object(Ot.localize)("Period %1"),args0:[{type:"input_value",name:"PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement","ema_statement","emaa_statement","macda_statement","rsi_statement","rsia_statement","sma_statement","smaa_statement"]},Blockly.JavaScript.period=function(){},Blockly.Blocks.std_dev_multiplier_up={init:function(){this.jsonInit({message0:Object(Ot.localize)("Standard Deviation Up Multiplier %1"),args0:[{type:"input_value",name:"UPMULTIPLIER",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement"]},Blockly.JavaScript.std_dev_multiplier_up=function(){},Blockly.Blocks.std_dev_multiplier_down={init:function(){this.jsonInit({message0:Object(Ot.localize)("Standard Deviation Down Multiplier %1"),args0:[{type:"input_value",name:"DOWNMULTIPLIER",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null})},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["bb_statement","bba_statement"]},Blockly.JavaScript.std_dev_multiplier_down=function(){},Blockly.Blocks.fast_ema_period={init:function(){this.jsonInit({message0:Object(Ot.localize)("Fast EMA Period %1"),args0:[{type:"input_value",name:"FAST_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"]},Blockly.JavaScript.fast_ema_period=function(){},Blockly.Blocks.slow_ema_period={init:function(){this.jsonInit({message0:Object(Ot.localize)("Slow EMA Period %1"),args0:[{type:"input_value",name:"SLOW_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"]},Blockly.JavaScript.slow_ema_period=function(){},Blockly.Blocks.signal_ema_period={init:function(){this.jsonInit({message0:Object(Ot.localize)("Signal EMA Period %1"),args0:[{type:"input_value",name:"SIGNAL_EMA_PERIOD",check:null}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:Blockly.Blocks.input_list.onchange,allowed_parents:["macda_statement"]},Blockly.JavaScript.signal_ema_period=function(){},Blockly.Blocks.tick={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Last Tick"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the tick value received from server"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Last tick"),description:Object(Ot.localize)("This block gives you the value of the last tick.")}}},Blockly.Blocks.tick_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Last Tick String"),output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the tick value received by a before purchase block in string format"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Tick value"),description:Object(Ot.localize)("Tick value Description")}},onchange:Blockly.Blocks.tick.onchange},Blockly.JavaScript.tick=function(){return["Bot.getLastTick(false, false)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.JavaScript.tick_string=function(){return["Bot.getLastTick(false, true)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ticks={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Ticks list"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you a list of the last 1000 tick values."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Tick list"),description:Object(Ot.localize)("This block gives you a list of the last 1000 tick values.")}}},Blockly.Blocks.ticks_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Ticks String List"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the list of tick values in string format"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Tick List String"),description:Object(Ot.localize)("Tick List String Description")}},onchange:Blockly.Blocks.ticks.onchange},Blockly.JavaScript.ticks=function(){return["Bot.getTicks(false)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.JavaScript.ticks_string=function(){return["Bot.getTicks(true)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Candles List"),message1:Object(Ot.localize)("with interval: %1"),args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:It.candleIntervals}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you a list of candles within a selected time interval."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Get candle list"),description:Object(Ot.localize)("This block gives you a list of candles within a selected time interval.")}}},Blockly.JavaScript.ohlc=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST");return["Bot.getOhlc({ granularity: "+("default"===e?"undefined":e)+" })",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ohlc_values={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Make a List of %1 values in candles list with interval: %2"),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:It.ohlcFields},{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:It.candleIntervals}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns a list of specific values from a candle list according to selected time interval"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Create a list of candle values (1)"),description:Object(Ot.localize)("This block gives you the selected candle value from a list of candles within the selected time interval.")}}},Blockly.JavaScript.ohlc_values=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST"),n="default"===e?"undefined":e;return["Bot.getOhlc({ field: '"+t.getFieldValue("OHLCFIELD_LIST")+"', granularity: "+n+" })",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.read_ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("In candles list read %1 from end %2"),message1:Object(Ot.localize)("with interval: %1"),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:It.ohlcFields},{type:"input_value",name:"CANDLEINDEX",check:"Number"}],args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:It.candleIntervals}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Read the selected candle value"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Read candle value (1)"),description:Object(Ot.localize)("This block gives you the specified candle value for a selected time interval.")}}},Blockly.JavaScript.read_ohlc=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST"),n="default"===e?"undefined":e;return["Bot.getOhlcFromEnd({ field: '"+t.getFieldValue("OHLCFIELD_LIST")+"', index: "+(Blockly.JavaScript.valueToCode(t,"CANDLEINDEX",Blockly.JavaScript.ORDER_ATOMIC)||"1")+", granularity: "+n+" })",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.get_ohlc={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("in candle list get # from end %1"),message1:Object(Ot.localize)("with interval: %1"),args0:[{type:"input_value",name:"CANDLEINDEX",check:"Number"}],args1:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:It.candleIntervals}],output:"Candle",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you a specific candle from within the selected time interval."),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Get candle"),description:Object(Ot.localize)("This block gives you a specific candle from within the selected time interval.")}}},Blockly.JavaScript.get_ohlc=function(t){var e=t.getFieldValue("CANDLEINTERVAL_LIST"),n="default"===e?"undefined":e;return["Bot.getOhlcFromEnd({ index: "+(Blockly.JavaScript.valueToCode(t,"CANDLEINDEX",Blockly.JavaScript.ORDER_ATOMIC)||"1")+", granularity: "+n+" })",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.check_direction={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Direction is %1"),args0:[{type:"field_dropdown",name:"CHECK_DIRECTION",options:It.lists.CHECK_DIRECTION}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("True if the market direction matches the selection"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Market direction"),description:Object(Ot.localize)("This block is used to determine if the market price moves in the selected direction or not. It gives you a value of “True” or “False”.")}}},Blockly.JavaScript.check_direction=function(t){return["Bot.checkDirection('"+t.getFieldValue("CHECK_DIRECTION")+"')",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.tick_analysis={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("The content of this block is called on every tick %1 %2"),args0:[{type:"input_dummy"},{type:"input_statement",name:"TICKANALYSIS_STACK",check:null}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:Object(Ot.localize)("You can use this block to analyze the ticks, regardless of your trades"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Run on every tick"),description:Object(Ot.localize)("The content of this block is called on every tick. Place this block outside of any root block.")}},onchange:function(){cn(this)}},Blockly.JavaScript.tick_analysis=function(t){return["\n    BinaryBotPrivateTickAnalysisList.push(function BinaryBotPrivateTickAnalysis() {\n        "+(Blockly.JavaScript.statementToCode(t,"TICKANALYSIS_STACK")||"")+"\n    });\n",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.last_digit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Last Digit"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the last digit of the latest tick"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Last Digit"),description:Object(Ot.localize)("This block gives you the last digit of the latest tick value.")}}},Blockly.JavaScript.last_digit=function(){return["Bot.getLastDigit()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.lastDigitList={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Last digits list"),output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the list of last digits of 1000 recent tick values"),category:Blockly.Categories.Tick_Analysis}},meta:function(){return{display_name:Object(Ot.localize)("Last Digits List"),description:Object(Ot.localize)("This block gives you a list of the last digits of the last 1000 tick values.")}}},Blockly.JavaScript.lastDigitList=function(){return["Bot.getLastDigitList()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.is_candle_black={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Is candle black? %1"),args0:[{type:"input_value",name:"OHLCOBJ",check:"Candle"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)('Returns "True" if the given candle is black'),category:Blockly.Categories.Candle}},meta:function(){return{display_name:Object(Ot.localize)("Is candle black?"),description:Object(Ot.localize)("This block returns “True” if the last candle is black. It can be placed anywhere on the canvas except within the Trade parameters root block.")}}},Blockly.JavaScript.is_candle_black=function(t){return["Bot.isCandleBlack("+(Blockly.JavaScript.valueToCode(t,"OHLCOBJ")||"{}")+")",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.ohlc_values_in_list={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Make a list of %1 values from candles list %2"),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:It.ohlcFields},{type:"input_value",name:"OHLCLIST"}],output:"Array",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns a list of specific values from a given candle list"),category:Blockly.Categories.Candle}},meta:function(){return{display_name:Object(Ot.localize)("Create a list of candle values (2)"),description:Object(Ot.localize)("This block gives you the selected candle value from a list of candles.")}}},Blockly.JavaScript.ohlc_values_in_list=function(t){var e=t.getFieldValue("OHLCFIELD_LIST")||"open";return["Bot.candleValues("+(Blockly.JavaScript.valueToCode(t,"OHLCLIST")||"[]")+", '"+e+"')",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.read_ohlc_obj={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Read %1 value in candle %2"),args0:[{type:"field_dropdown",name:"OHLCFIELD_LIST",options:It.ohlcFields},{type:"input_value",name:"OHLCOBJ"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you the selected candle value."),category:Blockly.Categories.Candle}},meta:function(){return{display_name:Object(Ot.localize)("Read candle value (2)"),description:Object(Ot.localize)("This block gives you the selected candle value.")}}},Blockly.JavaScript.read_ohlc_obj=function(t){var e=t.getFieldValue("OHLCFIELD_LIST");return["Bot.candleField("+(Blockly.JavaScript.valueToCode(t,"OHLCOBJ")||"{}")+", '"+e+"')",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.balance={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("BALANCE_TYPE").setValidator((function(e){"STR"===e?t.setOutput(!0,"String"):"NUM"===e&&t.setOutput(!0,"Number"),t.initSvg(),t.render(!1)}))},definition:function(){return{message0:Object(Ot.localize)("Balance: %1"),args0:[{type:"field_dropdown",name:"BALANCE_TYPE",options:It.lists.BALANCE_TYPE}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block returns account balance"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Account balance"),description:Object(Ot.localize)("This block gives you the balance of your account either as a number or a string of text.")}}},Blockly.JavaScript.balance=function(t){return["Bot.getBalance('"+t.getFieldValue("BALANCE_TYPE")+"')",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.barrier_offset={init:function(){this.jsonInit({message0:"%1",args0:[{type:"field_dropdown",name:"BARRIEROFFSET_IN",options:It.BARRIER_TYPES}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Adds a sign to a number to create a barrier offset. (deprecated)"),category:Blockly.Categories.Miscellaneous})}},Blockly.JavaScript.barrier_offset=function(){},Blockly.Blocks.block_holder={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Ignore %1 %2"),args0:[{type:"input_dummy"},{type:"input_statement",name:"USELESS_STACK",check:null}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:Object(Ot.localize)("Put your blocks in here to prevent them from being removed"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Ignore"),description:Object(Ot.localize)("Use this block if you want some instructions to be ignored when your bot runs. Instructions within this block won’t be executed.")}},onchange:function(){cn(this)}},Blockly.JavaScript.block_holder=function(){return""},Blockly.Blocks.loader={init:function(){this.blocks_added_by_me=[],this.current_url="",this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Load block from URL: %1"),args0:[{type:"field_input",name:"URL",text:"http://www.example.com/block.xml"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Loads blocks from URL"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Loads from URL"),description:Object(Ot.localize)("This block allows you to load blocks from a URL if you have them stored on a remote server, and they will be loaded only when your bot runs.")}},onchange:function(t){var e=this;this.workspace&&!this.isInFlyout&&(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)?(this.current_url=this.getFieldValue("URL"),this.workspace.getAllBlocks().filter((function(t){return"loader"===t.type})).forEach((function(t){t.id!==e.id&&t.current_url===e.current_url&&e.setDisabled(!0)})),this.disabled||this.loadBlocksFromCurrentUrl()):t.type===Blockly.Events.BLOCK_CHANGE&&t.blockId===this.id&&t.newValue&&t.oldValue!==t.newValue&&(t.newValue===this.current_url?this.setDisabled(!1):this.isValidUrl(t.newValue)&&!this.isKnownUrl(t.newValue)?(this.setDisabled(!1),this.loadBlocksFromCurrentUrl()):this.setDisabled(!0)))},loadBlocksFromCurrentUrl:function(){var t=this;this.current_url=this.getFieldValue("URL");var e=Blockly.Events.recordUndo;Blockly.Events.recordUndo=!1,Blockly.Events.disable(),this.blocks_added_by_me.forEach((function(t){return t.dispose()})),Blockly.Events.enable(),pn(this).then((function(){Blockly.Events.recordUndo=e,Be.emit("ui.log.success",Object(Ot.localize)("Blocks are loaded successfully"))})).catch((function(n){Blockly.Events.recordUndo=e,Be.emit("ui.log.error",n),t.setDisabled(!0)}))},isKnownUrl:function(t){var e=this;return this.workspace.getAllBlocks().filter((function(t){return"loader"===t.type})).some((function(n){return n.id!==e.id&&n.current_url===t}))},isValidUrl:function(t){return String(t).match(/[^\/]*\.[a-zA-Z]{3}$/)}},Blockly.JavaScript.loader=function(){},Blockly.Blocks.notify={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Notify %1 with sound: %2 %3"),args0:[{type:"field_dropdown",name:"NOTIFICATION_TYPE",options:It.lists.NOTIFICATION_TYPE},{type:"field_dropdown",name:"NOTIFICATION_SOUND",options:It.lists.NOTIFICATION_SOUND},{type:"input_value",name:"MESSAGE",check:null}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Displays a notification and optionally play selected sound"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Notify"),description:Object(Ot.localize)("This block displays a message. You can specify the color of the message and choose from 6 different sound options.")}}},Blockly.JavaScript.notify=function(t){var e=t.getFieldValue("NOTIFICATION_TYPE"),n=t.getFieldValue("NOTIFICATION_SOUND");return"Bot.notify({ className: '"+e+"', message: "+(Blockly.JavaScript.valueToCode(t,"MESSAGE")||'"'+Object(Ot.localize)("<empty message>")+'"')+", sound: '"+n+"'});\n"},Blockly.Blocks.notify_telegram={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Notify Telegram %1 Access Token: %2 Chat ID: %3 Message: %4"),args0:[{type:"input_dummy"},{type:"input_value",name:"TELEGRAM_ACCESS_TOKEN"},{type:"input_value",name:"TELEGRAM_CHAT_ID"},{type:"input_value",name:"TELEGRAM_MESSAGE"}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Sends a message to Telegram"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Notify Telegram"),description:Object(Ot.localize)("This block sends a message to a Telegram channel.")}}},Blockly.JavaScript.notify_telegram=function(t){var e=Blockly.JavaScript.valueToCode(t,"TELEGRAM_ACCESS_TOKEN",Blockly.JavaScript.ORDER_ATOMIC)||"",n=Blockly.JavaScript.valueToCode(t,"TELEGRAM_CHAT_ID",Blockly.JavaScript.ORDER_ATOMIC)||"",r=Blockly.JavaScript.valueToCode(t,"TELEGRAM_MESSAGE",Blockly.JavaScript.ORDER_ATOMIC)||"";return e&&n&&r?"Bot.notifyTelegram("+e+", "+n+", "+r+");\n":""},Blockly.Blocks.total_profit={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Total profit/loss"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the total profit/loss"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Total profit/loss"),description:Object(Ot.localize)("This block gives you the total profit/loss of your trading strategy since your bot started running. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.")}},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||(t.type===Blockly.Events.END_DRAG||t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))&&"INITIALIZATION"===this.getRootInputTargetBlock()&&this.unplug(!0)}},Blockly.Blocks.total_profit_string={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Total Profit String"),output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the total profit in string format"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Total Profit String"),description:Object(Ot.localize)("Total Profit String Description")}},onchange:Blockly.Blocks.total_profit.onchange},Blockly.JavaScript.total_profit=function(){return["Bot.getTotalProfit(false)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.JavaScript.total_profit_string=function(){return["Bot.getTotalProfit(true)",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.total_runs={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Number of runs"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the number of runs"),category:Blockly.Categories.Miscellaneous}},meta:function(){return{display_name:Object(Ot.localize)("Number of runs"),description:Object(Ot.localize)("This block gives you the total number of times your bot has run. You can reset this by clicking “Clear stats” on the Transaction Stats window, or by refreshing this page in your browser.")}},onchange:Blockly.Blocks.total_profit.onchange},Blockly.JavaScript.total_runs=function(){return["Bot.getTotalRuns()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.useless_block={init:function(){this.jsonInit({message0:Object(Ot.localize)("Conversion Helper Block"),colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:Object(Ot.localize)("This block was required to correctly convert your old strategy."),category:Blockly.Categories.Miscellaneous,nextStatement:null,previousStatement:null})},onchange:function(){cn(this)}},Blockly.JavaScript.useless_block=function(){},Blockly.Blocks.epoch={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("Seconds Since Epoch"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the number of seconds since January 1st, 1970"),category:Blockly.Categories.Time}},meta:function(){return{display_name:Object(Ot.localize)("Second Since Epoch"),description:Object(Ot.localize)("This block returns the number of seconds since January 1st, 1970.")}}},Blockly.JavaScript.epoch=function(){return["Bot.getTime()",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.timeout={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 %2 Run after %3 second(s)"),args0:[{type:"input_dummy"},{type:"input_statement",name:"TIMEOUTSTACK"},{type:"input_value",name:"SECONDS"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Run the blocks inside after a given number of seconds"),category:Blockly.Categories.Time}},meta:function(){return{display_name:Object(Ot.localize)("Delayed run"),description:Object(Ot.localize)("This block delays execution for a given number of seconds. You can place any blocks within this block. The execution of other blocks in your strategy will be paused until the instructions in this block are carried out.")}},onchange:function(t){var e=this;!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type!==Blockly.Events.END_DRAG||(["trade_definition","during_purchase","before_purchase","after_purchase","tick_analysis"].some((function(t){return e.isDescendantOf(t)}))?this.disabled&&this.setDisabled(!1):this.disabled||this.setDisabled(!0))}},Blockly.JavaScript.timeout=function(t){var e=Blockly.JavaScript.statementToCode(t,"TIMEOUTSTACK");return"sleep("+(Blockly.JavaScript.valueToCode(t,"SECONDS",Blockly.JavaScript.ORDER_ATOMIC)||"1")+");\n"+e+"\n"},Blockly.Blocks.todatetime={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("To date/time %1")+"%2",args0:[{type:"input_value",name:"TIMESTAMP",check:"Number"},{type:"input_dummy"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time."),category:Blockly.Categories.Time}},meta:function(){return{display_name:Object(Ot.localize)("Convert to date/time"),description:Object(Ot.localize)("This block converts the number of seconds since the Unix Epoch (1 January 1970) into a string of text representing the date and time.")}}},Blockly.JavaScript.todatetime=function(t){var e=Blockly.JavaScript.valueToCode(t,"TIMESTAMP",Blockly.JavaScript.ORDER_ATOMIC),n=Object(Ot.localize)("Invalid timestamp")+":";return[Blockly.JavaScript.provideFunction_("timestampToDateString",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+'(timestamp) {\n            var datetime = new Date(timestamp * 1000);\n\n            if (!datetime.getTime()) {\n                return "'+n+" \" + timestamp;\n            }\n\n            var getTwoDigitValue = function(input) {\n                return input < 10 ? '0' + input : input;\n            }\n\n            var year    = datetime.getFullYear();\n            var month   = getTwoDigitValue(datetime.getMonth() + 1);\n            var day     = getTwoDigitValue(datetime.getDate());\n            var hours   = getTwoDigitValue(datetime.getHours());\n            var minutes = getTwoDigitValue(datetime.getMinutes());\n            var seconds = getTwoDigitValue(datetime.getSeconds());\n\n            var formatGmtOffset = function() {\n                var gmt_offset_raw = datetime.getTimezoneOffset();\n                var sign           = gmt_offset_raw > 0 ? '-' : '+';\n                var gmt_offset     = Math.abs(gmt_offset_raw);\n                var hour           = Math.floor(gmt_offset / 60);\n                var minute         = gmt_offset - hour * 60;\n\n                return 'GMT' + sign + getTwoDigitValue(hour) + getTwoDigitValue(minute);\n            }\n\n            var date_string = year + '-' + month + '-' + day;\n            var time_string = hours + ':' + minutes + ':' + seconds;\n\n            return date_string + ' ' + time_string + ' ' + formatGmtOffset();\n        }"])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.totimestamp={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("To timestamp %1")+"%2",args0:[{type:"input_value",name:"DATETIME"},{type:"input_dummy"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Converts a string representing a date/time string into seconds since Epoch. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825. Time and time zone offset are optional."),category:Blockly.Categories.Time}},meta:function(){return{display_name:Object(Ot.localize)("Convert to timestamp"),description:Object(Ot.localize)("This block converts a string of text that represents the date and time into seconds since the Unix Epoch (1 January 1970). The time and time zone offset are optional. Example: 2019-01-01 21:03:45 GMT+0800 will be converted to 1546347825.")}}},Blockly.JavaScript.totimestamp=function(t){var e=Blockly.JavaScript.valueToCode(t,"DATETIME",Blockly.JavaScript.ORDER_ATOMIC),n=Object(Ot.localize)("Invalid date/time")+":";return[Blockly.JavaScript.provideFunction_("dateTimeStringToTimestamp",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(datetime_string) {\n            if (typeof datetime_string !== 'string') {\n                return \""+n+" \" + datetime_string;\n            }\n\n            var datetime = datetime_string\n                .replace(/[^0-9.:-\\s]/g, '')\n                .replace(/\\s+/g,' ')\n                .trim()\n                .split(' ');  \n\n            var date_pattern = /^[12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\n            var time_pattern = /^(0[0-9]|1[0-9]|2[0-3]):([0-5][0-9])(:([0-5][0-9])?)?$/;\n\n            var validated_datetime = null;\n\n            if (datetime.length >= 2) {\n                validated_datetime = date_pattern.test(datetime[0]) && time_pattern.test(datetime[1])\n                    ? datetime[0] + 'T' + datetime[1] : null;\n            } else if (datetime.length === 1) {\n                validated_datetime = date_pattern.test(datetime[0]) ? datetime[0] : null;\n            }\n\n            if (validated_datetime) {\n                var date_obj = new Date(validated_datetime);\n\n                if (date_obj instanceof Date && !isNaN(date_obj)) {\n                    return date_obj.getTime() / 1000;\n                }\n            }\n\n            return \""+n+' " + datetime_string;\n        }'])+"("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.trade_definition={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 1. Trade parameters %2"),message1:"%1",message2:Object(Ot.localize)("%1Run once at start: %2"),message3:"%1",message4:Object(Ot.localize)("%1Trade options: %2"),message5:"%1",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYAgMAAACdGdVrAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAAlQTFRFAAAAMzMzMzMzaARWNQAAAAN0Uk5TAID/7PezGAAAACFJREFUeJxjYEAFUqtWLQFSCgwMHDipplXUF0ShoI5ABgDTPwulgF1l+wAAAABJRU5ErkJggg==",width:25,height:25,alt:"T"},{type:"input_dummy"}],args1:[{type:"input_statement",name:"TRADE_OPTIONS"}],args2:[{type:"field_image",src:"",width:4,height:25},{type:"input_dummy"}],args3:[{type:"input_statement",name:"INITIALIZATION",check:null}],args4:[{type:"field_image",src:"",width:4,height:25},{type:"input_dummy"}],args5:[{type:"input_statement",name:"SUBMARKET"}],colour:Blockly.Colours.RootBlock.colour,colourSecondary:Blockly.Colours.RootBlock.colourSecondary,colourTertiary:Blockly.Colours.RootBlock.colourTertiary,tooltip:Object(Ot.localize)("Here is where you define the parameters of your contract."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:Object(Ot.localize)("Trade parameters"),description:Object(Ot.localize)("Here is where you define the parameters of your contract.")}},onchange:function(t){var e=this;cn(this),this.workspace&&!this.isInFlyout&&(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id)?this.workspace.getTopBlocks(!1).forEach((function(t){t.type===e.type&&t.id!==e.id&&t.dispose(!1)})):t.type!==Blockly.Events.BLOCK_CHANGE&&t.type!==Blockly.Events.END_DRAG||this.getBlocksInStatement("TRADE_OPTIONS").forEach((function(t){/^trade_definition_.+$/.test(t.type)||(Blockly.Events.disable(),t.unplug(!0),Blockly.Events.enable())})))}},Blockly.JavaScript.trade_definition=function(t){var e=en.instance.root_store.core.client;if(!e.is_logged_in)throw new Error("Please login");var n=e.loginid,r=e.getToken(n),i=t.getChildByType("trade_definition_market"),o=t.getChildByType("trade_definition_tradetype"),a=t.getChildByType("trade_definition_contracttype"),s=t.getChildByType("trade_definition_candleinterval"),c=t.getChildByType("trade_definition_restartonerror"),u=t.getChildByType("trade_definition_restartbuysell"),l=i.getFieldValue("SYMBOL_LIST"),h=o.getFieldValue("TRADETYPE_LIST"),p=a.getFieldValue("TYPE_LIST"),f=s.getFieldValue("CANDLEINTERVAL_LIST"),d=Blockly.JavaScript.valueToCode(c,"RESTARTONERROR",Blockly.JavaScript.ORDER_ATOMIC),y=Blockly.JavaScript.valueToCode(u,"TIME_MACHINE_ENABLED",Blockly.JavaScript.ORDER_ATOMIC),m=It.opposites,g="both"===p?m[h.toUpperCase()].map((function(t){return Object.keys(t)[0]})):[p],v=Blockly.JavaScript.statementToCode(t,"INITIALIZATION"),b=Blockly.JavaScript.statementToCode(t,"SUBMARKET");return"  \n    BinaryBotPrivateInit = function BinaryBotPrivateInit() {\n        Bot.init('"+r+"', {\n          symbol              : '"+l+"',\n          contractTypes       : "+JSON.stringify(g)+",\n          candleInterval      : '"+(f||"FALSE")+"',\n          shouldRestartOnError: "+(d||"FALSE")+",\n          timeMachineEnabled  : "+(y||"FALSE")+",\n        });\n        "+v.trim()+"\n    };\n      BinaryBotPrivateStart = function BinaryBotPrivateStart() {\n        "+b.trim()+"\n      };\n"},Blockly.Blocks.trade_definition_market={init:function(){this.jsonInit({message0:"Market: %1 > %2 > %3",args0:[{type:"field_dropdown",name:"MARKET_LIST",options:[["",""]]},{type:"field_dropdown",name:"SUBMARKET_LIST",options:[["",""]]},{type:"field_dropdown",name:"SYMBOL_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(t){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){this.enforceLimitations();var e=Ut.instance.active_symbols,n=this.getField("MARKET_LIST"),r=this.getField("SUBMARKET_LIST"),i=this.getField("SYMBOL_LIST"),o=n.getValue(),a=r.getValue(),s=i.getValue(),c=function(){e.getMarketDropdownOptions().then((function(e){n.updateOptions(e,{default_value:o,should_pretend_empty:!0,event_group:t.group})}))};if(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))c();else if(t.type===Blockly.Events.CHANGE&&t.blockId===this.id)"MARKET_LIST"===t.name?e.getSubmarketDropdownOptions(o).then((function(e){r.updateOptions(e,{default_value:a,should_pretend_empty:!0,event_group:t.group})})):"SUBMARKET_LIST"===t.name&&e.getSymbolDropdownOptions(a).then((function(e){i.updateOptions(e,{default_value:s,should_pretend_empty:!0,event_group:t.group})}));else if(t.type===Blockly.Events.END_DRAG){var u=this.getTopParent();t.blockId===u.id&&""===n.menuGenerator_[0][0]&&c()}}},enforceLimitations:function(){if(!this.isDescendantOf("trade_definition")){Blockly.Events.disable(),this.unplug(!1);var t=this.workspace.getTopBlocks().find((function(t){return"trade_definition"===t.type}));t?t.getLastConnectionInStatement("TRADE_OPTIONS").connect(this.previousConnection):this.dispose(),Blockly.Events.enable()}this.disabled&&this.setDisabled(!1)}},Blockly.JavaScript.trade_definition_market=function(){},Blockly.Blocks.trade_definition_tradetype={init:function(){this.jsonInit({message0:Object(Ot.localize)("Trade Type: %1 > %2"),args0:[{type:"field_dropdown",name:"TRADETYPECAT_LIST",options:[["",""]]},{type:"field_dropdown",name:"TRADETYPE_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(t){var e=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()&&(this.enforceLimitations(),t.type===Blockly.Events.BLOCK_CHANGE&&("SYMBOL_LIST"===t.name||"TRADETYPECAT_LIST"===t.name))){var n=Ut.instance.contracts_for,r=this.getTopParent().getChildByType("trade_definition_market"),i=r.getFieldValue("MARKET_LIST"),o=r.getFieldValue("SUBMARKET_LIST"),a=r.getFieldValue("SYMBOL_LIST"),s=this.getFieldValue("TRADETYPECAT_LIST"),c=this.getFieldValue("TRADETYPE_LIST");"SYMBOL_LIST"===t.name?n.getTradeTypeCategories(i,o,a).then((function(n){e.getField("TRADETYPECAT_LIST").updateOptions(n,{default_value:s,should_pretend_empty:!0,event_group:t.group})})):"TRADETYPECAT_LIST"===t.name&&t.blockId===this.id&&n.getTradeTypes(i,o,a,s).then((function(n){e.getField("TRADETYPE_LIST").updateOptions(n,{default_value:c,should_pretend_empty:!0,event_group:t.group})}))}},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_tradetype=function(){},Blockly.Blocks.trade_definition_contracttype={init:function(){this.jsonInit({message0:"Contract Type: %1",args0:[{type:"field_dropdown",name:"TYPE_LIST",options:[["",""]]}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(t){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()&&(this.enforceLimitations(),Blockly.Events.BLOCK_CHANGE&&"TRADETYPE_LIST"===t.name)){var e=t.newValue,n=this.getField("TYPE_LIST"),r=[],i=an("both",e);i.length>1&&r.push([Object(Ot.localize)("Both"),"both"]),r.push.apply(r,i),0===r.length&&r.push.apply(r,It.NOT_AVAILABLE_DROPDOWN_OPTIONS),n.updateOptions(r,{event_group:t.group})}},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_contracttype=function(){return""},Blockly.Blocks.trade_definition_candleinterval={init:function(){this.jsonInit({message0:"Default Candle Interval: %1",args0:[{type:"field_dropdown",name:"CANDLEINTERVAL_LIST",options:It.candleIntervals.slice(1)}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||this.isInFlyout||this.workspace.isDragging()||this.enforceLimitations()},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_candleinterval=function(){},Blockly.Blocks.trade_definition_restartbuysell={init:function(){this.jsonInit({message0:Object(Ot.localize)("Restart buy/sell on error (disable for better performance): %1"),args0:[{type:"input_value",name:"TIME_MACHINE_ENABLED",check:"Boolean"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||this.isInFlyout||this.workspace.isDragging()||this.enforceLimitations()},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_restartbuysell=function(){},Blockly.Blocks.trade_definition_restartonerror={init:function(){this.jsonInit({message0:Object(Ot.localize)("Restart last trade on error (bot ignores the unsuccessful trade): %1"),args0:[{type:"input_value",name:"RESTARTONERROR",check:"Boolean"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null}),this.setMovable(!1),this.setDeletable(!1)},onchange:function(){!this.workspace||this.isInFlyout||this.workspace.isDragging()||this.enforceLimitations()},enforceLimitations:Blockly.Blocks.trade_definition_market.enforceLimitations},Blockly.JavaScript.trade_definition_restartonerror=function(){},Blockly.Blocks.trade_definition_tradeoptions={init:function(){this.jsonInit(this.definition()),this.setNextStatement(!1)},definition:function(){var t="trade_definition_tradeoptions"===this.type;return{message0:Object(Ot.localize)("Duration: %1 %2"),message1:(t?Object(Ot.localize)("Stake"):Object(Ot.localize)("Payout"))+": %1 %2",args0:[{type:"field_dropdown",name:"DURATIONTYPE_LIST",options:[["",""]]},{type:"input_value",name:"DURATION"}],args1:[{type:"field_dropdown",name:"CURRENCY_LIST",options:It.lists.CURRENCY},{type:"input_value",name:"AMOUNT",check:"Number"}],colour:Blockly.Colours.Special1.colour,colourSecondary:Blockly.Colours.Special1.colourSecondary,colourTertiary:Blockly.Colours.Special1.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Define your trade options such as duration and stake."),category:Blockly.Categories.Trade_Definition}},meta:function(){return{display_name:Object(Ot.localize)("Trade options"),description:Object(Ot.localize)("Define your trade options such as duration and stake. Some options are only applicable for certain trade types.")}},onchange:function(t){if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){var e=this.workspace.getAllBlocks(!0).find((function(t){return"trade_definition"===t.type}));if(e){var n=e.getChildByType("trade_definition_market"),r=e.getChildByType("trade_definition_tradetype");if(n&&r){this.selected_symbol=n.getFieldValue("SYMBOL_LIST"),this.selected_trade_type_category=r.getFieldValue("TRADETYPECAT_LIST"),this.selected_trade_type=r.getFieldValue("TRADETYPE_LIST"),this.selected_duration=this.getFieldValue("DURATIONTYPE_LIST"),this.selected_barrier_types=[this.getFieldValue("BARRIEROFFSETTYPE_LIST")||It.BARRIER_TYPES[0][1],this.getFieldValue("SECONDBARRIEROFFSETTYPE_LIST")||It.BARRIER_TYPES[1][1]];var i="load"===t.group;if(t.type===Blockly.Events.BLOCK_CREATE&&t.ids.includes(this.id))i?(this.updateBarrierInputs(!1,!1),this.updateDurationInput(!1,!1),this.updatePredictionInput(!1)):(this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType("BARRIEROFFSETTYPE_LIST",!0),this.updateDurationInput(!0,!0),this.updatePredictionInput(!0));else if(t.type===Blockly.Events.BLOCK_CHANGE)if(i)"TRADETYPE_LIST"===t.name&&(this.updateBarrierInputs(!1,!1),this.enforceSingleBarrierType(!1),this.updateDurationInput(!1,!1),this.updatePredictionInput(!1));else if(t.blockId===this.id)switch(t.name){case"DURATIONTYPE_LIST":this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType("BARRIEROFFSETTYPE_LIST",!0),this.updateDurationInput(!1,!0);break;case"BARRIEROFFSETTYPE_LIST":case"SECONDBARRIEROFFSETTYPE_LIST":this.updateBarrierInputs(!1,!0),this.enforceSingleBarrierType(t.name,!1)}else"TRADETYPE_LIST"===t.name&&(this.updateBarrierInputs(!0,!0),this.enforceSingleBarrierType(!0),this.updateDurationInput(!0,!0),this.updatePredictionInput(!0))}}}},createPredictionInput:function(t){if(Blockly.Events.disable(),0===t.length)this.removeInput("PREDICTION_LABEL",!0),this.removeInput("PREDICTION",!0);else if(!this.getInput("PREDICTION")){this.appendDummyInput("PREDICTION_LABEL").appendField(Object(Ot.localize)("Prediction:"));var e=this.appendValueInput("PREDICTION"),n=this.workspace.newBlock("math_number");n.setShadow(!0),n.setFieldValue(t[0],"NUM"),n.outputConnection.connect(e.connection),n.initSvg(),n.render(!0)}Blockly.Events.enable()},createBarrierInputs:function(t){Blockly.Events.disable();for(var e=["BARRIEROFFSET","SECONDBARRIEROFFSET"],n=0;n<t.values.length;n++){var r=1===t.values.length?Object(Ot.localize)("Barrier"):It.BARRIER_LABELS[n],i=this.getInput(e[n]);if(i)i.fieldRow[0].setText(r);else{i=this.appendValueInput(e[n]).appendField(r,e[n]+"_LABEL").appendField(new Blockly.FieldDropdown(It.BARRIER_TYPES),e[n]+"TYPE_LIST");var o=this.workspace.newBlock("math_number");o.setShadow(!0),o.setFieldValue(t.values[n],"NUM"),o.outputConnection.connect(i.connection),o.initSvg(),o.render(!0)}}for(var a=e.length;a>t.values.length;a--)this.removeInput(e[a-1],!0);Blockly.Events.enable()},updateDurationInput:function(t,e){var n=this;Ut.instance.contracts_for.getDurations(this.selected_symbol,this.selected_trade_type).then((function(r){var i=n.getField("DURATIONTYPE_LIST"),o=n.getInput("DURATION"),a=r.map((function(t){return[t.display,t.unit]}));if(i.updateOptions(a,{default_value:t?void 0:i.getValue()}),e&&o.connection){var s=o.connection.targetBlock();if(s&&s.isShadow()){var c=r.find((function(t){return t.unit===n.selected_duration}));c&&s.setFieldValue(c.min,"NUM")}}}))},updateBarrierInputs:function(t,e){var n=this,r=Ut.instance.contracts_for,i=It.BARRIER_TYPES;r.getBarriers(this.selected_symbol,this.selected_trade_type,this.selected_duration,this.selected_barrier_types).then((function(r){n.createBarrierInputs(r);for(var o=["BARRIEROFFSET","SECONDBARRIEROFFSET"],a=0;a<r.values.length;a++){var s=n.getField(o[a]+"TYPE_LIST"),c=It.ABSOLUTE_BARRIER_DROPDOWN_OPTION,u=t?i[a][1]:s.getValue();if("d"===n.selected_duration)s.updateOptions(c,{default_value:"absolute"});else if(r.allow_both_types||r.allow_absolute_type){var l=[].concat(i,c);s.updateOptions(l,{default_value:u})}else s.updateOptions(i,{default_value:u});var h=n.getInput(o[a]).connection;if(e&&h){var p=h.targetBlock();if(p&&p.isShadow()){var f=!1!==r.values[a]?r.values[a]:"";p.setFieldValue(f,"NUM")}}}}))},updatePredictionInput:function(t){var e=this;Ut.instance.contracts_for.getPredictionRange(this.selected_symbol,this.selected_trade_type).then((function(n){if(e.createPredictionInput(n),n.length>0){var r=e.getInput("PREDICTION").connection;if(t&&r){var i=r.targetBlock();if(i&&i.isShadow()){var o=Math.max(1,n[0]);i.setFieldValue(o,"NUM")}}}}))},enforceSingleBarrierType:function(t,e){var n=this.getFieldValue(t),r="BARRIEROFFSETTYPE_LIST"===t?"SECONDBARRIEROFFSETTYPE_LIST":"BARRIEROFFSETTYPE_LIST",i=this.getField(r),o=It.BARRIER_TYPES;if(i){var a=-1!==o.findIndex((function(t){return t[1]===n})),s=i.getValue();if(a&&("absolute"===s||e)){var c=o.find((function(t){return t[1]!==n}));i.setValue(c[1])}else"absolute"===n&&"absolute"!==s&&i.setValue("absolute")}},domToMutation:function(t){var e="true"===t.getAttribute("has_first_barrier"),n="true"===t.getAttribute("has_second_barrier"),r="true"===t.getAttribute("has_prediction");e&&n?this.createBarrierInputs({values:[1,-1]}):e?this.createBarrierInputs({values:[1]}):r&&this.createPredictionInput([1])},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("has_first_barrier",!!this.getInput("BARRIEROFFSET")),t.setAttribute("has_second_barrier",!!this.getInput("SECONDBARRIEROFFSET")),t.setAttribute("has_prediction",!!this.getInput("PREDICTION")),t}},Blockly.Blocks.trade_definition_tradeoptions_payout=Blockly.Blocks.trade_definition_tradeoptions,Blockly.JavaScript.trade_definition_tradeoptions=function(t){var e,n,r,i=Blockly.JavaScript.valueToCode(t,"AMOUNT")||"0",o=t.getFieldValue("CURRENCY_LIST"),a=t.getFieldValue("DURATIONTYPE_LIST")||"0",s=Blockly.JavaScript.valueToCode(t,"DURATION")||"0",c=function(t,e){return/^(\d+(\.\d+)?)$/.test(e)?"absolute"===t?"'"+e+"'":"'"+t+e+"'":"absolute"===t?e:"'"+t+"' + "+e};return t.getInput("PREDICTION")&&(e=Blockly.JavaScript.valueToCode(t,"PREDICTION")||"-1"),t.getInput("BARRIEROFFSET")&&(n=c(t.getFieldValue("BARRIEROFFSETTYPE_LIST"),Blockly.JavaScript.valueToCode(t,"BARRIEROFFSET")||"0")),t.getInput("SECONDBARRIEROFFSET")&&(r=c(t.getFieldValue("SECONDBARRIEROFFSETTYPE_LIST"),Blockly.JavaScript.valueToCode(t,"SECONDBARRIEROFFSET")||"0")),"\n        Bot.start({\n            limitations        : BinaryBotPrivateLimitations,\n            duration           : "+(s||"0")+",\n            duration_unit      : '"+(a||"0")+"',\n            currency           : '"+o+"',\n            amount             : "+(i||"0")+",\n            prediction         : "+(e||"undefined")+",\n            barrierOffset      : "+(n||"undefined")+",\n            secondBarrierOffset: "+(r||"undefined")+",\n            basis              : '"+("trade_definition_tradeoptions"===t.type?"stake":"payout")+"',\n        });\n    "},Blockly.JavaScript.trade_definition_tradeoptions_payout=Blockly.JavaScript.trade_definition_tradeoptions,Blockly.Blocks.logic_compare={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Compares two values"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:Object(Ot.localize)("Compare"),description:Object(Ot.localize)("This block compares two values and is used to build a conditional structure.")}}},Blockly.JavaScript.logic_compare=function(t){var e={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[t.getFieldValue("OP")||"EQ"],n=["==","!="].includes(e)?Blockly.JavaScript.ORDER_EQUALITY:Blockly.JavaScript.ORDER_RELATIONAL;return[(Blockly.JavaScript.valueToCode(t,"A",n)||"false")+" "+e+" "+(Blockly.JavaScript.valueToCode(t,"B",n)||"false"),n]},Blockly.Blocks.controls_if={init:function(){this.elseIfCount=0,this.elseCount=0,this.jsonInit(this.definition());var t=this.getAddInputIcon();this.appendDummyInput("MUTATOR").appendField(t)},definition:function(){return{message0:Object(Ot.localize)("if %1 then"),message1:"%1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],args1:[{type:"input_statement",name:"DO0"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Conditional block"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:Object(Ot.localize)("Conditional block"),description:Object(Ot.localize)("This block evaluates a statement and will perform an action only when the statement is true.")}},mutationToDom:function(){if(!this.elseIfCount&&!this.elseCount)return null;var t=document.createElement("mutation");return this.elseIfCount&&t.setAttribute("elseif",this.elseIfCount),this.elseCount&&t.setAttribute("else",1),t},domToMutation:function(t){this.elseIfCount=parseInt(t.getAttribute("elseif"))||0,this.elseCount=parseInt(t.getAttribute("else"))||0,this.updateShape()},updateShape:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var t=1;this.getInput("IF"+t);)this.removeInput("IF"+t),this.removeInput("DO"+t),t++;this.getInput("MUTATOR")&&this.removeInput("MUTATOR");for(var e=1;e<=this.elseIfCount;e++)this.appendDummyInput("IF_LABEL"+e).appendField(Object(Ot.localize)("else if")),this.appendValueInput("IF"+e).setCheck("Boolean"),this.appendDummyInput("THEN_LABEL"+e).appendField(Object(Ot.localize)("then")),this.appendDummyInput("DELETE_ICON"+e).appendField(this.getRemoveInputIcon(e,!1)),this.appendStatementInput("DO"+e);this.elseCount&&(this.appendDummyInput("ELSE_LABEL").appendField(Object(Ot.localize)("else")),this.appendDummyInput("DELETE_ELSE").appendField(this.getRemoveInputIcon(this.elseIfCount+1,!0)),this.appendStatementInput("ELSE")),this.appendDummyInput("MUTATOR").appendField(this.getAddInputIcon()),this.initSvg(),this.render()},getAddInputIcon:function(){var t=this;return new Blockly.FieldImage(Xe,24,24,"+",(function(){if(t.workspace&&!t.isInFlyout){var e=t.elseIfCount+1;0===t.elseCount?(t.appendDummyInput("ELSE_LABEL").appendField(Object(Ot.localize)("else")),t.appendDummyInput("DELETE_ELSE").appendField(t.getRemoveInputIcon(e,!0)),t.appendStatementInput("ELSE"),t.elseCount++):(t.appendDummyInput("IF_LABEL"+e).appendField(Object(Ot.localize)("else if")),t.appendValueInput("IF"+e).setCheck("Boolean"),t.appendDummyInput("THEN_LABEL"+e).appendField(Object(Ot.localize)("then")),t.appendDummyInput("DELETE_ICON"+e).appendField(t.getRemoveInputIcon(e,!1)),t.appendStatementInput("DO"+e),t.elseIfCount++),t.getInput("ELSE")&&(t.moveInputBefore("ELSE_LABEL",null),t.moveInputBefore("DELETE_ELSE",null),t.moveInputBefore("ELSE",null)),t.moveInputBefore("MUTATOR",null),t.initSvg(),t.render()}}))},getRemoveInputIcon:function(t,e){var n=this;return new Blockly.FieldImage(Ze,24,24,"-",(function(){n.workspace&&!n.isInFlyout&&(e?(n.removeInput("ELSE_LABEL"),n.removeInput("DELETE_ELSE"),n.removeInput("ELSE"),n.elseCount=0):(["IF_LABEL","IF","THEN_LABEL","DELETE_ICON","DO"].forEach((function(e){n.removeInput(""+e+t);for(var r=1,i=0,o=n.getInput(e+(t+r));o;){var a=t+i;if(o.name=e+a,"DELETE_ICON"===e){for(var s=0;s<o.fieldRow.length;s++)o.fieldRow[s].dispose(),o.fieldRow.splice(s,1);o.appendField(n.getRemoveInputIcon(a,!1))}r++,i++,o=n.getInput(e+(t+r))}})),n.elseIfCount--))}))}},Blockly.JavaScript.controls_if=function(t){var e=0,n="";do{n+="\n        "+(e>0?"else if":"if")+" ("+(Blockly.JavaScript.valueToCode(t,"IF"+e,Blockly.JavaScript.ORDER_NONE)||"false")+") {\n            "+Blockly.JavaScript.statementToCode(t,"DO"+e)+"\n        }",e++}while(t.getInput("IF"+e));return t.getInput("ELSE")&&(n+="\n        else {\n            "+Blockly.JavaScript.statementToCode(t,"ELSE")+"\n        }"),n+"\n"},Blockly.Blocks.logic_boolean={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[[Object(Ot.localize)("true"),"TRUE"],[Object(Ot.localize)("false"),"FALSE"]]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns either True or False"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:Object(Ot.localize)("True-False"),description:Object(Ot.localize)("This is a single block that returns a boolean value, either true or false.")}}},Blockly.JavaScript.logic_boolean=function(t){return["TRUE"===t.getFieldValue("BOOL")?"true":"false",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.logic_operation={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[[Object(Ot.localize)("and"),"AND"],[Object(Ot.localize)("or"),"OR"]]},{type:"input_value",name:"B"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Performs selected logic operation"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:Object(Ot.localize)("Logic operation"),description:Object(Ot.localize)('This block performs the "AND" or the "OR" logic operation.')}}},Blockly.JavaScript.logic_operation=function(t){var e,n,r=t.getFieldValue("OP");return"AND"===r?(e="&&",n=Blockly.JavaScript.ORDER_LOGICAL_AND):"OR"===r&&(e="||",n=Blockly.JavaScript.ORDER_LOGICAL_OR),[(Blockly.JavaScript.valueToCode(t,"A")||"false")+" "+e+" "+(Blockly.JavaScript.valueToCode(t,"B")||"false"),n]},Blockly.Blocks.logic_null={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"null",output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block assigns a null value to an item or statement."),category:Blockly.Categories.Logic}},meta:function(){return{display_name:Object(Ot.localize)("Null"),description:Object(Ot.localize)("This block assigns a null value to an item or statement.")}}},Blockly.JavaScript.logic_null=function(){return["null",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.logic_ternary={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("test %1"),message1:Object(Ot.localize)("if true %1"),message2:Object(Ot.localize)("if false %1"),args0:[{type:"input_value",name:"IF",check:"Boolean"}],args1:[{type:"input_value",name:"THEN"}],args2:[{type:"input_value",name:"ELSE"}],output:null,outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block tests if a given value is true or false and returns “True” or “False” accordingly."),category:Blockly.Categories.Logic}},meta:function(){return{display_name:Object(Ot.localize)("Test value"),description:Object(Ot.localize)("This block tests if a given value is true or false and returns “True” or “False” accordingly.")}}},Blockly.JavaScript.logic_ternary=function(t){return["("+(Blockly.JavaScript.valueToCode(t,"IF",Blockly.JavaScript.ORDER_CONDITIONAL)||"false")+" ? "+(Blockly.JavaScript.valueToCode(t,"THEN",Blockly.JavaScript.ORDER_CONDITIONAL)||"null")+" : "+(Blockly.JavaScript.valueToCode(t,"ELSE",Blockly.JavaScript.ORDER_CONDITIONAL)||"null")+")",Blockly.JavaScript.ORDER_CONDITIONAL]},Blockly.Blocks.logic_negate={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("not %1"),args0:[{type:"input_value",name:"BOOL"}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Converts a given True of False to the oposite value"),category:Blockly.Categories.Logic}},meta:function(){return{display_name:Object(Ot.localize)("Logic negate"),description:Object(Ot.localize)("This block converts the boolean value (true or false) to its opposite.")}}},Blockly.JavaScript.logic_negate=function(t){var e=Blockly.JavaScript.ORDER_LOGICAL_NOT;return["!"+(Blockly.JavaScript.valueToCode(t,"BOOL",e)||"true"),e]},Blockly.Blocks.math_change={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("change %1 by %2"),args0:[{type:"field_variable",name:"VAR",variable:Object(Ot.localize)("item")},{type:"input_value",name:"DELTA",check:"Number"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("This block adds the given number to the selected variable"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Change variable"),description:Object(Ot.localize)("This block adds the given number to the selected variable.")}}},Blockly.JavaScript.math_change=function(t){var e=t.getFieldValue("VAR"),n=Blockly.JavaScript.variableDB_.getName(e,Blockly.Variables.NAME_TYPE);return n+" = (typeof "+n+" === 'number' ? "+n+" : 0) + "+(Blockly.JavaScript.valueToCode(t,"DELTA",Blockly.JavaScript.ORDER_ADDITION)||"0")+";"},Blockly.Blocks.math_constant={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["ℇ","E"],["ϕ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(½)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you the selected constant values."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Mathematical constants"),description:Object(Ot.localize)("This block gives you the selected constant values.")}}},Blockly.JavaScript.math_constant=function(t){var e,n,r=t.getFieldValue("CONSTANT");return"PI"===r?(e="Math.PI",n=Blockly.JavaScript.ORDER_MEMBER):"E"===r?(e="Math.E",n=Blockly.JavaScript.ORDER_MEMBER):"GOLDEN_RATIO"===r?(e="(1 + Math.sqrt(5)) / 2",n=Blockly.JavaScript.ORDER_DIVISION):"SQRT2"===r?(e="Math.SQRT2",n=Blockly.JavaScript.ORDER_MEMBER):"SQRT1_2"===r?(e="Math.SQRT1_2",n=Blockly.JavaScript.ORDER_MEMBER):"INFINITY"===r&&(e="Infinity",n=Blockly.JavaScript.ORDER_ATOMIC),[e,n]},Blockly.Blocks.math_constrain={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("constrain %1 low %2 high %3"),args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block constrains a given number so that it is within a set range."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Constrain within a range"),description:Object(Ot.localize)("This block constrains a given number so that it is within a set range.")}}},Blockly.JavaScript.math_constrain=function(t){return["Math.min(Math.max("+(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_COMMA)||"0")+", "+(Blockly.JavaScript.valueToCode(t,"LOW",Blockly.JavaScript.ORDER_COMMA)||"0")+"), "+(Blockly.JavaScript.valueToCode(t,"HIGH",Blockly.JavaScript.ORDER_COMMA)||"0")+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_modulo={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("remainder of %1 ÷ %2"),args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns the remainder after a division"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Remainder after division"),description:Object(Ot.localize)(" Returns the remainder after the division of the given numbers.")}}},Blockly.JavaScript.math_modulo=function(t){return[(Blockly.JavaScript.valueToCode(t,"DIVIDEND",Blockly.JavaScript.ORDER_MODULUS)||"0")+" % "+(Blockly.JavaScript.valueToCode(t,"DIVISOR",Blockly.JavaScript.ORDER_MODULUS)||"0"),Blockly.JavaScript.ORDER_MODULUS]},Blockly.Blocks.math_number={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("NUM").setValidator((function(e){return t.numberValidator(e)}))},definition:function(){return{message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Please use `.` as a decimal separator for fractional numbers."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Number block"),description:Object(Ot.localize)("Enter an integer or fractional number into this block. Please use `.` as a decimal separator for fractional numbers.")}},numberValidator:function(t){if(!/^-?([0][,.]|[1-9]+[,.])?([0]|[1-9])*$/.test(t))return null}},Blockly.JavaScript.math_number=function(t){return[t.getFieldValue("NUM"),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.math_number_positive={init:Blockly.Blocks.math_number.init,definition:Blockly.Blocks.math_number.definition,meta:function(){return{display_name:Object(Ot.localize)("Math Number Positive"),description:Object(Ot.localize)("Math Number Description")}},numberValidator:function(t){if(!/^([0][,.]|[1-9]+[,.])?([0]|[1-9])*$/.test(t))return null}},Blockly.JavaScript.math_number_positive=Blockly.JavaScript.math_number,Blockly.Blocks.math_number_property={init:function(){var t=this;this.jsonInit(this.definition()),this.setOnChange((function(e){if("PROPERTY"===e.name){var n="DIVISIBLE_BY"===t.getFieldValue("PROPERTY");t.updateShape(n)}}))},definition:function(){return{message0:Object(Ot.localize)("%1 is %2"),args0:[{type:"input_value",name:"NUMBER_TO_CHECK"},{type:"field_dropdown",name:"PROPERTY",options:[[Object(Ot.localize)("even"),"EVEN"],[Object(Ot.localize)("odd"),"ODD"],[Object(Ot.localize)("prime"),"PRIME"],[Object(Ot.localize)("whole"),"WHOLE"],[Object(Ot.localize)("positive"),"POSITIVE"],[Object(Ot.localize)("negative"),"NEGATIVE"],[Object(Ot.localize)("divisible by"),"DIVISIBLE_BY"]]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,toolip:Object(Ot.localize)("This block tests a given number according to the selection"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Test a number"),description:Object(Ot.localize)("This block tests a given number according to the selection and it returns a value of “True” or “False”. Available options: Even, Odd, Prime, Whole, Positive, Negative, Divisible")}},domToMutation:function(t){var e="true"===t.getAttribute("divisor_input");this.updateShape(e)},mutationToDom:function(){var t=document.createElement("mutation"),e="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return t.setAttribute("divisor_input",e),t},updateShape:function(t){var e=this.getInput("DIVISOR");t?e||(this.appendValueInput("DIVISOR").setCheck("Number"),this.initSvg(),this.render(!1)):this.removeInput("DIVISOR")}},Blockly.JavaScript.math_number_property=function(t){var e,n=Blockly.JavaScript.valueToCode(t,"NUMBER_TO_CHECK",Blockly.JavaScript.ORDER_MODULUS)||"0",r=t.getFieldValue("PROPERTY");return"PRIME"===r?[e=Blockly.JavaScript.provideFunction_("mathIsPrime",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(n) {\n                // https://en.wikipedia.org/wiki/Primality_test#Naive_methods\n                if (n == 2 || n == 3) {\n                    return true;\n                }\n\n                // False if n is NaN, negative, is 1, or not whole.\n                // And false if n is divisible by 2 or 3.\n                if (isNaN(n) || n <= 1 || n % 1 != 0 || n % 2 == 0 || n % 3 == 0) {\n                    return false;\n                }\n\n                // Check all the numbers of form 6k +/- 1, up to sqrt(n).\n                for (var x  = 6; x <= Math.sqrt(n) + 1; x += 6) {\n                    if (n % (x - 1) == 0 || n % (x + 1) == 0) {\n                        return false;\n                    }\n                }\n                return true;\n            }"])+"("+n+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]:("EVEN"===r?e=n+" % 2 === 0":"ODD"===r?e=n+" % 2 === 1":"WHOLE"===r?e=n+" % 1 === 0":"POSITIVE"===r?e=n+" > 0":"NEGATIVE"===r?e=n+" < 0":"DIVISIBLE_BY"===r&&(e=n+" % "+(Blockly.JavaScript.valueToCode(t,"DIVISOR",Blockly.JavaScript.ORDER_MODULUS)||"0")+" == 0"),[e,Blockly.JavaScript.ORDER_EQUALITY])},Blockly.Blocks.math_on_list={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 of list %2"),args0:[{type:"field_dropdown",name:"OP",options:[[Object(Ot.localize)("sum"),"SUM"],[Object(Ot.localize)("min"),"MIN"],[Object(Ot.localize)("max"),"MAX"],[Object(Ot.localize)("average"),"AVERAGE"],[Object(Ot.localize)("median"),"MEDIAN"],[Object(Ot.localize)("modes"),"MODE"],[Object(Ot.localize)("standard deviation"),"STD_DEV"],[Object(Ot.localize)("random item"),"RANDOM"]]},{type:"input_value",name:"LIST"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Aggregate operations"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Aggregate operations"),description:Object(Ot.localize)("This block performs the following operations on a given list: sum, minimum, maximum, average, median, modes, standard deviation, random item.")}}},Blockly.JavaScript.math_on_list=function(t){var e,n=t.getFieldValue("OP");return"SUM"===n?e=(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_MEMBER)||"[]")+".reduce(function(x, y) { return x + y; })":"MIN"===n?e="Math.min.apply(null, "+(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_COMMA)||"[]")+")":"MAX"===n?e="Math.max.apply(null, "+(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_COMMA)||"[]")+")":"AVERAGE"===n?e=Blockly.JavaScript.provideFunction_("mathMean",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {\n                return myList.reduce(function(x, y) { \n                    return x + y; \n                }) / myList.length;\n            }"])+"("+(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]")+")":"MEDIAN"===n?e=Blockly.JavaScript.provideFunction_("mathMedian",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(myList) {\n                var localList = myList.filter(function(x) { \n                    return typeof x == 'number'; \n                });\n                if (!localList.length) {\n                    return null;\n                }\n                localList.sort(function(a, b) { \n                    return b - a; \n                });\n                if (localList.length % 2 == 0) {\n                    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;\n                } else {\n                    return localList[(localList.length - 1) / 2];\n                }\n            }"])+"("+(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]")+")":"MODE"===n?e=Blockly.JavaScript.provideFunction_("mathModes",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(values) {\n                var modes = [];\n                var counts = [];\n                var maxCount = 0;\n\n                for (var i = 0; i < values.length; i++) {\n                    var value = values[i];\n                    var found = false;\n                    var thisCount;\n\n                    for (var j = 0; j < counts.length; j++) {\n                        if (counts[j][0] === value) {\n                            thisCount = ++counts[j][1];\n                            found = true;\n                            break;\n                        }\n                    }\n\n                    if (!found) {\n                        counts.push([value, 1]);\n                        thisCount = 1;\n                    }\n                    maxCount = Math.max(thisCount, maxCount);\n                }\n                \n                for (var j = 0; j < counts.length; j++) {\n                    if (counts[j][1] == maxCount) {\n                        modes.push(counts[j][0]);\n                    }\n                }\n\n                return modes;\n            }"])+"("+(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]")+")":"STD_DEV"===n?e=Blockly.JavaScript.provideFunction_("mathStandardDeviation",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(numbers) {\n                var n = numbers.length;\n                if (!n) {\n                    return null;\n                }\n\n                var mean = numbers.reduce(function(x, y) {\n                    return x + y;\n                }) / n;\n\n                var variance = 0;\n                for (var j = 0; j < n; j++) {\n                    variance += Math.pow(numbers[j] - mean, 2);\n                }\n                variance = variance / n;\n                return Math.sqrt(variance);\n            }"])+"("+(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]")+")":"RANDOM"===n&&(e=Blockly.JavaScript.provideFunction_("mathRandomList",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(list) {\n                var x = Math.floor(Math.random() * list.length);\n                return list[x];\n            }"])+"("+(Blockly.JavaScript.valueToCode(t,"LIST",Blockly.JavaScript.ORDER_NONE)||"[]")+")"),[e,Blockly.JavaScript.FUNCTION_CALL]},Blockly.Blocks.math_random_float={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("random fraction"),output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you a random fraction between 0.0 to 1.0"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Random fraction number"),description:Object(Ot.localize)("This block gives you a random fraction between 0.0 to 1.0.")}}},Blockly.JavaScript.math_random_float=function(){return["Math.random()",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_random_int={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("random integer from %1 to %2"),args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block gives you a random number from within a set range"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Random integer"),description:Object(Ot.localize)("This block gives you a random number from within a set range.")}}},Blockly.JavaScript.math_random_int=function(t){var e=Blockly.JavaScript.valueToCode(t,"FROM",Blockly.JavaScript.ORDER_COMMA)||"0",n=Blockly.JavaScript.valueToCode(t,"TO",Blockly.JavaScript.ORDER_COMMA)||"0";return[Blockly.JavaScript.provideFunction_("mathRandomInt",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(a, b) {\n            if (a > b) {\n                // Swap a and b to ensure a is smaller.\n                var c = a;\n                a = b;\n                b = c;\n            }\n            return Math.floor(Math.random() * (b - a + 1) + a);\n        }"])+"("+e+", "+n+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_round={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["round","ROUND"],["round up","ROUNDUP"],["round down","ROUNDDOWN"]]},{type:"input_value",name:"NUM"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Rounds a given number to an integer"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Rounding operation"),description:Object(Ot.localize)("This block rounds a given number according to the selection: round, round up, round down.")}}},Blockly.JavaScript.math_round=function(t){var e,n=t.getFieldValue("OP"),r=Blockly.JavaScript.valueToCode(t,"NUM")||"0";return"ROUND"===n?e="Math.round("+r+")":"ROUNDUP"===n?e="Math.ceil("+r+")":"ROUNDDOWN"===n&&(e="Math.floor("+r+")"),[e,Blockly.JavaScript.FUNCTION_CALL]},Blockly.Blocks.math_arithmetic={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["+","ADD"],["-","MINUS"],["*","MULTIPLY"],["/","DIVIDE"],["^","POWER"]]},{type:"input_value",name:"B",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("This block performs arithmetic operations between two numbers."),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Arithmetical operations"),description:Object(Ot.localize)("This block performs arithmetic operations between two numbers.")}}},Blockly.JavaScript.math_arithmetic=function(t){var e={ADD:["+",Blockly.JavaScript.ORDER_ADDITION],MINUS:["-",Blockly.JavaScript.ORDER_SUBTRACTION],MULTIPLY:["*",Blockly.JavaScript.ORDER_MULTIPLICATION],DIVIDE:["/",Blockly.JavaScript.ORDER_DIVISION],POWER:[null,Blockly.JavaScript.ORDER_COMMA]}[t.getFieldValue("OP")],n=e[0],r=e[1],i=Blockly.JavaScript.valueToCode(t,"A",r)||"0",o=Blockly.JavaScript.valueToCode(t,"B",r)||"0";return n?[i+" "+n+" "+o,r]:["Math.pow("+i+", "+o+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.math_single={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 %2"),args0:[{type:"field_dropdown",name:"OP",options:[[Object(Ot.localize)("square root"),"ROOT"],[Object(Ot.localize)("absolute"),"ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Operations on a given number"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Operations on a given number"),description:Object(Ot.localize)("This block performs the selected operations to a given number.")}}},Blockly.JavaScript.math_single=function(t){var e,n,r=t.getFieldValue("OP");return"NEG"===r?("-"===(n=Blockly.JavaScript.valueToCode(t,"NUM",Blockly.JavaScript.ORDER_UNARY_NEGATION)||"0")[0]&&(n=" "+n),[e="-"+n,Blockly.JavaScript.ORDER_UNARY_NEGATION]):(n=["SIN","COS","TAN"].includes(r)?Blockly.JavaScript.valueToCode(t,"NUM",Blockly.JavaScript.ORDER_DIVISION)||"0":Blockly.JavaScript.valueToCode(t,"NUM",Blockly.JavaScript.ORDER_NONE)||"0","ABS"===r?e="Math.abs("+n+")":"ROOT"===r?e="Math.sqrt("+n+")":"LN"===r?e="Math.log("+n+")":"EXP"===r?e="Math.pow(Math.E, "+n+")":"POW10"===r?e="Math.pow(10, "+n+")":"ROUND"===r?e="Math.round("+n+")":"ROUNDUP"===r?e="Math.ceil("+n+")":"ROUNDDOWN"===r?e="Math.floor("+n+")":"SIN"===r?e="Math.sin("+n+" / 180 * Math.PI)":"COS"===r?e="Math.cos("+n+" / 180 * Math.PI)":"TAN"===r&&(e="Math.tan("+n+" / 180 * Math.PI)"),e?[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]:("LOG10"===r?e="Math.log("+n+") / Math.log(10)":"ASIN"===r?e="Math.asin("+n+") / Math.PI * 180":"ACOS"===r?e="Math.acos("+n+") / Math.PI * 180":"ATAN"===r&&(e="Math.atan("+n+") / Math.PI * 180"),[e,Blockly.JavaScript.ORDER_DIVISION]))},Blockly.Blocks.math_trig={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("%1 %2"),args0:[{type:"field_dropdown",name:"OP",options:[["sin","SIN"],["cos","COS"],["tan","TAN"],["asin","ASIN"],["acos","ACOS"],["atan","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Trigonometric functions"),category:Blockly.Categories.Mathematical}},meta:function(){return{display_name:Object(Ot.localize)("Trigonometric functions"),description:Object(Ot.localize)("This block performs trigonometric functions.")}}},Blockly.JavaScript.math_trig=Blockly.JavaScript.math_single,Blockly.Blocks.text={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:"%1",args0:[{type:"field_input",name:"TEXT"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Enter some text here"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Text"),description:Object(Ot.localize)("A  block that can contain text.")}}},Blockly.JavaScript.text=function(t){return[Blockly.JavaScript.quote_(t.getFieldValue("TEXT")),Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.text_join={protected_statements:["STACK"],init:function(){this.jsonInit(this.definition());var t=new Blockly.FieldImage(Xe,25,25,"",this.onIconClick.bind(this));this.appendDummyInput("ADD_ICON").appendField(t),this.moveInputBefore("ADD_ICON","STACK")},definition:function(){return{message0:Object(Ot.localize)("set %1 to create text with"),message1:"%1",args0:[{type:"field_variable",name:"VARIABLE",variable:Object(Ot.localize)("text")}],args1:[{type:"input_statement",name:"STACK"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Text join"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Text join"),description:Object(Ot.localize)("Creates a single text string from combining the text value of each attached item, without spaces in between. The number of items can be added accordingly.")}},onIconClick:function(){if(this.workspace&&!this.isInFlyout){Blockly.Events.setGroup(!0);var t=this.workspace.newBlock("text_statement");t.requiredParentId=this.id,t.setMovable(!1),t.initSvg(),t.render();var e=this.workspace.newBlock("text");e.setShadow(!0),e.setFieldValue("","TEXT"),e.initSvg(),e.render(),t.getInput("TEXT").connection.connect(e.outputConnection),this.getLastConnectionInStatement("STACK").connect(t.previousConnection),Blockly.Events.setGroup(!1)}},enforceTextStatementType:function(){for(var t=this.getInputTargetBlock("STACK");null!==t;)"text_statement"!==t.type&&t.unplug(!1),t=t.getNextBlock()},onchange:function(t){!this.workspace||this.isInFlyout||this.workspace.isDragging()||t.type===Blockly.Events.END_DRAG&&this.getBlocksInStatement("STACK").forEach((function(t){"text_statement"!==t.type&&(Blockly.Events.disable(),t.unplug(),Blockly.Events.enable())}))}},Blockly.JavaScript.text_join=function(t){for(var e=Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VARIABLE"),Blockly.Variables.NAME_TYPE),n=[],r=t.getInputTargetBlock("STACK");null!==r;){var i=Blockly.JavaScript[r.type](r);Array.isArray(i)&&2===i.length?n.push(i[0]):n.push(i),r=r.getNextBlock()}return 0===n.length?e+" = '';\n":e+" = "+n.join(" + ")+";\n"},Blockly.Blocks.text_statement={init:function(){var t=this;this.requiredParentId="",this.jsonInit(this.definition());var e=new Blockly.FieldImage(Ze,25,25,"",(function(){return t.onIconClick()}));this.appendDummyInput("REMOVE_ICON").appendField(e)},definition:function(){return{message0:"%1",args0:[{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Text string"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Text Statement"),description:Object(Ot.localize)("Text Statement Description")}},onIconClick:function(){this.workspace&&!this.isInFlyout&&(this.unplug(!0),this.dispose())},onchange:function(t){var e=this;if(this.workspace&&!this.isInFlyout&&!this.workspace.isDragging()){var n=this.getSurroundParent();if(t.type===Blockly.Events.END_DRAG)if(this.requiredParentId||"text_join"!==n.type){if(!n||n.id!==this.requiredParentId){Blockly.Events.disable(),this.unplug(!1);var r=this.workspace.getAllBlocks().find((function(t){return t.id===e.requiredParentId}));r?r.getLastConnectionInStatement("STACK").connect(this.previousConnection):this.dispose(),Blockly.Events.enable()}}else this.requiredParentId=n.id}}},Blockly.JavaScript.text_statement=function(t){return["String("+Blockly.JavaScript.valueToCode(t,"TEXT")+")",Blockly.JavaScript.ORDER_ATOMIC]},Blockly.Blocks.text_append={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("to %1 append text %2"),args0:[{type:"field_variable",name:"VAR",variable:Object(Ot.localize)("text")},{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Appends a given text to a varialbe"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Text Append"),description:Object(Ot.localize)("Appends a given text to a variable.")}}},Blockly.JavaScript.text_append=function(t){return Blockly.JavaScript.variableDB_.getName(t.getFieldValue("VAR"),Blockly.Variables.NAME_TYPE)+" += "+function(t){return/^\s*'([^']|\\')*'\s*$/.test(t)?t:"String("+t+")"}(Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''")+";\n"},Blockly.Blocks.text_length={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("length of %1"),args0:[{type:"input_value",name:"VALUE"}],output:"Number",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Text String Length"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Text String Length"),description:Object(Ot.localize)("Returns the number of characters of a given string of text, including numbers, spaces, punctuation marks, and symbols.")}}},Blockly.JavaScript.text_length=function(t){return[(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''")+".length",Blockly.JavaScript.ORDER_MEMBER]},Blockly.Blocks.text_isEmpty={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("text %1 is empty"),args0:[{type:"input_value",name:"VALUE",check:["String"]}],output:"Boolean",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Tests if a given text string is empty"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Text Is empty"),description:Object(Ot.localize)("Tests whether a string of text is empty. Returns a boolean value (true or false).")}}},Blockly.JavaScript.text_isEmpty=function(t){var e=Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''";return[-1!==t.workspace.getAllVariables().findIndex((function(t){return t.name===e}))?"!"+e+" || !"+e+".length":"!"+e+".length",Blockly.JavaScript.ORDER_LOGICAL_NOT]},Blockly.Blocks.text_indexOf={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("in text %1 find %2 occurence of text %3"),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"END",options:[[Object(Ot.localize)("first"),"FIRST"],[Object(Ot.localize)("last"),"LAST"]]},{type:"input_value",name:"FIND"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Search for a given string string"),cateogry:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Search for string"),description:Object(Ot.localize)("Searches through a string of text for a specific occurrence of a given character or word, and returns the position.")}}},Blockly.JavaScript.text_indexOf=function(t){var e="FIRST"===t.getFieldValue("END")?"indexOf":"lastIndexOf",n=Blockly.JavaScript.valueToCode(t,"FIND",Blockly.JavaScript.ORDER_NONE)||"''",r=(Blockly.JavaScript.valueToCode(t,"VALUE",Blockly.JavaScript.ORDER_MEMBER)||"''")+"."+e+"("+n+")";return t.workspace.options.oneBasedIndex?[r+" + 1",Blockly.JavaScript.ORDER_ADDITION]:[r,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_charAt={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("WHERE").setValidator((function(e){var n=["FROM_START","FROM_END"].includes(e);if(n!==t.isAt)return t.updateAt(n),t.setFieldValue(e,"WHERE"),null})),this.updateAt(!0)},definition:function(){return{message0:Object(Ot.localize)("in text %1 get %2"),args0:[{type:"input_value",name:"VALUE"},{type:"field_dropdown",name:"WHERE",options:[[Object(Ot.localize)("letter #"),"FROM_START"],[Object(Ot.localize)("letter # from end"),"FROM_END"],[Object(Ot.localize)("first letter"),"FIRST"],[Object(Ot.localize)("last letter"),"LAST"],[Object(Ot.localize)("random letter"),"RANDOM"]]}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns a specific character from a given string"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Get character"),description:Object(Ot.localize)("Returns the specific character from a given string of text according to the selected option. ")}},mutationToDom:function(){var t=document.createElement("mutation");return t.setAttribute("at",!!this.isAt),t},domToMutation:function(t){var e="false"!==t.getAttribute("at");this.updateAt(e)},updateAt:function(t){this.removeInput("AT",!0),t&&this.appendValueInput("AT").setCheck("Number"),this.isAt=t,this.initSvg(),this.render(!1)}},Blockly.JavaScript.text_charAt=function(t){var e,n=t.getFieldValue("WHERE")||"FROM_START",r="RANDOM"===n?Blockly.JavaScript.ORDER_NONE:Blockly.JavaScript.ORDER_MEMBER,i=Blockly.JavaScript.valueToCode(t,"VALUE",r)||"''";return"FROM_START"===n?e=i+".charAt("+Blockly.JavaScript.getAdjusted(t,"AT")+")":"FROM_END"===n?e=i+".slice("+Blockly.JavaScript.getAdjusted(t,"AT",1,!0)+").charAt(0)":"FIRST"===n?e=i+".charAt(0)":"LAST"===n?e=i+".slice(-1)":"RANDOM"===n&&(e=Blockly.JavaScript.provideFunction_("textRandomLetter",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(text) {\n                var x = Math.floor(Math.random() * text.length);\n                return text[x];\n            }"])+"("+i+")"),[e,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[Object(Ot.localize)("letter #"),"FROM_START"],[Object(Ot.localize)("letter # from end"),"FROM_END"],[Object(Ot.localize)("first"),"FIRST"]],this.WHERE_OPTIONS_2=[[Object(Ot.localize)("letter #"),"FROM_START"],[Object(Ot.localize)("letter # from end"),"FROM_END"],[Object(Ot.localize)("last"),"LAST"]],this.jsonInit(this.definition()),this.updateAt(1,!0),this.updateAt(2,!0)},definition:function(){return{message0:Object(Ot.localize)("in text %1 get substring from %2 %3 to %4 %5"),args0:[{type:"input_value",name:"STRING"},{type:"field_dropdown",name:"WHERE1",options:this.WHERE_OPTIONS_1},{type:"input_dummy",name:"AT1"},{type:"field_dropdown",name:"WHERE2",options:this.WHERE_OPTIONS_2},{type:"input_dummy",name:"AT2"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Returns a specific portion of a given string of text."),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Get substring"),description:Object(Ot.localize)("Returns a specific portion of a given string of text.")}},mutationToDom:function(){var t=document.createElement("mutation"),e=this.getInput("AT1").type===Blockly.INPUT_VALUE,n=this.getInput("AT2").type===Blockly.INPUT_VALUE;return t.setAttribute("at1",e),t.setAttribute("at2",n),t},domToMutation:function(t){var e="true"===t.getAttribute("at1"),n="true"===t.getAttribute("at2");this.updateAt(1,e),this.updateAt(2,n)},updateAt:function(t,e){var n,r=this,i=this.getInput("AT"+t);i&&(i.fieldRow.some((function(t){t instanceof Blockly.FieldLabel&&(n=t.text_)})),this.removeInput("AT"+t));var o=e?this.appendValueInput("AT"+t).setCheck("Number"):this.appendDummyInput("AT"+t);n&&o.insertFieldAt(0,new Blockly.FieldLabel(n));var a=new Blockly.FieldDropdown(this["WHERE_OPTIONS_"+t],(function(n){var i=["FROM_START","FROM_END"].includes(n);if(i!==e)return r.updateAt(t,i),r.setFieldValue(n,"WHERE"+t),null}));this.getInput("AT"+t).appendField(a,"WHERE"+t),1===t&&this.moveInputBefore("AT1","AT2"),this.initSvg(),this.render(!1)}},Blockly.JavaScript.text_getSubstring=function(t){var e,n,r=Blockly.JavaScript.valueToCode(t,"STRING",Blockly.JavaScript.ORDER_FUNCTION_CALL)||"''",i=t.getFieldValue("WHERE1"),o=t.getFieldValue("WHERE2");if("FIRST"===i&&"LAST"===o);else if(r.match(/^'?\w+'?$/)||"FROM_END"!==i&&"LAST"!==i&&"FROM_END"!==o&&"LAST"!==o)"FROM_START"===i?e=Blockly.JavaScript.getAdjusted(t,"AT1"):"FROM_END"===i?e=r+".length - "+(e=Blockly.JavaScript.getAdjusted(t,"AT1",1,!1,Blockly.JavaScript.ORDER_SUBTRACTION)):"FIRST"===i&&(e="0"),"FROM_START"===o?n=Blockly.JavaScript.getAdjusted(t,"AT2"):"FROM_END"===o?n=r+".length - "+(n=Blockly.JavaScript.getAdjusted(t,"AT2",0,!1,Blockly.JavaScript.ORDER_SUBTRACTION)):"LAST"===o&&(n=r+".length");else{e=Blockly.JavaScript.getAdjusted(t,"AT1"),n=Blockly.JavaScript.getAdjusted(t,"AT2");var a=function(t,e,n){return"FIRST"===e?"0":"FROM_END"===e?t+".length - 1 - "+n:"LAST"===e?t+".length - 1":n},s={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};Blockly.JavaScript.provideFunction_("subsequence"+s[i]+s[o],["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(\n                    sequence\n                    "+("FROM_END"===i||"FROM_START"===i?", at1":"")+"\n                    "+("FROM_END"===o||"FROM_START"===o?", at2":"")+"\n                ) {\n                    var start = "+a("sequence",i,"at1")+";\n                    var end = "+a("sequence",o,"at2")+";\n                    return sequence.slice(start, end);\n                }"])}return[r+".slice("+e+", "+n+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_changeCase={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("to %1 %2"),args0:[{type:"field_dropdown",name:"CASE",options:[[Object(Ot.localize)("UPPER CASE"),"UPPERCASE"],[Object(Ot.localize)("lower case"),"LOWERCASE"],[Object(Ot.localize)("Title Case"),"TITLECASE"]]},{type:"input_value",name:"TEXT"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Changes text case accordingly"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Change text case"),description:Object(Ot.localize)("Changes the capitalisation of a string of text to Upper case, Lower case, Title case.")}}},Blockly.JavaScript.text_changeCase=function(t){var e={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[t.getFieldValue("CASE")],n=e?Blockly.JavaScript.ORDER_MEMBER:Blockly.JavaScript.ORDER_NONE,r=Blockly.JavaScript.valueToCode(t,"TEXT",n)||"''";return[e?""+r+e:Blockly.JavaScript.provideFunction_("textToTitleCase",["function "+Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(str) {\n                return str.toLowerCase().split(' ').map(function(word) {\n                    return word.replace(word[0], word[0].toUpperCase());\n                }).join(' ');\n            }"])+"("+r+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_trim={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("trim spaces from %1 of %2"),args0:[{type:"field_dropdown",name:"MODE",options:[[Object(Ot.localize)("both sides"),"BOTH"],[Object(Ot.localize)("left side"),"LEFT"],[Object(Ot.localize)("right side"),"RIGHT"]]},{type:"input_value",name:"TEXT"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Base.colour,colourSecondary:Blockly.Colours.Base.colourSecondary,colourTertiary:Blockly.Colours.Base.colourTertiary,tooltip:Object(Ot.localize)("Trims spaces"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Trim spaces"),description:Object(Ot.localize)("Trims the spaces within a given string or text.")}}},Blockly.JavaScript.text_trim=function(t){var e={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[t.getFieldValue("MODE")];return[""+(Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_MEMBER)||"''")+e,Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Blocks.text_print={init:function(){this.jsonInit(this.definition())},definition:function(){return{message0:Object(Ot.localize)("print %1"),args0:[{type:"input_value",name:"TEXT"}],colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,previousStatement:null,nextStatement:null,tooltip:Object(Ot.localize)("Displays a dialog window with a message"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Print"),description:Object(Ot.localize)("This block displays a dialog window with a given message.")}}},Blockly.JavaScript.text_print=function(t){return"window.alert("+(Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''")+");\n"},Blockly.Blocks.text_prompt_ext={init:function(){var t=this;this.jsonInit(this.definition()),this.getField("TYPE").setValidator((function(e){"TEXT"===e?t.setOutput(!0,"String"):"NUMBER"===e&&t.setOutput(!0,"Number"),t.initSvg(),t.render(!1)}))},definition:function(){return{message0:Object(Ot.localize)("prompt for %1 with message %2"),args0:[{type:"field_dropdown",name:"TYPE",options:[[Object(Ot.localize)("string"),"TEXT"],[Object(Ot.localize)("number"),"NUMBER"]]},{type:"input_value",name:"TEXT"}],output:"String",outputShape:Blockly.OUTPUT_SHAPE_ROUND,colour:Blockly.Colours.Special3.colour,colourSecondary:Blockly.Colours.Special3.colourSecondary,colourTertiary:Blockly.Colours.Special3.colourTertiary,tooltip:Object(Ot.localize)("Request an input"),category:Blockly.Categories.Text}},meta:function(){return{display_name:Object(Ot.localize)("Request an input"),description:Object(Ot.localize)("This block creates a dialog box that uses a customised message to prompt for an input. The input can be either a string of text or a number.")}}},Blockly.JavaScript.text_prompt_ext=function(t){var e;return e=t.getField("TEXT")?Blockly.JavaScript.quote_(t.getFieldValue("TEXT")):Blockly.JavaScript.valueToCode(t,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''",["NUMBER"===t.getFieldValue("TYPE")?"parseFloat(window.prompt("+e+"))":"window.prompt("+e+")",Blockly.JavaScript.ORDER_FUNCTION_CALL]},Blockly.Block.prototype.getDisplayName=function(){if(this.meta){var t=this.meta();return t&&t.display_name}return this.type},Blockly.Block.prototype.getSiblings=function(){var t=this,e=[this];return["getPreviousBlock","getNextBlock"].forEach((function(n){for(var r=t[n]();null!==r;){var i=t.getParent();if(i&&i.id===r.id)break;e.push(r),r=r[n]()}})),e},Blockly.Block.prototype.getChildByType=function(t){return this.getDescendants().find((function(e){return e.type===t}))},Blockly.Block.prototype.getChildFieldValue=function(t,e){var n=this.getChildByType(t);return n?n.getFieldValue(e):null},Blockly.Block.prototype.childValueToCode=function(t,e){var n=this.getChildByType(t);return n&&Blockly.JavaScript.valueToCode(n,e,Blockly.JavaScript.ORDER_ATOMIC)},Blockly.Block.prototype.getBlocksInStatement=function(t){var e=this.getInputTargetBlock(t);return e?e.getSiblings():[]},Blockly.Block.prototype.getLastConnectionInStatement=function(t){var e=this.getInputTargetBlock(t);return e?e.lastConnectionInStack():this.getInput(t).connection},Blockly.Block.prototype.isDescendantOf=function(t){for(var e=this.getParent();null!==e;){if(e.type===t)return!0;e=e.getParent()}return!1},Blockly.Block.prototype.getTopParent=function(){for(var t=this.getParent();null!==t;){var e=t.getParent();if(!e)return t;t=e}return null},Blockly.Block.getDimensions=function(t){var e=new Blockly.Options({media:n.p+"media/"}),r=document.createDocumentFragment(),i=document.createElement("div");r.appendChild(i);var o=Blockly.createDom_(i,e),a=Blockly.createMainWorkspace_(o,e,!1,!1),s=Blockly.Xml.domToBlock(t,a).getHeightWidth();return a.dispose(),s},Blockly.Block.prototype.isMainBlock=function(){return It.mainBlocks.includes(this.type)},Blockly.Block.prototype.isIndependentBlock=function(){return It.INDEPEDENT_BLOCKS.includes(this.type)},Blockly.Block.prototype.getRootInputTargetBlock=function(){for(var t,e=this.getParent();e;){var n=this.getRootBlock().getInputWithBlock(e);n&&n.name&&(t=n.name),e=e.getParent()}return t},Blockly.Block.isDynamic=function(t){return/^((procedures_)|(variables_)|(math_change$))/.test(t)},n(303),Blockly.BlockSvg.TAB_WIDTH=8,Blockly.BlockSvg.prototype.addSelect=function(){this.isInFlyout||(en.instance.flyout.setVisibility(!1),Blockly.utils.addClass(this.svgGroup_,"blocklySelected"))},Blockly.BlockSvg.prototype.setDisabled=function(t){this.disabled!==t&&(Blockly.BlockSvg.superClass_.setDisabled.call(this,t),this.rendered&&this.updateDisabled())},Blockly.BlockSvg.prototype.updateDisabled=function(){this.disabled||this.getInheritedDisabled()?Blockly.utils.addClass(this.svgGroup_,"blocklyDisabled")&&this.svgPath_.setAttribute("fill","url(#"+this.workspace.options.disabledPatternId+")"):Blockly.utils.removeClass(this.svgGroup_,"blocklyDisabled")&&this.updateColour(),this.getChildren(!1).forEach((function(t){t.updateDisabled()}))},Blockly.BlockSvg.prototype.showContextMenu_=function(t){if(!this.workspace.options.readOnly&&this.contextMenu){var e=this,n=[];if(this.isDeletable()&&this.isMovable()&&!e.isInFlyout)n.push(Blockly.ContextMenu.blockDuplicateOption(e,t)),this.isEditable()&&this.workspace.options.comments&&n.push(Blockly.ContextMenu.blockCommentOption(e)),n.push(Blockly.ContextMenu.blockDeleteOption(e));else if(this.parentBlock_&&this.isShadow_)return void this.parentBlock_.showContextMenu_(t);if(this.workspace.options.collapse)if(this.collapsed_){var r={enabled:!0};r.text=Object(Ot.localize)("Expand Block"),r.callback=function(){e.setCollapsed(!1)},n.push(r)}else{var i={enabled:!0};i.text=Object(Ot.localize)("Collapse Block"),i.callback=function(){e.setCollapsed(!0)},n.push(i)}if(this.workspace.options.disable){var o={text:this.disabled?Object(Ot.localize)("Enable Block"):Object(Ot.localize)("Disable Block"),enabled:!this.getInheritedDisabled(),callback:function(){var t=Blockly.Events.getGroup();t||Blockly.Events.setGroup(!0),e.setDisabled(!e.disabled),t||Blockly.Events.setGroup(!1)}};n.push(o),this.customContextMenu&&this.customContextMenu(n),Blockly.ContextMenu.show(t,n,this.RTL),Blockly.ContextMenu.currentBlock=this}}},n(304),n(305),Blockly.Categories={Trade_Definition:Object(Ot.localize)("trade_parameters"),Before_Purchase:Object(Ot.localize)("purchase_conditions"),During_Purchase:Object(Ot.localize)("sell_conditions"),After_Purchase:Object(Ot.localize)("trade_results"),Mathematical:Object(Ot.localize)("math"),Logic:Object(Ot.localize)("logic"),Text:Object(Ot.localize)("text"),Variables:Object(Ot.localize)("variables"),Functions:Object(Ot.localize)("custom_functions"),List:Object(Ot.localize)("lists"),Indicators:Object(Ot.localize)("indicators"),Time:Object(Ot.localize)("time"),Tick_Analysis:Object(Ot.localize)("technical_analysis"),Candle:Object(Ot.localize)("candle"),Miscellaneous:Object(Ot.localize)("miscellaneous"),Loop:Object(Ot.localize)("loops")},Blockly.DRAG_RADIUS=3,Blockly.FLYOUT_DRAG_RADIUS=1,Blockly.ContextMenu.wsCleanupOption=function(t,e){return{text:Object(Ot.localize)("Rearrange Vertically"),enabled:e>1,callback:t.cleanUp.bind(t)}},Blockly.ContextMenu.wsCollapseOption=function(t,e){return{enabled:t,text:Object(Ot.localize)("Collapse Blocks"),callback:function(){Blockly.ContextMenu.toggleCollapseFn_(e,!0)}}},Blockly.ContextMenu.wsExpandOption=function(t,e){return{enabled:t,text:Object(Ot.localize)("Expand Blocks"),callback:function(){Blockly.ContextMenu.toggleCollapseFn_(e,!1)}}},n(306),n(74),Blockly.DataCategory=function(t){var e=t.getVariablesOfType(""),n=[];return Blockly.DataCategory.addCreateButton(n,t),n.concat(Blockly.DataCategory.search(e,["variables_set","variables_get","math_change"]))},Blockly.DataCategory.search=function(t){var e=[];if(t.length>0){var n=function(t){return'<field name="VAR" id="'+t.getId()+'" variabletype="'+goog.string.htmlEscape(t.type)+'">'+goog.string.htmlEscape(t.name)+"</field>"},r=t[0];if(Blockly.Blocks.variables_set){var i='<xml><block type="variables_set" gap="'+(Blockly.Blocks.math_change?8:24)+'">'+n(r)+"</block></xml>",o=Blockly.Xml.textToDom(i).firstChild;e.push(o)}Blockly.Blocks.variables_get&&(t.sort(Blockly.VariableModel.compareByName),t.forEach((function(t){var r='<xml><block type="variables_get">'+n(t)+"</block></xml>",i=Blockly.Xml.textToDom(r).firstChild;e.push(i)})))}return e},Blockly.DataCategory.addCreateButton=function(t,e){var n=goog.dom.createDom("button"),r=Object(Ot.localize)("Create variable");n.setAttribute("text",r),n.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",(function(t){var e=t.getTargetWorkspace();Blockly.Variables.createVariable(e,null,"");var n=Blockly.derivWorkspace.toolbox_,r=Blockly.derivWorkspace.toolbox_.getSelectedItem();n.setSelectedItem(r,!1)})),t.push(n)},Blockly.FieldDropdown.prototype.updateOptions=function(t,e){void 0===e&&(e={}),Blockly.Events.disable();var n=this.getValue(),r=!1;if(e.should_pretend_empty&&(n=""),e.default_value&&(r=-1!==t.findIndex((function(t){return t[1]===e.default_value}))),this.menuGenerator_=t,r?(this.setValue(""),this.setValue(e.default_value)):t.length>0&&(this.setValue(""),this.setValue(this.menuGenerator_[0][1])),Blockly.Events.enable(),Blockly.DropDownDiv.isVisible()&&Blockly.DropDownDiv.hideWithoutAnimation(),!e.should_trigger_event||!0===e.should_trigger_event){var i=new Blockly.Events.BlockChange(this.sourceBlock_,"field",this.name,n,this.getValue());i.recordUndo=!1,e.event_group&&(i.group=e.event_group),Blockly.Events.fire(i)}},Blockly.FieldDropdown.prototype.init=function(){if(!this.fieldGroup_){this.arrowSize_=12,this.arrowX_=0,this.arrowY_=11,this.arrow_=Blockly.utils.createSvgElement("image",{height:this.arrowSize_+"px",width:this.arrowSize_+"px"}),this.arrow_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",Blockly.mainWorkspace.options.pathToMedia+"dropdown-arrow.svg"),this.className_+=" blocklyDropdownText",Blockly.FieldDropdown.superClass_.init.call(this),this.sourceBlock_.isShadow()||(this.box_=Blockly.utils.createSvgElement("rect",{rx:4*Blockly.BlockSvg.CORNER_RADIUS,ry:4*Blockly.BlockSvg.CORNER_RADIUS,x:0,y:0,width:this.size_.width,height:this.size_.height,stroke:this.sourceBlock_.getColourTertiary(),fill:this.sourceBlock_.getColourTertiary(),"fill-opacity":1},null),this.fieldGroup_.insertBefore(this.box_,this.textElement_));var t=this.text_;this.text_=null,this.setText(t)}},Blockly.FieldDropdown.prototype.onHide=function(){this.dropDownOpen_=!1,!this.disableColourChange_&&this.sourceBlock_&&this.sourceBlock_.isShadow()&&this.sourceBlock_.clearShadowColour()},Blockly.FieldImage=function(t,e,n,r,i,o){this.sourceBlock_=null,this.height_=Number(n),this.width_=Number(e),this.size_=new goog.math.Size(this.width_,this.height_),this.flipRtl_=o,this.tooltip_="",this.setValue(t),this.setText(r),"function"==typeof i&&(this.clickHandler_=i)},goog.inherits(Blockly.FieldImage,Blockly.Field),Blockly.FieldImage.fromJson=function(t){var e=Blockly.utils.replaceMessageReferences(t.src),n=Number(Blockly.utils.replaceMessageReferences(t.width)),r=Number(Blockly.utils.replaceMessageReferences(t.height)),i=Blockly.utils.replaceMessageReferences(t.alt),o=!!t.flipRtl;return new Blockly.FieldImage(e,n,r,i,null,o)},Blockly.FieldImage.prototype.EDITABLE=!1,Blockly.FieldImage.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=Blockly.utils.createSvgElement("g",{},null),this.visible_||(this.fieldGroup_.style.display="none"),this.imageElement_=Blockly.utils.createSvgElement("image",{height:this.height_+"px",width:this.width_+"px"},this.fieldGroup_),this.setValue(this.src_),this.setText(this.text_),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.tooltip_?this.imageElement_.tooltip=this.tooltip_:this.setTooltip(this.sourceBlock_),Blockly.Tooltip.bindMouseEvents(this.imageElement_),this.maybeAddClickHandler_())},Blockly.FieldImage.prototype.dispose=function(){goog.dom.removeNode(this.fieldGroup_),this.fieldGroup_=null,this.imageElement_=null},Blockly.FieldImage.prototype.maybeAddClickHandler_=function(){this.clickHandler_&&(this.mouseDownWrapper_=Blockly.bindEventWithChecks_(this.fieldGroup_,"mousedown",this,this.clickHandler_),this.imageElement_&&(this.imageElement_.style.cursor="pointer"))},Blockly.FieldImage.prototype.setTooltip=function(t){this.tooltip_=t,this.imageElement_&&(this.imageElement_.tooltip=t)},Blockly.FieldImage.prototype.getValue=function(){return this.src_},Blockly.FieldImage.prototype.setValue=function(t){null!==t&&(this.src_=t,this.imageElement_&&this.imageElement_.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t||""))},Blockly.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},Blockly.FieldImage.prototype.setText=function(t){null!==t&&(this.text_=t,this.imageElement_&&this.imageElement_.setAttribute("alt",t||""))},Blockly.FieldImage.prototype.render_=function(){},Blockly.FieldImage.prototype.forceRerender=function(){},Blockly.FieldImage.prototype.updateWidth=function(){},Blockly.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},Blockly.Field.register("field_image",Blockly.FieldImage),n(308),n(309),n(310),Blockly.Procedures.flyoutCategory=function(t){var e=[];if(Blockly.Blocks.procedures_defnoreturn){var n=document.createElement("block");n.setAttribute("type","procedures_defnoreturn"),n.setAttribute("gap",16);var r=document.createElement("field");r.setAttribute("name","NAME"),r.appendChild(document.createTextNode(Object(Ot.localize)("do something"))),n.appendChild(r),e.push(n)}if(Blockly.Blocks.procedures_defreturn){var i=document.createElement("block");i.setAttribute("type","procedures_defreturn"),i.setAttribute("gap",16);var o=document.createElement("field");o.setAttribute("name","NAME"),o.appendChild(document.createTextNode(Object(Ot.localize)("do something"))),i.appendChild(o),e.push(i)}if(Blockly.Blocks.procedures_ifreturn){var a=document.createElement("block");a.setAttribute("type","procedures_ifreturn"),a.setAttribute("gap",16),e.push(a)}e.length&&e[e.length-1].setAttribute("gap",24);var s=Blockly.Procedures.allProcedures(t);return e.concat(Blockly.Procedures.populateDynamicProcedures(s))},Blockly.Procedures.populateDynamicProcedures=function(t){var e=[],n=function(t,e){var n=[];if(!t)return n;for(var r=function(r){var i=t[r][0],o=t[r][1],a=document.createElement("block");a.setAttribute("type",e),a.setAttribute("gap",16);var s=document.createElement("mutation");s.setAttribute("name",i),a.appendChild(s),o.forEach((function(t){var e=document.createElement("arg");e.setAttribute("name",t),s.appendChild(e)})),n.push(a)},i=0;i<t.length;i++)r(i);return n};return(e=e.concat(n(t[0],"procedures_callnoreturn"))).concat(n(t[1],"procedures_callreturn"))},Blockly.Procedures.getDefinition=function(t,e){for(var n=e.getTopBlocks(!1),r=0;r<n.length;r++)if(n[r].getProcedureDef){var i=n[r].getProcedureDef();if(i&&Blockly.Names.equals(i[0],t))return n[r]}return null},Blockly.Procedures.isNameUsed=function(t,e,n){return e.getAllBlocks(!1).some((function(e){if(e!==n&&e.getProcedureDef){var r=e.getProcedureDef();return Blockly.Names.equals(r[0],t)}return!1}))},Blockly.WorkspaceDragger.prototype.drag=function(t){if(!this.workspace_.isFlyout){var e=this.startDragMetrics_,n=goog.math.Coordinate.sum(this.startScrollXY_,t),r=Math.min(n.x,-e.contentLeft),i=Math.min(n.y,-e.contentTop);r=Math.max(r,e.viewWidth-e.contentLeft-e.contentWidth),i=Math.max(i,e.viewHeight-e.contentTop-e.contentHeight),r=-r-e.contentLeft,i=-i-e.contentTop,this.updateScroll_(r,i)}},n(27),n(28);var yn=n(10),mn=n.n(yn),gn={id:"ic-check-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-check-usage",toString:function(){return this.url}},vn={id:"ic-cross-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-cross-usage",toString:function(){return this.url}},bn={id:"ic-logo-usage",viewBox:"0 0 32 32",url:n.p+"bot-sprite.svg#ic-logo-usage",toString:function(){return this.url}},_n={id:"ic-trade-active-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-trade-active-usage",toString:function(){return this.url}},En={id:"icon-info-blue-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#icon-info-blue-usage",toString:function(){return this.url}},Tn={id:"icon-info-outline-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#icon-info-outline-usage",toString:function(){return this.url}},Sn={id:"run-icon-usage",viewBox:"0 0 14 16",url:n.p+"bot-sprite.svg#run-icon-usage",toString:function(){return this.url}},kn={id:"stop-icon-usage",viewBox:"0 0 14 16",url:n.p+"bot-sprite.svg#stop-icon-usage",toString:function(){return this.url}},wn={id:"google-drive-active-usage",viewBox:"0 0 48 42",url:n.p+"bot-sprite.svg#google-drive-active-usage",toString:function(){return this.url}},An={id:"ic-close-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-close-usage",toString:function(){return this.url}},On={id:"ic-rename-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-rename-usage",toString:function(){return this.url}},Cn={id:"ic-start-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-start-usage",toString:function(){return this.url}},In={id:"ic-search-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-search-usage",toString:function(){return this.url}},Nn={id:"new-file-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#new-file-usage",toString:function(){return this.url}},Rn={id:"open-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#open-usage",toString:function(){return this.url}},Bn={id:"performance-window-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#performance-window-usage",toString:function(){return this.url}},Dn={id:"rearrange-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#rearrange-usage",toString:function(){return this.url}},Pn={id:"redo-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#redo-usage",toString:function(){return this.url}},xn={id:"save-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#save-usage",toString:function(){return this.url}},Mn={id:"shape-usage",viewBox:"0 0 48 43",url:n.p+"bot-sprite.svg#shape-usage",toString:function(){return this.url}},Ln={id:"undo-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#undo-usage",toString:function(){return this.url}},jn={id:"zoom-in-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#zoom-in-usage",toString:function(){return this.url}},Fn={id:"zoom-out-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#zoom-out-usage",toString:function(){return this.url}},Un={id:"ic-toolbar-stop-usage",viewBox:"0 0 12 14",url:n.p+"bot-sprite.svg#ic-toolbar-stop-usage",toString:function(){return this.url}},zn={id:"ic-stage-1-usage",viewBox:"0 0 19 20",url:n.p+"bot-sprite.svg#ic-stage-1-usage",toString:function(){return this.url}},Vn={id:"ic-stage-2-usage",viewBox:"0 0 19 20",url:n.p+"bot-sprite.svg#ic-stage-2-usage",toString:function(){return this.url}},Hn={id:"ic-stage-3-usage",viewBox:"0 0 19 20",url:n.p+"bot-sprite.svg#ic-stage-3-usage",toString:function(){return this.url}},Gn={id:"ic-stage-4-usage",viewBox:"0 0 19 20",url:n.p+"bot-sprite.svg#ic-stage-4-usage",toString:function(){return this.url}},qn={id:"ic-arrow-1-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-arrow-1-usage",toString:function(){return this.url}},Wn={id:"ic-arrow-2-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-arrow-2-usage",toString:function(){return this.url}},Kn={id:"ic-loss-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-loss-usage",toString:function(){return this.url}},Yn={id:"ic-profit-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-profit-usage",toString:function(){return this.url}},Jn={id:"ic-unknown-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-unknown-usage",toString:function(){return this.url}},Qn={id:"asiand-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#asiand-usage",toString:function(){return this.url}},Xn={id:"asianu-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#asianu-usage",toString:function(){return this.url}},Zn={id:"call-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#call-usage",toString:function(){return this.url}},$n={id:"call_barrier-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#call_barrier-usage",toString:function(){return this.url}},tr={id:"callspread-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#callspread-usage",toString:function(){return this.url}},er={id:"digitdiff-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#digitdiff-usage",toString:function(){return this.url}},nr={id:"digiteven-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#digiteven-usage",toString:function(){return this.url}},rr={id:"digitmatch-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#digitmatch-usage",toString:function(){return this.url}},ir={id:"digitodd-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#digitodd-usage",toString:function(){return this.url}},or={id:"digitover-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#digitover-usage",toString:function(){return this.url}},ar={id:"digitunder-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#digitunder-usage",toString:function(){return this.url}},sr={id:"expirymiss-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#expirymiss-usage",toString:function(){return this.url}},cr={id:"expiryrange-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#expiryrange-usage",toString:function(){return this.url}},ur={id:"notouch-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#notouch-usage",toString:function(){return this.url}},lr={id:"onetouch-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#onetouch-usage",toString:function(){return this.url}},hr={id:"put-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#put-usage",toString:function(){return this.url}},pr={id:"put_barrier-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#put_barrier-usage",toString:function(){return this.url}},fr={id:"putspread-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#putspread-usage",toString:function(){return this.url}},dr={id:"range-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#range-usage",toString:function(){return this.url}},yr={id:"resetcall-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#resetcall-usage",toString:function(){return this.url}},mr={id:"resetput-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#resetput-usage",toString:function(){return this.url}},gr={id:"runhigh-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#runhigh-usage",toString:function(){return this.url}},vr={id:"runlow-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#runlow-usage",toString:function(){return this.url}},br={id:"tickhigh-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#tickhigh-usage",toString:function(){return this.url}},_r={id:"ticklow-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ticklow-usage",toString:function(){return this.url}},Er={id:"unknown-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#unknown-usage",toString:function(){return this.url}},Tr={id:"upordown-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#upordown-usage",toString:function(){return this.url}},Sr={id:"ic-entryspot-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-entryspot-usage",toString:function(){return this.url}},kr={id:"ic-exitspot-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-exitspot-usage",toString:function(){return this.url}},wr={id:"ic-id-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#ic-id-usage",toString:function(){return this.url}},Ar={id:"contract-pending-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#contract-pending-usage",toString:function(){return this.url}},Or={id:"contract-completed-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#contract-completed-usage",toString:function(){return this.url}},Cr={id:"buy-price-usage",viewBox:"0 0 16 16",url:n.p+"bot-sprite.svg#buy-price-usage",toString:function(){return this.url}},Ir=function(t){return function(e){var r=e.className,i=e.onClick,a=t.viewBox.split(" ").slice(2),s=a[0],c=a[1];return o.a.createElement("svg",{width:s,height:c,className:mn()("icon",r),onClick:i},o.a.createElement("use",{xlinkHref:n.p+"bot-sprite.svg#"+t.id}))}},Nr=(Ir(bn),Ir(_n),Ir(En),Ir(Tn)),Rr=Ir(gn),Br=Ir(vn),Dr=Ir(Sn),Pr=Ir(kn),xr=(Ir(zn),Ir(Vn),Ir(Hn),Ir(Gn),Ir(qn)),Mr=Ir(Wn),Lr=Ir(Yn),jr=Ir(Kn),Fr=(Ir(Jn),Ir(Qn)),Ur=Ir(Xn),zr=Ir(Zn),Vr=Ir($n),Hr=Ir(tr),Gr=Ir(er),qr=Ir(nr),Wr=Ir(rr),Kr=Ir(ir),Yr=Ir(or),Jr=Ir(ar),Qr=Ir(sr),Xr=Ir(cr),Zr=Ir(ur),$r=Ir(lr),ti=Ir(hr),ei=Ir(pr),ni=Ir(fr),ri=Ir(dr),ii=Ir(yr),oi=Ir(mr),ai=Ir(gr),si=Ir(vr),ci=Ir(br),ui=Ir(_r),li=Ir(Er),hi=Ir(Tr),pi=Ir(Cn),fi=Ir(In),di=Ir(On),yi=Ir(An),mi=Ir(Rn),gi=Ir(Nn),vi=Ir(xn),bi=Ir(Ln),_i=Ir(Pn),Ei=Ir(Bn),Ti=Ir(Un),Si=Ir(Dn),ki=Ir(jn),wi=Ir(Fn),Ai=Ir(Mn),Oi=Ir(wn),Ci=Ir(Sr),Ii=Ir(kr),Ni=Ir(wr),Ri=Ir(Ar),Bi=Ir(Cr),Di=Ir(Or);function Pi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function xi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Blockly.Toolbox.prototype.width=25,Blockly.Toolbox.prototype.init=function(){var t=this,e=this.workspace_,n=this.workspace_.getParentSvg();this.HtmlDiv=goog.dom.createDom(goog.dom.TagName.DIV,"toolbox"),this.HtmlDiv.setAttribute("dir",e.RTL?"RTL":"LTR");var r=goog.dom.createDom(goog.dom.TagName.DIV,"toolbox__header"),i=goog.dom.createDom(goog.dom.TagName.DIV,"toolbox__title");i.textContent=Object(Ot.localize)("Blocks Menu"),r.appendChild(i),this.HtmlDiv.appendChild(r),n.parentNode.insertBefore(this.HtmlDiv,n),Blockly.bindEventWithChecks_(this.HtmlDiv,"mousedown",this,(function(t){this.workspace_.cancelCurrentGesture(),Blockly.utils.isRightButton(t)||t.target===this.HtmlDiv?Blockly.hideChaff(!1):Blockly.hideChaff(!0),Blockly.Touch.clearTouchIdentifier()}),!1,!0),this.createFlyout_(),this.categoryMenu_=new Blockly.Toolbox.CategoryMenu(this,this.HtmlDiv),this.populate_(e.options.languageTree),this.categoryMenu_.allCategories_=[],this.categoryMenu_.categories_.forEach((function(e){var n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pi(n,!0).forEach((function(e){xi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pi(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},e);t.categoryMenu_.allCategories_.push(n)})),this.position(),this.toggle()},Blockly.Toolbox.prototype.populate_=function(t){var e=this.categoryMenu_.parentHtml_;e.removeChild(e.lastChild),this.categoryMenu_.populate(t);var n=en.instance.quick_strategy,r=document.createElement("BUTTON");r.innerHTML=Object(Ot.localize)("Quick Strategy"),r.className="toolbox__button btn effect btn--primary btn__medium",r.onclick=n.toggleStrategyModal,e.appendChild(r)},Blockly.Toolbox.prototype.showSearch=function(t){var e=[],n=Blockly.derivWorkspace,r=t.replace(/\s+/g," ").trim().toUpperCase(),i=n.getVariablesOfType(""),o=Blockly.Procedures.allProcedures(n),a=en.instance.flyout;if(a.setVisibility(!1),0!==r.length){if(r.length<=1||["THE","OF","YOU","IS","THIS","THEN"].includes(r))return a.setIsSearchFlyout(!0),void a.setContents(e,t);var s=this.categoryMenu_.allCategories_.filter((function(t){return!t.has_child_category_})).map((function(t){var e=t.contents_.length?t.contents_:t.dynamic_;return"string"==typeof e&&(e=Blockly.derivWorkspace.getToolboxCategoryCallback(e)(Blockly.derivWorkspace)),e.filter((function(t){return"BLOCK"===t.tagName.toUpperCase()}))})).flat(),c=function(t,e){t.some((function(t){return t===e}))||t.push(e)};["exact_block_name","block_term","block_definitions","block_meta"].forEach((function(t){s.forEach((function(n){var i=n.getAttribute("type"),o=Blockly.Blocks[i];!function(t){var n=t.block_type,i=t.block_meta,o=t.block_definitions,a=t.block_content,s=t.priority,u=i.display_name,l=n.toUpperCase().split("_"),h=u.toUpperCase().split(" "),p=/^((message)|(tooltip)|(category))/,f=new RegExp("^"+r);switch(s){case"exact_block_name":(f.test(u.toUpperCase())||f.test(n.toUpperCase()))&&c(e,a);break;case"block_term":(l.some((function(t){return f.test(t)}))||h.some((function(t){return f.test(t)})))&&c(e,a);break;case"block_definitions":var d=Object.keys(o).filter((function(t){var e=o[t];if(p.test(t)&&f.test(e.toUpperCase()))return!0;if(e instanceof Array){var n=!1;return e.forEach((function(t){var e=JSON.stringify(t).toUpperCase();"field_dropdown"===t.type&&r>2&&e.includes(r)&&(n=!0)})),n}return!1}));d&&d.length&&c(e,a);break;case"block_meta":var y=Object.keys(i).filter((function(t){return"display_name"!==t})).find((function(t){return i[t].toUpperCase().replace(/[^\w\s]/gi,"").split(" ").some((function(t){return f.test(t)}))}));y&&y.length&&c(e,a)}}({block_type:i,block_meta:o.meta instanceof Function&&o.meta(),block_definitions:o.definition instanceof Function&&o.definition(),block_content:n,priority:t})}))}));var u=i.filter((function(t){return t.name.toUpperCase().includes(r)})),l=Blockly.DataCategory.search(u).filter((function(t){return-1===e.indexOf(t)}));l&&l.length&&e.unshift.apply(e,l);var h={0:[],1:[]},p=o[0],f=o[1];Object.keys(p).forEach((function(t){var e=p[t];e[0].toUpperCase().includes(r)&&h[0].unshift(e)})),Object.keys(f).forEach((function(t){var e=f[t];e[0].toUpperCase().includes(r)&&h[1].unshift(e)}));var d=Blockly.Procedures.populateDynamicProcedures(h).filter((function(t){return-1===e.indexOf(t)}));d.length&&e.unshift.apply(e,d),a.setIsSearchFlyout(!0),a.setContents(e,t)}},Blockly.Toolbox.prototype.showCategory_=function(t){var e=this.categoryMenu_.categories_.find((function(e){return e.id_===t})).getContents();"string"==typeof e&&(e=this.workspace_.getToolboxCategoryCallback(e)(this.workspace_));var n=en.instance.flyout;n.setIsSearchFlyout(!1),n.setContents(e)},Blockly.Toolbox.prototype.getCategoryContents=function(t){var e=t.getContents();return"string"==typeof e&&(e=this.workspace_.getToolboxCategoryCallback(e)(this.workspace_)),e},Blockly.Toolbox.Category.prototype.getMenuItemClassName_=function(t){var e=["toolbox__item","toolbox__category--"+this.id_];return t&&e.push("toolbox__category--selected"),e.join(" ")},Blockly.Toolbox.prototype.setSelectedItem=function(t,e){var n=this;void 0===e&&(e=!0);var r=en.instance.flyout;if(this.selectedItem_&&(this.selectedItem_.setSelected(!1),t&&!t.is_category_return_&&!t.has_child_category_&&this.selectedItem_.id_===t.id_&&e))return this.selectedItem_=null,void(r.is_visible&&r.setVisibility(!1));if(this.selectedItem_=t,t){var i=function(t,e,n,r){var i=document.implementation.createDocument(null,null,null),o=i.createElement("xml"),a=i.createElement("category");return a.setAttribute("name",t),a.setAttribute("id",e),a.setAttribute("is_category_return",!0),a.setAttribute("colour",n),[a,i.createElement("sep")].concat(Array.from(r)).forEach((function(t){return o.appendChild(t)})),i.appendChild(o),o};if(this.selectedItem_.is_category_return_){var o=this.workspace_.toolboxXmlStr,a=function t(e){for(var r=0;r<e.length;r++){var i=e[r];if("CATEGORY"===i.tagName.toUpperCase()&&i.getAttribute("id")===n.selectedItem_.id_)return i;var o=t(i.children);if(o)return o}return null}(Blockly.Xml.textToDom(o).children);if(a){var s=a.parentElement;if(r.setVisibility(!1),"xml"===s.tagName)this.workspace_.updateToolbox(o);else{var c=i(s.getAttribute("name"),s.getAttribute("id"),s.getAttribute("colour"),s.children);this.workspace_.updateToolbox(c)}}}else if(this.selectedItem_.has_child_category_){var u=i(this.selectedItem_.name_,this.selectedItem_.id_,this.selectedItem_.colour_,this.selectedItem_.contents_);r.setVisibility(!1),this.workspace_.updateToolbox(u)}else this.selectedItem_.setSelected(!0),this.showCategory_(this.selectedItem_.id_)}else r.setVisibility(!1)},Blockly.Toolbox.prototype.refreshSelection=function(){},Blockly.Toolbox.Category.prototype.createDom=function(){var t=this.parent_.parent_,e=goog.dom.createDom("div",this.getMenuItemClassName_());if(this.item_=e,this.is_category_return_){var r=goog.dom.createDom("div","toolbox__category-arrow toolbox__category-arrow--back");s.a.render(o.a.createElement(xr,{className:"arrow"}),r),e.appendChild(r)}else{var i=goog.dom.createDom("div","toolbox__category-colour");e.appendChild(i)}var a=goog.dom.createDom("div","toolbox__label",this.name_),c=goog.dom.createDom("div","toolbox__category-text");if(this.label_=a,c.appendChild(a),this.description_){var u=goog.dom.createDom("div","toolbox__description",this.description_);c.appendChild(u)}if(e.appendChild(c),this.has_child_category_){var l=goog.dom.createDom("div","toolbox__category-arrow toolbox__category-arrow--open");s.a.render(o.a.createElement(xr,{className:"arrow"}),l),e.appendChild(l)}else if(this.iconURI_){var h=goog.dom.createDom("div",{class:"toolbox__icon"});h.innerHTML='<svg><use xlink:href="'+n.p+"bot-sprite.svg#"+this.iconURI_+'"></use></svg>',e.appendChild(h)}this.parentHtml_.appendChild(e),Blockly.bindEvent_(e,"mouseup",t,t.setSelectedItemFactory(this))},Blockly.Toolbox.Category.prototype.getContents=function(){return this.custom_||this.dynamic_||this.contents_},Blockly.Toolbox.Category.prototype.parseContents_=function(t){var e=this;this.description_=t.getAttribute("description"),this.dynamic_=t.getAttribute("dynamic"),this.is_category_return_=!!t.getAttribute("is_category_return"),t.childNodes.forEach((function(t){if(t.tagName){var n=t.tagName.toUpperCase();switch("CATEGORY"===n&&(e.has_child_category_=!0),n){case"BLOCK":case"SHADOW":case"LABEL":case"BUTTON":case"SEP":case"TEXT":case"CATEGORY":e.contents_.push(t)}}}))},Blockly.Toolbox.Category.prototype.setColour=function(t){var e=t.getAttribute("colour");goog.isString(e)?(e.match(/^#[0-9a-fA-F]{6}$/)?this.colour_=e:this.colour_=Blockly.hueToRgb(e),this.hasColours_=!0):this.colour_="#000000"},Blockly.Toolbox.CategoryMenu.prototype.createDom=function(){var t=this.parent_.horizontalLayout_?"toolbox__horizontal-category-menu":"toolbox__category-menu";this.table=goog.dom.createDom("div",t),this.parentHtml_.appendChild(this.table)},Blockly.Toolbox.CategoryMenu.prototype.populate=function(t,e){var n=this;void 0===e&&(e=!1),t&&(e||(this.dispose(),this.createDom()),t.childNodes.forEach((function(t){if(t.tagName&&"CATEGORY"===t.tagName.toUpperCase()){var r=t.getAttribute("is_category_return")?"toolbox__category-return":"toolbox__row",i=goog.dom.createDom("div",{class:r}),o=t.getAttribute("web-class");o&&o.split(" ").forEach((function(t){return i.classList.add(t)}));var a=new Blockly.Toolbox.Category(n,i,t),s=t.children;Object.keys(s).map((function(t){if("category"===s[t].tagName)return s[t]})).length&&n.populate(t,!0),e||n.table.appendChild(i),n.categories_.push(a)}else if(t.tagName&&"SEP"===t.tagName.toUpperCase()){var c=goog.dom.createDom("div",{class:"toolbox__separator"});n.table.appendChild(c)}})),this.height_=this.table.offsetHeight)},Blockly.Toolbox.prototype.refreshCategory=function(){var t=this.getSelectedItem();this.setSelectedItem(t,!1)},Blockly.Toolbox.prototype.toggle=function(){var t=en.instance,e=t.toolbar,n=t.flyout;e.is_toolbox_open?(n.setVisibility(!1),this.removeStyle("hidden")):(this.addStyle("hidden"),n.setVisibility(!1),this.selectedItem_&&(this.selectedItem_.setSelected(!1),this.selectedItem_=null))},n(315),n(316),Blockly.Variables.allUsedVarModels=function(t){var e=t.getAllBlocks(!1),n=Object.create(null);e.forEach((function(t){var e=t.getVarModels();e&&e.forEach((function(t){var e=t.getId();e&&(n[e]=t)}))}));var r=[];return Object.keys(n).forEach((function(t){r.push(n[t])})),r},n(317),Blockly.WorkspaceSvg.prototype.onMouseDown_=function(t){Blockly.derivWorkspace.cachedParentSvg_.dispatchEvent(new t.constructor(t.type,t));var e=this.getGesture(t);e&&e.handleWsStart(t,this)},Blockly.WorkspaceSvg.prototype.centerOnBlock=function(t,e){if(void 0===e&&(e=!0),this.scrollbar){var n=this.getBlockById(t);if(n){var r=n.getRelativeToSurfaceXY(),i=n.getHeightWidth(),o=r.y+i.height/2,a=this.RTL?-1:1,s=r.x+a*i.width/2,c=this.scale,u=s*c,l=o*c,h=this.getMetrics(),p=u-h.contentLeft,f=l-h.contentTop,d=p-h.viewWidth/2,y=f-h.viewHeight/2;e&&Blockly.hideChaff(),this.scrollbar.set(d,y)}}else console.warn("Tried to scroll a non-scrollable workspace.")},Blockly.WorkspaceSvg.prototype.addBlockNode=function(t){var e=Blockly.Xml.domToBlock(t,this),n=this.getTopBlocks(!0);if(n.length){var r=n[n.length-1],i=r.getRelativeToSurfaceXY(),o=r.startHat_?Blockly.BlockSvg.START_HAT_HEIGHT:0,a=i.y+r.getHeightWidth().height+o+30;e.moveBy(i.x,a)}/^procedures_/.test(t.getAttribute("type"))&&this.toolbox_.refreshCategory(),Blockly.Events.fire(new Blockly.Events.Create(e)),e.select(),this.centerOnBlock(e.id,!1)},Blockly.WorkspaceSvg.prototype.cleanUp=function(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=[]),this.setResizesEnabled(!1),Blockly.Events.setGroup(!0);var r=0!==n.length,i=r?n:this.getTopBlocks(!0),o=i.filter((function(t){return t.isMainBlock()})).sort((function(t,e){var n=function(t){return It.mainBlocks.findIndex((function(e){return e===t.type}))};return n(t)-n(e)})),a=Math.ceil(o.length/2),s=e;if(o.length){var c=0;o.forEach((function(n,i){i===(c+1)*a&&(s=e,c++);var u=n.getRelativeToSurfaceXY(),l=r?t:-u.x,h=s-(r?0:u.y);if(0===c)n.moveBy(l,h);else{var p=(c-1)*a,f=o.slice(p,p+a).reduce((function(t,e){return t.getHeightWidth().width>e.getHeightWidth().width?t:e})),d=l+f.getHeightWidth().width+Blockly.BlockSvg.MIN_BLOCK_X;r||(d+=f.getRelativeToSurfaceXY().x),n.moveBy(d,h)}n.snapToGrid(),s=n.getRelativeToSurfaceXY().y+n.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y}));var u=o.reduce((function(t,e){return t.getRelativeToSurfaceXY().y+t.getHeightWidth().height>e.getRelativeToSurfaceXY().y+e.getHeightWidth().height?t:e}));s=u.getRelativeToSurfaceXY().y+u.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y}i.filter((function(t){return!t.isMainBlock()})).forEach((function(e){var n=e.getRelativeToSurfaceXY(),i=r?t:-n.x,o=s-(r?0:n.y);e.moveBy(i,o),e.snapToGrid(),s=e.getRelativeToSurfaceXY().y+e.getHeightWidth().height+Blockly.BlockSvg.MIN_BLOCK_Y})),Blockly.Events.setGroup(!1),this.setResizesEnabled(!0)},Blockly.WorkspaceSvg.getTopLevelWorkspaceMetrics_=function(){var t=Blockly.WorkspaceSvg.getDimensionsPx_(this.toolbox_),e=Blockly.WorkspaceSvg.getDimensionsPx_(this.flyout_),n=Blockly.svgSize(this.getParentSvg());this.toolbox_&&(this.toolboxPosition===Blockly.TOOLBOX_AT_TOP||this.toolboxPosition===Blockly.TOOLBOX_AT_BOTTOM?n.height-=t.height:this.toolboxPosition!==Blockly.TOOLBOX_AT_LEFT&&this.toolboxPosition!==Blockly.TOOLBOX_AT_RIGHT||(n.width-=t.width));var r=Blockly.WorkspaceSvg.getContentDimensions_(this,n),i=0,o=0;return this.toolbox_&&this.toolboxPosition===Blockly.TOOLBOX_AT_LEFT&&(o=50,i=t.width),this.toolbox_&&this.toolboxPosition===Blockly.TOOLBOX_AT_TOP&&(o=t.height+50),{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,viewHeight:n.height,viewWidth:n.width,viewTop:-this.scrollY,viewLeft:-this.scrollX,absoluteTop:o,absoluteLeft:i,toolboxWidth:t.width,toolboxHeight:t.height,flyoutWidth:e.width,flyoutHeight:e.height,toolboxPosition:this.toolboxPosition}},n(318),n(319);var Mi=n(206),Li=n.n(Mi),ji=n(36),Fi=n(21),Ui=n.n(Fi),zi=function(t){return Be.emit("contract.status",t)},Vi=function(t){return Be.emit("bot.info",t)},Hi=function(t,e){return Be.emit("Notify",{className:t,message:e,position:"right"})},Gi=function(){},qi=function(t,e){return Number(t.toFixed(e).slice(-1)[0])},Wi=function(t,e,n){return Hi("warn",t+": "+e.error.msg_type+", "+Object(Ot.localize)("retrying in")+" "+n+"s")},Ki=function(t,e,n,r){return new Promise((function(i,o){var a=t();a?a.then(i).catch((function(t){!function(t,e,n){return void 0===e&&(e=[]),void 0===n&&(n=0),t&&(!e.concat(["CallError","WrongResponse","GetProposalFailure","RateLimit","DisconnectError"]).includes(t.name)||"DisconnectError"!==t.name&&n>12)}(t,n,r)?e(t.name,(function(){return new Promise((function(e){return setTimeout(e,function(t,e){var n=t&&t.name;if("DisconnectError"===n)return 500;var r=Math.pow(2,e)+.5;if("RateLimit"===n||e<4)return Wi(Object(Ot.localize)("Rate limit reached for"),t,r),1e3*r;var i=r+(4-e+1);return Wi(Object(Ot.localize)("Request failed for"),t,i),1e3*i}(t,r))}))})):o(t)})):i()}))},Yi=function(t,e){var n=0;return new Promise((function(r,i){!function o(){Ki(t,(function(t,e){return e().then(o)}),e,n++).then(r).catch(i)}()}))},Ji=function(){return""+(new Date).getTime()*Math.random()};function Qi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Zi=function(t){return{open:+t.open,high:+t.high,low:+t.low,close:+t.close,epoch:+(t.open_time||t.epoch)}},$i=function(t){return t?"candles":"ticks"},to=function(){function t(t){this.api=t,this.ticks=new Ne.Map,this.candles=new Ne.Map,this.tickListeners=new Ne.Map,this.ohlcListeners=new Ne.Map,this.subscriptions=new Ne.Map,this.observe()}var e=t.prototype;return e.requestPipSizes=function(){var t=this;return this.pipSizes?Promise.resolve(this.pipSizes):new Promise((function(e){t.api.getActiveSymbolsBrief().then((function(n){var r=n.active_symbols;t.pipSizes=r.reduce((function(t,e){return t.set(e.symbol,+(+e.pip).toExponential().substring(3))}),new Ne.Map).toObject(),e(t.pipSizes)}))}))},e.request=function(t){var e=t.symbol,n=t.granularity,r=$i(n);return"ticks"===r&&this.ticks.has(e)?Promise.resolve(this.ticks.get(e)):"candles"===r&&this.candles.hasIn([e,Number(n)])?Promise.resolve(this.candles.getIn([e,Number(n)])):this.requestStream(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qi(n,!0).forEach((function(e){Xi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qi(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{style:r}))},e.monitor=function(t){var e=t.symbol,n=t.granularity,r=t.callback,i=$i(n),o=Ji();return this.request(t).catch((function(t){return Be.emit("Error",t)})),"ticks"===i?this.tickListeners=this.tickListeners.setIn([e,o],r):this.ohlcListeners=this.ohlcListeners.setIn([e,Number(n),o],r),o},e.stopMonitor=function(t){var e=t.symbol,n=t.granularity,r=t.key,i=$i(n);"ticks"===i&&this.tickListeners.hasIn([e,r])&&(this.tickListeners=this.tickListeners.deleteIn([e,r])),"candles"===i&&this.ohlcListeners.hasIn([e,Number(n),r])&&(this.ohlcListeners=this.ohlcListeners.deleteIn([e,Number(n),r])),this.unsubscribeIfEmptyListeners(t)},e.unsubscribeIfEmptyListeners=function(t){var e=t.symbol,n=t.granularity,r=!1,i=this.tickListeners.get(e);i&&!i.size&&(this.tickListeners=this.tickListeners.delete(e),this.ticks=this.ticks.delete(e),r=!0);var o=this.ohlcListeners.getIn([e,Number(n)]);o&&!o.size&&(this.ohlcListeners=this.ohlcListeners.deleteIn([e,Number(n)]),this.candles=this.candles.deleteIn([e,Number(n)]),r=!0),r&&this.unsubscribeAllAndSubscribeListeners(e)},e.unsubscribeAllAndSubscribeListeners=function(t){var e=this,n=this.subscriptions.getIn(["ohlc",t]),r=this.subscriptions.getIn(["tick",t]),i=[].concat(n?Array.from(n.values()):[],r||[]);Promise.all(i.map((function(t){return Yi((function(){return e.api.unsubscribeByID(t)}))}))),this.subscriptions=new Ne.Map},e.updateTicksAndCallListeners=function(t,e){var n=this;if(this.ticks.get(t)!==e){this.ticks=this.ticks.set(t,e);var r=this.tickListeners.get(t);r&&r.forEach((function(e){return e(n.ticks.get(t))}))}},e.updateCandlesAndCallListeners=function(t,e){var n=this;if(this.ticks.getIn(t)!==e){this.candles=this.candles.setIn(t,e);var r=this.ohlcListeners.getIn(t);r&&r.forEach((function(e){return e(n.candles.getIn(t))}))}},e.observe=function(){var t=this;this.api.events.on("tick",(function(e){var n,r,i=e.tick,o=e.tick,a=o.symbol,s=o.id;t.ticks.has(a)&&(t.subscriptions=t.subscriptions.setIn(["tick",a],s),t.updateTicksAndCallListeners(a,(n=t.ticks.get(a),r=function(t){return{epoch:+t.epoch,quote:+t.quote}}(i),Object(ji.getLast)(n).epoch>=r.epoch?n:[].concat(n.slice(1),[r]))))})),this.api.events.on("ohlc",(function(e){var n=e.ohlc,r=e.ohlc,i=r.symbol,o=r.granularity,a=r.id;if(t.candles.hasIn([i,Number(o)])){t.subscriptions=t.subscriptions.setIn(["ohlc",i,Number(o)],a);var s=[i,Number(o)];t.updateCandlesAndCallListeners(s,function(t,e){var n=Object(ji.getLast)(t);if(n.open===e.open&&n.high===e.high&&n.low===e.low&&n.close===e.close&&n.epoch===e.epoch||n.epoch>e.epoch)return t;var r=n.epoch===e.epoch?t.slice(0,-1):t.slice(1);return[].concat(r,[e])}(t.candles.getIn(s),Zi(n)))}}))},e.requestStream=function(t){var e=this;return this.requestPipSizes().then((function(){return e.requestTicks(t)}))},e.requestTicks=function(t){var e=this,n=t.symbol,r=t.granularity,i=t.style;return new Promise((function(t,o){Yi((function(){return e.api.getTickHistory(n,{subscribe:1,end:"latest",count:1e3,granularity:r?Number(r):void 0,style:i})})).then((function(o){if("ticks"===i){var a=Object(ji.historyToTicks)(o.history);e.updateTicksAndCallListeners(n,a),t(a)}else{var s=function(t){return t.map((function(t){return Zi(t)}))}(o.candles);e.updateCandlesAndCallListeners([n,Number(r)],s),t(s)}})).catch(o)}))},t}(),eo=(n(409),n(145)),no=Object.freeze({"bot.binary.com":"1169","bot.binary.me":"15438","binary.bot":"15481"});var ro=Object.freeze({STORAGE_ACTIVE_TOKEN:"activeToken"}),io=document.location.hostname,oo=function(){return{url:localStorage.getItem("config.server_url"),appId:localStorage.getItem("config.app_id")}},ao=function(){var t=JSON.parse(localStorage.getItem("tokenList")||"{}"),e=localStorage.getItem(ro.STORAGE_ACTIVE_TOKEN)||[],n=!1;try{n=!t.filter((function(t){return t.token===e}))[0].accountName.startsWith("VRT")}catch(t){}return n},so=function(){return{url:ao()?"green.binaryws.com":"blue.binaryws.com",appId:localStorage.getItem("config.default_app_id")||no[io.replace(/^www./,"")]||16014}},co=function(){return oo().appId||so().appId},uo={apiUrl:"wss://"+(oo().url||so().url)+"/websockets/v3",language:Object(Ot.getLanguage)().toUpperCase(),appId:co()};n(410),n(412);var lo=function(t,e){var n=new Error(e);return n.name=t,n},ho=function(t){return Number.isFinite(t)&&t>0},po=function(t){return ho(t)&&Number.isInteger(t)},fo=function(t,e){if(!po(t))throw lo("PositiveIntegerExpected",e);return t},yo=function(t){var e=t[0],n=t[1];if(!e)throw lo("LoginError",Object(Ot.localize)("Please login"));return function(t){var e=t.symbol,n=t.contractTypes;if(!e)throw lo("OptionError",Object(Ot.localize)("Underlying market is not selected"));if(!n[0])throw lo("OptionError",Object(Ot.localize)("Contract type is not selected"))}(n),t},mo=function(t){return t instanceof Object&&["open","high","low","close"].every((function(e){return ho(t[e])}))&&po(t.epoch)},go=function(t){if(!mo(t))throw lo("CandleExpected",Object(Ot.localize)("Given candle is not valid"));return t},vo=n(101),bo=n.n(vo),_o=n(102),Eo=n.n(_o),To=n(146),So=n.n(To),ko=n(147),wo=n.n(ko),Ao=n(207),Oo=n.n(Ao);function Co(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Io(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Co(n,!0).forEach((function(e){No(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Co(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function No(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ro(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Do=n(148),Po=function(){return Math.random().toString(36).substring(7).split("").join(".")},xo={INIT:"@@redux/INIT"+Po(),REPLACE:"@@redux/REPLACE"+Po(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Po()}};function Mo(t,e,n){var r;if("function"==typeof e&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof e&&void 0===n&&(n=e,e=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(Mo)(t,e)}if("function"!=typeof t)throw new Error("Expected the reducer to be a function.");var i=t,o=e,a=[],s=a,c=!1;function u(){s===a&&(s=a.slice())}function l(){if(c)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function h(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(c)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return u(),s.push(t),function(){if(e){if(c)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,u();var n=s.indexOf(t);s.splice(n,1)}}}function p(t){if(!function(t){if("object"!=typeof t||null===t)return!1;for(var e=t;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}(t))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===t.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(c)throw new Error("Reducers may not dispatch actions.");try{c=!0,o=i(o,t)}finally{c=!1}for(var e=a=s,n=0;n<e.length;n++)(0,e[n])();return t}return p({type:xo.INIT}),(r={dispatch:p,subscribe:h,getState:l,replaceReducer:function(t){if("function"!=typeof t)throw new Error("Expected the nextReducer to be a function.");i=t,p({type:xo.REPLACE})}})[Do.a]=function(){var t,e=h;return(t={subscribe:function(t){if("object"!=typeof t||null===t)throw new TypeError("Expected the observer to be an object.");function n(){t.next&&t.next(l())}return n(),{unsubscribe:e(n)}}})[Do.a]=function(){return this},t},r}function Lo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jo(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n}function Fo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?jo(n,!0).forEach((function(e){Lo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):jo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Uo(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce((function(t,e){return function(){return t(e.apply(void 0,arguments))}}))}function zo(t){return function(e){var n=e.dispatch,r=e.getState;return function(e){return function(i){return"function"==typeof i?i(n,r,t):e(i)}}}}var Vo=zo();Vo.withExtraArgument=zo;var Ho=Vo,Go="";function qo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ko=function(t){var e=t.dispatch,n=t.getState,r=t.data,i=t.scope;n().scope===i&&e(r)},Yo=function(t){(0,t.getState)().proposalsReady&&function(t){Ko(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?qo(n,!0).forEach((function(e){Wo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t,{scope:"BEFORE_PURCHASE"}))}(t)};function Jo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Qo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Zo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Xo(n,!0).forEach((function(e){$o(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n(413);var ta=0,ea=0;function na(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ra(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?na(n,!0).forEach((function(e){ia(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):na(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ia(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oa,aa={scope:"STOP",proposalsReady:!1},sa=function(t,e){switch(void 0===t&&(t=aa),e.type){case"START":return{scope:"BEFORE_PURCHASE",proposalsReady:t.proposalsReady};case"PROPOSALS_READY":return ra({},t,{proposalsReady:!0});case"CLEAR_PROPOSALS":return ra({},t,{proposalsReady:!1});case"PURCHASE_SUCCESSFUL":return{scope:"DURING_PURCHASE",openContract:!1,proposalsReady:t.proposalsReady};case"OPEN_CONTRACT":return{scope:"DURING_PURCHASE",openContract:!0,proposalsReady:t.proposalsReady};case"SELL":return{scope:"STOP",proposalsReady:t.proposalsReady};case"NEW_TICK":return ra({},t,{newTick:e.payload});default:return t}};function ca(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ua(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ca(n,!0).forEach((function(e){la(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ca(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function la(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ha={totalProfit:0,totalWins:0,totalLosses:0,totalStake:0,totalPayout:0,totalRuns:0},pa={};function fa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function da(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ya,ma=function(t){var e=t.store,n=t.stopScope,r=t.passScope,i=t.passFlag;return e.getState().scope===n?Promise.resolve(!1):new Promise((function(t){var o=e.subscribe((function(){var a=e.getState();a.newTick!==ya&&(ya=a.newTick,a.scope===r&&a[i]&&(o(),t(!0)),a.scope===n&&(o(),t(!1)))}))}))},ga=function(t){var e,n;function r(e){var n;return(n=t.call(this)||this).api=e.api,n.observer=e.observer,n.$scope=e,n.observe(),n.data=new Ne.Map,n.store=Mo(sa,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return function(){var n=t.apply(void 0,arguments),r=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=e.map((function(t){return t(i)}));return Fo({},n,{dispatch:r=Uo.apply(void 0,o)(n.dispatch)})}}}(Ho)),n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.init=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=yo(e),i=r[0],o=r[1],a=o.symbol;this.initArgs=e,this.options=o,this.startPromise=this.loginAndGetBalance(i),this.watchTicks(a)},i.start=function(t){if(!this.options)throw lo("NotInitialized",Object(Ot.localize)("Bot.init is not called"));Be.emit("bot.running"),this.tradeOptions=function(t){var e=t.amount,n=t.duration;return fo(n,Object(Ot.localize)("Duration must be a positive integer")),function(t,e){if(!ho(t))throw lo("PositiveNumberExpected",e)}(e,Object(Ot.localize)("Amount must be a positive number")),t}(t),this.store.dispatch((function(t,e){return Ko({dispatch:t,getState:e,data:{type:"START"},scope:"STOP"})})),this.checkLimits(t),this.makeProposals(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fa(n,!0).forEach((function(e){da(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fa(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.options,{},t)),this.checkProposalReady()},i.loginAndGetBalance=function(t){var e=this;return this.token===t?Promise.resolve():(Yi((function(){return e.api.authorize(t)})).catch((function(t){return e.$scope.observer.emit("Error",t)})),new Promise((function(n){return e.listen("authorize",(function(r){var i=r.authorize;e.accountInfo=i,e.token=t,document?e.api.subscribeToBalance().then((function(t){e.balance=Number(t.balance.balance),n()})):n()}))})))},i.getContractDuration=function(){var t=this.tradeOptions;return function(t){var e=t.match(/^([0-9]+)([stmhd])$/);if(!e)return 0;var n=parseFloat(e[1]),r=e[2];return"s"===r?n:"t"===r?2*n:"m"===r?60*n:"h"===r?60*n*60:"d"===r?60*n*60*24:0}(""+t.duration+t.duration_unit)},i.observe=function(){this.observeOpenContract(),this.observeBalance(),this.observeProposals()},i.watch=function(t){return"before"===t?(e=this.store,ma({store:e,stopScope:"DURING_PURCHASE",passScope:"BEFORE_PURCHASE",passFlag:"proposalsReady"})):function(t){return ma({store:t,stopScope:"STOP",passScope:"DURING_PURCHASE",passFlag:"openContract"})}(this.store);var e},i.getData=function(){return this.data},i.listen=function(t,e){this.api.events.on(t,e)},r}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.observeBalance=function(){var t=this;this.listen("balance",(function(e){var n=e.balance,r=n.balance,i=n.currency;Go=Object(Fi.getFormattedText)(r,i),Vi({accountID:t.accountInfo.loginid,balance:Go})}))},i.getBalance=function(t){var e=this.store.getState().scope,n=this.balance;if("BEFORE_PURCHASE"===e){var r=Number(n)-this.tradeOptions.amount;Go=Object(Fi.getFormattedText)(r,en.core.client.currency,!1)}return"STR"===t?Go:Number(n)},r}(t)}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.purchase=function(t){var e=this;if("BEFORE_PURCHASE"!==this.store.getState().scope)return Promise.resolve();var n=this.selectProposal(t),r=n.id,i=n.askPrice,o=function(n){var r=n.buy;zi({id:"contract.purchase_received",data:r.transaction_id,buy:r}),e.subscribeToOpenContract(r.contract_id),e.store.dispatch((function(t,e){return Yo({dispatch:t,getState:e,data:{type:"PURCHASE_SUCCESSFUL"}})})),e.renewProposalsOnPurchase(),ta=0,Hi("info",Object(Ot.localize)("Bought")+": "+r.longcode+" ("+Object(Ot.localize)("ID")+": "+r.transaction_id+")"),Vi({accountID:e.accountInfo.loginid,totalRuns:e.updateAndReturnTotalRuns(),transaction_ids:{buy:r.transaction_id},contract_type:t,buy_price:r.buy_price})},a=function(){return e.api.buyContract(r,i)};return this.isSold=!1,zi({id:"contract.purchase_sent",data:i}),this.options.timeMachineEnabled?Ki(a,(function(t,n){"DisconnectError"!==t?e.renewProposalsOnPurchase():e.clearProposals();var r=e.store.subscribe((function(){var t=e.store.getState(),i=t.scope,o=t.proposalsReady;"BEFORE_PURCHASE"===i&&o&&(n().then((function(){return e.observer.emit("REVERT","before")})),r())}))}),["PriceMoved","InvalidContractProposal"],ta++).then(o):Yi(a).then(o)},r}(t)}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.isSellAtMarketAvailable=function(){return this.contractId&&!this.isSold&&this.isSellAvailable&&!this.isExpired},i.sellAtMarket=function(){var t=this;if("DURING_PURCHASE"!==this.store.getState().scope)return Promise.resolve();if(!this.isSellAtMarketAvailable()){if(this.hasEntryTick){var e=new Error(Object(Ot.localize)("Resale of this contract is not offered."));throw e.name="SellNotAvailable",e}return Promise.resolve()}var n=function(e){var n=e.sell.sold_for;return ea=0,zi("purchase.sold"),Hi("info",Object(Ot.localize)("Sold for")+": "+n),t.waitForAfter()},r=function(){return t.api.sellContract(t.contractId,0)};return this.options.timeMachineEnabled?Ki(r,(function(e,n){return n().then((function(){return t.observer.emit("REVERT","during")}))}),["NoOpenPosition","InvalidSellContractProposal","UnrecognisedRequest"],ea++).then(n):Yi(r).then(n)},r}(t)}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.observeOpenContract=function(){var t=this;this.listen("proposal_open_contract",(function(e){var n,r=e.proposal_open_contract;t.expectedContractId(r.contract_id)&&(t.setContractFlags(r),t.data=t.data.set("contract",r),n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Jo(n,!0).forEach((function(e){Qo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Jo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({accountID:t.accountInfo.loginid},r),Be.emit("bot.contract",n),t.isSold?(function(t){Be.emit("contract.settled",t)}(r),t.contractId="",t.updateTotals(r),zi({id:"contract.sold",data:r.transaction_ids.sell,contract:r}),t.afterPromise&&t.afterPromise(),t.store.dispatch((function(t,e){return Ko({dispatch:t,getState:e,data:{type:"SELL"},scope:"DURING_PURCHASE"})})),t.unsubscribeOpenContract(),t.cancelSubscriptionTimeout()):(t.store.dispatch((function(t,e){"DURING_PURCHASE"===e().scope&&t({type:"OPEN_CONTRACT"}),Yo({dispatch:t,getState:e,data:{type:"OPEN_CONTRACT"}})})),t.isExpired||t.resetSubscriptionTimeout()))}))},i.waitForAfter=function(){var t=this;return new Promise((function(e){t.afterPromise=e}))},i.subscribeToOpenContract=function(t){var e=this;void 0===t&&(t=this.contractId),this.contractId!==t&&this.resetSubscriptionTimeout(),this.contractId=t,this.unsubscribeOpenContract(),Yi((function(){return e.api.subscribeToOpenContract(t)})).then((function(t){e.openContractId=t.proposal_open_contract.id}))},i.resetSubscriptionTimeout=function(t){var e=this;void 0===t&&(t=5),this.cancelSubscriptionTimeout(),this.subscriptionTimeout=setInterval((function(){e.subscribeToOpenContract(),e.resetSubscriptionTimeout(t)}),1e3*t)},i.cancelSubscriptionTimeout=function(){clearTimeout(this.subscriptionTimeout)},i.unsubscribeOpenContract=function(){var t=this;this.openContractId&&Yi((function(){return t.api.unsubscribeByID(t.openContractId)}))},i.setContractFlags=function(t){var e=t.is_expired,n=t.is_valid_to_sell,r=t.is_sold,i=t.entry_tick;this.isSold=Boolean(r),this.isSellAvailable=!this.isSold&&Boolean(n),this.isExpired=Boolean(e),this.hasEntryTick=Boolean(i)},i.expectedContractId=function(t){return this.contractId&&t===this.contractId},i.getSellPrice=function(){var t=this.data.get("contract"),e=t.bid_price,n=t.buy_price,r=t.currency;return Object(Fi.getRoundedNumber)(Number(e)-Number(n),r)},r}(t)}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.makeProposals=function(t){this.isNewTradeOption(t)&&(this.tradeOption=t,this.proposalTemplates=function(t){return t.contractTypes.map((function(e){var n={duration_unit:t.duration_unit,basis:t.basis,currency:t.currency,symbol:t.symbol,duration:t.duration,amount:t.amount,contract_type:e};return void 0!==t.prediction&&(n.selected_tick=t.prediction),["TICKLOW","TICKHIGH"].includes(e)||void 0===t.prediction?void 0!==t.barrierOffset&&(n.barrier=t.barrierOffset):n.barrier=t.prediction,void 0!==t.secondBarrierOffset&&(n.barrier2=t.secondBarrierOffset),n}))}(t),this.renewProposalsOnPurchase())},i.selectProposal=function(t){var e;if(!this.data.has("proposals"))throw Error(Object(Ot.localize)("Proposals are not ready"));if(this.data.get("proposals").forEach((function(n){if(n.contractType===t){if(n.error)throw Error(n.error.error.error.message);e=n}})),!e)throw Error(Object(Ot.localize)("Selected proposal does not exist"));return{id:e.id,askPrice:e.ask_price}},i.renewProposalsOnPurchase=function(){var t=this;this.unsubscribeProposals().then((function(){return t.requestProposals()}))},i.clearProposals=function(){this.data=this.data.set("proposals",new Map),this.store.dispatch({type:"CLEAR_PROPOSALS"})},i.requestProposals=function(){var t=this;this.proposalTemplates.map((function(e){return Yi((function(){return t.api.subscribeToPriceForContractProposal(Zo({},e,{passthrough:{contractType:e.contract_type,uuid:Ji()}})).catch((function(n){if(n&&"RateLimit"===n.name)return Promise.reject(n);if("ContractBuyValidationError"===(n.error&&n.error.error&&n.error.error.code)){var r=n.error.echo_req.passthrough.uuid;t.data.hasIn(["forgetProposals",r])||(t.data=t.data.setIn(["proposals",r],Zo({},e,{contractType:e.contract_type,error:n})))}else t.$scope.observer.emit("Error",n)}))}))}))},i.observeProposals=function(){var t=this;this.listen("proposal",(function(e){var n=e.proposal,r=e.passthrough,i=r.uuid;t.data.hasIn(["forgetProposals",i])||(t.data=t.data.setIn(["proposals",i],Zo({},n,{},r)),t.checkProposalReady())}))},i.unsubscribeProposals=function(){var t=this,e=this.data.get("proposals");if(!e)return Promise.resolve();var n=Array.from(e.values());return this.clearProposals(),Promise.all(n.map((function(e){var n=e.uuid,r=function(){t.data=t.data.deleteIn(["forgetProposals",n])};return t.data=t.data.setIn(["forgetProposals",n],!0),e.error?(r(),Promise.resolve()):Yi((function(){return t.api.unsubscribeByID(e.id)})).then((function(){return r()}))})))},i.checkProposalReady=function(){var t=this,e=this.data.get("proposals");e&&e.size===this.proposalTemplates.length&&this.startPromise.then((function(){return t.store.dispatch({type:"PROPOSALS_READY"})}))},i.isNewTradeOption=function(t){var e=this;if(!this.tradeOption)return this.tradeOption=t,!0;var n=function(n){return e.tradeOption[n]!==t[n]};return n("duration")||n("duration_unit")||n("amount")||n("prediction")||n("barrierOffset")||n("secondBarrierOffset")||n("symbol")},r}(t)}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.watchTicks=function(t){var e=this;if(t&&this.symbol!==t){var n=this.$scope.ticksService;n.stopMonitor({symbol:t,key:oa});var r=n.monitor({symbol:t,callback:function(t){e.checkProposalReady();var n=t.slice(-1)[0].epoch;e.store.dispatch({type:"NEW_TICK",payload:n})}});this.symbol=t,oa=r}},i.getTicks=function(t){var e=this;return void 0===t&&(t=!1),new Promise((function(n){e.$scope.ticksService.request({symbol:e.symbol}).then((function(r){var i=e.getPipSize(),o=r.map((function(e){return t?e.quote.toFixed(i):e.quote}));n(o)}))}))},i.getLastTick=function(t,e){var n=this;return void 0===e&&(e=!1),new Promise((function(r){return n.$scope.ticksService.request({symbol:n.symbol}).then((function(i){var o=t?Object(ji.getLast)(i):Object(ji.getLast)(i).quote;e&&!t&&(o=o.toFixed(n.getPipSize())),r(o)}))}))},i.getLastDigit=function(){var t=this;return new Promise((function(e){return t.getLastTick().then((function(n){return e(qi(n,t.getPipSize()))}))}))},i.getLastDigitList=function(){var t=this;return new Promise((function(e){return t.getTicks().then((function(n){return e(n.map((function(e){return qi(e,t.getPipSize())})))}))}))},i.checkDirection=function(t){var e=this;return new Promise((function(n){return e.$scope.ticksService.request({symbol:e.symbol}).then((function(e){return n(function(t){var e=t.length,n=t.slice(-2),r=n[0],i=n[1],o="";return e>=2&&(o=r.quote<i.quote?"rise":o,o=r.quote>i.quote?"fall":o),o}(e)===t)}))}))},i.getOhlc=function(t){var e=this,n=t||{},r=n.granularity,i=void 0===r?this.options.candleInterval||60:r,o=n.field;return new Promise((function(t){return e.$scope.ticksService.request({symbol:e.symbol,granularity:i}).then((function(e){return t(o?e.map((function(t){return t[o]})):e)}))}))},i.getOhlcFromEnd=function(t){var e=this,n=(t||{}).index,r=fo(Number(void 0===n?1:n),Object(Ot.localize)("Index must be a positive integer"));return new Promise((function(n){return e.getOhlc(t).then((function(t){return n(t.slice(-r)[0])}))}))},i.getPipSize=function(){return this.$scope.ticksService.pipSizes[this.symbol]},r}(t)}(function(t){var e,n;function r(){var e;return(e=t.call(this)||this).sessionRuns=0,e.sessionProfit=0,Be.register("summary.clear",e.clearSummary.bind(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(e))),e}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.clearSummary=function(){if(this.sessionRuns=0,this.sessionProfit=0,this.accountInfo){var t=this.accountInfo.loginid;pa[t]=ua({},ha)}},i.updateTotals=function(t){var e=t.sell_price,n=t.buy_price,r=t.currency,i=Object(Fi.getRoundedNumber)(Number(e)-Number(n),r),o=i>0,a=this.getAccountStat();a.totalWins+=o?1:0,a.totalLosses+=o?0:1,this.sessionProfit=Object(Fi.getRoundedNumber)(Number(this.sessionProfit)+Number(i),r),a.totalProfit=Object(Fi.getRoundedNumber)(Number(a.totalProfit)+Number(i),r),a.totalStake=Object(Fi.getRoundedNumber)(Number(a.totalStake)+Number(n),r),a.totalPayout=Object(Fi.getRoundedNumber)(Number(a.totalPayout)+Number(e),r),Vi({profit:i,contract:t,accountID:this.accountInfo.loginid,totalProfit:a.totalProfit,totalWins:a.totalWins,totalLosses:a.totalLosses,totalStake:a.totalStake,totalPayout:a.totalPayout}),o?Hi("success",Object(Ot.localize)("Profit amount")+": "+i):Hi("warn",Object(Ot.localize)("Loss amount")+": "+i)},i.updateAndReturnTotalRuns=function(){return this.sessionRuns++,++this.getAccountStat().totalRuns},i.getTotalRuns=function(){return this.getAccountStat().totalRuns},i.getTotalProfit=function(t,e){var n=this.getAccountStat();return t&&0!==n.totalProfit?Object(Fi.getRoundedNumber)(+n.totalProfit,e):+n.totalProfit},i.checkLimits=function(t){if(t.limitations){var e=t.limitations,n=e.maxLoss,r=e.maxTrades;if(n&&r){if(this.sessionRuns>=r)throw lo("CustomLimitsReached",Object(Ot.localize)("Maximum number of trades reached"));if(this.sessionProfit<=-n)throw lo("CustomLimitsReached",Object(Ot.localize)("Maximum loss amount reached"))}}},i.getAccountStat=function(){var t=this.accountInfo.loginid;return t in pa||(pa[t]=ua({},ha)),pa[t]},r}((function(){})))))))));function va(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ba(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var _a,Ea,Ta,Sa,ka,wa,Aa,Oa,Ca,Ia,Na,Ra,Ba,Da,Pa,xa,Ma,La,ja,Fa,Ua,za,Va,Ha,Ga,qa,Wa,Ka=function(t){var e,n;function r(e){var n;return(n=t.call(this)||this).tradeEngine=new ga(e),n.api=e.api,n.observer=e.observer,n.$scope=e,n}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.getInterface=function(t){var e=this;return void 0===t&&(t="Global"),"Bot"===t?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?va(n,!0).forEach((function(e){ba(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):va(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.getBotInterface(),{},this.getToolsInterface()):{watch:function(){var t;return(t=e.tradeEngine).watch.apply(t,arguments)},sleep:function(){return e.sleep.apply(e,arguments)},alert:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return alert.apply(void 0,arguments)})),prompt:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){return prompt.apply(void 0,arguments)})),console:{log:function(){for(var t,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];(t=console).log.apply(t,[(new Date).toLocaleTimeString()].concat(n))}}}},i.getBotInterface=function(){var t=this,e=function(e){return(n=t.get("contract"),r=n.sell_price,i=n.buy_price,o=n.currency,a=Object(Fi.getRoundedNumber)(r-i,o),s=a<0?"loss":"win",[n.transaction_ids.buy,+n.buy_price,+n.sell_price,a,n.contract_type,De(new Date(parseInt(n.entry_tick_time+"000"))),+n.entry_tick,De(new Date(parseInt(n.exit_tick_time+"000"))),+n.exit_tick,+(n.barrier?n.barrier:0),s])[e];var n,r,i,o,a,s};return{init:function(){var e;return(e=t.tradeEngine).init.apply(e,arguments)},start:function(){var e;return(e=t.tradeEngine).start.apply(e,arguments)},stop:function(){var e;return(e=t.tradeEngine).stop.apply(e,arguments)},purchase:function(e){return t.tradeEngine.purchase(e)},getAskPrice:function(e){return Number(t.getProposal(e).ask_price)},getPayout:function(e){return Number(t.getProposal(e).payout)},isSellAvailable:function(){return t.tradeEngine.isSellAtMarketAvailable()},sellAtMarket:function(){return t.tradeEngine.sellAtMarket()},getSellPrice:function(){return t.getSellPrice()},isResult:function(t){return e(10)===t},isTradeAgain:function(t){return Be.emit("bot.trade_again",t)},readDetails:function(t){return e(t-1)}}},i.sleep=function(t){var e=this;return void 0===t&&(t=1),new Promise((function(n){return setTimeout((function(){n(),setTimeout((function(){return e.observer.emit("CONTINUE")}),0)}),1e3*t)}),Gi)},i.getProposal=function(t){var e;return this.get("proposals").forEach((function(n){n.contractType===t&&(e=n)})),e},i.getSellPrice=function(){return this.tradeEngine.getSellPrice()},i.get=function(t){return this.tradeEngine.getData().get(t)},r}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.getToolsInterface=function(){return function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ro(n,!0).forEach((function(e){Bo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ro(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({getTime:function(){return parseInt((new Date).getTime()/1e3)}},this.getCandleInterface(),{},this.getMiscInterface(),{},this.getIndicatorsInterface())},r}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.getIndicatorsInterface=function(){var t=this;return{sma:function(e,n){return t.decorate(bo.a,e,{periods:n})},smaa:function(e,n){return t.decorate(vo.simpleMovingAverageArray,e,{periods:n})},ema:function(e,n){return t.decorate(Eo.a,e,{periods:n})},emaa:function(e,n){return t.decorate(_o.exponentialMovingAverageArray,e,{periods:n})},rsi:function(e,n){return t.decorate(wo.a,e,{periods:n})},rsia:function(e,n){return t.decorate(ko.relativeStrengthIndexArray,e,{periods:n})},bb:function(e,n,r){return t.decorate(So.a,e,n)[r]},bba:function(e,n,r){return t.decorate(To.bollingerBandsArray,e,n).map((function(t){return t[r]}))},macda:function(e,n,r){return t.decorate(Oo.a,e,n).map((function(t){return t[r]}))}}},i.decorate=function(t,e,n){for(var r=this.tradeEngine.getPipSize(),i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return t.apply(void 0,[e,Io({pipSize:r},n)].concat(o))},r}(t)}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.getMiscInterface=function(){var t=this;return{notify:function(t){return Be.emit("Notify",t)},notifyTelegram:function(t,e,n){var r=function(){return Hi("warn",Object(Ot.localize)("The Telegram notification could not be sent"))};fetch("https://api.telegram.org/bot"+t+"/sendMessage",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({chat_id:e,text:n})}).then((function(t){t.ok||r()})).catch(r)},getTotalRuns:function(){return t.tradeEngine.getTotalRuns()},getBalance:function(e){return t.tradeEngine.getBalance(e)},getTotalProfit:function(e){return t.tradeEngine.getTotalProfit(e,t.tradeEngine.tradeOptions.currency)}}},r}(t)}(function(t){return function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.getCandleInterface=function(){return{isCandleBlack:function(t){return go(t)&&t.close<t.open},candleValues:function(t,e){return function(t){if(!(t instanceof Array&&t.every((function(t){return mo(t)}))))throw lo("CandleListExpected",Object(Ot.localize)("Given candle list is not valid"));return t}(t).map((function(t){return t[e]}))},candleField:function(t,e){return go(t)[e]}}},r}(t)}(t))))}(function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n,r.prototype.getTicksInterface=function(){var t=this;return{getLastTick:function(){var e;return(e=t.tradeEngine).getLastTick.apply(e,arguments)},getLastDigit:function(){var e;return(e=t.tradeEngine).getLastDigit.apply(e,arguments)},getTicks:function(){var e;return(e=t.tradeEngine).getTicks.apply(e,arguments)},checkDirection:function(){var e;return(e=t.tradeEngine).checkDirection.apply(e,arguments)},getOhlcFromEnd:function(){var e;return(e=t.tradeEngine).getOhlcFromEnd.apply(e,arguments)},getOhlc:function(){var e;return(e=t.tradeEngine).getOhlc.apply(e,arguments)},getLastDigitList:function(){var e;return(e=t.tradeEngine).getLastDigitList.apply(e,arguments)}}},r}((function(){})))),Ya=function(t){return t&&t.tradeEngine.options},Ja=function(t,e){return void 0===e&&(e=""),!qe.includes(e)&&Ya(t)&&t.tradeEngine.options.shouldRestartOnError},Qa=function(){function t(){this.init()}var e=t.prototype;return e.init=function(){var t,e=this;this.$scope={observer:new Re,api:t=new eo.LiveApi(uo),ticksService:new to(t)},this.bot=new Ka(this.$scope),this.stopped=!1,this.$scope.observer.register("REVERT",(function(t){return e.revert("before"===t?e.beforeState:e.duringState)}))},e.run=function(t){var e=this,n=function(t,n){var r=e.bot.getInterface("Bot"),i=e.bot.getTicksInterface(),o=e.bot.getInterface(),a=o.alert,s=o.prompt,c=o.sleep,u=o.console;t.setProperty(n,"console",t.nativeToPseudo(u)),t.setProperty(n,"alert",t.nativeToPseudo(a)),t.setProperty(n,"prompt",t.nativeToPseudo(s));var l=t.nativeToPseudo(r);Object.entries(i).forEach((function(n){var r=n[0],i=n[1];return t.setProperty(l,r,e.createAsync(t,i))})),t.setProperty(l,"start",t.nativeToPseudo((function(){var n=r.start;Ja(e.bot)&&(e.startState=t.takeStateSnapshot()),n.apply(void 0,arguments)}))),t.setProperty(l,"purchase",e.createAsync(t,r.purchase)),t.setProperty(l,"sellAtMarket",e.createAsync(t,r.sellAtMarket)),t.setProperty(n,"Bot",l),t.setProperty(n,"watch",e.createAsync(t,(function(t){var n,r=e.bot.getInterface().watch;if(n=e.bot,Ya(n)&&n.tradeEngine.options.timeMachineEnabled){var i=e.interpreter.takeStateSnapshot();"before"===t?e.beforeState=i:e.duringState=i}return r(t)}))),t.setProperty(n,"sleep",e.createAsync(t,c))};return new Promise((function(r,i){e.$scope.observer.register("Error",(function t(n){var r;if(!e.stopped){if(function(t,e){return void 0===e&&(e=""),!(!["SellNotAvailable"].includes(e)||!Ya(t))}(e.bot,n.name))return Be.emit("ui.log.error",n.message),void e.stop();if(e.isErrorTriggered=!0,Ja(e.bot,n.name)&&(o=e.bot,Ya(o)&&o.tradeEngine.tradeOptions)){var o;Be.emit("Error",n);var a=e.bot.tradeEngine,s=a.initArgs,c=a.tradeOptions;e.terminateSession(),e.init(),e.$scope.observer.register("Error",t),(r=e.bot.tradeEngine).init.apply(r,s),e.bot.tradeEngine.start(c),e.revert(e.startState)}else i(n)}})),e.interpreter=new Li.a(t,n),e.onFinish=r,e.loop()}))},e.loop=function(){!this.stopped&&this.interpreter.run()||(this.isErrorTriggered=!1,this.onFinish(this.interpreter.pseudoToNative(this.interpreter.value)))},e.revert=function(t){this.interpreter.restoreStateSnapshot(t),this.interpreter.paused_=!1,this.loop()},e.terminateSession=function(){this.$scope.api.disconnect(),this.stopped=!0,Be.emit("bot.stop")},e.stop=function(){var t=this;!1!==this.bot.tradeEngine.isSold||this.isErrorTriggered?this.terminateSession():Be.register("contract.status",(function(e){"contract.sold"===e.id&&t.terminateSession()}))},e.createAsync=function(t,e){var n=this;return t.createAsyncFunction((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.pop();e.apply(void 0,i.map((function(e){return t.pseudoToNative(e)}))).then((function(e){a(t.nativeToPseudo(e)),n.loop()})).catch((function(t){return n.$scope.observer.emit("Error",t)}))}))},e.hasStarted=function(){return!this.stopped},t}(),Xa=null,Za={key:"bot_switch_account",header:Object(Ot.localize)("You have switched accounts."),message:Object(Ot.localize)("Our system will finish any DBot trades that are running, and DBot will not place any new trades."),type:"warning",is_persistent:!0};function $a(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ts(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function es(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var ns,rs,is,os,as,ss,cs,us,ls,hs,ps=(_a=r.d.bound,Ea=r.d.bound,Ta=r.d.bound,Sa=r.d.bound,ka=r.d.bound,wa=r.d.bound,Aa=r.d.bound,Oa=r.d.bound,Ca=r.d.bound,Ia=r.d.bound,Na=r.d.bound,Ra=r.d.bound,Ba=r.d.bound,Da=r.d.bound,Pa=r.d.bound,xa=r.d.bound,Ma=r.d.bound,La=r.d.bound,ja=r.d.bound,Ua=es((Fa=function(){function t(t){$a(this,"active_index",Ua,this),$a(this,"contract_stage",za,this),$a(this,"dialog_options",Va,this),$a(this,"has_open_contract",Ha,this),$a(this,"is_running",Ga,this),$a(this,"is_drawer_open",qa,this),this.error_type=void 0,$a(this,"onRunButtonClick",Wa,this),this.root_store=t,this.registerCoreReactions()}var e,n,i=t.prototype;return i.onStopButtonClick=function(){Xa&&Xa.stop(),this.is_running=!1,this.error_type?(this.setContractStage(zt.NOT_RUNNING),this.error_type=void 0):this.has_open_contract?this.setContractStage(zt.IS_STOPPING):(this.setContractStage(zt.NOT_RUNNING),t.unregisterBotListeners())},i.onClearStatClick=function(){this.showClearStatDialog()},i.clearStat=function(){var t=this.root_store,e=t.contract_card,n=t.journal,r=t.summary,i=t.transactions;this.is_running=!1,this.has_open_contract=!1,n.clear(),e.clear(),r.clear(),i.clear(),this.setContractStage(zt.NOT_RUNNING)},i.toggleDrawer=function(t){this.is_drawer_open=t},i.setActiveTabIndex=function(t){this.active_index=t},i.onCloseDialog=function(){this.dialog_options={}},i.showLoginDialog=function(){this.onOkButtonClick=this.onCloseDialog,this.onCancelButtonClick=void 0,this.dialog_options={title:Object(Ot.localize)("Please log in"),message:Object(Ot.localize)("You need to log in to run the bot.")}},i.showRealAccountDialog=function(){this.onOkButtonClick=this.onCloseDialog,this.onCancelButtonClick=void 0,this.dialog_options={title:Object(Ot.localize)("DBot isn't quite ready for real accounts"),message:Object(Ot.localize)("Please switch to your demo account to run your DBot.")}},i.showClearStatDialog=function(){var t=this;this.onOkButtonClick=function(){t.clearStat(),t.onCloseDialog()},this.onCancelButtonClick=this.onCloseDialog,this.dialog_options={title:Object(Ot.localize)("Are you sure?"),message:Object(Ot.localize)("This will clear all data in the summary, transactions, and journal panels. All counters will be reset to zero.")}},i.showIncompatibleStrategyDialog=function(){this.onOkButtonClick=this.onCloseDialog,this.onCancelButtonClick=void 0,this.dialog_options={title:Object(Ot.localize)("Import error"),message:Object(Ot.localize)("This strategy is currently not compatible with DBot.")}},i.registerBotListeners=function(){var t=this.root_store,e=t.contract_card,n=t.journal,r=t.summary,i=t.transactions;Be.register("bot.running",this.onBotRunningEvent),Be.register("bot.stop",this.onBotStopEvent),Be.register("bot.trade_again",this.onBotTradeAgain),Be.register("contract.status",this.onContractStatusEvent),Be.register("contract.status",r.onContractStatusEvent),Be.register("bot.contract",this.onBotContractEvent),Be.register("bot.contract",e.onBotContractEvent),Be.register("bot.contract",i.onBotContractEvent),Be.register("ui.log.success",n.onLogSuccess),Be.register("ui.log.error",this.onError),Be.register("Error",this.onError),Be.register("Notify",n.onNotify)},i.onBotRunningEvent=function(){this.has_open_contract=!0},i.onBotStopEvent=function(){this.error_type===Ke.RECOVERABLE_ERRORS?(this.setContractStage(zt.PURCHASE_SENT),this.error_type=void 0):this.error_type===Ke.UNRECOVERABLE_ERRORS?(this.setContractStage(zt.NOT_RUNNING),this.error_type=void 0,this.is_running=!1,t.unregisterBotListeners()):this.has_open_contract&&(this.setContractStage(zt.CONTRACT_CLOSED),t.unregisterBotListeners()),this.has_open_contract=!1},i.onBotTradeAgain=function(t){t||this.onStopButtonClick()},i.onContractStatusEvent=function(t){switch(t.id){case"contract.purchase_sent":this.setContractStage(zt.PURCHASE_SENT);break;case"contract.purchase_received":this.setContractStage(zt.PURCHASE_RECEIVED);break;case"contract.sold":this.setContractStage(zt.CONTRACT_CLOSED);break;default:this.setContractStage(zt.NOT_RUNNING)}},i.onBotContractEvent=function(t){Vt(t)&&this.setContractStage(zt.CONTRACT_CLOSED)},i.onError=function(t){qe.includes(t.name)?(this.root_store.contract_card.clear(),this.error_type=Ke.UNRECOVERABLE_ERRORS):this.error_type=Ke.RECOVERABLE_ERRORS,this.showErrorMessage(t)},i.showErrorMessage=function(t){this.root_store.journal.onError(t),this.setActiveTabIndex(2)},t.unregisterBotListeners=function(){Be.unregisterAll("bot.running"),Be.unregisterAll("bot.stop"),Be.unregisterAll("bot.trade_again"),Be.unregisterAll("contract.status"),Be.unregisterAll("bot.contract"),Be.unregisterAll("ui.log.success"),Be.unregisterAll("ui.log.error"),Be.unregisterAll("Error"),Be.unregisterAll("Notify")},i.registerCoreReactions=function(){var e=this,n=this.root_store.core,i=n.client,o=n.common,a=n.ui,s=function(){o.is_socket_opened?e.disposeIsSocketOpenedListener=Object(r.m)((function(){return i.loginid}),(function(n){n&&e.is_running&&a.addNotificationMessage(Za),Xa&&(Xa.terminateSession(),Xa=null),t.unregisterBotListeners(),e.clearStat()})):("function"==typeof e.disposeLogoutListener&&e.disposeLogoutListener(),"function"==typeof e.disposeSwitchAccountListener&&e.disposeSwitchAccountListener())};s(),this.disposeLogoutListener=Object(r.m)((function(){return o.is_socket_opened}),(function(){s()}))},i.setContractStage=function(t){this.contract_stage=t},i.onUnmount=function(){t.unregisterBotListeners(),this.disposeIsSocketOpenedListener()},e=t,(n=[{key:"is_stop_button_disabled",get:function(){return this.contract_stage.index===zt.IS_STOPPING.index}},{key:"is_stop_button_visible",get:function(){return this.is_running||this.has_open_contract}},{key:"is_clear_stat_disabled",get:function(){return this.is_running||this.has_open_contract||0===this.root_store.journal.messages.length}},{key:"is_dialog_open",get:function(){return Object.entries(this.dialog_options).length>0}}])&&ts(e.prototype,n),t}()).prototype,"active_index",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),za=es(Fa.prototype,"contract_stage",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return zt.NOT_RUNNING}}),Va=es(Fa.prototype,"dialog_options",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Ha=es(Fa.prototype,"has_open_contract",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ga=es(Fa.prototype,"is_running",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qa=es(Fa.prototype,"is_drawer_open",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),es(Fa.prototype,"is_stop_button_disabled",[r.e],Object.getOwnPropertyDescriptor(Fa.prototype,"is_stop_button_disabled"),Fa.prototype),es(Fa.prototype,"is_stop_button_visible",[r.e],Object.getOwnPropertyDescriptor(Fa.prototype,"is_stop_button_visible"),Fa.prototype),es(Fa.prototype,"is_clear_stat_disabled",[r.e],Object.getOwnPropertyDescriptor(Fa.prototype,"is_clear_stat_disabled"),Fa.prototype),Wa=es(Fa.prototype,"onRunButtonClick",[_a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var t=this;return function(){var e,n,r,i,o=t.root_store,a=o.core,s=o.contract_card;a.client.is_logged_in?(t.registerBotListeners(),e=Blockly.derivWorkspace.getAllBlocks(),n=It.mandatoryMainBlocks,r=["trade_definition_tradeoptions"].concat(n),i=e.map((function(t){return t.type})),r.every((function(t){return i.includes(t)}))?(t.is_running=!0,t.is_drawer_open=!0,s.clear(),t.setContractStage(zt.STARTING),function(t){void 0===t&&(t={}),Blockly.derivWorkspace.getTopBlocks().forEach((function(t){t.isMainBlock()||t.isIndependentBlock()||t.setDisabled(!0)}));try{var e="\n            var BinaryBotPrivateInit;\n            var BinaryBotPrivateStart;\n            var BinaryBotPrivateBeforePurchase; \n            var BinaryBotPrivateDuringPurchase;\n            var BinaryBotPrivateAfterPurchase;\n            var BinaryBotPrivateLastTickTime;\n            var BinaryBotPrivateTickAnalysisList = [];\n            function BinaryBotPrivateRun(f, arg) {\n                if (f) return f(arg);\n                return false;\n            }\n            function BinaryBotPrivateTickAnalysis() {\n                var currentTickTime = Bot.getLastTick(true).epoch;\n                if (currentTickTime === BinaryBotPrivateLastTickTime) {\n                    return;\n                }\n                BinaryBotPrivateLastTickTime = currentTickTime;\n                for (var BinaryBotPrivateI = 0; BinaryBotPrivateI < BinaryBotPrivateTickAnalysisList.length; BinaryBotPrivateI++) {\n                    BinaryBotPrivateRun(BinaryBotPrivateTickAnalysisList[BinaryBotPrivateI]);\n                }\n            }\n            var BinaryBotPrivateLimitations = "+JSON.stringify(t)+";\n            "+Blockly.JavaScript.workspaceToCode(Blockly.derivWorkspace)+"\n            BinaryBotPrivateRun(BinaryBotPrivateInit);\n            while (true) {\n                BinaryBotPrivateTickAnalysis();\n                BinaryBotPrivateRun(BinaryBotPrivateStart);\n                while (watch('before')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateBeforePurchase);\n                }\n                while (watch('during')) {\n                    BinaryBotPrivateTickAnalysis();\n                    BinaryBotPrivateRun(BinaryBotPrivateDuringPurchase);\n                }\n                BinaryBotPrivateTickAnalysis();\n                if (!BinaryBotPrivateRun(BinaryBotPrivateAfterPurchase)) {\n                    break;\n                }\n            }\n            ";e&&(null!==Xa&&(Xa.stop(!0),Xa=null),(Xa=new Qa).run(e).catch((function(t){Be.emit("Error",t),Xa.stop()})))}catch(t){Be.emit("Error",t),Xa&&Xa.stop()}}()):t.showErrorMessage(new Error(Object(Ot.localize)("One or more mandatory blocks are missing from your workspace. Please add the required block(s) and then try again.")))):t.showLoginDialog()}}}),es(Fa.prototype,"onStopButtonClick",[Ea],Object.getOwnPropertyDescriptor(Fa.prototype,"onStopButtonClick"),Fa.prototype),es(Fa.prototype,"onClearStatClick",[Ta],Object.getOwnPropertyDescriptor(Fa.prototype,"onClearStatClick"),Fa.prototype),es(Fa.prototype,"clearStat",[Sa],Object.getOwnPropertyDescriptor(Fa.prototype,"clearStat"),Fa.prototype),es(Fa.prototype,"toggleDrawer",[ka],Object.getOwnPropertyDescriptor(Fa.prototype,"toggleDrawer"),Fa.prototype),es(Fa.prototype,"setActiveTabIndex",[wa],Object.getOwnPropertyDescriptor(Fa.prototype,"setActiveTabIndex"),Fa.prototype),es(Fa.prototype,"is_dialog_open",[r.e],Object.getOwnPropertyDescriptor(Fa.prototype,"is_dialog_open"),Fa.prototype),es(Fa.prototype,"onCloseDialog",[Aa],Object.getOwnPropertyDescriptor(Fa.prototype,"onCloseDialog"),Fa.prototype),es(Fa.prototype,"showLoginDialog",[Oa],Object.getOwnPropertyDescriptor(Fa.prototype,"showLoginDialog"),Fa.prototype),es(Fa.prototype,"showRealAccountDialog",[Ca],Object.getOwnPropertyDescriptor(Fa.prototype,"showRealAccountDialog"),Fa.prototype),es(Fa.prototype,"showClearStatDialog",[Ia],Object.getOwnPropertyDescriptor(Fa.prototype,"showClearStatDialog"),Fa.prototype),es(Fa.prototype,"showIncompatibleStrategyDialog",[Na],Object.getOwnPropertyDescriptor(Fa.prototype,"showIncompatibleStrategyDialog"),Fa.prototype),es(Fa.prototype,"onBotRunningEvent",[Ra],Object.getOwnPropertyDescriptor(Fa.prototype,"onBotRunningEvent"),Fa.prototype),es(Fa.prototype,"onBotStopEvent",[Ba],Object.getOwnPropertyDescriptor(Fa.prototype,"onBotStopEvent"),Fa.prototype),es(Fa.prototype,"onBotTradeAgain",[Da],Object.getOwnPropertyDescriptor(Fa.prototype,"onBotTradeAgain"),Fa.prototype),es(Fa.prototype,"onContractStatusEvent",[Pa],Object.getOwnPropertyDescriptor(Fa.prototype,"onContractStatusEvent"),Fa.prototype),es(Fa.prototype,"onBotContractEvent",[xa],Object.getOwnPropertyDescriptor(Fa.prototype,"onBotContractEvent"),Fa.prototype),es(Fa.prototype,"onError",[Ma],Object.getOwnPropertyDescriptor(Fa.prototype,"onError"),Fa.prototype),es(Fa.prototype,"registerCoreReactions",[La],Object.getOwnPropertyDescriptor(Fa.prototype,"registerCoreReactions"),Fa.prototype),es(Fa.prototype,"onUnmount",[ja],Object.getOwnPropertyDescriptor(Fa.prototype,"onUnmount"),Fa.prototype),Fa);function fs(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ds(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var ys,ms,gs,vs,bs=(ns=r.d.bound,rs=r.d.bound,is=r.d.bound,os=r.d.bound,as=r.d.bound,ss=r.d.bound,us=ds((cs=function(){function t(t){fs(this,"is_saveload_modal_open",us,this),fs(this,"is_save_modal",ls,this),fs(this,"button_status",hs,this),this.root_store=t}var e=t.prototype;return e.toggleSaveLoadModal=function(t){void 0===t&&(t=this.is_save_modal),this.is_saveload_modal_open||this.setButtonStatus(0),this.is_saveload_modal_open=!this.is_saveload_modal_open,this.is_save_modal=t},e.onConfirmSave=function(t){var e,n,r,i,o,a,s;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:if(e=t.is_local,n=t.save_as_collection,this.setButtonStatus(1),r=this.root_store.toolbar.file_name,i=this.root_store.google_drive.saveFile,(o=Blockly.Xml.workspaceToDom(Blockly.derivWorkspace)).setAttribute("is_dbot","true"),o.setAttribute("collection",n?"true":"false"),!e){c.next=13;break}a=Blockly.Xml.domToPrettyText(o),s=new Blob([a],{type:"text/xml;charset=utf-8"}),on.a.saveAs(s,r+".xml"),c.next=16;break;case 13:return c.next=15,regeneratorRuntime.awrap(i({name:r,content:Blockly.Xml.domToPrettyText(o),mimeType:"application/xml"}));case 15:this.setButtonStatus(2);case 16:this.toggleSaveLoadModal();case 17:case"end":return c.stop()}}),null,this)},e.onDriveConnect=function(){var t;return regeneratorRuntime.async((function(e){for(;;)switch(e.prev=e.next){case 0:(t=this.root_store.google_drive).is_authorised?t.signOut():t.signIn();case 2:case"end":return e.stop()}}),null,this)},e.onLoadClick=function(t){var e,n,r,i,o,a;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=t.is_local,n=this.root_store.toolbar.onBotNameTyped,r=this.root_store.google_drive.loadFile,!e){s.next=8;break}document.getElementById("files").click(),s.next=17;break;case 8:return s.next=10,regeneratorRuntime.awrap(r());case 10:i=s.sent,o=i.xml_doc,a=i.file_name,n(a),un(o),this.setButtonStatus(2),this.toggleSaveLoadModal();case 17:case"end":return s.stop()}}),null,this)},e.setButtonStatus=function(t){this.button_status=t},e.handleFileChange=function(t){var e=this;this.setButtonStatus(1);var n,r,i=this.root_store.toolbar.onBotNameTyped;"drop"===t.type?(t.stopPropagation(),t.preventDefault(),n=t.dataTransfer.files,r=t):(n=t.target.files,this.toggleSaveLoadModal()),(n=Array.from(n)).forEach((function(t){var n=t.name.replace(/\.[^\/.]+$/,"");i(n),t.type.match("text/xml")&&e.readFile(t,r)})),t.target.value=""},e.readFile=function(t,e){void 0===e&&(e={});var n=new FileReader;n.onload=function(t){return un(t.target.result,e)},n.readAsText(t)},t}()).prototype,"is_saveload_modal_open",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ls=ds(cs.prototype,"is_save_modal",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),hs=ds(cs.prototype,"button_status",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ds(cs.prototype,"toggleSaveLoadModal",[ns],Object.getOwnPropertyDescriptor(cs.prototype,"toggleSaveLoadModal"),cs.prototype),ds(cs.prototype,"onConfirmSave",[rs],Object.getOwnPropertyDescriptor(cs.prototype,"onConfirmSave"),cs.prototype),ds(cs.prototype,"onDriveConnect",[is],Object.getOwnPropertyDescriptor(cs.prototype,"onDriveConnect"),cs.prototype),ds(cs.prototype,"onLoadClick",[os],Object.getOwnPropertyDescriptor(cs.prototype,"onLoadClick"),cs.prototype),ds(cs.prototype,"setButtonStatus",[as],Object.getOwnPropertyDescriptor(cs.prototype,"setButtonStatus"),cs.prototype),ds(cs.prototype,"handleFileChange",[ss],Object.getOwnPropertyDescriptor(cs.prototype,"handleFileChange"),cs.prototype),cs);function _s(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var Es,Ts,Ss,ks,ws,As,Os,Cs,Is,Ns,Rs,Bs,Ds,Ps,xs,Ms,Ls,js=(ys=r.d.bound,ms=r.d.bound,vs=_s((gs=function(){function t(t){var e;(e=vs)&&Object.defineProperty(this,"summary",{enumerable:e.enumerable,configurable:e.configurable,writable:e.writable,value:e.initializer?e.initializer.call(this):void 0}),this.root_store=t}var e=t.prototype;return e.onContractStatusEvent=function(t){switch(t.id){case"contract.purchase_received":var e=t.buy;this.summary.total_stake+=e.buy_price;break;case"contract.sold":var n=t.contract;switch(this.summary.total_profit+=n.profit,this.summary.number_of_runs+=1,n.status){case"won":this.summary.won_contracts+=1,this.summary.total_payout+=n.payout;break;case"lost":this.summary.lost_contracts+=1;break;case"sold":n.profit>0?(this.summary.won_contracts+=1,this.summary.total_payout+=n.profit):this.summary.lost_contracts+=1}}},e.clear=function(){this.summary={lost_contracts:0,number_of_runs:0,total_profit:0,total_payout:0,total_stake:0,won_contracts:0},Be.emit("summary.clear")},t}()).prototype,"summary",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{lost_contracts:0,number_of_runs:0,total_profit:0,total_payout:0,total_stake:0,won_contracts:0}}}),_s(gs.prototype,"onContractStatusEvent",[ys],Object.getOwnPropertyDescriptor(gs.prototype,"onContractStatusEvent"),gs.prototype),_s(gs.prototype,"clear",[ms],Object.getOwnPropertyDescriptor(gs.prototype,"clear"),gs.prototype),gs);function Fs(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Us(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var zs,Vs,Hs,Gs,qs,Ws=(Es=r.d.bound,Ts=r.d.bound,Ss=r.d.bound,ks=r.d.bound,ws=r.d.bound,As=r.d.bound,Os=r.d.bound,Cs=r.d.bound,Is=r.d.bound,Ns=r.d.bound,Rs=r.d.bound,Ds=Us((Bs=function(){function t(t){Fs(this,"is_dialog_open",Ds,this),Fs(this,"is_toolbox_open",Ps,this),Fs(this,"is_search_loading",xs,this),Fs(this,"file_name",Ms,this),this.onSearchClear=function(t){var e=Blockly.derivWorkspace.toolbox_;t("search",""),e.showSearch("")},Fs(this,"onUndoClick",Ls,this),this.onRedoClick=function(){Blockly.derivWorkspace.undo(!0)},this.onZoomInOutClick=function(t){var e=Blockly.derivWorkspace.getMetrics(),n=t?1:-1;Blockly.derivWorkspace.zoom(e.viewWidth/2,e.viewHeight/2,n)},this.onSortClick=function(){Blockly.derivWorkspace.cleanUp()},this.root_store=t}var e=t.prototype;return e.onRunClick=function(){this.root_store.run_panel.onRunButtonClick()},e.onStopClick=function(){this.root_store.run_panel.onStopButtonClick()},e.onToolboxToggle=function(){var t=Blockly.derivWorkspace,e=t.toolbox_;if(this.is_toolbox_open=!this.is_toolbox_open,e.toggle(),this.is_toolbox_open){var n=e.HtmlDiv.clientWidth,r=t.svgBlockCanvas_.getBoundingClientRect();r.left<n&&function(t,e,n,r){var i=t.getMetrics(),o=i.viewLeft-i.contentLeft,a=i.viewTop-i.contentTop;o+=-e,t.scrollbar.set(o,a)}(t,n-r.left+e.width)}},e.onSearchKeyUp=function(t){var e,n,i=this;this.is_search_loading=!0,(e=t,n=0,new Promise((function(t){n=setTimeout((function(){e(),t(n)}),1e3)}))).then(Object(r.d)((function(t){clearTimeout(t),i.is_search_loading=!1})))},e.onSearchBlur=function(){this.on_search_focus=!1},e.onSearch=function(t){var e=t.search;this.is_toolbox_open&&""!==e&&this.onToolboxToggle(),Blockly.derivWorkspace.toolbox_.showSearch(e)},e.onBotNameTyped=function(t){this.file_name=t},e.onResetClick=function(){this.is_dialog_open=!0},e.onResetCancelButtonClick=function(){this.is_dialog_open=!1},e.onResetOkButtonClick=function(){var t=Blockly.derivWorkspace;Blockly.Events.setGroup("reset"),t.clear(),Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(t.blocksXmlStr),t),Blockly.Events.setGroup(!1),this.file_name=Object(Ot.localize)("Untitled Bot"),this.is_dialog_open=!1},t}()).prototype,"is_dialog_open",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ps=Us(Bs.prototype,"is_toolbox_open",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xs=Us(Bs.prototype,"is_search_loading",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ms=Us(Bs.prototype,"file_name",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Object(Ot.localize)("Untitled Bot")}}),Us(Bs.prototype,"onRunClick",[Es],Object.getOwnPropertyDescriptor(Bs.prototype,"onRunClick"),Bs.prototype),Us(Bs.prototype,"onStopClick",[Ts],Object.getOwnPropertyDescriptor(Bs.prototype,"onStopClick"),Bs.prototype),Us(Bs.prototype,"onToolboxToggle",[Ss],Object.getOwnPropertyDescriptor(Bs.prototype,"onToolboxToggle"),Bs.prototype),Us(Bs.prototype,"onSearchKeyUp",[ks],Object.getOwnPropertyDescriptor(Bs.prototype,"onSearchKeyUp"),Bs.prototype),Us(Bs.prototype,"onSearchBlur",[ws],Object.getOwnPropertyDescriptor(Bs.prototype,"onSearchBlur"),Bs.prototype),Us(Bs.prototype,"onSearch",[As],Object.getOwnPropertyDescriptor(Bs.prototype,"onSearch"),Bs.prototype),Us(Bs.prototype,"onBotNameTyped",[Os],Object.getOwnPropertyDescriptor(Bs.prototype,"onBotNameTyped"),Bs.prototype),Us(Bs.prototype,"onResetClick",[Cs],Object.getOwnPropertyDescriptor(Bs.prototype,"onResetClick"),Bs.prototype),Us(Bs.prototype,"onResetCancelButtonClick",[Is],Object.getOwnPropertyDescriptor(Bs.prototype,"onResetCancelButtonClick"),Bs.prototype),Us(Bs.prototype,"onResetOkButtonClick",[Ns],Object.getOwnPropertyDescriptor(Bs.prototype,"onResetOkButtonClick"),Bs.prototype),Ls=Us(Bs.prototype,"onUndoClick",[Rs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){Blockly.Events.setGroup("undo"),Blockly.derivWorkspace.undo(),Blockly.Events.setGroup(!1)}}}),Bs);function Ks(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var Ys,Js,Qs,Xs,Zs,$s,tc,ec,nc,rc,ic,oc,ac,sc,cc,uc,lc=(zs=r.d.bound,Vs=r.d.bound,Hs=r.d.bound,qs=Ks((Gs=function(){function t(){var t;(t=qs)&&Object.defineProperty(this,"contracts",{enumerable:t.enumerable,configurable:t.configurable,writable:t.writable,value:t.initializer?t.initializer.call(this):void 0})}var e=t.prototype;return e.onBotContractEvent=function(t){this.pushTransaction(t)},e.pushTransaction=function(t){var e=Vt(t),n={buy_price:t.buy_price,contract_type:t.contract_type,currency:t.currency,refrence_id:t.transaction_ids.buy,entry_spot:t.entry_tick_display_value,exit_spot:t.exit_tick_display_value,profit:e&&t.profit,is_completed:e};this.contracts.some((function(e){return e.refrence_id===t.transaction_ids.buy}))&&this.contracts.shift(),this.contracts.unshift(n),this.contracts=this.contracts.slice(0)},e.clear=function(){this.contracts=this.contracts.slice(0,0)},t}()).prototype,"contracts",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ks(Gs.prototype,"onBotContractEvent",[zs],Object.getOwnPropertyDescriptor(Gs.prototype,"onBotContractEvent"),Gs.prototype),Ks(Gs.prototype,"pushTransaction",[Vs],Object.getOwnPropertyDescriptor(Gs.prototype,"pushTransaction"),Gs.prototype),Ks(Gs.prototype,"clear",[Hs],Object.getOwnPropertyDescriptor(Gs.prototype,"clear"),Gs.prototype),Gs);function hc(t,e,n,r){n&&Object.defineProperty(t,e,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function pc(t,e,n,r,i){var o={};return Object.keys(r).forEach((function(t){o[t]=r[t]})),o.enumerable=!!o.enumerable,o.configurable=!!o.configurable,("value"in o||o.initializer)&&(o.writable=!0),o=n.slice().reverse().reduce((function(n,r){return r(t,e,n)||n}),o),i&&void 0!==o.initializer&&(o.value=o.initializer?o.initializer.call(i):void 0,o.initializer=void 0),void 0===o.initializer&&(Object.defineProperty(t,e,o),o=null),o}var fc=(Ys=r.d.bound,Js=r.d.bound,Qs=r.d.bound,Xs=r.d.bound,Zs=r.d.bound,$s=r.d.bound,tc=r.d.bound,ec=r.d.bound,nc=r.d.bound,rc=r.d.bound,oc=pc((ic=function(){function t(t){var e=this;this.initial_values={symbol:"WLDAUD",trade_type:"callput",duration_type:"t",duration:5,stake:"",size:"",loss:"",profit:""},hc(this,"is_strategy_modal_open",oc,this),hc(this,"active_index",ac,this),hc(this,"market_dropdown",sc,this),hc(this,"trade_type_dropdown",cc,this),hc(this,"duration_dropdown",uc,this),this.getSizeDesc=function(t){switch(t){case 0:return Object(Ot.localize)("The multiplier amount used to increase your stake if you’re losing a trade.");case 1:return Object(Ot.localize)("The amount that you may add to your stake if you’re losing a trade.");case 2:return Object(Ot.localize)("The amount that you may add to your stake after each successful trade.");default:return""}},this.getSizeText=function(t){switch(t){case 0:return Object(Ot.localize)("Size");case 1:case 2:return Object(Ot.localize)("Units");default:return""}},this.validateQuickStrategy=function(t){var n={},r=["duration","stake","size","profit","loss"];Object.keys(t).forEach((function(e){var i=t[e];r.includes(e)&&(isNaN(i)?n[e]=Object(Ot.localize)("Must be a number"):i<=0?n[e]=Object(Ot.localize)("Must be a number higher than 0"):/^0+(?=\d)/.test(i)&&(n[e]=Object(Ot.localize)("Invalid number format"))),""===i&&(n[e]=Object(Ot.localize)("Field cannot be empty"))}));var i=e.duration_dropdown.filter((function(e){return e.unit===t.duration_type}))[0],o=i.min,a=i.max;return t.duration<o?n.duration=Object(Ot.localize)("Minimum duration:")+" "+o:t.duration>a&&(n.duration=Object(Ot.localize)("Maximum duration:")+" "+a),n},this.root_store=t}var e=t.prototype;return e.toggleStrategyModal=function(){this.root_store.flyout.setVisibility(!1),this.is_strategy_modal_open=!this.is_strategy_modal_open,this.is_strategy_modal_open&&this.onModalOpen()},e.setActiveTabIndex=function(t){this.active_index=t},e.createStrategy=function(t){var e,r,i,o,a,s,c,u,l,h,p,f,d,y,m,g,v,b,_,E=this;return regeneratorRuntime.async((function(T){for(;;)switch(T.prev=T.next){case 0:return e=Ut.instance.contracts_for,r=t.symbol,i=t.trade_type,o=t.duration_type,a=t.duration,s=t.stake,c=t.size,u=t.loss,l=t.profit,T.next=4,regeneratorRuntime.awrap(e.getMarketBySymbol(r));case 4:return h=T.sent,T.next=7,regeneratorRuntime.awrap(e.getSubmarketBySymbol(r));case 7:return p=T.sent,T.next=10,regeneratorRuntime.awrap(e.getTradeTypeCategoryByTradeType(i));case 10:return f=T.sent,d=It.strategies,y=Object.keys(d).filter((function(t){return d[t].index===E.active_index}))[0],T.next=15,regeneratorRuntime.awrap(fetch(n.p+"xml/"+y+".xml").then((function(t){return t.text()})));case 15:m=T.sent,g=Blockly.Xml.textToDom(m),v=function(t,e){g.querySelectorAll('value[strategy_value="'+t+'"]').forEach((function(t){t.innerHTML='<shadow type="math_number"><field name="NUM">'+e+"</field></shadow>"}))},b=function(t,e){g.querySelectorAll('field[name="'+t.toUpperCase()+'_LIST"]').forEach((function(t){t.innerHTML=e}))},_={market:h,submarket:p,symbol:r,tradetype:i,tradetypecat:f,durationtype:o,duration:a,stake:s,size:c,loss:u,profit:l},Object.keys(_).forEach((function(t){var e=_[t];isNaN(e)?"string"==typeof e&&b(t,e):v(t,e)})),un(Blockly.Xml.domToText(g)),this.toggleStrategyModal();case 23:case"end":return T.stop()}}),null,this)},e.onModalOpen=function(){var t,e,n=this;return regeneratorRuntime.async((function(i){for(;;)switch(i.prev=i.next){case 0:return t=Ut.instance.active_symbols,i.next=3,regeneratorRuntime.awrap(t.getAssetOptions());case 3:return e=i.sent,i.next=6,regeneratorRuntime.awrap(this.updateTradetypeDropdown());case 6:return i.next=8,regeneratorRuntime.awrap(this.updateDurationDropdown());case 8:return i.next=10,regeneratorRuntime.awrap(this.updateDurationValue());case 10:Object(r.n)((function(){n.market_dropdown=e}));case 11:case"end":return i.stop()}}),null,this)},e.onChangeMarketDropdown=function(t,e){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t("symbol",e),r.next=3,regeneratorRuntime.awrap(this.updateTradetypeDropdown(t,e));case 3:n=this.trade_type_dropdown[Object.keys(this.trade_type_dropdown)[0]][0].value,t("trade_type",n);case 5:case"end":return r.stop()}}),null,this)},e.updateTradetypeDropdown=function(t,e){var n,i,o,a=this;return regeneratorRuntime.async((function(s){for(;;)switch(s.prev=s.next){case 0:return void 0===t&&(t=null),void 0===e&&(e=this.initial_values.symbol),n=Ut.instance.contracts_for,s.next=5,regeneratorRuntime.awrap(n.getGroupedTradeTypes(e));case 5:if(i=s.sent,o=i[Object.keys(i)[0]][0].value,Object(r.n)((function(){return a.trade_type_dropdown=i})),!t){s.next=12;break}return t("trade_type",o),s.next=12,regeneratorRuntime.awrap(this.updateDurationDropdown(t,e,o));case 12:case"end":return s.stop()}}),null,this)},e.onChangeTradeTypeDropdown=function(t,e,n){return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:return t("trade_type",n),r.next=3,regeneratorRuntime.awrap(this.updateDurationDropdown(t,e,n));case 3:case"end":return r.stop()}}),null,this)},e.updateDurationDropdown=function(t,e,n){var i,o,a,s=this;return regeneratorRuntime.async((function(c){for(;;)switch(c.prev=c.next){case 0:return void 0===t&&(t=null),void 0===e&&(e=this.initial_values.symbol),void 0===n&&(n=this.initial_values.trade_type),i=Ut.instance.contracts_for,c.next=6,regeneratorRuntime.awrap(i.getDurations(e,n));case 6:o=c.sent,a=o[Object.keys(o)[0]].unit,Object(r.n)((function(){return s.duration_dropdown=o})),t&&(t("duration_type",a),this.updateDurationValue(t,a));case 10:case"end":return c.stop()}}),null,this)},e.onChangeDurationDropdown=function(t,e){return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:t("duration_type",e),this.updateDurationValue(t,e);case 2:case"end":return n.stop()}}),null,this)},e.updateDurationValue=function(t,e){var n;return regeneratorRuntime.async((function(r){for(;;)switch(r.prev=r.next){case 0:void 0===t&&(t=null),void 0===e&&(e=this.initial_values.duration_type),n=this.duration_dropdown.filter((function(t){return t.unit===e}))[0].min,t&&t("duration",n);case 4:case"end":return r.stop()}}),null,this)},t}()).prototype,"is_strategy_modal_open",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ac=pc(ic.prototype,"active_index",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),sc=pc(ic.prototype,"market_dropdown",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),cc=pc(ic.prototype,"trade_type_dropdown",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),uc=pc(ic.prototype,"duration_dropdown",[r.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pc(ic.prototype,"toggleStrategyModal",[Ys],Object.getOwnPropertyDescriptor(ic.prototype,"toggleStrategyModal"),ic.prototype),pc(ic.prototype,"setActiveTabIndex",[Js],Object.getOwnPropertyDescriptor(ic.prototype,"setActiveTabIndex"),ic.prototype),pc(ic.prototype,"createStrategy",[Qs],Object.getOwnPropertyDescriptor(ic.prototype,"createStrategy"),ic.prototype),pc(ic.prototype,"onModalOpen",[Xs],Object.getOwnPropertyDescriptor(ic.prototype,"onModalOpen"),ic.prototype),pc(ic.prototype,"onChangeMarketDropdown",[Zs],Object.getOwnPropertyDescriptor(ic.prototype,"onChangeMarketDropdown"),ic.prototype),pc(ic.prototype,"updateTradetypeDropdown",[$s],Object.getOwnPropertyDescriptor(ic.prototype,"updateTradetypeDropdown"),ic.prototype),pc(ic.prototype,"onChangeTradeTypeDropdown",[tc],Object.getOwnPropertyDescriptor(ic.prototype,"onChangeTradeTypeDropdown"),ic.prototype),pc(ic.prototype,"updateDurationDropdown",[ec],Object.getOwnPropertyDescriptor(ic.prototype,"updateDurationDropdown"),ic.prototype),pc(ic.prototype,"onChangeDurationDropdown",[nc],Object.getOwnPropertyDescriptor(ic.prototype,"onChangeDurationDropdown"),ic.prototype),pc(ic.prototype,"updateDurationValue",[rc],Object.getOwnPropertyDescriptor(ic.prototype,"updateDurationValue"),ic.prototype),ic),dc=function(t,e){this.core=t,this.ws=e,this.contract_card=new ue(this),this.flyout=new Ee(this),this.flyout_help=new Ie(this),this.google_drive=new He(this),this.journal=new Qe(this),this.saveload=new bs(this),this.summary=new js(this),this.transactions=new lc(this),this.toolbar=new Ws(this),this.quick_strategy=new fc(this),this.run_panel=new ps(this),en.setInstance(this)},yc=n(17),mc=n.n(yc),gc=(n(56),n(40)),vc=n.n(gc),bc=(n(199),n(12)),_c=n.n(bc),Ec=(n(99),n(18)),Tc=n(3),Sc=n.n(Tc),kc=n(62),wc=n.n(kc),Ac=(n(141),n(419),function(t){var e=t.children,n=t.onOkButtonClick,r=t.onCancelButtonClick,i=t.is_open,a=t.title;return o.a.createElement(wc.a,{className:"bot-dialog",is_open:i,has_close_icon:!1,toggleModal:r},o.a.createElement("div",{className:"bot-dialog__content"},o.a.createElement("div",{className:"bot-dialog__header"},a),o.a.createElement("div",{className:"bot-dialog__text"},e),o.a.createElement("div",{className:"bot-dialog__footer"},r&&o.a.createElement(mc.a,{className:"bot-dialog__cancel",text:Object(Ot.localize)("Cancel"),onClick:r,has_effect:!0,secondary:!0}),n&&o.a.createElement(mc.a,{className:"bot-dialog__ok",text:Object(Ot.localize)("Ok"),onClick:n,has_effect:!0,primary:!0}))))});Ac.propTypes={children:Sc.a.node,is_open:Sc.a.bool,onCancelButtonClick:Sc.a.func,onOkButtonClick:Sc.a.func,title:Sc.a.string};var Oc=Ac,Cc=n(209),Ic=n.n(Cc),Nc=(n(420),n(210)),Rc=n.n(Nc);function Bc(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Dc(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bc(n,!0).forEach((function(e){Pc(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bc(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pc(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xc(t,e){return void 0===e?function(t){var e=function(e,n){return Dc({},t(e),{},n)};return function(t){return K(e)(t)}}(t):function(t,e){return function(n){var r=function(r){var i,a;function s(i){var o,a=(o=r.call(this,i)||this).props.root_store;return o.store=new e(a),o.store.updateProps&&o.store.updateProps(i),o.injectedComponent=K((function(e,n){return Dc({},t(o.store),{},n)}))(n),o}a=r,(i=s).prototype=Object.create(a.prototype),i.prototype.constructor=i,i.__proto__=a;var c=s.prototype;return c.getDerivedStateFromProps=function(t){this.store.updateProps&&this.store.updateProps(t)},c.componentWillUnmount=function(){this.store.destructor&&this.store.destructor()},c.render=function(){return o.a.createElement(this.injectedComponent)},s}(i.Component),a=n.displayName||n.name||n.constructor&&n.constructor.name||"Unknown";return r.displayName="unbox-"+a,K((function(t){return{root_store:t}}))(r)}}(t,e)}function Mc(){return(Mc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n(421),n(422),n(423);var Lc={is_local:!0,save_as_collection:!1},jc=function(t){var e=t.button_status,n=t.handleFileChange,r=t.is_authorised,i=t.is_save_modal,a=t.is_saveload_modal_open,s=t.onConfirmSave,c=t.onDriveConnect,u=t.onLoadClick,l=t.toggleSaveLoadModal,h=Object(Ot.localize)(i?"Save Bot":"Load Bot");return o.a.createElement(wc.a,{title:h,className:"modal--saveload",width:"384px",is_open:a,toggleModal:function(){return l()}},o.a.createElement(Ec.Formik,{initialValues:Lc,onSubmit:i?function(t){return s(t)}:function(t){return u(t)}},(function(t){var a=t.values,s=a.is_local,u=a.save_as_collection,h=t.setFieldValue;return o.a.createElement(Ec.Form,null,o.a.createElement("div",{className:"modal__content"},o.a.createElement("div",{className:"modal__content-row"},o.a.createElement(Rc.a,{className:"radio-group__saveload-type",name:"is_local",items:[{id:"local",label:o.a.createElement(Fc,{text:Object(Ot.localize)("Local"),icon:o.a.createElement(Ai,null)}),value:!0},{id:"drive",label:o.a.createElement(Fc,{text:"Google Drive",icon:o.a.createElement(Oi,null),google_drive_connected:r,onDriveConnect:c}),value:!1,disabled:!r,className:mn()({"dc-radio-group__item-disabled":!r})}],selected:!r||s,onToggle:function(){return h("is_local",!s)}})),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(Ec.Field,{name:"save_as_collection"},(function(t){var e=t.field;return o.a.createElement(Ic.a,Mc({},e,{onChange:function(){return h("save_as_collection",!u)},defaultChecked:u,label:Object(Ot.localize)("Save as collection"),classNameLabel:"saveload-type__checkbox-text"}))})),o.a.createElement("div",{className:"saveload-type__checkbox-description"},Object(Ot.localize)("This option allows you to save your strategy as a collection of individual blocks which you can add to other strategies."))):o.a.createElement("input",{type:"file",id:"files",accept:".xml",style:{display:"none"},onChange:n})),o.a.createElement("div",{className:"modal__footer"},o.a.createElement(mc.a,{type:"button",className:"modal__footer--button",text:Object(Ot.localize)("Cancel"),onClick:function(){return l(i)},secondary:!0}),o.a.createElement(mc.a,{className:"modal__footer--button",type:"submit",is_loading:1===e,is_submit_success:2===e,text:Object(Ot.localize)("Continue"),primary:!0})))})))},Fc=function(t){var e=t.icon,n=t.text,r=t.google_drive_connected,i=t.onDriveConnect,a="Google Drive"===n;return o.a.createElement("div",{className:"saveload-type__container"},o.a.createElement("div",{className:"saveload-type__radio"},e&&o.a.cloneElement(e,{className:mn()("saveload-type__icon",e.props.className)}),o.a.createElement("p",{className:mn()("saveload-type__radio-text",{"saveload-type__radio-text--disabled":a&&!r})},Object(Ot.localize)(n))),a&&o.a.createElement("p",{className:"saveload-type__drive-status",onClick:i},Object(Ot.localize)(r?Object(Ot.localize)("Disconnect"):Object(Ot.localize)("Connect"))))};jc.propTypes={button_status:Sc.a.number,handleFileChange:Sc.a.func,is_authorised:Sc.a.bool,is_save_modal:Sc.a.bool,is_saveload_modal_open:Sc.a.bool,onConfirmSave:Sc.a.func,onDriveConnect:Sc.a.func,onLoadClick:Sc.a.func,toggleSaveLoadModal:Sc.a.func};var Uc=xc((function(t){var e=t.saveload,n=t.google_drive;return{button_status:e.button_status,handleFileChange:e.handleFileChange,is_authorised:n.is_authorised,is_save_modal:e.is_save_modal,is_saveload_modal_open:e.is_saveload_modal_open,onConfirmSave:e.onConfirmSave,onDriveConnect:e.onDriveConnect,onLoadClick:e.onLoadClick,toggleSaveLoadModal:e.toggleSaveLoadModal}}))(jc),zc=(n(424),function(t){var e=t.profit>=0;return o.a.createElement("div",{className:mn()("db-contract-card__result",{"db-contract-card__result--won":e,"db-contract-card__result--lost":!e})},o.a.createElement("span",{className:"db-contract-card__result-caption"},e?o.a.createElement(o.a.Fragment,null,Object(Ot.localize)("Won"),o.a.createElement(Rr,{className:"db-contract-card__result-icon"})):o.a.createElement(o.a.Fragment,null,Object(Ot.localize)("Lost"),o.a.createElement(Br,{className:"db-contract-card__result-icon"}))))});zc.propTypes={profit:Sc.a.number};var Vc=zc,Hc=(n(425),function(t){var e=t.className;return o.a.createElement("div",{className:mn()("circular-wrapper",e)},o.a.createElement("span",{className:"static-circle"}),o.a.createElement("span",{className:"dynamic-circle"}))}),Gc=function(t){var e=t.className,n=t.contract_stage,r=t.should_show_overlay,i=t.profit,a=n.index,s=n.text,c=5===a,u=a-(2===a||3===a?2:3),l=["","",""];if(u>=0){u<l.length&&(l[u]="active"),c&&(u+=1);for(var h=0;h<u;h++)l[h]="completed"}return o.a.createElement("div",{className:mn()("animation__container",e,{"animation--running":a>0,"animation--completed":r&&c})},r&&c&&o.a.createElement(Vc,{profit:i}),o.a.createElement("span",{className:"animation__text"},Object(Ot.localize)(s)),o.a.createElement("div",{className:"animation__progress"},o.a.createElement("div",{className:"animation__progress-line"},o.a.createElement("div",{className:"animation__progress-bar animation__progress-"+a})),l.map((function(t,e){return o.a.createElement(Hc,{key:e,className:t})}))))};Gc.propTypes={className:Sc.a.string,contract_stage:Sc.a.object,profit:Sc.a.number,should_show_overlay:Sc.a.bool};var qc=xc((function(t){var e=t.run_panel,n=t.contract_card;return{contract_stage:e.contract_stage,profit:n.profit}}))(Gc);function Wc(){return(Wc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n(426);var Kc=function(t){var e=t.is_search_loading,n=t.onSearch,r=t.onSearchClear,i=t.onSearchBlur,a=t.onSearchKeyUp;return o.a.createElement("div",{className:"toolbar__form"},o.a.createElement(Ec.Formik,{initialValues:{search:""},onSubmit:function(t){return n(t)}},(function(t){var n=t.submitForm,s=t.values.search,c=t.setFieldValue;return o.a.createElement(Ec.Form,null,o.a.createElement(Ec.Field,{name:"search"},(function(t){var u=t.field;return o.a.createElement(vc.a,Wc({},u,{className:"toolbar__form-field",type:"text",name:"search",placeholder:Object(Ot.localize)("Search block..."),onKeyUp:function(){return a(n)},onFocus:n,onBlur:i,trailing_icon:s?e?o.a.createElement("div",{className:"loader"}):o.a.createElement(yi,{className:"toolbar__btn--icon",onClick:function(){return r(c)}}):o.a.createElement(fi,null)}))})))})))},Yc=function(t){var e=t.onBotNameTyped,n=t.file_name;return o.a.createElement("div",{className:"toolbar__form"},o.a.createElement(Ec.Formik,{enableReinitialize:!0,initialValues:{botname:n},onSubmit:function(t){var n=t.botname;return e(n)}},(function(t){var e=t.submitForm,n=t.setFieldValue;return o.a.createElement(Ec.Form,null,o.a.createElement(Ec.Field,{name:"botname"},(function(t){var r=t.field;return o.a.createElement(vc.a,Wc({},r,{className:"toolbar__form-field",type:"text",onKeyUp:function(t){var r=t.target.value;n("botname",r,!1),e()},label:Object(Ot.localize)("Bot name"),placeholder:Object(Ot.localize)("Untitled Bot"),trailing_icon:o.a.createElement(di,null)}))})))})))},Jc=function(t){var e=t.is_stop_button_disabled,n=t.is_stop_button_visible,r=t.onResetClick,i=t.onUndoClick,a=t.onRedoClick,s=t.onRunClick,c=t.onSortClick,u=t.onZoomInOutClick,l=t.onStopClick,h=t.toggleSaveLoadModal;return o.a.createElement("div",{className:"toolbar__group toolbar__group-btn"},o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Import")},o.a.createElement(mi,{className:"toolbar__icon",onClick:function(){return h(!1)}})),o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Reset")},o.a.createElement(gi,{className:"toolbar__icon",onClick:r})),o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Save")},o.a.createElement(vi,{className:"toolbar__icon",onClick:function(){return h(!0)}})),o.a.createElement("div",{className:"vertical-divider"}),o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Undo")},o.a.createElement(bi,{className:"toolbar__icon",onClick:i}),"️"),o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Redo")},o.a.createElement(_i,{className:"toolbar__icon",onClick:a})),o.a.createElement("div",{className:"vertical-divider"}),n?o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Stop")},o.a.createElement(Ti,{className:mn()("toolbar__icon","toolbar__icon--stop",{"toolbar__icon--disabled":e}),onClick:l})):o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Run")},o.a.createElement(Ei,{className:"toolbar__icon",onClick:s})),o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Sort")},o.a.createElement(Si,{className:"toolbar__icon",onClick:c})),o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Zoom in")},o.a.createElement(ki,{className:"toolbar__icon",onClick:function(){return u(!0)}})),o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("Zoom out")},o.a.createElement(wi,{className:"toolbar__icon",onClick:function(){return u(!1)}})))},Qc=function(t){var e=t.file_name,n=t.is_dialog_open,r=t.is_drawer_open,i=t.is_search_loading,a=t.is_stop_button_disabled,s=t.is_stop_button_visible,c=t.onBotNameTyped,u=t.onOkButtonClick,l=t.onCancelButtonClick,h=t.onRedoClick,p=t.onResetClick,f=t.onRunClick,d=t.onSearch,y=t.onSearchBlur,m=t.onSearchClear,g=t.onSearchKeyUp,v=t.onSortClick,b=t.onStopClick,_=t.onToolboxToggle,E=t.onUndoClick,T=t.onZoomInOutClick,S=t.toggleSaveLoadModal;return o.a.createElement("div",{className:"toolbar"},o.a.createElement("div",{className:"toolbar__section"},o.a.createElement(_c.a,{alignment:"bottom",classNameBubble:"toolbar__bubble",message:Object(Ot.localize)("Click here to start building your DBot.")},o.a.createElement(mc.a,{id:"start",className:"toolbar__btn--icon toolbar__btn--start",has_effect:!0,onClick:_,icon:o.a.createElement(pi,null),green:!0},Object(Ot.localize)("Get started"))),o.a.createElement(Kc,{is_search_loading:i,onSearch:d,onSearchClear:m,onSearchBlur:y,onSearchKeyUp:g}),o.a.createElement(Yc,{file_name:e,onBotNameTyped:c}),o.a.createElement(Jc,{is_stop_button_disabled:a,is_stop_button_visible:s,onRedoClick:h,onResetClick:p,onRunClick:f,onSortClick:v,onStopClick:b,onUndoClick:E,onZoomInOutClick:T,toggleSaveLoadModal:S})),o.a.createElement("div",{className:"toolbar__section"},o.a.createElement(qc,{className:mn()("toolbar__animation",{"animation--hidden":r}),should_show_overlay:!0})),o.a.createElement(Uc,null),n&&o.a.createElement(Oc,{title:Object(Ot.localize)("Are you sure?"),is_open:n,onOkButtonClick:u,onCancelButtonClick:l},Object(Ot.localize)("Any unsaved changes will be lost.")))};Qc.propTypes={file_name:Sc.a.string,is_dialog_open:Sc.a.bool,is_drawer_open:Sc.a.bool,is_search_loading:Sc.a.bool,is_stop_button_disabled:Sc.a.bool,is_stop_button_visible:Sc.a.bool,onBotNameTyped:Sc.a.func,onCancelButtonClick:Sc.a.func,onGoogleDriveClick:Sc.a.func,onOkButtonClick:Sc.a.func,onRedoClick:Sc.a.func,onResetClick:Sc.a.func,onRunClick:Sc.a.func,onSearch:Sc.a.func,onSearchBlur:Sc.a.func,onSearchClear:Sc.a.func,onSearchKeyUp:Sc.a.func,onSortClick:Sc.a.func,onStopClick:Sc.a.func,onToolboxToggle:Sc.a.func,onUndoClick:Sc.a.func,onZoomInOutClick:Sc.a.func,toggleSaveLoadModal:Sc.a.func};var Xc=xc((function(t){var e=t.run_panel,n=t.saveload,r=t.toolbar;return{file_name:r.file_name,is_dialog_open:r.is_dialog_open,is_drawer_open:e.is_drawer_open,is_search_loading:r.is_search_loading,is_stop_button_disabled:e.is_stop_button_disabled,is_stop_button_visible:e.is_stop_button_visible,onBotNameTyped:r.onBotNameTyped,onCancelButtonClick:r.onResetCancelButtonClick,onGoogleDriveClick:r.onGoogleDriveClick,onOkButtonClick:r.onResetOkButtonClick,onRedoClick:r.onRedoClick,onResetClick:r.onResetClick,onRunClick:r.onRunClick,onSearch:r.onSearch,onSearchBlur:r.onSearchBlur,onSearchClear:r.onSearchClear,onSearchKeyUp:r.onSearchKeyUp,onSortClick:r.onSortClick,onStopClick:r.onStopClick,onToolboxToggle:r.onToolboxToggle,onUndoClick:r.onUndoClick,onZoomInOutClick:r.onZoomInOutClick,toggleSaveLoadModal:n.toggleSaveLoadModal}}))(Qc),Zc=n(211),$c=n.n(Zc),tu=(n(427),n(103)),eu=n.n(tu),nu=(n(200),n(104)),ru=n.n(nu),iu=(n(201),n(428),function(t){var e,n,r=t.message;if("string"!=typeof r)return r;var i=["Bought","Sold","Profit amount","Loss amount"],a=r.split(":");if(a.length<2)return r;var s,c,u=a[0],l=a.slice(1).join(":");switch(u){case i[0]:s="blue";break;case i[1]:s="red";break;case i[2]:c="green";break;case i[3]:c="red";break;default:s=c=void 0}return o.a.createElement("p",null,o.a.createElement("span",{className:mn()((e={},e["journal__table--bold journal__table--"+s]=s,e))},u),o.a.createElement("span",null,":"),o.a.createElement("span",{className:mn()((n={},n["journal__table--bold journal__table--"+c]=c,n))},l))}),ou=function(t){var e=t.messages;return o.a.createElement(ru.a,{className:"journal",autoHide:!0,style:{height:"calc(100vh - 324px)"}},o.a.createElement("table",{className:"journal__table"},o.a.createElement("thead",{className:"journal__table--header"},o.a.createElement("tr",null,o.a.createElement("th",{className:"journal__table--th"},Object(Ot.localize)("Date")),o.a.createElement("th",{className:"journal__table--th"},Object(Ot.localize)("Message")))),o.a.createElement("tbody",{className:"journal__table--body"},e.map((function(t,e){var n=t.date,r=t.time,i=t.message,a=t.message_type,s=function(t){var e=t.date,n=t.time;return o.a.createElement("div",null,o.a.createElement("span",{className:"journal__table--date"}," ",e," "),o.a.createElement("span",{className:"journal__table--time"}," ",n," "))}({date:n,time:r}),c=function(t){var e=t.message;return o.a.createElement(iu,{message:e})}({message:i});return o.a.createElement("tr",{className:"journal__table--tr",key:t.date+"-"+e},o.a.createElement("td",{className:"journal__table--td"},s),o.a.createElement("td",{className:mn()("journal__table--td",{"journal__table--red":a===We.ERROR})},c))})))))};ou.propTypes={messages:Sc.a.array};var au=xc((function(t){return{messages:t.journal.messages}}))(ou),su=n(33),cu=n.n(su),uu=(n(142),n(105)),lu=n.n(uu),hu=(n(202),function(){return(hu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)}),pu=function(){return Math.random().toString(36).substring(2)},fu=function(t){var e=t.rtl,n=t.speed,r=t.interval,o=t.style,a=t.width,s=t.height,c=t.baseUrl,u=t.gradientRatio,l=t.animate,h=t.ariaLabel,p=t.children,f=t.className,d=t.uniquekey,y=t.primaryColor,m=t.primaryOpacity,g=t.secondaryColor,v=t.secondaryOpacity,b=t.preserveAspectRatio,_=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}(t,["rtl","speed","interval","style","width","height","baseUrl","gradientRatio","animate","ariaLabel","children","className","uniquekey","primaryColor","primaryOpacity","secondaryColor","secondaryOpacity","preserveAspectRatio"]),E=d?d+"-idClip":pu(),T=d?d+"-idGradient":pu(),S=e?{transform:"scaleX(-1)"}:{},k="0; "+r+"; 1",w=n+"s";return Object(i.createElement)("svg",hu({role:"img",style:hu({},o,S),className:f,"aria-label":h||null,viewBox:"0 0 "+a+" "+s,preserveAspectRatio:b},_),h?Object(i.createElement)("title",null,h):null,Object(i.createElement)("rect",{x:"0",y:"0",width:a,height:s,clipPath:"url("+c+"#"+E+")",style:{fill:"url("+c+"#"+T+")"}}),Object(i.createElement)("defs",null,Object(i.createElement)("clipPath",{id:E},p),Object(i.createElement)("linearGradient",{id:T},Object(i.createElement)("stop",{offset:"0%",stopColor:y,stopOpacity:m},l&&Object(i.createElement)("animate",{attributeName:"offset",values:-u+"; "+-u+"; 1",keyTimes:k,dur:w,repeatCount:"indefinite"})),Object(i.createElement)("stop",{offset:"50%",stopColor:g,stopOpacity:v},l&&Object(i.createElement)("animate",{attributeName:"offset",values:-u/2+"; "+-u/2+"; "+(1+u/2),keyTimes:k,dur:w,repeatCount:"indefinite"})),Object(i.createElement)("stop",{offset:"100%",stopColor:y,stopOpacity:m},l&&Object(i.createElement)("animate",{attributeName:"offset",values:"0; 0; "+(1+u),keyTimes:k,dur:w,repeatCount:"indefinite"})))))},du={animate:!0,ariaLabel:"Loading interface...",baseUrl:"",gradientRatio:2,height:130,interval:.25,preserveAspectRatio:"none",primaryColor:"#f0f0f0",primaryOpacity:1,rtl:!1,secondaryColor:"#e0e0e0",secondaryOpacity:1,speed:2,style:{},width:400},yu=function(t){return Object(i.createElement)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:t.width,height:t.height})},mu=function(t){var e=hu({},du,t);return Object(i.createElement)(fu,hu({},e),t.children||Object(i.createElement)(yu,hu({},e)))},gu=function(){return o.a.createElement(mu,{height:153,width:334,speed:3,primaryColor:"#f4f4f6",secondaryColor:"#eaeaec"},o.a.createElement("rect",{x:"12",y:"15",rx:"0",ry:"0",width:"25",height:"25"}),o.a.createElement("rect",{x:"45",y:"24",rx:"0",ry:"0",width:"70",height:"8"}),o.a.createElement("rect",{x:"154",y:"15",rx:"0",ry:"0",width:"25",height:"25"}),o.a.createElement("rect",{x:"187",y:"24",rx:"0",ry:"0",width:"70",height:"8"}),o.a.createElement("rect",{x:"12",y:"57",rx:"0",ry:"0",width:"308",height:"1"}),o.a.createElement("rect",{x:"40",y:"75",rx:"0",ry:"0",width:"100",height:"8"}),o.a.createElement("rect",{x:"40",y:"90",rx:"0",ry:"0",width:"60",height:"8"}),o.a.createElement("rect",{x:"40",y:"115",rx:"0",ry:"0",width:"100",height:"8"}),o.a.createElement("rect",{x:"40",y:"130",rx:"0",ry:"0",width:"60",height:"8"}),o.a.createElement("rect",{x:"200",y:"75",rx:"0",ry:"0",width:"100",height:"8"}),o.a.createElement("rect",{x:"200",y:"90",rx:"0",ry:"0",width:"60",height:"8"}),o.a.createElement("rect",{x:"200",y:"115",rx:"0",ry:"0",width:"100",height:"8"}),o.a.createElement("rect",{x:"200",y:"130",rx:"0",ry:"0",width:"60",height:"8"}))},vu=function(t){var e=t.trade_type,n=t.className;switch(e.toLowerCase()){case"asiand":return o.a.createElement(Fr,{className:n});case"asianu":return o.a.createElement(Ur,{className:n});case"call_barrier":return o.a.createElement(Vr,{className:n});case"calle":case"call":return o.a.createElement(zr,{className:n});case"callspread":return o.a.createElement(Hr,{className:n});case"putspread":return o.a.createElement(ni,{className:n});case"digitdiff":return o.a.createElement(Gr,{className:n});case"digiteven":return o.a.createElement(qr,{className:n});case"digitmatch":return o.a.createElement(Wr,{className:n});case"digitodd":return o.a.createElement(Kr,{className:n});case"digitover":return o.a.createElement(Yr,{className:n});case"digitunder":return o.a.createElement(Jr,{className:n});case"expirymiss":return o.a.createElement(Qr,{className:n});case"expiryrangee":case"expiryrange":return o.a.createElement(Xr,{className:n});case"notouch":return o.a.createElement(Zr,{className:n});case"onetouch":return o.a.createElement($r,{className:n});case"put_barrier":return o.a.createElement(ei,{className:n});case"pute":case"put":return o.a.createElement(ti,{className:n});case"range":return o.a.createElement(ri,{className:n});case"resetcall":return o.a.createElement(ii,{className:n});case"resetput":return o.a.createElement(oi,{className:n});case"runhigh":return o.a.createElement(ai,{className:n});case"runlow":return o.a.createElement(si,{className:n});case"tickhigh":return o.a.createElement(ci,{className:n});case"ticklow":return o.a.createElement(ui,{className:n});case"upordown":return o.a.createElement(hi,{className:n});default:return o.a.createElement(li,{className:n})}};vu.propTypes={trade_type:Sc.a.string};var bu=vu,_u=(n(429),function(t){var e=t.contract,n=t.profit_movement,r=t.is_contract_completed,i=t.is_contract_loading,a=t.is_contract_losing,s=t.is_contract_inactive,c=t.is_contract_winning,u=t.indicative_movement;return o.a.createElement("div",{className:mn()("db-contract-card",{"db-contract-card--inactive":s,"db-contract-card--is-loading":i,"db-contract-card--is-winning":c,"db-contract-card--is-losing":a,"db-contract-card--completed":r})},i&&o.a.createElement(gu,null),!i&&e&&o.a.createElement(o.a.Fragment,null,r&&o.a.createElement(Vc,{profit:e.profit}),o.a.createElement("div",{className:"db-contract-card__underlying"},o.a.createElement("div",{className:"db-contract-card__underlying-name"},o.a.createElement(lu.a,{market:e.underlying}),o.a.createElement("span",{className:"db-contract-card__underlying-symbol"},e.display_name)),o.a.createElement("div",{className:"db-contract-card__underlying-type"},o.a.createElement("div",{className:"db-contract-card__underlying-type-wrapper"},o.a.createElement("div",{className:"db-contract-card__underlying-type-icon"},o.a.createElement(bu,{trade_type:e.contract_type}))),o.a.createElement("span",{className:"db-contract-card__underlying-type-label"},function(t){var e=It.opposites,n=Object(Ot.localize)("Unknown");return Object.keys(e).forEach((function(r){e[r].forEach((function(e){var i=Object.entries(e)[0];if(i[0]===t.contract_type){if(["CALL","PUT"].includes(i[0])){var o=t.shortcode.split("_").slice(-2)[0],a=/^S0P$/.test(o);if(r!==(a?"CALLPUT":"HIGHERLOWER"))return}n=i[1]}}))})),n}(e)))),o.a.createElement("div",{className:"db-contract-card__separator"}),o.a.createElement("div",{className:"db-contract-card__stats"},o.a.createElement("div",{className:"db-contract-card__grid"},o.a.createElement("div",{className:"db-contract-card__profit-loss db-contract-card__profit-loss-label"},Vt(e)?Object(Ot.localize)("Profit/Loss:"):Object(Ot.localize)("Potential profit/loss:")),o.a.createElement("div",{className:"db-contract-card__indicative-price db-contract-card__indicative-price-label"},Vt(e)?Object(Ot.localize)("Payout:"):Object(Ot.localize)("Indicative price:")),o.a.createElement("div",{className:mn()("db-contract-card__profit-loss","db-contract-card__profit-loss-amount",{"db-contract-card__profit-loss--is-crypto":Ui.a.isCryptocurrency(e.currency),"db-contract-card__profit-loss--negative":e.profit<0,"db-contract-card__profit-loss--positive":e.profit>0})},o.a.createElement(cu.a,{amount:Math.abs(e.profit),currency:e.currency}),o.a.createElement("div",{className:"db-contract-card__indicative-movement"},"profit"===n&&o.a.createElement(Lr,null)||"loss"===n&&o.a.createElement(jr,null)||o.a.createElement(o.a.Fragment,null))),o.a.createElement("div",{className:"db-contract-card__indicative-price db-contract-card__indicative-price-amount"},o.a.createElement(cu.a,{amount:e.sell_price||Ht(e),currency:e.currency}),o.a.createElement("div",{className:"db-contract-card__indicative-movement"},"profit"===u&&o.a.createElement(Lr,null)||"loss"===u&&o.a.createElement(jr,null)||o.a.createElement(o.a.Fragment,null)))),o.a.createElement("div",{className:"db-contract-card__grid"},o.a.createElement("div",{className:"db-contract-card__purchase-price db-contract-card__purchase-price-label"},Object(Ot.localize)("Purchase price:")),o.a.createElement("div",{className:"db-contract-card__potential-payout db-contract-card__potential-payout-label"},Object(Ot.localize)("Potential payout:")),o.a.createElement("div",{className:"db-contract-card__purchase-price db-contract-card__purchase-price-amount"},o.a.createElement(cu.a,{amount:e.buy_price,currency:e.currency})),o.a.createElement("div",{className:"db-contract-card__potential-payout db-contract-card__potential-payout-amount"},e.payout?o.a.createElement(cu.a,{amount:e.payout,currency:e.currency}):o.a.createElement("strong",null,"-"))))),!i&&!e&&o.a.createElement(o.a.Fragment,null,Object(Ot.localize)("Build a bot from the start menu then hit the run button to run the bot.")))});_u.propTypes={contract:Sc.a.object,indicative_moment:Sc.a.string,is_contract_completed:Sc.a.bool,is_contract_inactive:Sc.a.bool,is_contract_loading:Sc.a.bool,is_contract_losing:Sc.a.bool,is_contract_winning:Sc.a.bool,profit_movement:Sc.a.string};var Eu=xc((function(t){var e=t.contract_card;return{contract:e.contract,is_contract_completed:e.is_contract_completed,is_contract_loading:e.is_contract_loading,is_contract_losing:e.is_contract_losing,is_contract_inactive:e.is_contract_inactive,is_contract_winning:e.is_contract_winning,indicative_movement:e.indicative_movement,profit_movement:e.profit_movement}}))(_u),Tu=(n(430),function(t){return o.a.createElement("div",{className:"summary__tile"},o.a.createElement("div",{className:"summary__tile-title"},t.title),o.a.createElement("div",{className:mn()("summary__tile-content",t.contentClassName)},t.content))}),Su=function(t){var e=t.total_stake,n=t.total_payout,r=t.number_of_runs,i=t.lost_contracts,a=t.won_contracts,s=t.total_profit,c=t.currency;return o.a.createElement("div",{className:"summary"},o.a.createElement(Eu,null),o.a.createElement("div",{className:"summary__tiles"},o.a.createElement(Tu,{title:Object(Ot.localize)("Total stake"),content:cu()({amount:e,currency:c})}),o.a.createElement(Tu,{title:Object(Ot.localize)("Total payout"),content:cu()({amount:n,currency:c})}),o.a.createElement(Tu,{title:Object(Ot.localize)("No. of runs"),content:r}),o.a.createElement(Tu,{title:Object(Ot.localize)("Loss contracts"),content:i}),o.a.createElement(Tu,{title:Object(Ot.localize)("Win contracts"),content:a}),o.a.createElement(Tu,{title:Object(Ot.localize)("Profit/Loss"),content:cu()({amount:s,currency:c,has_sign:!0}),contentClassName:mn()("summary__tile-content","summary__amount",{"summary__amount--positive":s>0,"summary__amount--negative":s<0})})))};Su.propTypes={contract:Sc.a.object,currency:Sc.a.string,lost_contracts:Sc.a.number,number_of_runs:Sc.a.number,total_payout:Sc.a.number,total_profit:Sc.a.number,total_stake:Sc.a.number,won_contracts:Sc.a.number};var ku=xc((function(t){var e=t.core,n=t.summary;return{contract:n.summary.contract,currency:e.client.currency,lost_contracts:n.summary.lost_contracts,number_of_runs:n.summary.number_of_runs,total_payout:n.summary.total_payout,total_profit:n.summary.total_profit,total_stake:n.summary.total_stake,won_contracts:n.summary.won_contracts}}))(Su),wu=(n(431),function(t){var e=t.contract;return o.a.createElement("table",{className:"transactions__item"},o.a.createElement("tbody",null,o.a.createElement("tr",{className:"transactions__row"},o.a.createElement("td",{className:"transactions__middle transactions__col"},o.a.createElement(_c.a,{className:"transactions__inline transactions__top",alignment:"left",message:e.contract_type},o.a.createElement(bu,{trade_type:e.contract_type})),o.a.createElement("div",{className:"transactions__inline transactions__middle"},o.a.createElement("div",{className:"transactions__margin-bottom"},o.a.createElement(_c.a,{className:"transactions__inline transactions__middle",alignment:"left",message:Object(Ot.localize)("Reference ID")},o.a.createElement(Ni,{className:"transactions__middle"})),o.a.createElement("div",{className:"transactions__inline transactions__middle"},e.refrence_id)),o.a.createElement("div",null,o.a.createElement(_c.a,{className:"transactions__inline transactions__middle",alignment:"left",message:Object(Ot.localize)("Buy price")},o.a.createElement(Bi,{className:"transactions__middle"})),o.a.createElement(cu.a,{amount:e.buy_price,currency:e.currency})))),o.a.createElement("td",{className:"transactions__middle transactions__col"},o.a.createElement("div",{className:"transactions__margin-bottom"},o.a.createElement(_c.a,{className:"transactions__inline transactions__middle",alignment:"left",message:Object(Ot.localize)("Entry spot")},o.a.createElement(Ci,{className:"transactions__middle"})),o.a.createElement("div",{className:"transactions__inline transactions__middle"},e.entry_spot)),o.a.createElement("div",null,o.a.createElement(_c.a,{className:"transactions__inline transactions__middle",alignment:"left",message:Object(Ot.localize)("Exit spot")},o.a.createElement(Ii,{className:"transactions__middle"})),o.a.createElement("div",{className:"transactions__inline transactions__middle"},e.exit_spot))),o.a.createElement("td",{className:"transactions__col"},e.profit?o.a.createElement("div",{className:mn()("transactions__inline","transactions__middle",{transactions__green:e.profit>0,transactions__red:e.profit<0})},o.a.createElement(cu.a,{amount:Math.abs(e.profit),currency:e.currency})):null),o.a.createElement("td",{className:"transactions__col"},e.is_completed?o.a.createElement(_c.a,{className:"transactions__inline transactions__middle",alignment:"left",message:Object(Ot.localize)("Completed")},o.a.createElement(Di,{className:"transactions__middle"})):o.a.createElement(_c.a,{className:"transactions__inline transactions__middle",alignment:"left",message:Object(Ot.localize)("Pending")},o.a.createElement(Ri,{className:"transactions__middle"}))))))}),Au=function(t){var e=t.contracts;return o.a.createElement("div",{className:"transactions"},o.a.createElement("div",{className:"transactions__header"},o.a.createElement("span",{className:"transactions__header--col"},Object(Ot.localize)("Trade information")),o.a.createElement("span",{className:"transactions__header--col"},Object(Ot.localize)("Entry/Exit spot")),o.a.createElement("span",{className:"transactions__header--col"},Object(Ot.localize)("Profit/Loss"))),o.a.createElement("div",{className:"transactions__content"},o.a.createElement(ru.a,{autoHide:!0,style:{height:"calc(100vh - 365px)"}},e.map((function(t,e){return o.a.createElement(wu,{key:""+t.refrence_id+e,contract:t})})))))};Au.propTypes={contracts:Tc.PropTypes.array};var Ou=xc((function(t){return{contracts:t.transactions.contracts}}))(Au);n(432);var Cu=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.componentWillUnmount=function(){this.props.onUnmount()},i.render=function(){var t=this.props,e=function(t){var e=t.active_index,n=t.setActiveTabIndex;return o.a.createElement(eu.a,{active_index:e,onClickTabItem:n},o.a.createElement("div",{label:Object(Ot.localize)("Summary")},o.a.createElement(ku,null)),o.a.createElement("div",{label:Object(Ot.localize)("Transactions")},o.a.createElement(Ou,null)),o.a.createElement("div",{label:Object(Ot.localize)("Journal")},o.a.createElement(au,null)))}({active_index:t.active_index,setActiveTabIndex:t.setActiveTabIndex}),n=function(t){var e=t.active_index,n=t.dialog_options,r=t.is_clear_stat_disabled,i=t.is_dialog_open,a=t.is_stop_button_disabled,s=t.is_stop_button_visible,c=t.onCancelButtonClick,u=t.onClearStatClick,l=t.onOkButtonClick,h=t.onRunButtonClick,p=t.onStopButtonClick;return o.a.createElement("div",{className:"run-panel__footer"},o.a.createElement(qc,{className:"run-panel__animation",should_show_overlay:e>0}),o.a.createElement("div",{className:"run-panel__buttons"},o.a.createElement(mc.a,{is_disabled:r,text:Object(Ot.localize)("Clear stat"),onClick:u,has_effect:!0,secondary:!0}),s?o.a.createElement(mc.a,{is_disabled:a,text:Object(Ot.localize)("Stop bot"),icon:o.a.createElement(Pr,{className:"run-panel__button--icon"}),onClick:p,has_effect:!0,primary:!0}):o.a.createElement(mc.a,{text:Object(Ot.localize)("Run bot"),icon:o.a.createElement(Dr,{className:"run-panel__button--icon"}),onClick:h,has_effect:!0,green:!0}),o.a.createElement(_c.a,{className:"run-panel__info",classNameBubble:"run-panel__info--bubble",alignment:"top",message:Object(Ot.localize)("Stopping the bot will prevent further trades. Any ongoing trades will be completed \n                     by our system. Please be aware that some completed transactions may not be displayed\n                     in the transaction table if the bot is stopped while placing trades. You may refer to\n                     the statement page for details of all completed transactions.")},o.a.createElement(Nr,{className:"run-panel__icon-info"}))),i&&o.a.createElement(Oc,{title:n.title,is_open:i,onOkButtonClick:l,onCancelButtonClick:c},n.message))}(this.props);return o.a.createElement($c.a,{className:"run-panel",is_open:this.props.is_drawer_open,toggleDrawer:this.props.toggleDrawer,footer:n},e)},r}(o.a.PureComponent);Cu.propTypes={active_index:Sc.a.number,dialog_options:Sc.a.object,is_clear_stat_disabled:Sc.a.bool,is_dialog_open:Sc.a.bool,is_drawer_open:Sc.a.bool,is_stop_button_disabled:Sc.a.bool,is_stop_button_visible:Sc.a.bool,onCancelButtonClick:Sc.a.func,onClearStatClick:Sc.a.func,onOkButtonClick:Sc.a.func,onRunButtonClick:Sc.a.func,onStopButtonClick:Sc.a.func,onUnmount:Sc.a.func,setActiveTabIndex:Sc.a.func,toggleDrawer:Sc.a.func};var Iu=xc((function(t){var e=t.run_panel;return{active_index:e.active_index,dialog_options:e.dialog_options,is_clear_stat_disabled:e.is_clear_stat_disabled,is_dialog_open:e.is_dialog_open,is_drawer_open:e.is_drawer_open,is_stop_button_disabled:e.is_stop_button_disabled,is_stop_button_visible:e.is_stop_button_visible,onCancelButtonClick:e.onCancelButtonClick,onClearStatClick:e.onClearStatClick,onOkButtonClick:e.onOkButtonClick,onRunButtonClick:e.onRunButtonClick,onStopButtonClick:e.onStopButtonClick,onUnmount:e.onUnmount,setActiveTabIndex:e.setActiveTabIndex,toggleDrawer:e.toggleDrawer}}))(Cu),Nu=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.render=function(){var t=this;return o.a.createElement("div",{ref:function(e){return t.el_block_workspace=e},className:"flyout__block-workspace"})},i.componentDidMount=function(){var t=this.props,e=t.initBlockWorkspace,n=t.block_node,r=t.should_center_block;e(this.el_block_workspace,n,r)},r}(o.a.PureComponent);Nu.propTypes={block_node:Sc.a.any,initBlockWorkspace:Sc.a.func,should_center_block:Sc.a.bool};var Ru=xc((function(t){return{initBlockWorkspace:t.flyout.initBlockWorkspace}}))(Nu),Bu=function(t){var e=t.onInfoClick,n=t.block_node,r=n.getAttribute("type"),i=Blockly.Blocks[r].meta(),a=i.display_name,s=i.description;return o.a.createElement("div",{className:"flyout__item"},o.a.createElement("div",{className:"flyout__item-header"},o.a.createElement("div",{className:"flyout__item-label"},a),o.a.createElement("div",{className:"flyout__item-buttons"},o.a.createElement(mc.a,{className:"flyout__button-add flyout__button-add--hide",has_effect:!0,onClick:function(){return Blockly.derivWorkspace.addBlockNode(n)},primary:!0,text:Object(Ot.localize)("Add"),type:"button"}))),o.a.createElement("div",{className:"flyout__item-description"},s,e&&o.a.createElement("a",{className:"flyout__item-info",onClick:e},Object(Ot.localize)("Learn more"))),o.a.createElement(Ru,{should_center_block:!0,block_node:n}))};Bu.propTypes={block_nodes:Tc.PropTypes.array,onInfoClick:Tc.PropTypes.func};var Du=Bu,Pu=function(t){return o.a.createElement("div",{className:"flyout__item"},o.a.createElement("iframe",{className:"flyout__video",src:t.url,frameBorder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%"}))};Pu.propTypes={url:Tc.PropTypes.string};var xu=Pu,Mu=function(t){var e=t.text;return o.a.createElement("p",{className:"flyout__item"},Object(Ot.localize)(e))};Mu.propTypes={text:Tc.PropTypes.string};var Lu=Mu,ju=function(t){var e=t.width,n=t.url,r={width:e};return o.a.createElement("div",{className:"flyout__item"},o.a.createElement("img",{src:n,className:"flyout__image",style:r}))};ju.propTypes={url:Tc.PropTypes.string};var Fu=ju,Uu=It.help,zu=Uu.TEXT,Vu=Uu.IMAGE,Hu=Uu.BLOCK,Gu={procedures_ifreturn:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/if-return.png"}],math_arithmetic:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu}],math_single:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu}],math_constrain:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:Vu,width:"60%",url:n.p+"media/constrain.png"}],text_print:[{type:zu},{type:Hu},{type:zu}],text_prompt_ext:[{type:zu},{type:Hu},{type:zu}],tick_analysis:[{type:zu},{type:Hu}],read_details:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu}],last_digit:[{type:zu},{type:Hu}],read_ohlc:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/in_candle_list_read.png"}],read_ohlc_obj:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/read_candle_value.png"}],check_direction:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu}],get_ohlc:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/get_candle.png"},{type:zu}],ohlc:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/candle_list_1.png"}],ohlc_values:[{type:zu},{type:Hu},{type:zu},{type:Vu,url:n.p+"media/candle_list.png"}],is_candle_black:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/is_candle_black.jpeg"},{type:zu},{type:Vu,width:"100%",url:n.p+"media/is_candle_black_1.jpeg"},{type:zu}],ohlc_values_in_list:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/candle_list_1.png"}],variables_gets:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu}],variables_set:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu}],epoch:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/epoch.png"}],todatetime:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/todatetime.png"},{type:zu}],totimestamp:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/totimestamp.png"},{type:zu}],notify_telegram:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:Vu,url:n.p+"media/notify_telegram.png"}],balance:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu}],sma_statement:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"60%",url:n.p+"media/sma_formula.png"},{type:zu},{type:zu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/sma_chart_1.png"},{type:zu},{type:Vu,width:"100%",url:n.p+"media/sma_chart_2.png"},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/sma_block_example.png"},{type:zu},{type:zu},{type:Vu,width:"70%",url:n.p+"media/sma_block_example_1.png"},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/sma_array.png"},{type:zu},{type:zu},{type:zu},{type:Vu,width:"100%",url:n.p+"media/sma_array_explanation.jpeg"}],trade_definition:[{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:zu},{type:Hu}],trade_definition_tradeoptions:[{type:zu},{type:Hu}],before_purchase:[{type:zu},{type:Hu},{type:zu}],during_purchase:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"70%",url:n.p+"media/sell_available.png"}],sell_at_market:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"70%",url:n.p+"media/sell_available.png"}],after_purchase:[{type:zu},{type:Hu},{type:zu}],trade_again:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"70%",url:n.p+"media/trade_again.png"}],contract_check_result:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:Vu,width:"70%",url:n.p+"media/check_result.png"}],sell_price:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"70%",url:n.p+"media/sell_pl.png"}],controls_if:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"70%",url:n.p+"media/controls_if.png"},{type:zu},{type:Vu,width:"40%",url:n.p+"media/compare_logic.png"}],logic_operation:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:Vu,width:"40%",url:n.p+"media/logic.png"}],controls_whileUntil:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:Vu,width:"80%",url:n.p+"media/repeat_while.png"},{type:zu},{type:Vu,width:"80%",url:n.p+"media/repeat_until.png"}],controls_for:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"80%",url:n.p+"media/controls_for.png"},{type:zu},{type:zu}],controls_forEach:[{type:zu},{type:Hu},{type:zu},{type:Vu,width:"80%",url:n.p+"media/controls_forEach.png"},{type:zu},{type:zu},{type:zu}],controls_flow_statements:[{type:zu},{type:Hu},{type:zu},{type:zu},{type:Vu,width:"80%",url:n.p+"media/break_out.png"},{type:zu},{type:Vu,width:"80%",url:n.p+"media/continue.png"}]},qu=function(t){var e=t.block_node,n=t.block_type,r=t.help_string,i=t.is_search_flyout,a=t.onBackClick,s=t.onSequenceClick,c=t.title,u=r&&Gu[n],l=0;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"flyout__help-header"},o.a.createElement("button",{className:"btn flyout__button-back",onClick:a},o.a.createElement(Mr,null)),o.a.createElement("span",{className:"flyout__help-title"},c),o.a.createElement("div",{className:"flyout__item-buttons"},o.a.createElement(mc.a,{className:"flyout__button-add",has_effect:!0,onClick:function(){return Blockly.derivWorkspace.addBlockNode(e)},primary:!0,text:Object(Ot.localize)("Add"),type:"button"}))),o.a.createElement("div",{className:"flyout__help-content"},u&&u.map((function(t,i){var a=t.type,s=t.width,c=t.url,u=r.text;switch(a){case It.help.TEXT:return o.a.createElement(Lu,{key:n+"_"+i,text:u[l++]});case It.help.VIDEO:return o.a.createElement(xu,{key:n+"_"+i,url:c});case It.help.IMAGE:return o.a.createElement(Fu,{key:n+"_"+i,width:s,url:c});case It.help.BLOCK:return o.a.createElement(Ru,{key:n+"_"+i,should_center_block:!0,block_node:e});default:return null}}))),!i&&o.a.createElement("div",{className:"flyout__help-footer"},o.a.createElement(mc.a,{className:"flyout__button-previous",has_effect:!0,onClick:function(){return s(!1)},text:Object(Ot.localize)("Previous"),type:"button"}),o.a.createElement(mc.a,{className:"flyout__button-next",has_effect:!0,onClick:function(){return s(!1)},text:Object(Ot.localize)("Next"),type:"button"})))};qu.propTypes={block_node:Sc.a.object,block_type:Sc.a.string,help_string:Sc.a.object,is_search_flyout:Sc.a.bool,onBackClick:Sc.a.func,onSequenceClick:Sc.a.func,title:Sc.a.string};var Wu=xc((function(t){var e=t.flyout,n=t.flyout_help;return{block_node:n.block_node,block_type:n.block_type,help_string:n.help_string,is_search_flyout:e.is_search_flyout,onBackClick:n.onBackClick,onSequenceClick:n.onSequenceClick,title:n.title}}))(qu);n(433);var Ku=function(t){var e,n;function r(){return t.apply(this,arguments)||this}n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,e.__proto__=n;var i=r.prototype;return i.componentDidMount=function(){this.props.onMount()},i.componentWillUnmount=function(){this.props.onUnmount()},i.render=function(){var t=this.props,e=t.is_help_content,n=t.is_search_flyout,r=t.flyout_content,i=t.flyout_width,a=t.is_visible,s=t.search_term,c=t.setHelpContent,u=Object.keys(r).length,l=0===u;return o.a.createElement("div",{className:mn()("flyout",{hidden:!a,flyout__search:n,flyout__help:e,flyout__normal:!e&&!n}),style:{width:i+"px"}},n&&!e&&o.a.createElement("div",{className:"flyout__search-header"},o.a.createElement("span",{className:"flyout__search-header-text"},Object(Ot.localize)('Results for "'+s+'"')),o.a.createElement("span",{className:mn()("flyout__search-header-text","flyout__search-header-results")},u+" "+(u>1?Object(Ot.localize)("results"):Object(Ot.localize)("result")))),e?o.a.createElement(Wu,null):o.a.createElement("div",{className:mn()("flyout__content",{"flyout__normal-content":!n})},l?o.a.createElement("div",{className:"flyout__search-empty"},o.a.createElement("h2",null,Object(Ot.localize)("No results found"))):r.map((function(t,e){switch(t.tagName.toUpperCase()){case Blockly.Xml.NODE_BLOCK:var n=t.getAttribute("type");return o.a.createElement(Du,{key:""+t.getAttribute("type")+Blockly.utils.genUid(),id:"flyout__item-workspace--"+e,block_node:t,onInfoClick:Gu[n]&&function(){return c(t)}});case Blockly.Xml.NODE_LABEL:return o.a.createElement("div",{key:""+t.getAttribute("text")+e,className:"flyout__item-label"},t.getAttribute("text"));case Blockly.Xml.NODE_BUTTON:var r=t.getAttribute("callbackKey"),i=Blockly.derivWorkspace.getButtonCallback(r)||function(){};return o.a.createElement("button",{key:""+r+e,className:mn()("btn","btn-effect","btn--primary","flyout__button-new"),onClick:function(t){var e=t;e.targetWorkspace_=Blockly.derivWorkspace,e.getTargetWorkspace=function(){return e.targetWorkspace_},i(e)}},t.getAttribute("text"));default:return null}}))))},r}(o.a.PureComponent);Ku.propTypes={flyout_content:Sc.a.any,flyout_width:Sc.a.number,is_help_content:Sc.a.bool,is_search_flyout:Sc.a.bool,is_visible:Sc.a.bool,onMount:Sc.a.func,onUnmount:Sc.a.func,search_term:Sc.a.string,setHelpContent:Sc.a.func};var Yu=xc((function(t){var e=t.flyout,n=t.flyout_help;return{flyout_content:e.flyout_content,flyout_width:e.flyout_width,is_help_content:e.is_help_content,is_search_flyout:e.is_search_flyout,is_visible:e.is_visible,onMount:e.onMount,onUnmount:e.onUnmount,search_term:e.search_term,setHelpContent:n.setHelpContent}}))(Ku),Ju=(n(434),function(t){var e=t.is_drawer_open,n=t.Notifications,r=t.notifications_length;return o.a.createElement(o.a.Fragment,null,r>0&&o.a.createElement("div",{className:mn()("notifications-container",{"notifications-container--is-panel-open":e})},o.a.createElement(n,null)))});Ju.propTypes={is_drawer_open:Tc.PropTypes.bool,notifications_length:Tc.PropTypes.number};var Qu=xc((function(t){var e=t.core;return{is_drawer_open:t.run_panel.is_drawer_open,Notifications:e.ui.notification_messages_ui,notifications_length:e.ui.notification_messages.length}}))(Ju),Xu=(n(435),n(436),function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{id:"scratch_div"},o.a.createElement(Qu,null),o.a.createElement(Yu,null)))}),Zu=n(106),$u=n.n(Zu);function tl(){return(tl=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}n(437),n(438);var el=function(t){var e=t.symbol;return o.a.createElement("div",{key:e.value,className:"quick-strategy__option"},o.a.createElement(lu.a,{market:e.value}),o.a.createElement("span",{className:"quick-strategy__symbol"},e.name))},nl=function(t){var e=t.type;return o.a.createElement("div",{key:e.value,className:"quick-strategy__option"},o.a.createElement(bu,{trade_type:e.icon[0],className:"quick-strategy__icon"}),o.a.createElement(bu,{trade_type:e.icon[1],className:"quick-strategy__icon"}),o.a.createElement("span",{className:"quick-strategy__symbol"},e.name))},rl=function(t){var e=t.active_index,n=t.asset_dropdown_options,r=t.createStrategy,i=t.duration_dropdown_options,a=t.getSizeDesc,s=t.getSizeText,c=t.initial_values,u=t.onChangeDurationDropdown,l=t.onChangeMarketDropdown,h=t.onChangeTradeTypeDropdown,p=t.trade_type_dropdown_options,f=t.validateQuickStrategy;return o.a.createElement("div",{className:"quick-strategy__form"},o.a.createElement(Ec.Formik,{initialValues:c,validate:f,onSubmit:r},(function(t){var r=t.errors,c=t.isValid,f=t.isSubmitting,d=t.values,y=d.symbol,m=d.trade_type,g=d.duration_type,v=t.setFieldValue,b=t.touched;return o.a.createElement(Ec.Form,null,o.a.createElement("div",{className:"quick-strategy__form-row"},o.a.createElement($u.a,{placeholder:Object(Ot.localize)("Assets"),is_align_text_left:!0,list:n,name:"symbol",value:y,onChange:function(t){return l(v,t.target.value)}})),o.a.createElement("div",{className:"quick-strategy__form-row"},o.a.createElement($u.a,{placeholder:Object(Ot.localize)("Trade type"),is_align_text_left:!0,list:p,name:"trade_type",value:m,onChange:function(t){return h(v,y,t.target.value)}})),o.a.createElement("div",{className:"quick-strategy__form-row"},o.a.createElement($u.a,{className:"quick-strategy__duration-dropdown",placeholder:Object(Ot.localize)("Duration type"),is_align_text_left:!0,list:i,name:"duration_type",value:g,onChange:function(t){return u(v,t.target.value)}}),o.a.createElement(Ec.Field,{name:"duration"},(function(t){var e=t.field;return o.a.createElement(vc.a,tl({},e,{className:"quick-strategy__input",type:"text",error:b.duration&&r.duration,label:Object(Ot.localize)("Duration"),trailing_icon:o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("The trade length of your purchased contract.")},o.a.createElement(Nr,null))}))}))),o.a.createElement("div",{className:"quick-strategy__form-row"},o.a.createElement(Ec.Field,{name:"stake"},(function(t){var e=t.field;return o.a.createElement(vc.a,tl({},e,{className:"quick-strategy__input",type:"text",error:b.stake&&r.stake,label:Object(Ot.localize)("Initial stake"),placeholder:"10",trailing_icon:o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("The amount that you pay to enter a trade.")},o.a.createElement(Nr,null))}))})),o.a.createElement(Ec.Field,{name:"loss"},(function(t){var e=t.field;return o.a.createElement(vc.a,tl({},e,{className:"quick-strategy__input",type:"text",error:b.loss&&r.loss,label:Object(Ot.localize)("Loss Threshold"),placeholder:"5000",trailing_icon:o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("The bot will stop trading if your total loss exceeds this amount.")},o.a.createElement(Nr,null))}))}))),o.a.createElement("div",{className:"quick-strategy__form-row"},o.a.createElement(Ec.Field,{name:"size"},(function(t){var n=t.field;return o.a.createElement(vc.a,tl({},n,{className:"quick-strategy__input",type:"text",error:b.size&&r.size,label:s(e),placeholder:"2",trailing_icon:o.a.createElement(_c.a,{alignment:"bottom",message:a(e)},o.a.createElement(Nr,null))}))})),o.a.createElement(Ec.Field,{name:"profit"},(function(t){var e=t.field;return o.a.createElement(vc.a,tl({},e,{className:"quick-strategy__input",type:"text",error:b.profit&&r.profit,label:Object(Ot.localize)("Profit Threshold"),placeholder:"5000",trailing_icon:o.a.createElement(_c.a,{alignment:"bottom",message:Object(Ot.localize)("The bot will stop trading if your total profit exceeds this amount.")},o.a.createElement(Nr,null))}))}))),o.a.createElement("div",{className:"quick-strategy__form-footer"},o.a.createElement(mc.a,{type:"submit",className:"quick-strategy__button--create",text:Object(Ot.localize)("Create"),is_disabled:!c||f,primary:!0})))})))},il=function(t){var e=t.active_index,n=t.createStrategy,r=t.duration_dropdown,i=t.getSizeDesc,a=t.getSizeText,s=t.initial_values,c=t.is_strategy_modal_open,u=t.market_dropdown,l=t.onChangeDurationDropdown,h=t.onChangeMarketDropdown,p=t.onChangeTradeTypeDropdown,f=t.setActiveTabIndex,d=t.toggleStrategyModal,y=t.trade_type_dropdown,m=t.validateQuickStrategy,g=It.strategies,v={};Object.assign(v,u),v&&Object.keys(v).forEach((function(t){v[t].forEach((function(t){t.text=o.a.createElement(el,{symbol:t})}))}));var b={};Object.assign(b,y),b&&Object.keys(b).forEach((function(t){b[t].forEach((function(t){t.text=o.a.createElement(nl,{type:t})}))}));var _=Object.keys(r).map((function(t){var e=r[t];return{text:e.display,value:e.unit}}));return o.a.createElement(wc.a,{title:Object(Ot.localize)("Quick strategy"),className:"modal--strategy",is_open:c,toggleModal:d,width:"460px"},o.a.createElement("div",{className:"modal__content"},o.a.createElement("div",{className:"quick-strategy__tabs"},o.a.createElement(eu.a,{active_index:e,onClickTabItem:f},Object.keys(g).map((function(t){var r=g[t],c=r.index,u=r.label,f=r.description;return o.a.createElement("div",{key:c,label:u},o.a.createElement("div",{className:"quick-strategy__tab-content"},o.a.createElement("div",{className:"quick-strategy__description"},f),o.a.createElement(rl,{active_index:e,asset_dropdown_options:v,createStrategy:n,duration_dropdown_options:_,getSizeDesc:i,getSizeText:a,initial_values:s,onChangeDurationDropdown:l,onChangeMarketDropdown:h,onChangeTradeTypeDropdown:p,trade_type_dropdown_options:b,validateQuickStrategy:m})))}))))))};il.propTypes={active_index:Sc.a.number,createStrategy:Sc.a.func,duration_dropdown:Sc.a.array,getSizeDesc:Sc.a.func,getSizeText:Sc.a.func,initial_values:Sc.a.object,is_strategy_modal_open:Sc.a.bool,market_dropdown:Sc.a.object,onChangeDurationDropdown:Sc.a.func,onChangeMarketDropdown:Sc.a.func,onChangeTradeTypeDropdown:Sc.a.func,setActiveTabIndex:Sc.a.func,toggleStrategyModal:Sc.a.func,trade_type_dropdown:Sc.a.object,validateQuickStrategy:Sc.a.func};var ol,al,sl,cl,ul,ll,hl,pl,fl,dl,yl=xc((function(t){var e=t.quick_strategy;return{active_index:e.active_index,createStrategy:e.createStrategy,duration_dropdown:e.duration_dropdown,getSizeDesc:e.getSizeDesc,getSizeText:e.getSizeText,is_strategy_modal_open:e.is_strategy_modal_open,initial_values:e.initial_values,market_dropdown:e.market_dropdown,onChangeDurationDropdown:e.onChangeDurationDropdown,onChangeMarketDropdown:e.onChangeMarketDropdown,onChangeTradeTypeDropdown:e.onChangeTradeTypeDropdown,setActiveTabIndex:e.setActiveTabIndex,toggleStrategyModal:e.toggleStrategyModal,trade_type_dropdown:e.trade_type_dropdown,validateQuickStrategy:e.validateQuickStrategy}}))(il),ml=n(107),gl=n.n(ml),vl=(n(439),n(440),ul=function(){return cl.core.common.server_time.unix()},ll=function(t,e){try{var n=Blockly.Xml.domToText(Blockly.Xml.workspaceToDom(Blockly.derivWorkspace));al.doc(t).collection("Runs").add({start_time:ul(),account_id:t,xml:n}).then((function(n){sl=n.id,pl(t,e)})).catch((function(t){console.warn("Error adding document to firestore ",t),sl=Math.floor(1e3+9e3*Math.random())}))}catch(t){console.warn("Error adding document to firestore when bot runs ",t)}},hl=function(t){try{al.doc(t).collection("Runs").doc(sl).set({end_time:ul()},{merge:!0})}catch(t){console.warn("Error adding document to firestore when bot stops ",t)}},pl=function(t,e){try{e&&al.doc(t).collection("Runs").doc(sl).collection("Summaries").add({lost_contracts:e.lost_contracts,number_of_runs:e.number_of_runs,total_profit:e.total_profit,total_payout:e.total_payout,total_stake:e.total_stake,won_contracts:e.won_contracts,time_stamp:ul()})}catch(t){console.warn("Error adding document to firestore when summary changes ",t)}},fl=function(t,e){try{var n=e.length>0&&e[0];n&&n.is_completed&&al.doc(t).collection("Runs").doc(sl).collection("Transactions").add({buy_price:n.buy_price,contract_type:n.contract_type,currency:n.currency,refrence_id:n.refrence_id,entry_spot:n.entry_spot,exit_spot:n.exit_spot,profit:n.profit,time_stamp:ul()})}catch(t){console.warn("Error adding document to firestore when transaction closes",t)}},dl=function(t,e){try{var n=e.length>0&&e[0];n&&n.message_type===We.ERROR&&al.doc(t).collection("Runs").doc(sl).collection("Errors").add({date:n.date,time:n.time,message:n.message,time_stamp:ul()})}catch(t){console.warn("Error adding document to firestore when error happens in bot ",t)}},{init:function(t){try{cl=t,gl.a.apps.length||gl.a.initializeApp({apiKey:"AIzaSyA52MX2l8p75-w7nvab7fU6Lk6KwLqnyEI",projectId:"derivbot-248506"});var e=cl,n=e.core.client,i=e.run_panel,o=e.transactions,a=e.journal,s=e.summary;ol=gl.a.firestore(),al=ol.collection("Users"),Object(r.m)((function(){return i.is_running}),(function(){return i.is_running?ll(n.loginid,s.summary):hl(n.loginid)})),Object(r.m)((function(){return s.summary.number_of_runs}),(function(){i.is_running||i.contract_stage.index!==zt.CONTRACT_CLOSED.index||pl(n.loginid,s.summary)})),Object(r.m)((function(){return o.contracts}),(function(){return fl(n.loginid,o.contracts)})),Object(r.m)((function(){return a.messages}),(function(){return dl(n.loginid,a.messages)}))}catch(t){console.warn("Error initializing firestore ",t)}}});n(442);var bl=function(t){var e,r;function i(e){var n;n=t.call(this,e)||this;var r=e.passthrough,i=r.WS,o=r.root_store;return n.root_store=new dc(o,i),Ut.setInstance(n.root_store),vl.init(n.root_store),n}r=t,(e=i).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r;var a=i.prototype;return a.render=function(){return o.a.createElement(_t,this.root_store,o.a.createElement(o.a.Fragment,null,o.a.createElement(Xc,null),o.a.createElement(Xu,null),o.a.createElement(Iu,null),o.a.createElement(yl,null)))},a.componentDidMount=function(){var t,e,r,i,o,a,s,c,u;regeneratorRuntime.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,t=document.getElementById("scratch_div"),e=document.getElementById("app_contents"),l.next=5,regeneratorRuntime.awrap(fetch(n.p+"xml/toolbox.xml").then((function(t){return t.text()})));case 5:return r=l.sent,l.next=8,regeneratorRuntime.awrap(fetch(n.p+"xml/main.xml").then((function(t){return t.text()})));case 8:i=l.sent,o=Blockly.inject(t,{grid:{spacing:40,length:11,colour:"#f3f3f3"},media:n.p+"media/",toolbox:r,trashcan:!0,zoom:{wheel:!0,startScale:It.workspaces.mainWorkspaceStartScale}}),Blockly.JavaScript.init(o),Blockly.JavaScript.variableDB_.setVariableMap(o.getVariableMap()),Blockly.derivWorkspace=o,Blockly.derivWorkspace.blocksXmlStr=i,Blockly.derivWorkspace.toolboxXmlStr=r,Blockly.Xml.domToWorkspace(Blockly.Xml.textToDom(i),o),Blockly.derivWorkspace.clearUndo(),a=function(){t.style.width=e.offsetWidth+"px",t.style.height=e.offsetHeight-56+"px",Blockly.svgResize(o)},window.addEventListener("resize",a),a(),s=function(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"},c=document.body,u=en.instance.saveload,c.addEventListener("dragover",s,!1),c.addEventListener("drop",(function(t){return u.handleFileChange(t)}),!1),t.parentNode.style.overflow="hidden",l.next=31;break;case 28:throw l.prev=28,l.t0=l.catch(0),l.t0;case 31:case"end":return l.stop()}}),null,null,[[0,28]]),Ut.instance.registerOnAccountSwitch()},a.componentWillUnmount=function(){Blockly.derivWorkspace&&Blockly.derivWorkspace.dispose(),Ut.instance.disposeOnAccountSwitch()},i}(o.a.Component);(new Image).src=n.p+"bot-sprite.svg",e.default=bl}]).default)}}]);
//# sourceMappingURL=core.bot.0e71d0f08bdf06c1e7a6.js.map